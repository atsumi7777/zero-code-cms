(function(Dt,_t){typeof exports=="object"&&typeof module<"u"?_t(exports):typeof define=="function"&&define.amd?define(["exports"],_t):(Dt=typeof globalThis<"u"?globalThis:Dt||self,_t(Dt.VueCMSEditor={}))})(this,function(Dt){"use strict";var Bb=Object.defineProperty;var Hb=(Dt,_t,Le)=>_t in Dt?Bb(Dt,_t,{enumerable:!0,configurable:!0,writable:!0,value:Le}):Dt[_t]=Le;var en=(Dt,_t,Le)=>Hb(Dt,typeof _t!="symbol"?_t+"":_t,Le);/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _t(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const Le={},Jo=[],Qt=()=>{},$c=()=>!1,tn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),cs=e=>e.startsWith("onUpdate:"),nt=Object.assign,ds=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},wc=Object.prototype.hasOwnProperty,Re=(e,t)=>wc.call(e,t),be=Array.isArray,Yo=e=>mr(e)==="[object Map]",on=e=>mr(e)==="[object Set]",$a=e=>mr(e)==="[object Date]",Ie=e=>typeof e=="function",Qe=e=>typeof e=="string",Zt=e=>typeof e=="symbol",We=e=>e!==null&&typeof e=="object",wa=e=>(We(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),za=Object.prototype.toString,mr=e=>za.call(e),zc=e=>mr(e).slice(8,-1),rn=e=>mr(e)==="[object Object]",us=e=>Qe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,hr=_t(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},Ac=/-(\w)/g,Wt=nn(e=>e.replace(Ac,(t,o)=>o?o.toUpperCase():"")),Cc=/\B([A-Z])/g,Lt=nn(e=>e.replace(Cc,"-$1").toLowerCase()),Aa=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),fs=nn(e=>e?`on${Aa(e)}`:""),$o=(e,t)=>!Object.is(e,t),sn=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},ps=(e,t,o,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:o})},an=e=>{const t=parseFloat(e);return isNaN(t)?e:t},gs=e=>{const t=Qe(e)?Number(e):NaN;return isNaN(t)?e:t};let Ca;const ln=()=>Ca||(Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cn(e){if(be(e)){const t={};for(let o=0;o<e.length;o++){const r=e[o],n=Qe(r)?Sc(r):cn(r);if(n)for(const s in n)t[s]=n[s]}return t}else if(Qe(e)||We(e))return e}const Ec=/;(?![^(]*\))/g,Ic=/:([^]+)/,Pc=/\/\*[^]*?\*\//g;function Sc(e){const t={};return e.replace(Pc,"").split(Ec).forEach(o=>{if(o){const r=o.split(Ic);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ot(e){let t="";if(Qe(e))t=e;else if(be(e))for(let o=0;o<e.length;o++){const r=ot(e[o]);r&&(t+=r+" ")}else if(We(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Tc=_t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Ea(e){return!!e||e===""}function Dc(e,t){if(e.length!==t.length)return!1;let o=!0;for(let r=0;o&&r<e.length;r++)o=dn(e[r],t[r]);return o}function dn(e,t){if(e===t)return!0;let o=$a(e),r=$a(t);if(o||r)return o&&r?e.getTime()===t.getTime():!1;if(o=Zt(e),r=Zt(t),o||r)return e===t;if(o=be(e),r=be(t),o||r)return o&&r?Dc(e,t):!1;if(o=We(e),r=We(t),o||r){if(!o||!r)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!dn(e[a],t[a]))return!1}}return String(e)===String(t)}function xc(e,t){return e.findIndex(o=>dn(o,t))}const Ia=e=>!!(e&&e.__v_isRef===!0),ae=e=>Qe(e)?e:e==null?"":be(e)||We(e)&&(e.toString===za||!Ie(e.toString))?Ia(e)?ae(e.value):JSON.stringify(e,Pa,2):String(e),Pa=(e,t)=>Ia(t)?Pa(e,t.value):Yo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[r,n],s)=>(o[ms(r,s)+" =>"]=n,o),{})}:on(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>ms(o))}:Zt(t)?ms(t):We(t)&&!be(t)&&!rn(t)?String(t):t,ms=(e,t="")=>{var o;return Zt(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Et;class Mc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Et,!t&&Et&&(this.index=(Et.scopes||(Et.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Et;try{return Et=this,t()}finally{Et=o}}}on(){++this._on===1&&(this.prevScope=Et,Et=this)}off(){this._on>0&&--this._on===0&&(Et=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,r;for(o=0,r=this.effects.length;o<r;o++)this.effects[o].stop();for(this.effects.length=0,o=0,r=this.cleanups.length;o<r;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,r=this.scopes.length;o<r;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Nc(){return Et}let Ke;const hs=new WeakSet;class Sa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Et&&Et.active&&Et.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hs.has(this)&&(hs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Da(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oa(this),xa(this);const t=Ke,o=Kt;Ke=this,Kt=!0;try{return this.fn()}finally{Ma(this),Ke=t,Kt=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)_s(t);this.deps=this.depsTail=void 0,Oa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bs(this)&&this.run()}get dirty(){return bs(this)}}let Ta=0,vr,yr;function Da(e,t=!1){if(e.flags|=8,t){e.next=yr,yr=e;return}e.next=vr,vr=e}function vs(){Ta++}function ys(){if(--Ta>0)return;if(yr){let t=yr;for(yr=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;vr;){let t=vr;for(vr=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=o}}if(e)throw e}function xa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ma(e){let t,o=e.depsTail,r=o;for(;r;){const n=r.prevDep;r.version===-1?(r===o&&(o=n),_s(r),Fc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=o}function bs(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Na(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Na(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===br)||(e.globalVersion=br,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!bs(e))))return;e.flags|=2;const t=e.dep,o=Ke,r=Kt;Ke=e,Kt=!0;try{xa(e);const n=e.fn(e._value);(t.version===0||$o(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ke=o,Kt=r,Ma(e),e.flags&=-3}}function _s(e,t=!1){const{dep:o,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),o.subs===e&&(o.subs=r,!r&&o.computed)){o.computed.flags&=-5;for(let s=o.computed.deps;s;s=s.nextDep)_s(s,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function Fc(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let Kt=!0;const Fa=[];function eo(){Fa.push(Kt),Kt=!1}function to(){const e=Fa.pop();Kt=e===void 0?!0:e}function Oa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=Ke;Ke=void 0;try{t()}finally{Ke=o}}}let br=0;class Oc{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $s{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ke||!Kt||Ke===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ke)o=this.activeLink=new Oc(Ke,this),Ke.deps?(o.prevDep=Ke.depsTail,Ke.depsTail.nextDep=o,Ke.depsTail=o):Ke.deps=Ke.depsTail=o,ka(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const r=o.nextDep;r.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=r),o.prevDep=Ke.depsTail,o.nextDep=void 0,Ke.depsTail.nextDep=o,Ke.depsTail=o,Ke.deps===o&&(Ke.deps=r)}return o}trigger(t){this.version++,br++,this.notify(t)}notify(t){vs();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{ys()}}}function ka(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ka(r)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const un=new WeakMap,Fo=Symbol(""),ws=Symbol(""),_r=Symbol("");function mt(e,t,o){if(Kt&&Ke){let r=un.get(e);r||un.set(e,r=new Map);let n=r.get(o);n||(r.set(o,n=new $s),n.map=r,n.key=o),n.track()}}function uo(e,t,o,r,n,s){const a=un.get(e);if(!a){br++;return}const i=l=>{l&&l.trigger()};if(vs(),t==="clear")a.forEach(i);else{const l=be(e),h=l&&us(o);if(l&&o==="length"){const m=Number(r);a.forEach((v,A)=>{(A==="length"||A===_r||!Zt(A)&&A>=m)&&i(v)})}else switch((o!==void 0||a.has(void 0))&&i(a.get(o)),h&&i(a.get(_r)),t){case"add":l?h&&i(a.get("length")):(i(a.get(Fo)),Yo(e)&&i(a.get(ws)));break;case"delete":l||(i(a.get(Fo)),Yo(e)&&i(a.get(ws)));break;case"set":Yo(e)&&i(a.get(Fo));break}}ys()}function kc(e,t){const o=un.get(e);return o&&o.get(t)}function Xo(e){const t=Ne(e);return t===e?t:(mt(t,"iterate",_r),Rt(e)?t:t.map(ft))}function fn(e){return mt(e=Ne(e),"iterate",_r),e}const Lc={__proto__:null,[Symbol.iterator](){return zs(this,Symbol.iterator,ft)},concat(...e){return Xo(this).concat(...e.map(t=>be(t)?Xo(t):t))},entries(){return zs(this,"entries",e=>(e[1]=ft(e[1]),e))},every(e,t){return fo(this,"every",e,t,void 0,arguments)},filter(e,t){return fo(this,"filter",e,t,o=>o.map(ft),arguments)},find(e,t){return fo(this,"find",e,t,ft,arguments)},findIndex(e,t){return fo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return fo(this,"findLast",e,t,ft,arguments)},findLastIndex(e,t){return fo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return fo(this,"forEach",e,t,void 0,arguments)},includes(...e){return As(this,"includes",e)},indexOf(...e){return As(this,"indexOf",e)},join(e){return Xo(this).join(e)},lastIndexOf(...e){return As(this,"lastIndexOf",e)},map(e,t){return fo(this,"map",e,t,void 0,arguments)},pop(){return $r(this,"pop")},push(...e){return $r(this,"push",e)},reduce(e,...t){return La(this,"reduce",e,t)},reduceRight(e,...t){return La(this,"reduceRight",e,t)},shift(){return $r(this,"shift")},some(e,t){return fo(this,"some",e,t,void 0,arguments)},splice(...e){return $r(this,"splice",e)},toReversed(){return Xo(this).toReversed()},toSorted(e){return Xo(this).toSorted(e)},toSpliced(...e){return Xo(this).toSpliced(...e)},unshift(...e){return $r(this,"unshift",e)},values(){return zs(this,"values",ft)}};function zs(e,t,o){const r=fn(e),n=r[t]();return r!==e&&!Rt(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=o(s.value)),s}),n}const Rc=Array.prototype;function fo(e,t,o,r,n,s){const a=fn(e),i=a!==e&&!Rt(e),l=a[t];if(l!==Rc[t]){const v=l.apply(e,s);return i?ft(v):v}let h=o;a!==e&&(i?h=function(v,A){return o.call(this,ft(v),A,e)}:o.length>2&&(h=function(v,A){return o.call(this,v,A,e)}));const m=l.call(a,h,r);return i&&n?n(m):m}function La(e,t,o,r){const n=fn(e);let s=o;return n!==e&&(Rt(e)?o.length>3&&(s=function(a,i,l){return o.call(this,a,i,l,e)}):s=function(a,i,l){return o.call(this,a,ft(i),l,e)}),n[t](s,...r)}function As(e,t,o){const r=Ne(e);mt(r,"iterate",_r);const n=r[t](...o);return(n===-1||n===!1)&&Es(o[0])?(o[0]=Ne(o[0]),r[t](...o)):n}function $r(e,t,o=[]){eo(),vs();const r=Ne(e)[t].apply(e,o);return ys(),to(),r}const Bc=_t("__proto__,__v_isRef,__isVue"),Ra=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Zt));function Hc(e){Zt(e)||(e=String(e));const t=Ne(this);return mt(t,"has",e),t.hasOwnProperty(e)}class Ba{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,r){if(o==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_isShallow")return s;if(o==="__v_raw")return r===(n?s?Wa:Za:s?Va:Ua).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=be(t);if(!n){let l;if(a&&(l=Lc[o]))return l;if(o==="hasOwnProperty")return Hc}const i=Reflect.get(t,o,st(t)?t:r);return(Zt(o)?Ra.has(o):Bc(o))||(n||mt(t,"get",o),s)?i:st(i)?a&&us(o)?i:i.value:We(i)?n?hn(i):Oo(i):i}}class Ha extends Ba{constructor(t=!1){super(!1,t)}set(t,o,r,n){let s=t[o];if(!this._isShallow){const l=wo(s);if(!Rt(r)&&!wo(r)&&(s=Ne(s),r=Ne(r)),!be(t)&&st(s)&&!st(r))return l?!1:(s.value=r,!0)}const a=be(t)&&us(o)?Number(o)<t.length:Re(t,o),i=Reflect.set(t,o,r,st(t)?t:n);return t===Ne(n)&&(a?$o(r,s)&&uo(t,"set",o,r):uo(t,"add",o,r)),i}deleteProperty(t,o){const r=Re(t,o);t[o];const n=Reflect.deleteProperty(t,o);return n&&r&&uo(t,"delete",o,void 0),n}has(t,o){const r=Reflect.has(t,o);return(!Zt(o)||!Ra.has(o))&&mt(t,"has",o),r}ownKeys(t){return mt(t,"iterate",be(t)?"length":Fo),Reflect.ownKeys(t)}}class ja extends Ba{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const jc=new Ha,Uc=new ja,Vc=new Ha(!0),Zc=new ja(!0),Cs=e=>e,pn=e=>Reflect.getPrototypeOf(e);function Wc(e,t,o){return function(...r){const n=this.__v_raw,s=Ne(n),a=Yo(s),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...r),m=o?Cs:t?yn:ft;return!t&&mt(s,"iterate",l?ws:Fo),{next(){const{value:v,done:A}=h.next();return A?{value:v,done:A}:{value:i?[m(v[0]),m(v[1])]:m(v),done:A}},[Symbol.iterator](){return this}}}}function gn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Kc(e,t){const o={get(n){const s=this.__v_raw,a=Ne(s),i=Ne(n);e||($o(n,i)&&mt(a,"get",n),mt(a,"get",i));const{has:l}=pn(a),h=t?Cs:e?yn:ft;if(l.call(a,n))return h(s.get(n));if(l.call(a,i))return h(s.get(i));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!e&&mt(Ne(n),"iterate",Fo),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,a=Ne(s),i=Ne(n);return e||($o(n,i)&&mt(a,"has",n),mt(a,"has",i)),n===i?s.has(n):s.has(n)||s.has(i)},forEach(n,s){const a=this,i=a.__v_raw,l=Ne(i),h=t?Cs:e?yn:ft;return!e&&mt(l,"iterate",Fo),i.forEach((m,v)=>n.call(s,h(m),h(v),a))}};return nt(o,e?{add:gn("add"),set:gn("set"),delete:gn("delete"),clear:gn("clear")}:{add(n){!t&&!Rt(n)&&!wo(n)&&(n=Ne(n));const s=Ne(this);return pn(s).has.call(s,n)||(s.add(n),uo(s,"add",n,n)),this},set(n,s){!t&&!Rt(s)&&!wo(s)&&(s=Ne(s));const a=Ne(this),{has:i,get:l}=pn(a);let h=i.call(a,n);h||(n=Ne(n),h=i.call(a,n));const m=l.call(a,n);return a.set(n,s),h?$o(s,m)&&uo(a,"set",n,s):uo(a,"add",n,s),this},delete(n){const s=Ne(this),{has:a,get:i}=pn(s);let l=a.call(s,n);l||(n=Ne(n),l=a.call(s,n)),i&&i.call(s,n);const h=s.delete(n);return l&&uo(s,"delete",n,void 0),h},clear(){const n=Ne(this),s=n.size!==0,a=n.clear();return s&&uo(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{o[n]=Wc(n,e,t)}),o}function mn(e,t){const o=Kc(e,t);return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(Re(o,n)&&n in r?o:r,n,s)}const qc={get:mn(!1,!1)},Gc={get:mn(!1,!0)},Jc={get:mn(!0,!1)},Yc={get:mn(!0,!0)},Ua=new WeakMap,Va=new WeakMap,Za=new WeakMap,Wa=new WeakMap;function Xc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qc(e){return e.__v_skip||!Object.isExtensible(e)?0:Xc(zc(e))}function Oo(e){return wo(e)?e:vn(e,!1,jc,qc,Ua)}function ed(e){return vn(e,!1,Vc,Gc,Va)}function hn(e){return vn(e,!0,Uc,Jc,Za)}function Ub(e){return vn(e,!0,Zc,Yc,Wa)}function vn(e,t,o,r,n){if(!We(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=Qc(e);if(s===0)return e;const a=n.get(e);if(a)return a;const i=new Proxy(e,s===2?r:o);return n.set(e,i),i}function Qo(e){return wo(e)?Qo(e.__v_raw):!!(e&&e.__v_isReactive)}function wo(e){return!!(e&&e.__v_isReadonly)}function Rt(e){return!!(e&&e.__v_isShallow)}function Es(e){return e?!!e.__v_raw:!1}function Ne(e){const t=e&&e.__v_raw;return t?Ne(t):e}function td(e){return!Re(e,"__v_skip")&&Object.isExtensible(e)&&ps(e,"__v_skip",!0),e}const ft=e=>We(e)?Oo(e):e,yn=e=>We(e)?hn(e):e;function st(e){return e?e.__v_isRef===!0:!1}function we(e){return od(e,!1)}function od(e,t){return st(e)?e:new rd(e,t)}class rd{constructor(t,o){this.dep=new $s,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:Ne(t),this._value=o?t:ft(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,r=this.__v_isShallow||Rt(t)||wo(t);t=r?t:Ne(t),$o(t,o)&&(this._rawValue=t,this._value=r?t:ft(t),this.dep.trigger())}}function bn(e){e.dep&&e.dep.trigger()}function pe(e){return st(e)?e.value:e}const nd={get:(e,t,o)=>t==="__v_raw"?e:pe(Reflect.get(e,t,o)),set:(e,t,o,r)=>{const n=e[t];return st(n)&&!st(o)?(n.value=o,!0):Reflect.set(e,t,o,r)}};function Ka(e){return Qo(e)?e:new Proxy(e,nd)}function qa(e){const t=be(e)?new Array(e.length):{};for(const o in e)t[o]=ad(e,o);return t}class sd{constructor(t,o,r){this._object=t,this._key=o,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return kc(Ne(this._object),this._key)}}function ad(e,t,o){const r=e[t];return st(r)?r:new sd(e,t,o)}class id{constructor(t,o,r){this.fn=t,this.setter=o,this._value=void 0,this.dep=new $s(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=br-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ke!==this)return Da(this,!0),!0}get value(){const t=this.dep.track();return Na(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ld(e,t,o=!1){let r,n;return Ie(e)?r=e:(r=e.get,n=e.set),new id(r,n,o)}const _n={},$n=new WeakMap;let ko;function cd(e,t=!1,o=ko){if(o){let r=$n.get(o);r||$n.set(o,r=[]),r.push(e)}}function dd(e,t,o=Le){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:i,call:l}=o,h=d=>n?d:Rt(d)||n===!1||n===0?po(d,1):po(d);let m,v,A,z,x=!1,k=!1;if(st(e)?(v=()=>e.value,x=Rt(e)):Qo(e)?(v=()=>h(e),x=!0):be(e)?(k=!0,x=e.some(d=>Qo(d)||Rt(d)),v=()=>e.map(d=>{if(st(d))return d.value;if(Qo(d))return h(d);if(Ie(d))return l?l(d,2):d()})):Ie(e)?t?v=l?()=>l(e,2):e:v=()=>{if(A){eo();try{A()}finally{to()}}const d=ko;ko=m;try{return l?l(e,3,[z]):e(z)}finally{ko=d}}:v=Qt,t&&n){const d=v,b=n===!0?1/0:n;v=()=>po(d(),b)}const O=Nc(),D=()=>{m.stop(),O&&O.active&&ds(O.effects,m)};if(s&&t){const d=t;t=(...b)=>{d(...b),D()}}let I=k?new Array(e.length).fill(_n):_n;const c=d=>{if(!(!(m.flags&1)||!m.dirty&&!d))if(t){const b=m.run();if(n||x||(k?b.some((E,w)=>$o(E,I[w])):$o(b,I))){A&&A();const E=ko;ko=m;try{const w=[b,I===_n?void 0:k&&I[0]===_n?[]:I,z];I=b,l?l(t,3,w):t(...w)}finally{ko=E}}}else m.run()};return i&&i(c),m=new Sa(v),m.scheduler=a?()=>a(c,!1):c,z=d=>cd(d,!1,m),A=m.onStop=()=>{const d=$n.get(m);if(d){if(l)l(d,4);else for(const b of d)b();$n.delete(m)}},t?r?c(!0):I=m.run():a?a(c.bind(null,!0),!0):m.run(),D.pause=m.pause.bind(m),D.resume=m.resume.bind(m),D.stop=D,D}function po(e,t=1/0,o){if(t<=0||!We(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,st(e))po(e.value,t,o);else if(be(e))for(let r=0;r<e.length;r++)po(e[r],t,o);else if(on(e)||Yo(e))e.forEach(r=>{po(r,t,o)});else if(rn(e)){for(const r in e)po(e[r],t,o);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&po(e[r],t,o)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wr=[];let Is=!1;function Vb(e,...t){if(Is)return;Is=!0,eo();const o=wr.length?wr[wr.length-1].component:null,r=o&&o.appContext.config.warnHandler,n=ud();if(r)er(r,o,11,[e+t.map(s=>{var a,i;return(i=(a=s.toString)==null?void 0:a.call(s))!=null?i:JSON.stringify(s)}).join(""),o&&o.proxy,n.map(({vnode:s})=>`at <${Ji(o,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...fd(n)),console.warn(...s)}to(),Is=!1}function ud(){let e=wr[wr.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function fd(e){const t=[];return e.forEach((o,r)=>{t.push(...r===0?[]:[`
`],...pd(o))}),t}function pd({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,n=` at <${Ji(e.component,e.type,r)}`,s=">"+o;return e.props?[n,...gd(e.props),s]:[n+s]}function gd(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(r=>{t.push(...Ga(r,e[r]))}),o.length>3&&t.push(" ..."),t}function Ga(e,t,o){return Qe(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:st(t)?(t=Ga(e,Ne(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):Ie(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Ne(t),o?t:[`${e}=`,t])}function er(e,t,o,r){try{return r?e(...r):e()}catch(n){wn(n,t,o)}}function qt(e,t,o,r){if(Ie(e)){const n=er(e,t,o,r);return n&&wa(n)&&n.catch(s=>{wn(s,t,o)}),n}if(be(e)){const n=[];for(let s=0;s<e.length;s++)n.push(qt(e[s],t,o,r));return n}}function wn(e,t,o,r=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Le;if(t){let i=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${o}`;for(;i;){const m=i.ec;if(m){for(let v=0;v<m.length;v++)if(m[v](e,l,h)===!1)return}i=i.parent}if(s){eo(),er(s,null,10,[e,l,h]),to();return}}md(e,o,n,r,a)}function md(e,t,o,r=!0,n=!1){if(n)throw e;console.error(e)}const $t=[];let oo=-1;const tr=[];let zo=null,or=0;const Ja=Promise.resolve();let zn=null;function Bt(e){const t=zn||Ja;return e?t.then(this?e.bind(this):e):t}function hd(e){let t=oo+1,o=$t.length;for(;t<o;){const r=t+o>>>1,n=$t[r],s=zr(n);s<e||s===e&&n.flags&2?t=r+1:o=r}return t}function Ps(e){if(!(e.flags&1)){const t=zr(e),o=$t[$t.length-1];!o||!(e.flags&2)&&t>=zr(o)?$t.push(e):$t.splice(hd(t),0,e),e.flags|=1,Ya()}}function Ya(){zn||(zn=Ja.then(ei))}function vd(e){be(e)?tr.push(...e):zo&&e.id===-1?zo.splice(or+1,0,e):e.flags&1||(tr.push(e),e.flags|=1),Ya()}function Xa(e,t,o=oo+1){for(;o<$t.length;o++){const r=$t[o];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;$t.splice(o,1),o--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Qa(e){if(tr.length){const t=[...new Set(tr)].sort((o,r)=>zr(o)-zr(r));if(tr.length=0,zo){zo.push(...t);return}for(zo=t,or=0;or<zo.length;or++){const o=zo[or];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}zo=null,or=0}}const zr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ei(e){try{for(oo=0;oo<$t.length;oo++){const t=$t[oo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),er(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oo<$t.length;oo++){const t=$t[oo];t&&(t.flags&=-2)}oo=-1,$t.length=0,Qa(),zn=null,($t.length||tr.length)&&ei()}}let pt=null,ti=null;function An(e){const t=pt;return pt=e,ti=e&&e.type.__scopeId||null,t}function Cn(e,t=pt,o){if(!t||e._n)return e;const r=(...n)=>{r._d&&Ui(-1);const s=An(t);let a;try{a=e(...n)}finally{An(s),r._d&&Ui(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function wt(e,t){if(pt===null)return e;const o=Ln(pt),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,i,l=Le]=t[n];s&&(Ie(s)&&(s={mounted:s,updated:s}),s.deep&&po(a),r.push({dir:s,instance:o,value:a,oldValue:void 0,arg:i,modifiers:l}))}return e}function Lo(e,t,o,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const i=n[a];s&&(i.oldValue=s[a].value);let l=i.dir[r];l&&(eo(),qt(l,o,8,[e.el,i,e,t]),to())}}const oi=Symbol("_vte"),ri=e=>e.__isTeleport,Ar=e=>e&&(e.disabled||e.disabled===""),ni=e=>e&&(e.defer||e.defer===""),si=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ai=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ss=(e,t)=>{const o=e&&e.to;return Qe(o)?t?t(o):null:o},ii={name:"Teleport",__isTeleport:!0,process(e,t,o,r,n,s,a,i,l,h){const{mc:m,pc:v,pbc:A,o:{insert:z,querySelector:x,createText:k,createComment:O}}=h,D=Ar(t.props);let{shapeFlag:I,children:c,dynamicChildren:d}=t;if(e==null){const b=t.el=k(""),E=t.anchor=k("");z(b,o,r),z(E,o,r);const w=(f,g)=>{I&16&&(n&&n.isCE&&(n.ce._teleportTarget=f),m(c,f,g,n,s,a,i,l))},u=()=>{const f=t.target=Ss(t.props,x),g=ci(f,t,k,z);f&&(a!=="svg"&&si(f)?a="svg":a!=="mathml"&&ai(f)&&(a="mathml"),D||(w(f,g),In(t,!1)))};D&&(w(o,E),In(t,!0)),ni(t.props)?(t.el.__isMounted=!1,At(()=>{u(),delete t.el.__isMounted},s)):u()}else{if(ni(t.props)&&e.el.__isMounted===!1){At(()=>{ii.process(e,t,o,r,n,s,a,i,l,h)},s);return}t.el=e.el,t.targetStart=e.targetStart;const b=t.anchor=e.anchor,E=t.target=e.target,w=t.targetAnchor=e.targetAnchor,u=Ar(e.props),f=u?o:E,g=u?b:w;if(a==="svg"||si(E)?a="svg":(a==="mathml"||ai(E))&&(a="mathml"),d?(A(e.dynamicChildren,d,f,n,s,a,i),Hs(e,t,!0)):l||v(e,t,f,g,n,s,a,i,!1),D)u?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):En(t,o,b,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const y=t.target=Ss(t.props,x);y&&En(t,y,null,h,0)}else u&&En(t,E,w,h,1);In(t,D)}},remove(e,t,o,{um:r,o:{remove:n}},s){const{shapeFlag:a,children:i,anchor:l,targetStart:h,targetAnchor:m,target:v,props:A}=e;if(v&&(n(h),n(m)),s&&n(l),a&16){const z=s||!Ar(A);for(let x=0;x<i.length;x++){const k=i[x];r(k,t,o,z,!!k.dynamicChildren)}}},move:En,hydrate:yd};function En(e,t,o,{o:{insert:r},m:n},s=2){s===0&&r(e.targetAnchor,t,o);const{el:a,anchor:i,shapeFlag:l,children:h,props:m}=e,v=s===2;if(v&&r(a,t,o),(!v||Ar(m))&&l&16)for(let A=0;A<h.length;A++)n(h[A],t,o,2);v&&r(i,t,o)}function yd(e,t,o,r,n,s,{o:{nextSibling:a,parentNode:i,querySelector:l,insert:h,createText:m}},v){const A=t.target=Ss(t.props,l);if(A){const z=Ar(t.props),x=A._lpa||A.firstChild;if(t.shapeFlag&16)if(z)t.anchor=v(a(e),t,i(e),o,r,n,s),t.targetStart=x,t.targetAnchor=x&&a(x);else{t.anchor=a(e);let k=x;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,A._lpa=t.targetAnchor&&a(t.targetAnchor);break}}k=a(k)}t.targetAnchor||ci(A,t,m,h),v(x&&a(x),t,A,o,r,n,s)}In(t,z)}return t.anchor&&a(t.anchor)}const li=ii;function In(e,t){const o=e.ctx;if(o&&o.ut){let r,n;for(t?(r=e.el,n=e.anchor):(r=e.targetStart,n=e.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",o.uid),r=r.nextSibling;o.ut()}}function ci(e,t,o,r){const n=t.targetStart=o(""),s=t.targetAnchor=o("");return n[oi]=s,e&&(r(n,e),r(s,e)),s}const Ao=Symbol("_leaveCb"),Pn=Symbol("_enterCb");function bd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ro(()=>{e.isMounted=!0}),xs(()=>{e.isUnmounting=!0}),e}const Ht=[Function,Array],di={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ht,onEnter:Ht,onAfterEnter:Ht,onEnterCancelled:Ht,onBeforeLeave:Ht,onLeave:Ht,onAfterLeave:Ht,onLeaveCancelled:Ht,onBeforeAppear:Ht,onAppear:Ht,onAfterAppear:Ht,onAppearCancelled:Ht},ui=e=>{const t=e.subTree;return t.component?ui(t.component):t},_d={name:"BaseTransition",props:di,setup(e,{slots:t}){const o=On(),r=bd();return()=>{const n=t.default&&mi(t.default(),!0);if(!n||!n.length)return;const s=fi(n),a=Ne(e),{mode:i}=a;if(r.isLeaving)return Ds(s);const l=gi(s);if(!l)return Ds(s);let h=Ts(l,a,r,o,v=>h=v);l.type!==ht&&Cr(l,h);let m=o.subTree&&gi(o.subTree);if(m&&m.type!==ht&&!Ho(l,m)&&ui(o).type!==ht){let v=Ts(m,a,r,o);if(Cr(m,v),i==="out-in"&&l.type!==ht)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,o.job.flags&8||o.update(),delete v.afterLeave,m=void 0},Ds(s);i==="in-out"&&l.type!==ht?v.delayLeave=(A,z,x)=>{const k=pi(r,m);k[String(m.key)]=m,A[Ao]=()=>{z(),A[Ao]=void 0,delete h.delayedLeave,m=void 0},h.delayedLeave=()=>{x(),delete h.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return s}}};function fi(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==ht){t=o;break}}return t}const $d=_d;function pi(e,t){const{leavingVNodes:o}=e;let r=o.get(t.type);return r||(r=Object.create(null),o.set(t.type,r)),r}function Ts(e,t,o,r,n){const{appear:s,mode:a,persisted:i=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:m,onEnterCancelled:v,onBeforeLeave:A,onLeave:z,onAfterLeave:x,onLeaveCancelled:k,onBeforeAppear:O,onAppear:D,onAfterAppear:I,onAppearCancelled:c}=t,d=String(e.key),b=pi(o,e),E=(f,g)=>{f&&qt(f,r,9,g)},w=(f,g)=>{const y=g[1];E(f,g),be(f)?f.every(p=>p.length<=1)&&y():f.length<=1&&y()},u={mode:a,persisted:i,beforeEnter(f){let g=l;if(!o.isMounted)if(s)g=O||l;else return;f[Ao]&&f[Ao](!0);const y=b[d];y&&Ho(e,y)&&y.el[Ao]&&y.el[Ao](),E(g,[f])},enter(f){let g=h,y=m,p=v;if(!o.isMounted)if(s)g=D||h,y=I||m,p=c||v;else return;let C=!1;const S=f[Pn]=P=>{C||(C=!0,P?E(p,[f]):E(y,[f]),u.delayedLeave&&u.delayedLeave(),f[Pn]=void 0)};g?w(g,[f,S]):S()},leave(f,g){const y=String(e.key);if(f[Pn]&&f[Pn](!0),o.isUnmounting)return g();E(A,[f]);let p=!1;const C=f[Ao]=S=>{p||(p=!0,g(),S?E(k,[f]):E(x,[f]),f[Ao]=void 0,b[y]===e&&delete b[y])};b[y]=e,z?w(z,[f,C]):C()},clone(f){const g=Ts(f,t,o,r,n);return n&&n(g),g}};return u}function Ds(e){if(Sn(e))return e=Co(e),e.children=null,e}function gi(e){if(!Sn(e))return ri(e.type)&&e.children?fi(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&Ie(o.default))return o.default()}}function Cr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Cr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function mi(e,t=!1,o){let r=[],n=0;for(let s=0;s<e.length;s++){let a=e[s];const i=o==null?a.key:String(o)+String(a.key!=null?a.key:s);a.type===ze?(a.patchFlag&128&&n++,r=r.concat(mi(a.children,t,i))):(t||a.type!==ht)&&r.push(i!=null?Co(a,{key:i}):a)}if(n>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function it(e,t){return Ie(e)?nt({name:e.name},t,{setup:e}):e}function hi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Er(e,t,o,r,n=!1){if(be(e)){e.forEach((x,k)=>Er(x,t&&(be(t)?t[k]:t),o,r,n));return}if(rr(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Er(e,t,o,r.component.subTree);return}const s=r.shapeFlag&4?Ln(r.component):r.el,a=n?null:s,{i,r:l}=e,h=t&&t.r,m=i.refs===Le?i.refs={}:i.refs,v=i.setupState,A=Ne(v),z=v===Le?()=>!1:x=>Re(A,x);if(h!=null&&h!==l&&(Qe(h)?(m[h]=null,z(h)&&(v[h]=null)):st(h)&&(h.value=null)),Ie(l))er(l,i,12,[a,m]);else{const x=Qe(l),k=st(l);if(x||k){const O=()=>{if(e.f){const D=x?z(l)?v[l]:m[l]:l.value;n?be(D)&&ds(D,s):be(D)?D.includes(s)||D.push(s):x?(m[l]=[s],z(l)&&(v[l]=m[l])):(l.value=[s],e.k&&(m[e.k]=l.value))}else x?(m[l]=a,z(l)&&(v[l]=a)):k&&(l.value=a,e.k&&(m[e.k]=a))};a?(O.id=-1,At(O,o)):O()}}}ln().requestIdleCallback,ln().cancelIdleCallback;const rr=e=>!!e.type.__asyncLoader,Sn=e=>e.type.__isKeepAlive;function wd(e,t){vi(e,"a",t)}function zd(e,t){vi(e,"da",t)}function vi(e,t,o=vt){const r=e.__wdc||(e.__wdc=()=>{let n=o;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Tn(t,r,o),o){let n=o.parent;for(;n&&n.parent;)Sn(n.parent.vnode)&&Ad(r,t,o,n),n=n.parent}}function Ad(e,t,o,r){const n=Tn(t,e,r,!0);Ir(()=>{ds(r[t],n)},o)}function Tn(e,t,o=vt,r=!1){if(o){const n=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...a)=>{eo();const i=Mr(o),l=qt(t,o,e,a);return i(),to(),l});return r?n.unshift(s):n.push(s),s}}const go=e=>(t,o=vt)=>{(!Nr||e==="sp")&&Tn(e,(...r)=>t(...r),o)},Cd=go("bm"),Ro=go("m"),Ed=go("bu"),Id=go("u"),xs=go("bum"),Ir=go("um"),Pd=go("sp"),Sd=go("rtg"),Td=go("rtc");function Dd(e,t=vt){Tn("ec",e,t)}const xd=Symbol.for("v-ndc");function Fe(e,t,o,r){let n;const s=o,a=be(e);if(a||Qe(e)){const i=a&&Qo(e);let l=!1,h=!1;i&&(l=!Rt(e),h=wo(e),e=fn(e)),n=new Array(e.length);for(let m=0,v=e.length;m<v;m++)n[m]=t(l?h?yn(ft(e[m])):ft(e[m]):e[m],m,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,s)}else if(We(e))if(e[Symbol.iterator])n=Array.from(e,(i,l)=>t(i,l,void 0,s));else{const i=Object.keys(e);n=new Array(i.length);for(let l=0,h=i.length;l<h;l++){const m=i[l];n[l]=t(e[m],m,l,s)}}else n=[];return n}function Md(e,t,o={},r,n){if(pt.ce||pt.parent&&rr(pt.parent)&&pt.parent.ce)return j(),dt(ze,null,[et("slot",o,r)],64);let s=e[t];s&&s._c&&(s._d=!1),j();const a=s&&yi(s(o)),i=o.key||a&&a.key,l=dt(ze,{key:(i&&!Zt(i)?i:`_${t}`)+""},a||[],a&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function yi(e){return e.some(t=>xr(t)?!(t.type===ht||t.type===ze&&!yi(t.children)):!0)?e:null}const Ms=e=>e?Ki(e)?Ln(e):Ms(e.parent):null,Pr=nt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ms(e.parent),$root:e=>Ms(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>wi(e),$forceUpdate:e=>e.f||(e.f=()=>{Ps(e.update)}),$nextTick:e=>e.n||(e.n=Bt.bind(e.proxy)),$watch:e=>tu.bind(e)}),Ns=(e,t)=>e!==Le&&!e.__isScriptSetup&&Re(e,t),Nd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:r,data:n,props:s,accessCache:a,type:i,appContext:l}=e;let h;if(t[0]!=="$"){const z=a[t];if(z!==void 0)switch(z){case 1:return r[t];case 2:return n[t];case 4:return o[t];case 3:return s[t]}else{if(Ns(r,t))return a[t]=1,r[t];if(n!==Le&&Re(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&Re(h,t))return a[t]=3,s[t];if(o!==Le&&Re(o,t))return a[t]=4,o[t];Fs&&(a[t]=0)}}const m=Pr[t];let v,A;if(m)return t==="$attrs"&&mt(e.attrs,"get",""),m(e);if((v=i.__cssModules)&&(v=v[t]))return v;if(o!==Le&&Re(o,t))return a[t]=4,o[t];if(A=l.config.globalProperties,Re(A,t))return A[t]},set({_:e},t,o){const{data:r,setupState:n,ctx:s}=e;return Ns(n,t)?(n[t]=o,!0):r!==Le&&Re(r,t)?(r[t]=o,!0):Re(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:r,appContext:n,propsOptions:s}},a){let i;return!!o[a]||e!==Le&&Re(e,a)||Ns(t,a)||(i=s[0])&&Re(i,a)||Re(r,a)||Re(Pr,a)||Re(n.config.globalProperties,a)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:Re(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function bi(e){return be(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let Fs=!0;function Fd(e){const t=wi(e),o=e.proxy,r=e.ctx;Fs=!1,t.beforeCreate&&_i(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:i,provide:l,inject:h,created:m,beforeMount:v,mounted:A,beforeUpdate:z,updated:x,activated:k,deactivated:O,beforeDestroy:D,beforeUnmount:I,destroyed:c,unmounted:d,render:b,renderTracked:E,renderTriggered:w,errorCaptured:u,serverPrefetch:f,expose:g,inheritAttrs:y,components:p,directives:C,filters:S}=t;if(h&&Od(h,r,null),a)for(const N in a){const F=a[N];Ie(F)&&(r[N]=F.bind(o))}if(n){const N=n.call(o,o);We(N)&&(e.data=Oo(N))}if(Fs=!0,s)for(const N in s){const F=s[N],Z=Ie(F)?F.bind(o,o):Ie(F.get)?F.get.bind(o,o):Qt,H=!Ie(F)&&Ie(F.set)?F.set.bind(o):Qt,W=Ae({get:Z,set:H});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>W.value,set:G=>W.value=G})}if(i)for(const N in i)$i(i[N],r,o,N);if(l){const N=Ie(l)?l.call(o):l;Reflect.ownKeys(N).forEach(F=>{jd(F,N[F])})}m&&_i(m,e,"c");function T(N,F){be(F)?F.forEach(Z=>N(Z.bind(o))):F&&N(F.bind(o))}if(T(Cd,v),T(Ro,A),T(Ed,z),T(Id,x),T(wd,k),T(zd,O),T(Dd,u),T(Td,E),T(Sd,w),T(xs,I),T(Ir,d),T(Pd,f),be(g))if(g.length){const N=e.exposed||(e.exposed={});g.forEach(F=>{Object.defineProperty(N,F,{get:()=>o[F],set:Z=>o[F]=Z})})}else e.exposed||(e.exposed={});b&&e.render===Qt&&(e.render=b),y!=null&&(e.inheritAttrs=y),p&&(e.components=p),C&&(e.directives=C),f&&hi(e)}function Od(e,t,o=Qt){be(e)&&(e=Os(e));for(const r in e){const n=e[r];let s;We(n)?"default"in n?s=xn(n.from||r,n.default,!0):s=xn(n.from||r):s=xn(n),st(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function _i(e,t,o){qt(be(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,o)}function $i(e,t,o,r){let n=r.includes(".")?Li(o,r):()=>o[r];if(Qe(e)){const s=t[e];Ie(s)&&at(n,s)}else if(Ie(e))at(n,e.bind(o));else if(We(e))if(be(e))e.forEach(s=>$i(s,t,o,r));else{const s=Ie(e.handler)?e.handler.bind(o):t[e.handler];Ie(s)&&at(n,s,e)}}function wi(e){const t=e.type,{mixins:o,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,i=s.get(t);let l;return i?l=i:!n.length&&!o&&!r?l=t:(l={},n.length&&n.forEach(h=>Dn(l,h,a,!0)),Dn(l,t,a)),We(t)&&s.set(t,l),l}function Dn(e,t,o,r=!1){const{mixins:n,extends:s}=t;s&&Dn(e,s,o,!0),n&&n.forEach(a=>Dn(e,a,o,!0));for(const a in t)if(!(r&&a==="expose")){const i=kd[a]||o&&o[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const kd={data:zi,props:Ai,emits:Ai,methods:Sr,computed:Sr,beforeCreate:zt,created:zt,beforeMount:zt,mounted:zt,beforeUpdate:zt,updated:zt,beforeDestroy:zt,beforeUnmount:zt,destroyed:zt,unmounted:zt,activated:zt,deactivated:zt,errorCaptured:zt,serverPrefetch:zt,components:Sr,directives:Sr,watch:Rd,provide:zi,inject:Ld};function zi(e,t){return t?e?function(){return nt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function Ld(e,t){return Sr(Os(e),Os(t))}function Os(e){if(be(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function zt(e,t){return e?[...new Set([].concat(e,t))]:t}function Sr(e,t){return e?nt(Object.create(null),e,t):t}function Ai(e,t){return e?be(e)&&be(t)?[...new Set([...e,...t])]:nt(Object.create(null),bi(e),bi(t??{})):t}function Rd(e,t){if(!e)return t;if(!t)return e;const o=nt(Object.create(null),e);for(const r in t)o[r]=zt(e[r],t[r]);return o}function Ci(){return{app:null,config:{isNativeTag:$c,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bd=0;function Hd(e,t){return function(r,n=null){Ie(r)||(r=nt({},r)),n!=null&&!We(n)&&(n=null);const s=Ci(),a=new WeakSet,i=[];let l=!1;const h=s.app={_uid:Bd++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Au,get config(){return s.config},set config(m){},use(m,...v){return a.has(m)||(m&&Ie(m.install)?(a.add(m),m.install(h,...v)):Ie(m)&&(a.add(m),m(h,...v))),h},mixin(m){return s.mixins.includes(m)||s.mixins.push(m),h},component(m,v){return v?(s.components[m]=v,h):s.components[m]},directive(m,v){return v?(s.directives[m]=v,h):s.directives[m]},mount(m,v,A){if(!l){const z=h._ceVNode||et(r,n);return z.appContext=s,A===!0?A="svg":A===!1&&(A=void 0),e(z,m,A),l=!0,h._container=m,m.__vue_app__=h,Ln(z.component)}},onUnmount(m){i.push(m)},unmount(){l&&(qt(i,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(m,v){return s.provides[m]=v,h},runWithContext(m){const v=nr;nr=h;try{return m()}finally{nr=v}}};return h}}let nr=null;function jd(e,t){if(vt){let o=vt.provides;const r=vt.parent&&vt.parent.provides;r===o&&(o=vt.provides=Object.create(r)),o[e]=t}}function xn(e,t,o=!1){const r=vt||pt;if(r||nr){let n=nr?nr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return o&&Ie(t)?t.call(r&&r.proxy):t}}const Ei={},Ii=()=>Object.create(Ei),Pi=e=>Object.getPrototypeOf(e)===Ei;function Ud(e,t,o,r=!1){const n={},s=Ii();e.propsDefaults=Object.create(null),Si(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);o?e.props=r?n:ed(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function Vd(e,t,o,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,i=Ne(n),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const m=e.vnode.dynamicProps;for(let v=0;v<m.length;v++){let A=m[v];if(Mn(e.emitsOptions,A))continue;const z=t[A];if(l)if(Re(s,A))z!==s[A]&&(s[A]=z,h=!0);else{const x=Wt(A);n[x]=ks(l,i,x,z,e,!1)}else z!==s[A]&&(s[A]=z,h=!0)}}}else{Si(e,t,n,s)&&(h=!0);let m;for(const v in i)(!t||!Re(t,v)&&((m=Lt(v))===v||!Re(t,m)))&&(l?o&&(o[v]!==void 0||o[m]!==void 0)&&(n[v]=ks(l,i,v,void 0,e,!0)):delete n[v]);if(s!==i)for(const v in s)(!t||!Re(t,v))&&(delete s[v],h=!0)}h&&uo(e.attrs,"set","")}function Si(e,t,o,r){const[n,s]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(hr(l))continue;const h=t[l];let m;n&&Re(n,m=Wt(l))?!s||!s.includes(m)?o[m]=h:(i||(i={}))[m]=h:Mn(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Ne(o),h=i||Le;for(let m=0;m<s.length;m++){const v=s[m];o[v]=ks(n,l,v,h[v],e,!Re(h,v))}}return a}function ks(e,t,o,r,n,s){const a=e[o];if(a!=null){const i=Re(a,"default");if(i&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ie(l)){const{propsDefaults:h}=n;if(o in h)r=h[o];else{const m=Mr(n);r=h[o]=l.call(null,t),m()}}else r=l;n.ce&&n.ce._setProp(o,r)}a[0]&&(s&&!i?r=!1:a[1]&&(r===""||r===Lt(o))&&(r=!0))}return r}const Zd=new WeakMap;function Ti(e,t,o=!1){const r=o?Zd:t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},i=[];let l=!1;if(!Ie(e)){const m=v=>{l=!0;const[A,z]=Ti(v,t,!0);nt(a,A),z&&i.push(...z)};!o&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!s&&!l)return We(e)&&r.set(e,Jo),Jo;if(be(s))for(let m=0;m<s.length;m++){const v=Wt(s[m]);Di(v)&&(a[v]=Le)}else if(s)for(const m in s){const v=Wt(m);if(Di(v)){const A=s[m],z=a[v]=be(A)||Ie(A)?{type:A}:nt({},A),x=z.type;let k=!1,O=!0;if(be(x))for(let D=0;D<x.length;++D){const I=x[D],c=Ie(I)&&I.name;if(c==="Boolean"){k=!0;break}else c==="String"&&(O=!1)}else k=Ie(x)&&x.name==="Boolean";z[0]=k,z[1]=O,(k||Re(z,"default"))&&i.push(v)}}const h=[a,i];return We(e)&&r.set(e,h),h}function Di(e){return e[0]!=="$"&&!hr(e)}const Ls=e=>e[0]==="_"||e==="$stable",Rs=e=>be(e)?e.map(ro):[ro(e)],Wd=(e,t,o)=>{if(t._n)return t;const r=Cn((...n)=>Rs(t(...n)),o);return r._c=!1,r},xi=(e,t,o)=>{const r=e._ctx;for(const n in e){if(Ls(n))continue;const s=e[n];if(Ie(s))t[n]=Wd(n,s,r);else if(s!=null){const a=Rs(s);t[n]=()=>a}}},Mi=(e,t)=>{const o=Rs(t);e.slots.default=()=>o},Ni=(e,t,o)=>{for(const r in t)(o||!Ls(r))&&(e[r]=t[r])},Kd=(e,t,o)=>{const r=e.slots=Ii();if(e.vnode.shapeFlag&32){const n=t.__;n&&ps(r,"__",n,!0);const s=t._;s?(Ni(r,t,o),o&&ps(r,"_",s,!0)):xi(t,r)}else t&&Mi(e,t)},qd=(e,t,o)=>{const{vnode:r,slots:n}=e;let s=!0,a=Le;if(r.shapeFlag&32){const i=t._;i?o&&i===1?s=!1:Ni(n,t,o):(s=!t.$stable,xi(t,n)),a=t}else t&&(Mi(e,t),a={default:1});if(s)for(const i in n)!Ls(i)&&a[i]==null&&delete n[i]},At=lu;function Gd(e){return Jd(e)}function Jd(e,t){const o=ln();o.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:i,createComment:l,setText:h,setElementText:m,parentNode:v,nextSibling:A,setScopeId:z=Qt,insertStaticContent:x}=e,k=(M,L,V,Y=null,K=null,X=null,oe=void 0,Q=null,ne=!!L.dynamicChildren)=>{if(M===L)return;M&&!Ho(M,L)&&(Y=Ve(M),G(M,K,X,!0),M=null),L.patchFlag===-2&&(ne=!1,L.dynamicChildren=null);const{type:ee,ref:ye,shapeFlag:ce}=L;switch(ee){case Nn:O(M,L,V,Y);break;case ht:D(M,L,V,Y);break;case js:M==null&&I(L,V,Y,oe);break;case ze:p(M,L,V,Y,K,X,oe,Q,ne);break;default:ce&1?b(M,L,V,Y,K,X,oe,Q,ne):ce&6?C(M,L,V,Y,K,X,oe,Q,ne):(ce&64||ce&128)&&ee.process(M,L,V,Y,K,X,oe,Q,ne,Je)}ye!=null&&K?Er(ye,M&&M.ref,X,L||M,!L):ye==null&&M&&M.ref!=null&&Er(M.ref,null,X,M,!0)},O=(M,L,V,Y)=>{if(M==null)r(L.el=i(L.children),V,Y);else{const K=L.el=M.el;L.children!==M.children&&h(K,L.children)}},D=(M,L,V,Y)=>{M==null?r(L.el=l(L.children||""),V,Y):L.el=M.el},I=(M,L,V,Y)=>{[M.el,M.anchor]=x(M.children,L,V,Y,M.el,M.anchor)},c=({el:M,anchor:L},V,Y)=>{let K;for(;M&&M!==L;)K=A(M),r(M,V,Y),M=K;r(L,V,Y)},d=({el:M,anchor:L})=>{let V;for(;M&&M!==L;)V=A(M),n(M),M=V;n(L)},b=(M,L,V,Y,K,X,oe,Q,ne)=>{L.type==="svg"?oe="svg":L.type==="math"&&(oe="mathml"),M==null?E(L,V,Y,K,X,oe,Q,ne):f(M,L,K,X,oe,Q,ne)},E=(M,L,V,Y,K,X,oe,Q)=>{let ne,ee;const{props:ye,shapeFlag:ce,transition:me,dirs:$e}=M;if(ne=M.el=a(M.type,X,ye&&ye.is,ye),ce&8?m(ne,M.children):ce&16&&u(M.children,ne,null,Y,K,Bs(M,X),oe,Q),$e&&Lo(M,null,Y,"created"),w(ne,M,M.scopeId,oe,Y),ye){for(const je in ye)je!=="value"&&!hr(je)&&s(ne,je,null,ye[je],X,Y);"value"in ye&&s(ne,"value",null,ye.value,X),(ee=ye.onVnodeBeforeMount)&&no(ee,Y,M)}$e&&Lo(M,null,Y,"beforeMount");const De=Yd(K,me);De&&me.beforeEnter(ne),r(ne,L,V),((ee=ye&&ye.onVnodeMounted)||De||$e)&&At(()=>{ee&&no(ee,Y,M),De&&me.enter(ne),$e&&Lo(M,null,Y,"mounted")},K)},w=(M,L,V,Y,K)=>{if(V&&z(M,V),Y)for(let X=0;X<Y.length;X++)z(M,Y[X]);if(K){let X=K.subTree;if(L===X||ji(X.type)&&(X.ssContent===L||X.ssFallback===L)){const oe=K.vnode;w(M,oe,oe.scopeId,oe.slotScopeIds,K.parent)}}},u=(M,L,V,Y,K,X,oe,Q,ne=0)=>{for(let ee=ne;ee<M.length;ee++){const ye=M[ee]=Q?Eo(M[ee]):ro(M[ee]);k(null,ye,L,V,Y,K,X,oe,Q)}},f=(M,L,V,Y,K,X,oe)=>{const Q=L.el=M.el;let{patchFlag:ne,dynamicChildren:ee,dirs:ye}=L;ne|=M.patchFlag&16;const ce=M.props||Le,me=L.props||Le;let $e;if(V&&Bo(V,!1),($e=me.onVnodeBeforeUpdate)&&no($e,V,L,M),ye&&Lo(L,M,V,"beforeUpdate"),V&&Bo(V,!0),(ce.innerHTML&&me.innerHTML==null||ce.textContent&&me.textContent==null)&&m(Q,""),ee?g(M.dynamicChildren,ee,Q,V,Y,Bs(L,K),X):oe||F(M,L,Q,null,V,Y,Bs(L,K),X,!1),ne>0){if(ne&16)y(Q,ce,me,V,K);else if(ne&2&&ce.class!==me.class&&s(Q,"class",null,me.class,K),ne&4&&s(Q,"style",ce.style,me.style,K),ne&8){const De=L.dynamicProps;for(let je=0;je<De.length;je++){const Te=De[je],ut=ce[Te],Ue=me[Te];(Ue!==ut||Te==="value")&&s(Q,Te,ut,Ue,K,V)}}ne&1&&M.children!==L.children&&m(Q,L.children)}else!oe&&ee==null&&y(Q,ce,me,V,K);(($e=me.onVnodeUpdated)||ye)&&At(()=>{$e&&no($e,V,L,M),ye&&Lo(L,M,V,"updated")},Y)},g=(M,L,V,Y,K,X,oe)=>{for(let Q=0;Q<L.length;Q++){const ne=M[Q],ee=L[Q],ye=ne.el&&(ne.type===ze||!Ho(ne,ee)||ne.shapeFlag&198)?v(ne.el):V;k(ne,ee,ye,null,Y,K,X,oe,!0)}},y=(M,L,V,Y,K)=>{if(L!==V){if(L!==Le)for(const X in L)!hr(X)&&!(X in V)&&s(M,X,L[X],null,K,Y);for(const X in V){if(hr(X))continue;const oe=V[X],Q=L[X];oe!==Q&&X!=="value"&&s(M,X,Q,oe,K,Y)}"value"in V&&s(M,"value",L.value,V.value,K)}},p=(M,L,V,Y,K,X,oe,Q,ne)=>{const ee=L.el=M?M.el:i(""),ye=L.anchor=M?M.anchor:i("");let{patchFlag:ce,dynamicChildren:me,slotScopeIds:$e}=L;$e&&(Q=Q?Q.concat($e):$e),M==null?(r(ee,V,Y),r(ye,V,Y),u(L.children||[],V,ye,K,X,oe,Q,ne)):ce>0&&ce&64&&me&&M.dynamicChildren?(g(M.dynamicChildren,me,V,K,X,oe,Q),(L.key!=null||K&&L===K.subTree)&&Hs(M,L,!0)):F(M,L,V,ye,K,X,oe,Q,ne)},C=(M,L,V,Y,K,X,oe,Q,ne)=>{L.slotScopeIds=Q,M==null?L.shapeFlag&512?K.ctx.activate(L,V,Y,oe,ne):S(L,V,Y,K,X,oe,ne):P(M,L,ne)},S=(M,L,V,Y,K,X,oe)=>{const Q=M.component=mu(M,Y,K);if(Sn(M)&&(Q.ctx.renderer=Je),hu(Q,!1,oe),Q.asyncDep){if(K&&K.registerDep(Q,T,oe),!M.el){const ne=Q.subTree=et(ht);D(null,ne,L,V)}}else T(Q,M,L,V,K,X,oe)},P=(M,L,V)=>{const Y=L.component=M.component;if(au(M,L,V))if(Y.asyncDep&&!Y.asyncResolved){N(Y,L,V);return}else Y.next=L,Y.update();else L.el=M.el,Y.vnode=L},T=(M,L,V,Y,K,X,oe)=>{const Q=()=>{if(M.isMounted){let{next:ce,bu:me,u:$e,parent:De,vnode:je}=M;{const kt=Fi(M);if(kt){ce&&(ce.el=je.el,N(M,ce,oe)),kt.asyncDep.then(()=>{M.isUnmounted||Q()});return}}let Te=ce,ut;Bo(M,!1),ce?(ce.el=je.el,N(M,ce,oe)):ce=je,me&&sn(me),(ut=ce.props&&ce.props.onVnodeBeforeUpdate)&&no(ut,De,ce,je),Bo(M,!0);const Ue=Bi(M),Ye=M.subTree;M.subTree=Ue,k(Ye,Ue,v(Ye.el),Ve(Ye),M,K,X),ce.el=Ue.el,Te===null&&iu(M,Ue.el),$e&&At($e,K),(ut=ce.props&&ce.props.onVnodeUpdated)&&At(()=>no(ut,De,ce,je),K)}else{let ce;const{el:me,props:$e}=L,{bm:De,m:je,parent:Te,root:ut,type:Ue}=M,Ye=rr(L);Bo(M,!1),De&&sn(De),!Ye&&(ce=$e&&$e.onVnodeBeforeMount)&&no(ce,Te,L),Bo(M,!0);{ut.ce&&ut.ce._def.shadowRoot!==!1&&ut.ce._injectChildStyle(Ue);const kt=M.subTree=Bi(M);k(null,kt,V,Y,M,K,X),L.el=kt.el}if(je&&At(je,K),!Ye&&(ce=$e&&$e.onVnodeMounted)){const kt=L;At(()=>no(ce,Te,kt),K)}(L.shapeFlag&256||Te&&rr(Te.vnode)&&Te.vnode.shapeFlag&256)&&M.a&&At(M.a,K),M.isMounted=!0,L=V=Y=null}};M.scope.on();const ne=M.effect=new Sa(Q);M.scope.off();const ee=M.update=ne.run.bind(ne),ye=M.job=ne.runIfDirty.bind(ne);ye.i=M,ye.id=M.uid,ne.scheduler=()=>Ps(ye),Bo(M,!0),ee()},N=(M,L,V)=>{L.component=M;const Y=M.vnode.props;M.vnode=L,M.next=null,Vd(M,L.props,Y,V),qd(M,L.children,V),eo(),Xa(M),to()},F=(M,L,V,Y,K,X,oe,Q,ne=!1)=>{const ee=M&&M.children,ye=M?M.shapeFlag:0,ce=L.children,{patchFlag:me,shapeFlag:$e}=L;if(me>0){if(me&128){H(ee,ce,V,Y,K,X,oe,Q,ne);return}else if(me&256){Z(ee,ce,V,Y,K,X,oe,Q,ne);return}}$e&8?(ye&16&&Se(ee,K,X),ce!==ee&&m(V,ce)):ye&16?$e&16?H(ee,ce,V,Y,K,X,oe,Q,ne):Se(ee,K,X,!0):(ye&8&&m(V,""),$e&16&&u(ce,V,Y,K,X,oe,Q,ne))},Z=(M,L,V,Y,K,X,oe,Q,ne)=>{M=M||Jo,L=L||Jo;const ee=M.length,ye=L.length,ce=Math.min(ee,ye);let me;for(me=0;me<ce;me++){const $e=L[me]=ne?Eo(L[me]):ro(L[me]);k(M[me],$e,V,null,K,X,oe,Q,ne)}ee>ye?Se(M,K,X,!0,!1,ce):u(L,V,Y,K,X,oe,Q,ne,ce)},H=(M,L,V,Y,K,X,oe,Q,ne)=>{let ee=0;const ye=L.length;let ce=M.length-1,me=ye-1;for(;ee<=ce&&ee<=me;){const $e=M[ee],De=L[ee]=ne?Eo(L[ee]):ro(L[ee]);if(Ho($e,De))k($e,De,V,null,K,X,oe,Q,ne);else break;ee++}for(;ee<=ce&&ee<=me;){const $e=M[ce],De=L[me]=ne?Eo(L[me]):ro(L[me]);if(Ho($e,De))k($e,De,V,null,K,X,oe,Q,ne);else break;ce--,me--}if(ee>ce){if(ee<=me){const $e=me+1,De=$e<ye?L[$e].el:Y;for(;ee<=me;)k(null,L[ee]=ne?Eo(L[ee]):ro(L[ee]),V,De,K,X,oe,Q,ne),ee++}}else if(ee>me)for(;ee<=ce;)G(M[ee],K,X,!0),ee++;else{const $e=ee,De=ee,je=new Map;for(ee=De;ee<=me;ee++){const bt=L[ee]=ne?Eo(L[ee]):ro(L[ee]);bt.key!=null&&je.set(bt.key,ee)}let Te,ut=0;const Ue=me-De+1;let Ye=!1,kt=0;const xo=new Array(Ue);for(ee=0;ee<Ue;ee++)xo[ee]=0;for(ee=$e;ee<=ce;ee++){const bt=M[ee];if(ut>=Ue){G(bt,K,X,!0);continue}let St;if(bt.key!=null)St=je.get(bt.key);else for(Te=De;Te<=me;Te++)if(xo[Te-De]===0&&Ho(bt,L[Te])){St=Te;break}St===void 0?G(bt,K,X,!0):(xo[St-De]=ee+1,St>=kt?kt=St:Ye=!0,k(bt,L[St],V,null,K,X,oe,Q,ne),ut++)}const Xr=Ye?Xd(xo):Jo;for(Te=Xr.length-1,ee=Ue-1;ee>=0;ee--){const bt=De+ee,St=L[bt],is=bt+1<ye?L[bt+1].el:Y;xo[ee]===0?k(null,St,V,is,K,X,oe,Q,ne):Ye&&(Te<0||ee!==Xr[Te]?W(St,V,is,2):Te--)}}},W=(M,L,V,Y,K=null)=>{const{el:X,type:oe,transition:Q,children:ne,shapeFlag:ee}=M;if(ee&6){W(M.component.subTree,L,V,Y);return}if(ee&128){M.suspense.move(L,V,Y);return}if(ee&64){oe.move(M,L,V,Je);return}if(oe===ze){r(X,L,V);for(let ce=0;ce<ne.length;ce++)W(ne[ce],L,V,Y);r(M.anchor,L,V);return}if(oe===js){c(M,L,V);return}if(Y!==2&&ee&1&&Q)if(Y===0)Q.beforeEnter(X),r(X,L,V),At(()=>Q.enter(X),K);else{const{leave:ce,delayLeave:me,afterLeave:$e}=Q,De=()=>{M.ctx.isUnmounted?n(X):r(X,L,V)},je=()=>{ce(X,()=>{De(),$e&&$e()})};me?me(X,De,je):je()}else r(X,L,V)},G=(M,L,V,Y=!1,K=!1)=>{const{type:X,props:oe,ref:Q,children:ne,dynamicChildren:ee,shapeFlag:ye,patchFlag:ce,dirs:me,cacheIndex:$e}=M;if(ce===-2&&(K=!1),Q!=null&&(eo(),Er(Q,null,V,M,!0),to()),$e!=null&&(L.renderCache[$e]=void 0),ye&256){L.ctx.deactivate(M);return}const De=ye&1&&me,je=!rr(M);let Te;if(je&&(Te=oe&&oe.onVnodeBeforeUnmount)&&no(Te,L,M),ye&6)Oe(M.component,V,Y);else{if(ye&128){M.suspense.unmount(V,Y);return}De&&Lo(M,null,L,"beforeUnmount"),ye&64?M.type.remove(M,L,V,Je,Y):ee&&!ee.hasOnce&&(X!==ze||ce>0&&ce&64)?Se(ee,L,V,!1,!0):(X===ze&&ce&384||!K&&ye&16)&&Se(ne,L,V),Y&&re(M)}(je&&(Te=oe&&oe.onVnodeUnmounted)||De)&&At(()=>{Te&&no(Te,L,M),De&&Lo(M,null,L,"unmounted")},V)},re=M=>{const{type:L,el:V,anchor:Y,transition:K}=M;if(L===ze){_e(V,Y);return}if(L===js){d(M);return}const X=()=>{n(V),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(M.shapeFlag&1&&K&&!K.persisted){const{leave:oe,delayLeave:Q}=K,ne=()=>oe(V,X);Q?Q(M.el,X,ne):ne()}else X()},_e=(M,L)=>{let V;for(;M!==L;)V=A(M),n(M),M=V;n(L)},Oe=(M,L,V)=>{const{bum:Y,scope:K,job:X,subTree:oe,um:Q,m:ne,a:ee,parent:ye,slots:{__:ce}}=M;Oi(ne),Oi(ee),Y&&sn(Y),ye&&be(ce)&&ce.forEach(me=>{ye.renderCache[me]=void 0}),K.stop(),X&&(X.flags|=8,G(oe,M,L,V)),Q&&At(Q,L),At(()=>{M.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},Se=(M,L,V,Y=!1,K=!1,X=0)=>{for(let oe=X;oe<M.length;oe++)G(M[oe],L,V,Y,K)},Ve=M=>{if(M.shapeFlag&6)return Ve(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const L=A(M.anchor||M.el),V=L&&L[oi];return V?A(V):L};let xe=!1;const Ze=(M,L,V)=>{M==null?L._vnode&&G(L._vnode,null,null,!0):k(L._vnode||null,M,L,null,null,null,V),L._vnode=M,xe||(xe=!0,Xa(),Qa(),xe=!1)},Je={p:k,um:G,m:W,r:re,mt:S,mc:u,pc:F,pbc:g,n:Ve,o:e};return{render:Ze,hydrate:void 0,createApp:Hd(Ze)}}function Bs({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Bo({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Yd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Hs(e,t,o=!1){const r=e.children,n=t.children;if(be(r)&&be(n))for(let s=0;s<r.length;s++){const a=r[s];let i=n[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=n[s]=Eo(n[s]),i.el=a.el),!o&&i.patchFlag!==-2&&Hs(a,i)),i.type===Nn&&(i.el=a.el),i.type===ht&&!i.el&&(i.el=a.el)}}function Xd(e){const t=e.slice(),o=[0];let r,n,s,a,i;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(n=o[o.length-1],e[n]<h){t[r]=n,o.push(r);continue}for(s=0,a=o.length-1;s<a;)i=s+a>>1,e[o[i]]<h?s=i+1:a=i;h<e[o[s]]&&(s>0&&(t[r]=o[s-1]),o[s]=r)}}for(s=o.length,a=o[s-1];s-- >0;)o[s]=a,a=t[a];return o}function Fi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fi(t)}function Oi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Qd=Symbol.for("v-scx"),eu=()=>xn(Qd);function at(e,t,o){return ki(e,t,o)}function ki(e,t,o=Le){const{immediate:r,deep:n,flush:s,once:a}=o,i=nt({},o),l=t&&r||!t&&s!=="post";let h;if(Nr){if(s==="sync"){const z=eu();h=z.__watcherHandles||(z.__watcherHandles=[])}else if(!l){const z=()=>{};return z.stop=Qt,z.resume=Qt,z.pause=Qt,z}}const m=vt;i.call=(z,x,k)=>qt(z,m,x,k);let v=!1;s==="post"?i.scheduler=z=>{At(z,m&&m.suspense)}:s!=="sync"&&(v=!0,i.scheduler=(z,x)=>{x?z():Ps(z)}),i.augmentJob=z=>{t&&(z.flags|=4),v&&(z.flags|=2,m&&(z.id=m.uid,z.i=m))};const A=dd(e,t,i);return Nr&&(h?h.push(A):l&&A()),A}function tu(e,t,o){const r=this.proxy,n=Qe(e)?e.includes(".")?Li(r,e):()=>r[e]:e.bind(r,r);let s;Ie(t)?s=t:(s=t.handler,o=t);const a=Mr(this),i=ki(n,s.bind(r),o);return a(),i}function Li(e,t){const o=t.split(".");return()=>{let r=e;for(let n=0;n<o.length&&r;n++)r=r[o[n]];return r}}const ou=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Wt(t)}Modifiers`]||e[`${Lt(t)}Modifiers`];function ru(e,t,...o){if(e.isUnmounted)return;const r=e.vnode.props||Le;let n=o;const s=t.startsWith("update:"),a=s&&ou(r,t.slice(7));a&&(a.trim&&(n=o.map(m=>Qe(m)?m.trim():m)),a.number&&(n=o.map(an)));let i,l=r[i=fs(t)]||r[i=fs(Wt(t))];!l&&s&&(l=r[i=fs(Lt(t))]),l&&qt(l,e,6,n);const h=r[i+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,qt(h,e,6,n)}}function Ri(e,t,o=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},i=!1;if(!Ie(e)){const l=h=>{const m=Ri(h,t,!0);m&&(i=!0,nt(a,m))};!o&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!i?(We(e)&&r.set(e,null),null):(be(s)?s.forEach(l=>a[l]=null):nt(a,s),We(e)&&r.set(e,a),a)}function Mn(e,t){return!e||!tn(t)?!1:(t=t.slice(2).replace(/Once$/,""),Re(e,t[0].toLowerCase()+t.slice(1))||Re(e,Lt(t))||Re(e,t))}function Zb(){}function Bi(e){const{type:t,vnode:o,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:i,emit:l,render:h,renderCache:m,props:v,data:A,setupState:z,ctx:x,inheritAttrs:k}=e,O=An(e);let D,I;try{if(o.shapeFlag&4){const d=n||r,b=d;D=ro(h.call(b,d,m,v,z,A,x)),I=i}else{const d=t;D=ro(d.length>1?d(v,{attrs:i,slots:a,emit:l}):d(v,null)),I=t.props?i:nu(i)}}catch(d){Tr.length=0,wn(d,e,1),D=et(ht)}let c=D;if(I&&k!==!1){const d=Object.keys(I),{shapeFlag:b}=c;d.length&&b&7&&(s&&d.some(cs)&&(I=su(I,s)),c=Co(c,I,!1,!0))}return o.dirs&&(c=Co(c,null,!1,!0),c.dirs=c.dirs?c.dirs.concat(o.dirs):o.dirs),o.transition&&Cr(c,o.transition),D=c,An(O),D}const nu=e=>{let t;for(const o in e)(o==="class"||o==="style"||tn(o))&&((t||(t={}))[o]=e[o]);return t},su=(e,t)=>{const o={};for(const r in e)(!cs(r)||!(r.slice(9)in t))&&(o[r]=e[r]);return o};function au(e,t,o){const{props:r,children:n,component:s}=e,{props:a,children:i,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&l>=0){if(l&1024)return!0;if(l&16)return r?Hi(r,a,h):!!a;if(l&8){const m=t.dynamicProps;for(let v=0;v<m.length;v++){const A=m[v];if(a[A]!==r[A]&&!Mn(h,A))return!0}}}else return(n||i)&&(!i||!i.$stable)?!0:r===a?!1:r?a?Hi(r,a,h):!0:!!a;return!1}function Hi(e,t,o){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!Mn(o,s))return!0}return!1}function iu({vnode:e,parent:t},o){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=o,t=t.parent;else break}}const ji=e=>e.__isSuspense;function lu(e,t){t&&t.pendingBranch?be(e)?t.effects.push(...e):t.effects.push(e):vd(e)}const ze=Symbol.for("v-fgt"),Nn=Symbol.for("v-txt"),ht=Symbol.for("v-cmt"),js=Symbol.for("v-stc"),Tr=[];let xt=null;function j(e=!1){Tr.push(xt=e?null:[])}function cu(){Tr.pop(),xt=Tr[Tr.length-1]||null}let Dr=1;function Ui(e,t=!1){Dr+=e,e<0&&xt&&t&&(xt.hasOnce=!0)}function Vi(e){return e.dynamicChildren=Dr>0?xt||Jo:null,cu(),Dr>0&&xt&&xt.push(e),e}function U(e,t,o,r,n,s){return Vi($(e,t,o,r,n,s,!0))}function dt(e,t,o,r,n){return Vi(et(e,t,o,r,n,!0))}function xr(e){return e?e.__v_isVNode===!0:!1}function Ho(e,t){return e.type===t.type&&e.key===t.key}const Zi=({key:e})=>e??null,Fn=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Qe(e)||st(e)||Ie(e)?{i:pt,r:e,k:t,f:!!o}:e:null);function $(e,t=null,o=null,r=0,n=null,s=e===ze?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Zi(t),ref:t&&Fn(t),scopeId:ti,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:pt};return i?(Us(l,o),s&128&&e.normalize(l)):o&&(l.shapeFlag|=Qe(o)?8:16),Dr>0&&!a&&xt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&xt.push(l),l}const et=du;function du(e,t=null,o=null,r=0,n=null,s=!1){if((!e||e===xd)&&(e=ht),xr(e)){const i=Co(e,t,!0);return o&&Us(i,o),Dr>0&&!s&&xt&&(i.shapeFlag&6?xt[xt.indexOf(e)]=i:xt.push(i)),i.patchFlag=-2,i}if(zu(e)&&(e=e.__vccOpts),t){t=uu(t);let{class:i,style:l}=t;i&&!Qe(i)&&(t.class=ot(i)),We(l)&&(Es(l)&&!be(l)&&(l=nt({},l)),t.style=cn(l))}const a=Qe(e)?1:ji(e)?128:ri(e)?64:We(e)?4:Ie(e)?2:0;return $(e,t,o,r,n,a,s,!0)}function uu(e){return e?Es(e)||Pi(e)?nt({},e):e:null}function Co(e,t,o=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:i,transition:l}=e,h=t?fu(n||{},t):n,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Zi(h),ref:t&&t.ref?o&&s?be(s)?s.concat(Fn(t)):[s,Fn(t)]:Fn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Co(e.ssContent),ssFallback:e.ssFallback&&Co(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Cr(m,l.clone(m)),m}function sr(e=" ",t=0){return et(Nn,null,e,t)}function ve(e="",t=!1){return t?(j(),dt(ht,null,e)):et(ht,null,e)}function ro(e){return e==null||typeof e=="boolean"?et(ht):be(e)?et(ze,null,e.slice()):xr(e)?Eo(e):et(Nn,null,String(e))}function Eo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Co(e)}function Us(e,t){let o=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(be(t))o=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Us(e,n()),n._c&&(n._d=!0));return}else{o=32;const n=t._;!n&&!Pi(t)?t._ctx=pt:n===3&&pt&&(pt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:pt},o=32):(t=String(t),r&64?(o=16,t=[sr(t)]):o=8);e.children=t,e.shapeFlag|=o}function fu(...e){const t={};for(let o=0;o<e.length;o++){const r=e[o];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=ot([t.class,r.class]));else if(n==="style")t.style=cn([t.style,r.style]);else if(tn(n)){const s=t[n],a=r[n];a&&s!==a&&!(be(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function no(e,t,o,r=null){qt(e,t,7,[o,r])}const pu=Ci();let gu=0;function mu(e,t,o){const r=e.type,n=(t?t.appContext:e.appContext)||pu,s={uid:gu++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ti(r,n),emitsOptions:Ri(r,n),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:r.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ru.bind(null,s),e.ce&&e.ce(s),s}let vt=null;const On=()=>vt||pt;let kn,Vs;{const e=ln(),t=(o,r)=>{let n;return(n=e[o])||(n=e[o]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};kn=t("__VUE_INSTANCE_SETTERS__",o=>vt=o),Vs=t("__VUE_SSR_SETTERS__",o=>Nr=o)}const Mr=e=>{const t=vt;return kn(e),e.scope.on(),()=>{e.scope.off(),kn(t)}},Wi=()=>{vt&&vt.scope.off(),kn(null)};function Ki(e){return e.vnode.shapeFlag&4}let Nr=!1;function hu(e,t=!1,o=!1){t&&Vs(t);const{props:r,children:n}=e.vnode,s=Ki(e);Ud(e,r,s,t),Kd(e,n,o||t);const a=s?vu(e,t):void 0;return t&&Vs(!1),a}function vu(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Nd);const{setup:r}=o;if(r){eo();const n=e.setupContext=r.length>1?bu(e):null,s=Mr(e),a=er(r,e,0,[e.props,n]),i=wa(a);if(to(),s(),(i||e.sp)&&!rr(e)&&hi(e),i){if(a.then(Wi,Wi),t)return a.then(l=>{qi(e,l)}).catch(l=>{wn(l,e,0)});e.asyncDep=a}else qi(e,a)}else Gi(e)}function qi(e,t,o){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:We(t)&&(e.setupState=Ka(t)),Gi(e)}function Gi(e,t,o){const r=e.type;e.render||(e.render=r.render||Qt);{const n=Mr(e);eo();try{Fd(e)}finally{to(),n()}}}const yu={get(e,t){return mt(e,"get",""),e[t]}};function bu(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,yu),slots:e.slots,emit:e.emit,expose:t}}function Ln(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ka(td(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in Pr)return Pr[o](e)},has(t,o){return o in t||o in Pr}})):e.proxy}const _u=/(?:^|[-_])(\w)/g,$u=e=>e.replace(_u,t=>t.toUpperCase()).replace(/[-_]/g,"");function wu(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Ji(e,t,o=!1){let r=wu(t);if(!r&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(r=n[1])}if(!r&&e&&e.parent){const n=s=>{for(const a in s)if(s[a]===t)return a};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?$u(r):o?"App":"Anonymous"}function zu(e){return Ie(e)&&"__vccOpts"in e}const Ae=(e,t)=>ld(e,t,Nr);function Yi(e,t,o){const r=arguments.length;return r===2?We(t)&&!be(t)?xr(t)?et(e,null,[t]):et(e,t):et(e,null,t):(r>3?o=Array.prototype.slice.call(arguments,2):r===3&&xr(o)&&(o=[o]),et(e,t,o))}const Au="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zs;const Xi=typeof window<"u"&&window.trustedTypes;if(Xi)try{Zs=Xi.createPolicy("vue",{createHTML:e=>e})}catch{}const Qi=Zs?e=>Zs.createHTML(e):e=>e,Cu="http://www.w3.org/2000/svg",Eu="http://www.w3.org/1998/Math/MathML",mo=typeof document<"u"?document:null,el=mo&&mo.createElement("template"),Iu={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,r)=>{const n=t==="svg"?mo.createElementNS(Cu,e):t==="mathml"?mo.createElementNS(Eu,e):o?mo.createElement(e,{is:o}):mo.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>mo.createTextNode(e),createComment:e=>mo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,r,n,s){const a=o?o.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),o),!(n===s||!(n=n.nextSibling)););else{el.innerHTML=Qi(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const i=el.content;if(r==="svg"||r==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,o)}return[a?a.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},Io="transition",Fr="animation",Or=Symbol("_vtc"),tl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Pu=nt({},di,tl),Su=(e=>(e.displayName="Transition",e.props=Pu,e))((e,{slots:t})=>Yi($d,Tu(e),t)),jo=(e,t=[])=>{be(e)?e.forEach(o=>o(...t)):e&&e(...t)},ol=e=>e?be(e)?e.some(t=>t.length>1):e.length>1:!1;function Tu(e){const t={};for(const p in e)p in tl||(t[p]=e[p]);if(e.css===!1)return t;const{name:o="v",type:r,duration:n,enterFromClass:s=`${o}-enter-from`,enterActiveClass:a=`${o}-enter-active`,enterToClass:i=`${o}-enter-to`,appearFromClass:l=s,appearActiveClass:h=a,appearToClass:m=i,leaveFromClass:v=`${o}-leave-from`,leaveActiveClass:A=`${o}-leave-active`,leaveToClass:z=`${o}-leave-to`}=e,x=Du(n),k=x&&x[0],O=x&&x[1],{onBeforeEnter:D,onEnter:I,onEnterCancelled:c,onLeave:d,onLeaveCancelled:b,onBeforeAppear:E=D,onAppear:w=I,onAppearCancelled:u=c}=t,f=(p,C,S,P)=>{p._enterCancelled=P,Uo(p,C?m:i),Uo(p,C?h:a),S&&S()},g=(p,C)=>{p._isLeaving=!1,Uo(p,v),Uo(p,z),Uo(p,A),C&&C()},y=p=>(C,S)=>{const P=p?w:I,T=()=>f(C,p,S);jo(P,[C,T]),rl(()=>{Uo(C,p?l:s),ho(C,p?m:i),ol(P)||nl(C,r,k,T)})};return nt(t,{onBeforeEnter(p){jo(D,[p]),ho(p,s),ho(p,a)},onBeforeAppear(p){jo(E,[p]),ho(p,l),ho(p,h)},onEnter:y(!1),onAppear:y(!0),onLeave(p,C){p._isLeaving=!0;const S=()=>g(p,C);ho(p,v),p._enterCancelled?(ho(p,A),il()):(il(),ho(p,A)),rl(()=>{p._isLeaving&&(Uo(p,v),ho(p,z),ol(d)||nl(p,r,O,S))}),jo(d,[p,S])},onEnterCancelled(p){f(p,!1,void 0,!0),jo(c,[p])},onAppearCancelled(p){f(p,!0,void 0,!0),jo(u,[p])},onLeaveCancelled(p){g(p),jo(b,[p])}})}function Du(e){if(e==null)return null;if(We(e))return[Ws(e.enter),Ws(e.leave)];{const t=Ws(e);return[t,t]}}function Ws(e){return gs(e)}function ho(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[Or]||(e[Or]=new Set)).add(t)}function Uo(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const o=e[Or];o&&(o.delete(t),o.size||(e[Or]=void 0))}function rl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let xu=0;function nl(e,t,o,r){const n=e._endId=++xu,s=()=>{n===e._endId&&r()};if(o!=null)return setTimeout(s,o);const{type:a,timeout:i,propCount:l}=Mu(e,t);if(!a)return r();const h=a+"end";let m=0;const v=()=>{e.removeEventListener(h,A),s()},A=z=>{z.target===e&&++m>=l&&v()};setTimeout(()=>{m<l&&v()},i+1),e.addEventListener(h,A)}function Mu(e,t){const o=window.getComputedStyle(e),r=x=>(o[x]||"").split(", "),n=r(`${Io}Delay`),s=r(`${Io}Duration`),a=sl(n,s),i=r(`${Fr}Delay`),l=r(`${Fr}Duration`),h=sl(i,l);let m=null,v=0,A=0;t===Io?a>0&&(m=Io,v=a,A=s.length):t===Fr?h>0&&(m=Fr,v=h,A=l.length):(v=Math.max(a,h),m=v>0?a>h?Io:Fr:null,A=m?m===Io?s.length:l.length:0);const z=m===Io&&/\b(transform|all)(,|$)/.test(r(`${Io}Property`).toString());return{type:m,timeout:v,propCount:A,hasTransform:z}}function sl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,r)=>al(o)+al(e[r])))}function al(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function il(){return document.body.offsetHeight}function Nu(e,t,o){const r=e[Or];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const Rn=Symbol("_vod"),ll=Symbol("_vsh"),Fu={beforeMount(e,{value:t},{transition:o}){e[Rn]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):kr(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:r}){!t!=!o&&(r?t?(r.beforeEnter(e),kr(e,!0),r.enter(e)):r.leave(e,()=>{kr(e,!1)}):kr(e,t))},beforeUnmount(e,{value:t}){kr(e,t)}};function kr(e,t){e.style.display=t?e[Rn]:"none",e[ll]=!t}const Ou=Symbol(""),ku=/(^|;)\s*display\s*:/;function Lu(e,t,o){const r=e.style,n=Qe(o);let s=!1;if(o&&!n){if(t)if(Qe(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();o[i]==null&&Bn(r,i,"")}else for(const a in t)o[a]==null&&Bn(r,a,"");for(const a in o)a==="display"&&(s=!0),Bn(r,a,o[a])}else if(n){if(t!==o){const a=r[Ou];a&&(o+=";"+a),r.cssText=o,s=ku.test(o)}}else t&&e.removeAttribute("style");Rn in e&&(e[Rn]=s?r.display:"",e[ll]&&(r.display="none"))}const cl=/\s*!important$/;function Bn(e,t,o){if(be(o))o.forEach(r=>Bn(e,t,r));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const r=Ru(e,t);cl.test(o)?e.setProperty(Lt(r),o.replace(cl,""),"important"):e[r]=o}}const dl=["Webkit","Moz","ms"],Ks={};function Ru(e,t){const o=Ks[t];if(o)return o;let r=Wt(t);if(r!=="filter"&&r in e)return Ks[t]=r;r=Aa(r);for(let n=0;n<dl.length;n++){const s=dl[n]+r;if(s in e)return Ks[t]=s}return t}const ul="http://www.w3.org/1999/xlink";function fl(e,t,o,r,n,s=Tc(t)){r&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(ul,t.slice(6,t.length)):e.setAttributeNS(ul,t,o):o==null||s&&!Ea(o)?e.removeAttribute(t):e.setAttribute(t,s?"":Zt(o)?String(o):o)}function pl(e,t,o,r,n){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?Qi(o):o);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,l=o==null?e.type==="checkbox"?"on":"":String(o);(i!==l||!("_value"in e))&&(e.value=l),o==null&&e.removeAttribute(t),e._value=o;return}let a=!1;if(o===""||o==null){const i=typeof e[t];i==="boolean"?o=Ea(o):o==null&&i==="string"?(o="",a=!0):i==="number"&&(o=0,a=!0)}try{e[t]=o}catch{}a&&e.removeAttribute(n||t)}function Vo(e,t,o,r){e.addEventListener(t,o,r)}function Bu(e,t,o,r){e.removeEventListener(t,o,r)}const gl=Symbol("_vei");function Hu(e,t,o,r,n=null){const s=e[gl]||(e[gl]={}),a=s[t];if(r&&a)a.value=r;else{const[i,l]=ju(t);if(r){const h=s[t]=Zu(r,n);Vo(e,i,h,l)}else a&&(Bu(e,i,a,l),s[t]=void 0)}}const ml=/(?:Once|Passive|Capture)$/;function ju(e){let t;if(ml.test(e)){t={};let r;for(;r=e.match(ml);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Lt(e.slice(2)),t]}let qs=0;const Uu=Promise.resolve(),Vu=()=>qs||(Uu.then(()=>qs=0),qs=Date.now());function Zu(e,t){const o=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=o.attached)return;qt(Wu(r,o.value),t,5,[r])};return o.value=e,o.attached=Vu(),o}function Wu(e,t){if(be(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const hl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ku=(e,t,o,r,n,s)=>{const a=n==="svg";t==="class"?Nu(e,r,a):t==="style"?Lu(e,o,r):tn(t)?cs(t)||Hu(e,t,o,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qu(e,t,r,a))?(pl(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&fl(e,t,r,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Qe(r))?pl(e,Wt(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),fl(e,t,r,a))};function qu(e,t,o,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&hl(t)&&Ie(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return hl(t)&&Qe(o)?!1:t in e}const vl={};/*! #__NO_SIDE_EFFECTS__ */function Gu(e,t,o){const r=it(e,t);rn(r)&&nt(r,t);class n extends Gs{constructor(a){super(r,a,o)}}return n.def=r,n}const Ju=typeof HTMLElement<"u"?HTMLElement:class{};class Gs extends Ju{constructor(t,o={},r=zl){super(),this._def=t,this._props=o,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==zl?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Gs){this._parent=t;break}this._instance||(this._resolved?this._mount(this._def):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._inheritParentContext(t))}_inheritParentContext(t=this._parent){t&&this._app&&Object.setPrototypeOf(this._app._context.provides,t._instance.provides)}disconnectedCallback(){this._connected=!1,Bt(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,n=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:a}=r;let i;if(s&&!be(s))for(const l in s){const h=s[l];(h===Number||h&&h.type===Number)&&(l in this._props&&(this._props[l]=gs(this._props[l])),(i||(i=Object.create(null)))[Wt(l)]=!0)}this._numberProps=i,this._resolveProps(r),this.shadowRoot&&this._applyStyles(a),this._mount(r)},o=this._def.__asyncLoader;o?this._pendingResolve=o().then(r=>{r.configureApp=this._def.configureApp,t(this._def=r,!0)}):t(this._def)}_mount(t){this._app=this._createApp(t),this._inheritParentContext(),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const o=this._instance&&this._instance.exposed;if(o)for(const r in o)Re(this,r)||Object.defineProperty(this,r,{get:()=>pe(o[r])})}_resolveProps(t){const{props:o}=t,r=be(o)?o:Object.keys(o||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n]);for(const n of r.map(Wt))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(s){this._setProp(n,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const o=this.hasAttribute(t);let r=o?this.getAttribute(t):vl;const n=Wt(t);o&&this._numberProps&&this._numberProps[n]&&(r=gs(r)),this._setProp(n,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,o,r=!0,n=!1){if(o!==this._props[t]&&(o===vl?delete this._props[t]:(this._props[t]=o,t==="key"&&this._app&&(this._app._ceVNode.key=o)),n&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),o===!0?this.setAttribute(Lt(t),""):typeof o=="string"||typeof o=="number"?this.setAttribute(Lt(t),o+""):o||this.removeAttribute(Lt(t)),s&&s.observe(this,{attributes:!0})}}_update(){const t=this._createVNode();this._app&&(t.appContext=this._app._context),tf(t,this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const o=et(this._def,nt(t,this._props));return this._instance||(o.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const n=(s,a)=>{this.dispatchEvent(new CustomEvent(s,rn(a[0])?nt({detail:a},a[0]):{detail:a}))};r.emit=(s,...a)=>{n(s,a),Lt(s)!==s&&n(Lt(s),a)},this._setParent()}),o}_applyStyles(t,o){if(!t)return;if(o){if(o===this._def||this._styleChildren.has(o))return;this._styleChildren.add(o)}const r=this._nonce;for(let n=t.length-1;n>=0;n--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=t[n],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let o;for(;o=this.firstChild;){const r=o.nodeType===1&&o.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(o),this.removeChild(o)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),o=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const n=t[r],s=n.getAttribute("name")||"default",a=this._slots[s],i=n.parentNode;if(a)for(const l of a){if(o&&l.nodeType===1){const h=o+"-s",m=document.createTreeWalker(l,1);l.setAttribute(h,"");let v;for(;v=m.nextNode();)v.setAttribute(h,"")}i.insertBefore(l,n)}else for(;n.firstChild;)i.insertBefore(n.firstChild,n);i.removeChild(n)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}const Hn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return be(t)?o=>sn(t,o):t};function Yu(e){e.target.composing=!0}function yl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ar=Symbol("_assign"),jt={created(e,{modifiers:{lazy:t,trim:o,number:r}},n){e[ar]=Hn(n);const s=r||n.props&&n.props.type==="number";Vo(e,t?"change":"input",a=>{if(a.target.composing)return;let i=e.value;o&&(i=i.trim()),s&&(i=an(i)),e[ar](i)}),o&&Vo(e,"change",()=>{e.value=e.value.trim()}),t||(Vo(e,"compositionstart",Yu),Vo(e,"compositionend",yl),Vo(e,"change",yl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:r,trim:n,number:s}},a){if(e[ar]=Hn(a),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?an(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===o||n&&e.value.trim()===l)||(e.value=l))}},bl={deep:!0,created(e,{value:t,modifiers:{number:o}},r){const n=on(t);Vo(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>o?an(jn(a)):jn(a));e[ar](e.multiple?n?new Set(s):s:s[0]),e._assigning=!0,Bt(()=>{e._assigning=!1})}),e[ar]=Hn(r)},mounted(e,{value:t}){_l(e,t)},beforeUpdate(e,t,o){e[ar]=Hn(o)},updated(e,{value:t}){e._assigning||_l(e,t)}};function _l(e,t){const o=e.multiple,r=be(t);if(!(o&&!r&&!on(t))){for(let n=0,s=e.options.length;n<s;n++){const a=e.options[n],i=jn(a);if(o)if(r){const l=typeof i;l==="string"||l==="number"?a.selected=t.some(h=>String(h)===String(i)):a.selected=xc(t,i)>-1}else a.selected=t.has(i);else if(dn(jn(a),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function jn(e){return"_value"in e?e._value:e.value}const Xu=["ctrl","shift","alt","meta"],Qu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xu.some(o=>e[`${o}Key`]&&!t.includes(o))},Mt=(e,t)=>{const o=e._withMods||(e._withMods={}),r=t.join(".");return o[r]||(o[r]=(n,...s)=>{for(let a=0;a<t.length;a++){const i=Qu[t[a]];if(i&&i(n,t))return}return e(n,...s)})},ef=nt({patchProp:Ku},Iu);let $l;function wl(){return $l||($l=Gd(ef))}const tf=(...e)=>{wl().render(...e)},zl=(...e)=>{const t=wl().createApp(...e),{mount:o}=t;return t.mount=r=>{const n=rf(r);if(!n)return;const s=t._component;!Ie(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=o(n,!1,of(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function of(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function rf(e){return Qe(e)?document.querySelector(e):e}const _={debug:(e,...t)=>{},info:(e,...t)=>{},warn:(e,...t)=>{console.warn(`⚠️ ${e}`,...t)},error:(e,...t)=>{console.error(`❌ ${e}`,...t)},success:(e,...t)=>{},process:(e,...t)=>{},time:e=>{},timeEnd:e=>{},group:e=>{},groupEnd:()=>{}};var nf=Object.defineProperty,Un=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,El=(e,t,o)=>t in e?nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ir=(e,t)=>{for(var o in t||(t={}))Al.call(t,o)&&El(e,o,t[o]);if(Un)for(var o of Un(t))Cl.call(t,o)&&El(e,o,t[o]);return e},Il=(e,t)=>{var o={};for(var r in e)Al.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&Un)for(var r of Un(e))t.indexOf(r)<0&&Cl.call(e,r)&&(o[r]=e[r]);return o};const Pl="[vue-draggable-plus]: ";function sf(e){console.warn(Pl+e)}function af(e){console.error(Pl+e)}function Sl(e,t,o){return o>=0&&o<e.length&&e.splice(o,0,e.splice(t,1)[0]),e}function lf(e){return e.replace(/-(\w)/g,(t,o)=>o?o.toUpperCase():"")}function cf(e){return Object.keys(e).reduce((t,o)=>(typeof e[o]<"u"&&(t[lf(o)]=e[o]),t),{})}function Tl(e,t){return Array.isArray(e)&&e.splice(t,1),e}function Dl(e,t,o){return Array.isArray(e)&&e.splice(t,0,o),e}function df(e){return typeof e>"u"}function uf(e){return typeof e=="string"}function xl(e,t,o){const r=e.children[o];e.insertBefore(t,r)}function Js(e){e.parentNode&&e.parentNode.removeChild(e)}function ff(e,t=document){var o;let r=null;return typeof t?.querySelector=="function"?r=(o=t?.querySelector)==null?void 0:o.call(t,e):r=document.querySelector(e),r||sf(`Element not found: ${e}`),r}function pf(e,t,o=null){return function(...r){return e.apply(o,r),t.apply(o,r)}}function gf(e,t){const o=ir({},e);return Object.keys(t).forEach(r=>{o[r]?o[r]=pf(e[r],t[r]):o[r]=t[r]}),o}function mf(e){return e instanceof HTMLElement}function Ml(e,t){Object.keys(e).forEach(o=>{t(o,e[o])})}function hf(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const vf=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Nl(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),o.push.apply(o,r)}return o}function so(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Nl(Object(o),!0).forEach(function(r){yf(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Nl(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function Vn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vn=function(t){return typeof t}:Vn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}function yf(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function vo(){return vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},vo.apply(this,arguments)}function bf(e,t){if(e==null)return{};var o={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function _f(e,t){if(e==null)return{};var o=bf(e,t),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var $f="1.15.2";function yo(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var bo=yo(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Lr=yo(/Edge/i),Fl=yo(/firefox/i),Rr=yo(/safari/i)&&!yo(/chrome/i)&&!yo(/android/i),Ol=yo(/iP(ad|od|hone)/i),kl=yo(/chrome/i)&&yo(/android/i),Ll={capture:!1,passive:!1};function Be(e,t,o){e.addEventListener(t,o,!bo&&Ll)}function ke(e,t,o){e.removeEventListener(t,o,!bo&&Ll)}function Zn(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function wf(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Gt(e,t,o,r){if(e){o=o||document;do{if(t!=null&&(t[0]===">"?e.parentNode===o&&Zn(e,t):Zn(e,t))||r&&e===o)return e;if(e===o)break}while(e=wf(e))}return null}var Rl=/\s+/g;function Nt(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Rl," ").replace(" "+t+" "," ");e.className=(r+(o?" "+t:"")).replace(Rl," ")}}function Ce(e,t,o){var r=e&&e.style;if(r){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),t===void 0?o:o[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=o+(typeof o=="string"?"":"px")}}function lr(e,t){var o="";if(typeof e=="string")o=e;else do{var r=Ce(e,"transform");r&&r!=="none"&&(o=r+" "+o)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function Bl(e,t,o){if(e){var r=e.getElementsByTagName(t),n=0,s=r.length;if(o)for(;n<s;n++)o(r[n],n);return r}return[]}function ao(){var e=document.scrollingElement;return e||document.documentElement}function lt(e,t,o,r,n){if(!(!e.getBoundingClientRect&&e!==window)){var s,a,i,l,h,m,v;if(e!==window&&e.parentNode&&e!==ao()?(s=e.getBoundingClientRect(),a=s.top,i=s.left,l=s.bottom,h=s.right,m=s.height,v=s.width):(a=0,i=0,l=window.innerHeight,h=window.innerWidth,m=window.innerHeight,v=window.innerWidth),(t||o)&&e!==window&&(n=n||e.parentNode,!bo))do if(n&&n.getBoundingClientRect&&(Ce(n,"transform")!=="none"||o&&Ce(n,"position")!=="static")){var A=n.getBoundingClientRect();a-=A.top+parseInt(Ce(n,"border-top-width")),i-=A.left+parseInt(Ce(n,"border-left-width")),l=a+s.height,h=i+s.width;break}while(n=n.parentNode);if(r&&e!==window){var z=lr(n||e),x=z&&z.a,k=z&&z.d;z&&(a/=k,i/=x,v/=x,m/=k,l=a+m,h=i+v)}return{top:a,left:i,bottom:l,right:h,width:v,height:m}}}function Hl(e,t,o){for(var r=Po(e,!0),n=lt(e)[t];r;){var s=lt(r)[o],a=void 0;if(a=n>=s,!a)return r;if(r===ao())break;r=Po(r,!1)}return!1}function cr(e,t,o,r){for(var n=0,s=0,a=e.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==Ee.ghost&&(r||a[s]!==Ee.dragged)&&Gt(a[s],o.draggable,e,!1)){if(n===t)return a[s];n++}s++}return null}function Ys(e,t){for(var o=e.lastElementChild;o&&(o===Ee.ghost||Ce(o,"display")==="none"||t&&!Zn(o,t));)o=o.previousElementSibling;return o||null}function Ut(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ee.clone&&(!t||Zn(e,t))&&o++;return o}function jl(e){var t=0,o=0,r=ao();if(e)do{var n=lr(e),s=n.a,a=n.d;t+=e.scrollLeft*s,o+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,o]}function zf(e,t){for(var o in e)if(e.hasOwnProperty(o)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[o][r])return Number(o)}return-1}function Po(e,t){if(!e||!e.getBoundingClientRect)return ao();var o=e,r=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=Ce(o);if(o.clientWidth<o.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return ao();if(r||t)return o;r=!0}}while(o=o.parentNode);return ao()}function Af(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function Xs(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Br;function Ul(e,t){return function(){if(!Br){var o=arguments,r=this;o.length===1?e.call(r,o[0]):e.apply(r,o),Br=setTimeout(function(){Br=void 0},t)}}}function Cf(){clearTimeout(Br),Br=void 0}function Vl(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function Zl(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function Wl(e,t,o){var r={};return Array.from(e.children).forEach(function(n){var s,a,i,l;if(!(!Gt(n,t.draggable,e,!1)||n.animated||n===o)){var h=lt(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,h.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,h.top),r.right=Math.max((i=r.right)!==null&&i!==void 0?i:-1/0,h.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,h.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Ft="Sortable"+new Date().getTime();function Ef(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(Ce(r,"display")==="none"||r===Ee.ghost)){e.push({target:r,rect:lt(r)});var n=so({},e[e.length-1].rect);if(r.thisAnimationDuration){var s=lr(r,!0);s&&(n.top-=s.f,n.left-=s.e)}r.fromRect=n}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(zf(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var n=!1,s=0;e.forEach(function(a){var i=0,l=a.target,h=l.fromRect,m=lt(l),v=l.prevFromRect,A=l.prevToRect,z=a.rect,x=lr(l,!0);x&&(m.top-=x.f,m.left-=x.e),l.toRect=m,l.thisAnimationDuration&&Xs(v,m)&&!Xs(h,m)&&(z.top-m.top)/(z.left-m.left)===(h.top-m.top)/(h.left-m.left)&&(i=Pf(z,v,A,r.options)),Xs(m,h)||(l.prevFromRect=h,l.prevToRect=m,i||(i=r.options.animation),r.animate(l,z,m,i)),i&&(n=!0,s=Math.max(s,i),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},i),l.thisAnimationDuration=i)}),clearTimeout(t),n?t=setTimeout(function(){typeof o=="function"&&o()},s):typeof o=="function"&&o(),e=[]},animate:function(o,r,n,s){if(s){Ce(o,"transition",""),Ce(o,"transform","");var a=lr(this.el),i=a&&a.a,l=a&&a.d,h=(r.left-n.left)/(i||1),m=(r.top-n.top)/(l||1);o.animatingX=!!h,o.animatingY=!!m,Ce(o,"transform","translate3d("+h+"px,"+m+"px,0)"),this.forRepaintDummy=If(o),Ce(o,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Ce(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){Ce(o,"transition",""),Ce(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},s)}}}}function If(e){return e.offsetWidth}function Pf(e,t,o,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*r.animation}var dr=[],Qs={initializeByDefault:!0},Hr={mount:function(e){for(var t in Qs)Qs.hasOwnProperty(t)&&!(t in e)&&(e[t]=Qs[t]);dr.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),dr.push(e)},pluginEvent:function(e,t,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var n=e+"Global";dr.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][n]&&t[s.pluginName][n](so({sortable:t},o)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](so({sortable:t},o)))})},initializePlugins:function(e,t,o,r){dr.forEach(function(a){var i=a.pluginName;if(!(!e.options[i]&&!a.initializeByDefault)){var l=new a(e,t,e.options);l.sortable=e,l.options=e.options,e[i]=l,vo(o,l.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var s=this.modifyOption(e,n,e.options[n]);typeof s<"u"&&(e.options[n]=s)}},getEventProperties:function(e,t){var o={};return dr.forEach(function(r){typeof r.eventProperties=="function"&&vo(o,r.eventProperties.call(t[r.pluginName],e))}),o},modifyOption:function(e,t,o){var r;return dr.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[t]=="function"&&(r=n.optionListeners[t].call(e[n.pluginName],o))}),r}};function Sf(e){var t=e.sortable,o=e.rootEl,r=e.name,n=e.targetEl,s=e.cloneEl,a=e.toEl,i=e.fromEl,l=e.oldIndex,h=e.newIndex,m=e.oldDraggableIndex,v=e.newDraggableIndex,A=e.originalEvent,z=e.putSortable,x=e.extraEventProperties;if(t=t||o&&o[Ft],!!t){var k,O=t.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!bo&&!Lr?k=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(r,!0,!0)),k.to=a||o,k.from=i||o,k.item=n||o,k.clone=s,k.oldIndex=l,k.newIndex=h,k.oldDraggableIndex=m,k.newDraggableIndex=v,k.originalEvent=A,k.pullMode=z?z.lastPutMode:void 0;var I=so(so({},x),Hr.getEventProperties(r,t));for(var c in I)k[c]=I[c];o&&o.dispatchEvent(k),O[D]&&O[D].call(t,k)}}var Tf=["evt"],It=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,n=_f(o,Tf);Hr.pluginEvent.bind(Ee)(e,t,so({dragEl:le,parentEl:rt,ghostEl:Pe,rootEl:Xe,nextEl:Zo,lastDownEl:Wn,cloneEl:tt,cloneHidden:So,dragStarted:Ur,putSortable:gt,activeSortable:Ee.active,originalEvent:r,oldIndex:ur,oldDraggableIndex:jr,newIndex:Ot,newDraggableIndex:To,hideGhostForTarget:Ql,unhideGhostForTarget:ec,cloneNowHidden:function(){So=!0},cloneNowShown:function(){So=!1},dispatchSortableEvent:function(s){Ct({sortable:t,name:s,originalEvent:r})}},n))};function Ct(e){Sf(so({putSortable:gt,cloneEl:tt,targetEl:le,rootEl:Xe,oldIndex:ur,oldDraggableIndex:jr,newIndex:Ot,newDraggableIndex:To},e))}var le,rt,Pe,Xe,Zo,Wn,tt,So,ur,Ot,jr,To,Kn,gt,fr=!1,qn=!1,Gn=[],Wo,Jt,ea,ta,Kl,ql,Ur,pr,Vr,Zr=!1,Jn=!1,Yn,yt,oa=[],ra=!1,Xn=[],Qn=typeof document<"u",es=Ol,Gl=Lr||bo?"cssFloat":"float",Df=Qn&&!kl&&!Ol&&"draggable"in document.createElement("div"),Jl=function(){if(Qn){if(bo)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Yl=function(e,t){var o=Ce(e),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=cr(e,0,t),s=cr(e,1,t),a=n&&Ce(n),i=s&&Ce(s),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+lt(n).width,h=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+lt(s).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&a.float!=="none"){var m=a.float==="left"?"left":"right";return s&&(i.clear==="both"||i.clear===m)?"vertical":"horizontal"}return n&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=r&&o[Gl]==="none"||s&&o[Gl]==="none"&&l+h>r)?"vertical":"horizontal"},xf=function(e,t,o){var r=o?e.left:e.top,n=o?e.right:e.bottom,s=o?e.width:e.height,a=o?t.left:t.top,i=o?t.right:t.bottom,l=o?t.width:t.height;return r===a||n===i||r+s/2===a+l/2},Mf=function(e,t){var o;return Gn.some(function(r){var n=r[Ft].options.emptyInsertThreshold;if(!(!n||Ys(r))){var s=lt(r),a=e>=s.left-n&&e<=s.right+n,i=t>=s.top-n&&t<=s.bottom+n;if(a&&i)return o=r}}),o},Xl=function(e){function t(n,s){return function(a,i,l,h){var m=a.options.group.name&&i.options.group.name&&a.options.group.name===i.options.group.name;if(n==null&&(s||m))return!0;if(n==null||n===!1)return!1;if(s&&n==="clone")return n;if(typeof n=="function")return t(n(a,i,l,h),s)(a,i,l,h);var v=(s?a:i).options.group.name;return n===!0||typeof n=="string"&&n===v||n.join&&n.indexOf(v)>-1}}var o={},r=e.group;(!r||Vn(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=t(r.pull,!0),o.checkPut=t(r.put),o.revertClone=r.revertClone,e.group=o},Ql=function(){!Jl&&Pe&&Ce(Pe,"display","none")},ec=function(){!Jl&&Pe&&Ce(Pe,"display","")};Qn&&!kl&&document.addEventListener("click",function(e){if(qn)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),qn=!1,!1},!0);var Ko=function(e){if(le){e=e.touches?e.touches[0]:e;var t=Mf(e.clientX,e.clientY);if(t){var o={};for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[Ft]._onDragOver(o)}}},Nf=function(e){le&&le.parentNode[Ft]._isOutsideThisEl(e.target)};function Ee(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=vo({},t),e[Ft]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Yl(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ee.supportPointer!==!1&&"PointerEvent"in window&&!Rr,emptyInsertThreshold:5};Hr.initializePlugins(this,e,o);for(var r in o)!(r in t)&&(t[r]=o[r]);Xl(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:Df,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Be(e,"pointerdown",this._onTapStart):(Be(e,"mousedown",this._onTapStart),Be(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Be(e,"dragover",this),Be(e,"dragenter",this)),Gn.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),vo(this,Ef())}Ee.prototype={constructor:Ee,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(pr=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,le):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,r=this.options,n=r.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,h=r.filter;if(jf(o),!le&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||r.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Rr&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=Gt(i,r.draggable,o,!1),!(i&&i.animated)&&Wn!==i)){if(ur=Ut(i),jr=Ut(i,r.draggable),typeof h=="function"){if(h.call(this,e,i,this)){Ct({sortable:t,rootEl:l,name:"filter",targetEl:i,toEl:o,fromEl:o}),It("filter",t,{evt:e}),n&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(m){if(m=Gt(l,m.trim(),o,!1),m)return Ct({sortable:t,rootEl:m,name:"filter",targetEl:i,fromEl:o,toEl:o}),It("filter",t,{evt:e}),!0}),h)){n&&e.cancelable&&e.preventDefault();return}r.handle&&!Gt(l,r.handle,o,!1)||this._prepareDragStart(e,a,i)}}},_prepareDragStart:function(e,t,o){var r=this,n=r.el,s=r.options,a=n.ownerDocument,i;if(o&&!le&&o.parentNode===n){var l=lt(o);if(Xe=n,le=o,rt=le.parentNode,Zo=le.nextSibling,Wn=o,Kn=s.group,Ee.dragged=le,Wo={target:le,clientX:(t||e).clientX,clientY:(t||e).clientY},Kl=Wo.clientX-l.left,ql=Wo.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,le.style["will-change"]="all",i=function(){if(It("delayEnded",r,{evt:e}),Ee.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Fl&&r.nativeDraggable&&(le.draggable=!0),r._triggerDragStart(e,t),Ct({sortable:r,name:"choose",originalEvent:e}),Nt(le,s.chosenClass,!0)},s.ignore.split(",").forEach(function(h){Bl(le,h.trim(),na)}),Be(a,"dragover",Ko),Be(a,"mousemove",Ko),Be(a,"touchmove",Ko),Be(a,"mouseup",r._onDrop),Be(a,"touchend",r._onDrop),Be(a,"touchcancel",r._onDrop),Fl&&this.nativeDraggable&&(this.options.touchStartThreshold=4,le.draggable=!0),It("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Lr||bo))){if(Ee.eventCanceled){this._onDrop();return}Be(a,"mouseup",r._disableDelayedDrag),Be(a,"touchend",r._disableDelayedDrag),Be(a,"touchcancel",r._disableDelayedDrag),Be(a,"mousemove",r._delayedDragTouchMoveHandler),Be(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&Be(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,s.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){le&&na(le),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ke(e,"mouseup",this._disableDelayedDrag),ke(e,"touchend",this._disableDelayedDrag),ke(e,"touchcancel",this._disableDelayedDrag),ke(e,"mousemove",this._delayedDragTouchMoveHandler),ke(e,"touchmove",this._delayedDragTouchMoveHandler),ke(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Be(document,"pointermove",this._onTouchMove):t?Be(document,"touchmove",this._onTouchMove):Be(document,"mousemove",this._onTouchMove):(Be(le,"dragend",this),Be(Xe,"dragstart",this._onDragStart));try{document.selection?os(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(fr=!1,Xe&&le){It("dragStarted",this,{evt:t}),this.nativeDraggable&&Be(document,"dragover",Nf);var o=this.options;!e&&Nt(le,o.dragClass,!1),Nt(le,o.ghostClass,!0),Ee.active=this,e&&this._appendGhost(),Ct({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Jt){this._lastX=Jt.clientX,this._lastY=Jt.clientY,Ql();for(var e=document.elementFromPoint(Jt.clientX,Jt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Jt.clientX,Jt.clientY),e!==t);)t=e;if(le.parentNode[Ft]._isOutsideThisEl(e),t)do{if(t[Ft]){var o=void 0;if(o=t[Ft]._onDragOver({clientX:Jt.clientX,clientY:Jt.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);ec()}},_onTouchMove:function(e){if(Wo){var t=this.options,o=t.fallbackTolerance,r=t.fallbackOffset,n=e.touches?e.touches[0]:e,s=Pe&&lr(Pe,!0),a=Pe&&s&&s.a,i=Pe&&s&&s.d,l=es&&yt&&jl(yt),h=(n.clientX-Wo.clientX+r.x)/(a||1)+(l?l[0]-oa[0]:0)/(a||1),m=(n.clientY-Wo.clientY+r.y)/(i||1)+(l?l[1]-oa[1]:0)/(i||1);if(!Ee.active&&!fr){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Pe){s?(s.e+=h-(ea||0),s.f+=m-(ta||0)):s={a:1,b:0,c:0,d:1,e:h,f:m};var v="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Ce(Pe,"webkitTransform",v),Ce(Pe,"mozTransform",v),Ce(Pe,"msTransform",v),Ce(Pe,"transform",v),ea=h,ta=m,Jt=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pe){var e=this.options.fallbackOnBody?document.body:Xe,t=lt(le,!0,es,!0,e),o=this.options;if(es){for(yt=e;Ce(yt,"position")==="static"&&Ce(yt,"transform")==="none"&&yt!==document;)yt=yt.parentNode;yt!==document.body&&yt!==document.documentElement?(yt===document&&(yt=ao()),t.top+=yt.scrollTop,t.left+=yt.scrollLeft):yt=ao(),oa=jl(yt)}Pe=le.cloneNode(!0),Nt(Pe,o.ghostClass,!1),Nt(Pe,o.fallbackClass,!0),Nt(Pe,o.dragClass,!0),Ce(Pe,"transition",""),Ce(Pe,"transform",""),Ce(Pe,"box-sizing","border-box"),Ce(Pe,"margin",0),Ce(Pe,"top",t.top),Ce(Pe,"left",t.left),Ce(Pe,"width",t.width),Ce(Pe,"height",t.height),Ce(Pe,"opacity","0.8"),Ce(Pe,"position",es?"absolute":"fixed"),Ce(Pe,"zIndex","100000"),Ce(Pe,"pointerEvents","none"),Ee.ghost=Pe,e.appendChild(Pe),Ce(Pe,"transform-origin",Kl/parseInt(Pe.style.width)*100+"% "+ql/parseInt(Pe.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,r=e.dataTransfer,n=o.options;if(It("dragStart",this,{evt:e}),Ee.eventCanceled){this._onDrop();return}It("setupClone",this),Ee.eventCanceled||(tt=Zl(le),tt.removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),Nt(tt,this.options.chosenClass,!1),Ee.clone=tt),o.cloneId=os(function(){It("clone",o),!Ee.eventCanceled&&(o.options.removeCloneOnHide||Xe.insertBefore(tt,le),o._hideClone(),Ct({sortable:o,name:"clone"}))}),!t&&Nt(le,n.dragClass,!0),t?(qn=!0,o._loopId=setInterval(o._emulateDragOver,50)):(ke(document,"mouseup",o._onDrop),ke(document,"touchend",o._onDrop),ke(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(o,r,le)),Be(document,"drop",o),Ce(le,"transform","translateZ(0)")),fr=!0,o._dragStartId=os(o._dragStarted.bind(o,t,e)),Be(document,"selectstart",o),Ur=!0,Rr&&Ce(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,r,n,s,a=this.options,i=a.group,l=Ee.active,h=Kn===i,m=a.sort,v=gt||l,A,z=this,x=!1;if(ra)return;function k(N,F){It(N,z,so({evt:e,isOwner:h,axis:A?"vertical":"horizontal",revert:s,dragRect:r,targetRect:n,canSort:m,fromSortable:v,target:o,completed:D,onMove:function(Z,H){return ts(Xe,t,le,r,Z,lt(Z),e,H)},changed:I},F))}function O(){k("dragOverAnimationCapture"),z.captureAnimationState(),z!==v&&v.captureAnimationState()}function D(N){return k("dragOverCompleted",{insertion:N}),N&&(h?l._hideClone():l._showClone(z),z!==v&&(Nt(le,gt?gt.options.ghostClass:l.options.ghostClass,!1),Nt(le,a.ghostClass,!0)),gt!==z&&z!==Ee.active?gt=z:z===Ee.active&&gt&&(gt=null),v===z&&(z._ignoreWhileAnimating=o),z.animateAll(function(){k("dragOverAnimationComplete"),z._ignoreWhileAnimating=null}),z!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(o===le&&!le.animated||o===t&&!o.animated)&&(pr=null),!a.dragoverBubble&&!e.rootEl&&o!==document&&(le.parentNode[Ft]._isOutsideThisEl(e.target),!N&&Ko(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function I(){Ot=Ut(le),To=Ut(le,a.draggable),Ct({sortable:z,name:"change",toEl:t,newIndex:Ot,newDraggableIndex:To,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=Gt(o,a.draggable,t,!0),k("dragOver"),Ee.eventCanceled)return x;if(le.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||z._ignoreWhileAnimating===o)return D(!1);if(qn=!1,l&&!a.disabled&&(h?m||(s=rt!==Xe):gt===this||(this.lastPutMode=Kn.checkPull(this,l,le,e))&&i.checkPut(this,l,le,e))){if(A=this._getDirection(e,o)==="vertical",r=lt(le),k("dragOverValid"),Ee.eventCanceled)return x;if(s)return rt=Xe,O(),this._hideClone(),k("revert"),Ee.eventCanceled||(Zo?Xe.insertBefore(le,Zo):Xe.appendChild(le)),D(!0);var c=Ys(t,a.draggable);if(!c||Lf(e,A,this)&&!c.animated){if(c===le)return D(!1);if(c&&t===e.target&&(o=c),o&&(n=lt(o)),ts(Xe,t,le,r,o,n,e,!!o)!==!1)return O(),c&&c.nextSibling?t.insertBefore(le,c.nextSibling):t.appendChild(le),rt=t,I(),D(!0)}else if(c&&kf(e,A,this)){var d=cr(t,0,a,!0);if(d===le)return D(!1);if(o=d,n=lt(o),ts(Xe,t,le,r,o,n,e,!1)!==!1)return O(),t.insertBefore(le,d),rt=t,I(),D(!0)}else if(o.parentNode===t){n=lt(o);var b=0,E,w=le.parentNode!==t,u=!xf(le.animated&&le.toRect||r,o.animated&&o.toRect||n,A),f=A?"top":"left",g=Hl(o,"top","top")||Hl(le,"top","top"),y=g?g.scrollTop:void 0;pr!==o&&(E=n[f],Zr=!1,Jn=!u&&a.invertSwap||w),b=Rf(e,o,n,A,u?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Jn,pr===o);var p;if(b!==0){var C=Ut(le);do C-=b,p=rt.children[C];while(p&&(Ce(p,"display")==="none"||p===Pe))}if(b===0||p===o)return D(!1);pr=o,Vr=b;var S=o.nextElementSibling,P=!1;P=b===1;var T=ts(Xe,t,le,r,o,n,e,P);if(T!==!1)return(T===1||T===-1)&&(P=T===1),ra=!0,setTimeout(Of,30),O(),P&&!S?t.appendChild(le):o.parentNode.insertBefore(le,P?S:o),g&&Vl(g,0,y-g.scrollTop),rt=le.parentNode,E!==void 0&&!Jn&&(Yn=Math.abs(E-lt(o)[f])),I(),D(!0)}if(t.contains(le))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ke(document,"mousemove",this._onTouchMove),ke(document,"touchmove",this._onTouchMove),ke(document,"pointermove",this._onTouchMove),ke(document,"dragover",Ko),ke(document,"mousemove",Ko),ke(document,"touchmove",Ko)},_offUpEvents:function(){var e=this.el.ownerDocument;ke(e,"mouseup",this._onDrop),ke(e,"touchend",this._onDrop),ke(e,"pointerup",this._onDrop),ke(e,"touchcancel",this._onDrop),ke(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(Ot=Ut(le),To=Ut(le,o.draggable),It("drop",this,{evt:e}),rt=le&&le.parentNode,Ot=Ut(le),To=Ut(le,o.draggable),Ee.eventCanceled){this._nulling();return}fr=!1,Jn=!1,Zr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),sa(this.cloneId),sa(this._dragStartId),this.nativeDraggable&&(ke(document,"drop",this),ke(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rr&&Ce(document.body,"user-select",""),Ce(le,"transform",""),e&&(Ur&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Pe&&Pe.parentNode&&Pe.parentNode.removeChild(Pe),(Xe===rt||gt&&gt.lastPutMode!=="clone")&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),le&&(this.nativeDraggable&&ke(le,"dragend",this),na(le),le.style["will-change"]="",Ur&&!fr&&Nt(le,gt?gt.options.ghostClass:this.options.ghostClass,!1),Nt(le,this.options.chosenClass,!1),Ct({sortable:this,name:"unchoose",toEl:rt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Xe!==rt?(Ot>=0&&(Ct({rootEl:rt,name:"add",toEl:rt,fromEl:Xe,originalEvent:e}),Ct({sortable:this,name:"remove",toEl:rt,originalEvent:e}),Ct({rootEl:rt,name:"sort",toEl:rt,fromEl:Xe,originalEvent:e}),Ct({sortable:this,name:"sort",toEl:rt,originalEvent:e})),gt&&gt.save()):Ot!==ur&&Ot>=0&&(Ct({sortable:this,name:"update",toEl:rt,originalEvent:e}),Ct({sortable:this,name:"sort",toEl:rt,originalEvent:e})),Ee.active&&((Ot==null||Ot===-1)&&(Ot=ur,To=jr),Ct({sortable:this,name:"end",toEl:rt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){It("nulling",this),Xe=le=rt=Pe=Zo=tt=Wn=So=Wo=Jt=Ur=Ot=To=ur=jr=pr=Vr=gt=Kn=Ee.dragged=Ee.ghost=Ee.clone=Ee.active=null,Xn.forEach(function(e){e.checked=!0}),Xn.length=ea=ta=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":le&&(this._onDragOver(e),Ff(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,r=0,n=o.length,s=this.options;r<n;r++)t=o[r],Gt(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Hf(t));return e},sort:function(e,t){var o={},r=this.el;this.toArray().forEach(function(n,s){var a=r.children[s];Gt(a,this.options.draggable,r,!1)&&(o[n]=a)},this),t&&this.captureAnimationState(),e.forEach(function(n){o[n]&&(r.removeChild(o[n]),r.appendChild(o[n]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Gt(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var r=Hr.modifyOption(this,e,t);typeof r<"u"?o[e]=r:o[e]=t,e==="group"&&Xl(o)},destroy:function(){It("destroy",this);var e=this.el;e[Ft]=null,ke(e,"mousedown",this._onTapStart),ke(e,"touchstart",this._onTapStart),ke(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ke(e,"dragover",this),ke(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Gn.splice(Gn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!So){if(It("hideClone",this),Ee.eventCanceled)return;Ce(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),So=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(So){if(It("showClone",this),Ee.eventCanceled)return;le.parentNode==Xe&&!this.options.group.revertClone?Xe.insertBefore(tt,le):Zo?Xe.insertBefore(tt,Zo):Xe.appendChild(tt),this.options.group.revertClone&&this.animate(le,tt),Ce(tt,"display",""),So=!1}}};function Ff(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ts(e,t,o,r,n,s,a,i){var l,h=e[Ft],m=h.options.onMove,v;return window.CustomEvent&&!bo&&!Lr?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=o,l.draggedRect=r,l.related=n||t,l.relatedRect=s||lt(t),l.willInsertAfter=i,l.originalEvent=a,e.dispatchEvent(l),m&&(v=m.call(h,l,a)),v}function na(e){e.draggable=!1}function Of(){ra=!1}function kf(e,t,o){var r=lt(cr(o.el,0,o.options,!0)),n=Wl(o.el,o.options,Pe),s=10;return t?e.clientX<n.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<n.top-s||e.clientY<r.bottom&&e.clientX<r.left}function Lf(e,t,o){var r=lt(Ys(o.el,o.options.draggable)),n=Wl(o.el,o.options,Pe),s=10;return t?e.clientX>n.right+s||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>n.bottom+s||e.clientX>r.right&&e.clientY>r.top}function Rf(e,t,o,r,n,s,a,i){var l=r?e.clientY:e.clientX,h=r?o.height:o.width,m=r?o.top:o.left,v=r?o.bottom:o.right,A=!1;if(!a){if(i&&Yn<h*n){if(!Zr&&(Vr===1?l>m+h*s/2:l<v-h*s/2)&&(Zr=!0),Zr)A=!0;else if(Vr===1?l<m+Yn:l>v-Yn)return-Vr}else if(l>m+h*(1-n)/2&&l<v-h*(1-n)/2)return Bf(t)}return A=A||a,A&&(l<m+h*s/2||l>v-h*s/2)?l>m+h/2?1:-1:0}function Bf(e){return Ut(le)<Ut(e)?1:-1}function Hf(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,r=0;o--;)r+=t.charCodeAt(o);return r.toString(36)}function jf(e){Xn.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var r=t[o];r.checked&&Xn.push(r)}}function os(e){return setTimeout(e,0)}function sa(e){return clearTimeout(e)}Qn&&Be(document,"touchmove",function(e){(Ee.active||fr)&&e.cancelable&&e.preventDefault()}),Ee.utils={on:Be,off:ke,css:Ce,find:Bl,is:function(e,t){return!!Gt(e,t,e,!1)},extend:Af,throttle:Ul,closest:Gt,toggleClass:Nt,clone:Zl,index:Ut,nextTick:os,cancelNextTick:sa,detectDirection:Yl,getChild:cr},Ee.get=function(e){return e[Ft]},Ee.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ee.utils=so(so({},Ee.utils),r.utils)),Hr.mount(r)})},Ee.create=function(e,t){return new Ee(e,t)},Ee.version=$f;var ct=[],Wr,aa,ia=!1,la,ca,rs,Kr;function Uf(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?Be(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Be(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Be(document,"touchmove",this._handleFallbackAutoScroll):Be(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?ke(document,"dragover",this._handleAutoScroll):(ke(document,"pointermove",this._handleFallbackAutoScroll),ke(document,"touchmove",this._handleFallbackAutoScroll),ke(document,"mousemove",this._handleFallbackAutoScroll)),tc(),ns(),Cf()},nulling:function(){rs=aa=Wr=ia=Kr=la=ca=null,ct.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var r=this,n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(n,s);if(rs=t,o||this.options.forceAutoScrollFallback||Lr||bo||Rr){da(t,this.options,a,o);var i=Po(a,!0);ia&&(!Kr||n!==la||s!==ca)&&(Kr&&tc(),Kr=setInterval(function(){var l=Po(document.elementFromPoint(n,s),!0);l!==i&&(i=l,ns()),da(t,r.options,l,o)},10),la=n,ca=s)}else{if(!this.options.bubbleScroll||Po(a,!0)===ao()){ns();return}da(t,this.options,Po(a,!1),!1)}}},vo(e,{pluginName:"scroll",initializeByDefault:!0})}function ns(){ct.forEach(function(e){clearInterval(e.pid)}),ct=[]}function tc(){clearInterval(Kr)}var da=Ul(function(e,t,o,r){if(t.scroll){var n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,i=t.scrollSpeed,l=ao(),h=!1,m;aa!==o&&(aa=o,ns(),Wr=t.scroll,m=t.scrollFn,Wr===!0&&(Wr=Po(o,!0)));var v=0,A=Wr;do{var z=A,x=lt(z),k=x.top,O=x.bottom,D=x.left,I=x.right,c=x.width,d=x.height,b=void 0,E=void 0,w=z.scrollWidth,u=z.scrollHeight,f=Ce(z),g=z.scrollLeft,y=z.scrollTop;z===l?(b=c<w&&(f.overflowX==="auto"||f.overflowX==="scroll"||f.overflowX==="visible"),E=d<u&&(f.overflowY==="auto"||f.overflowY==="scroll"||f.overflowY==="visible")):(b=c<w&&(f.overflowX==="auto"||f.overflowX==="scroll"),E=d<u&&(f.overflowY==="auto"||f.overflowY==="scroll"));var p=b&&(Math.abs(I-n)<=a&&g+c<w)-(Math.abs(D-n)<=a&&!!g),C=E&&(Math.abs(O-s)<=a&&y+d<u)-(Math.abs(k-s)<=a&&!!y);if(!ct[v])for(var S=0;S<=v;S++)ct[S]||(ct[S]={});(ct[v].vx!=p||ct[v].vy!=C||ct[v].el!==z)&&(ct[v].el=z,ct[v].vx=p,ct[v].vy=C,clearInterval(ct[v].pid),(p!=0||C!=0)&&(h=!0,ct[v].pid=setInterval(function(){r&&this.layer===0&&Ee.active._onTouchMove(rs);var P=ct[this.layer].vy?ct[this.layer].vy*i:0,T=ct[this.layer].vx?ct[this.layer].vx*i:0;typeof m=="function"&&m.call(Ee.dragged.parentNode[Ft],T,P,e,rs,ct[this.layer].el)!=="continue"||Vl(ct[this.layer].el,T,P)}.bind({layer:v}),24))),v++}while(t.bubbleScroll&&A!==l&&(A=Po(A,!1)));ia=h}},30),oc=function(e){var t=e.originalEvent,o=e.putSortable,r=e.dragEl,n=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var l=o||n;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,m=document.elementFromPoint(h.clientX,h.clientY);i(),l&&!l.el.contains(m)&&(s("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function ua(){}ua.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=cr(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:oc},vo(ua,{pluginName:"revertOnSpill"});function fa(){}fa.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,r=o||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:oc},vo(fa,{pluginName:"removeOnSpill"}),Ee.mount(new Uf),Ee.mount(fa,ua);function Vf(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Zf(e){On()&&Ir(e)}function Wf(e){On()?Ro(e):Bt(e)}let rc=null,nc=null;function sc(e=null,t=null){rc=e,nc=t}function Kf(){return{data:rc,clonedData:nc}}const ac=Symbol("cloneElement");function qf(...e){var t,o;const r=(t=On())==null?void 0:t.proxy;let n=null;const s=e[0];let[,a,i]=e;Array.isArray(pe(a))||(i=a,a=null);let l=null;const{immediate:h=!0,clone:m=Vf,customUpdate:v}=(o=pe(i))!=null?o:{};function A(u){var f;const{from:g,oldIndex:y,item:p}=u;n=Array.from(g.childNodes);const C=pe((f=pe(a))==null?void 0:f[y]),S=m(C);sc(C,S),p[ac]=S}function z(u){const f=u.item[ac];if(!df(f)){if(Js(u.item),st(a)){const g=[...pe(a)];a.value=Dl(g,u.newDraggableIndex,f);return}Dl(pe(a),u.newDraggableIndex,f)}}function x(u){const{from:f,item:g,oldIndex:y,oldDraggableIndex:p,pullMode:C,clone:S}=u;if(xl(f,g,y),C==="clone"){Js(S);return}if(st(a)){const P=[...pe(a)];a.value=Tl(P,p);return}Tl(pe(a),p)}function k(u){if(v){v(u);return}const{from:f,item:g,oldIndex:y,oldDraggableIndex:p,newDraggableIndex:C}=u;if(Js(g),xl(f,g,y),st(a)){const S=[...pe(a)];a.value=Sl(S,p,C);return}Sl(pe(a),p,C)}function O(u){const{newIndex:f,oldIndex:g,from:y,to:p}=u;let C=null;const S=f===g&&y===p;try{if(S){let P=null;n?.some((T,N)=>{if(P&&n?.length!==p.childNodes.length)return y.insertBefore(P,T.nextSibling),!0;const F=p.childNodes[N];P=p?.replaceChild(T,F)})}}catch(P){C=P}finally{n=null}Bt(()=>{if(sc(),C)throw C})}const D={onUpdate:k,onStart:A,onAdd:z,onRemove:x,onEnd:O};function I(u){const f=pe(s);return u||(u=uf(f)?ff(f,r?.$el):f),u&&!mf(u)&&(u=u.$el),u||af("Root element not found"),u}function c(){var u;const f=(u=pe(i))!=null?u:{},{immediate:g,clone:y}=f,p=Il(f,["immediate","clone"]);return Ml(p,(C,S)=>{hf(C)&&(p[C]=(P,...T)=>{const N=Kf();return vf(P,N),S(P,...T)})}),gf(a===null?{}:D,p)}const d=u=>{u=I(u),l&&b.destroy(),l=new Ee(u,c())};at(()=>i,()=>{l&&Ml(c(),(u,f)=>{l?.option(u,f)})},{deep:!0});const b={option:(u,f)=>l?.option(u,f),destroy:()=>{l?.destroy(),l=null},save:()=>l?.save(),toArray:()=>l?.toArray(),closest:(...u)=>l?.closest(...u)},E=()=>b?.option("disabled",!0),w=()=>b?.option("disabled",!1);return Wf(()=>{h&&d()}),Zf(b.destroy),ir({start:d,pause:E,resume:w},b)}const pa=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Gf=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...pa.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],Jf=it({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Gf,emits:["update:modelValue",...pa],setup(e,{slots:t,emit:o,expose:r,attrs:n}){const s=pa.reduce((m,v)=>{const A=`on${v.replace(/^\S/,z=>z.toUpperCase())}`;return m[A]=(...z)=>o(v,...z),m},{}),a=Ae(()=>{const m=qa(e),{modelValue:v}=m,A=Il(m,["modelValue"]),z=Object.entries(A).reduce((x,[k,O])=>{const D=pe(O);return D!==void 0&&(x[k]=D),x},{});return ir(ir({},s),cf(ir(ir({},n),z)))}),i=Ae({get:()=>e.modelValue,set:m=>o("update:modelValue",m)}),l=we(),h=Oo(qf(e.target||l,i,a));return r(h),()=>{var m;return Yi(e.tag||"div",{ref:l},(m=t?.default)==null?void 0:m.call(t,h))}}});function ic(){const e=we(new Set),t="zero-code-collapsed-items",o=()=>{try{e.value=new Set,_.debug("初期表示：すべて展開状態で開始")}catch(A){_.error("初期化に失敗:",A),e.value=new Set}},r=()=>{try{const A=Array.from(e.value);localStorage.setItem(t,JSON.stringify(A)),_.debug("折りたたみ状態を保存:",A.length,"アイテム")}catch(A){_.error("折りたたみ状態の保存に失敗:",A)}},n=A=>e.value.has(A),s=A=>{const z=new Set(e.value);z.has(A)?(z.delete(A),_.debug(`アイテム展開: ${A}`)):(z.add(A),_.debug(`アイテム折りたたみ: ${A}`)),e.value=z},a=A=>{if(!e.value.has(A)){const z=new Set(e.value);z.add(A),e.value=z,_.debug(`アイテム折りたたみ: ${A}`)}},i=A=>{if(e.value.has(A)){const z=new Set(e.value);z.delete(A),e.value=z,_.debug(`アイテム展開: ${A}`)}},l=()=>{const A=e.value.size;e.value=new Set,_.debug(`すべてのアイテムを展開: ${A}アイテム`)},h=A=>{e.value=new Set(A),_.debug(`すべてのアイテムを折りたたみ: ${A.length}アイテム`)},m=Ae(()=>e.value.size),v=A=>A-e.value.size;return at(()=>e.value,()=>{r()},{deep:!0}),o(),{collapsedItems:Ae(()=>e.value),collapsedCount:m,isCollapsed:n,toggleCollapse:s,collapseItem:a,expandItem:i,expandAll:l,collapseAll:h,getExpandedCount:v,loadCollapsedState:o,saveCollapsedState:r}}const Yf={class:"zero-code-data-display"},Xf={class:"zero-code-data-tabs"},Qf={class:"zero-code-tab-buttons"},ep=["onClick"],tp={key:0,class:"zero-code-collapse-controls"},op={class:"zero-code-collapse-stats"},rp=["disabled"],np=["disabled"],sp={class:"zero-code-data-content"},ap={key:0,class:"zero-code-data-section"},ip={key:0,class:"zero-code-rendered-content"},lp={class:"zero-code-add-part-button-container"},cp={class:"zero-code-component-header"},dp={class:"zero-code-component-meta"},up={class:"zero-code-component-type"},fp={class:"zero-code-component-module"},pp={class:"zero-code-header-actions"},gp=["title","onClick"],mp=["onClick"],hp=["onClick"],vp=["innerHTML"],yp={class:"zero-code-add-part-button-container"},bp=["onClick"],_p={key:1,class:"zero-code-no-data"},$p={class:"zero-code-empty-state"},wp={class:"zero-code-add-part-button-container"},zp={key:1,class:"zero-code-data-section"},Ap={class:"zero-code-data-display-section"},Cp={class:"zero-code-parts-sub-content"},Ep={class:"zero-code-parts-sub-section"},Ip={class:"zero-code-data-display-pre"},Pp=it({__name:"DataDisplay",props:{modelValue:{type:String},pageData:{type:Array},parts:{type:Array},commonParts:{type:Array},individualParts:{type:Array},commonImages:{type:Array},individualImages:{type:Array},renderComponentWithNested:{type:Function},isTextEditing:{type:Boolean}},emits:["update:modelValue","add-part","edit-part","delete-part","reorder-parts"],setup(e,{emit:t}){const o=e,r=t,n=Ae({get:()=>o.pageData,set:D=>{r("reorder-parts",D)}}),s=()=>{_.debug("ドラッグ開始")},a=()=>{_.debug("ドラッグ終了")},{isCollapsed:i,toggleCollapse:l,collapsedCount:h,expandAll:m,collapseAll:v}=ic(),A=()=>{const D=o.pageData.map((I,c)=>I.id||`component-${c}`);v(D)},z=["rendered","page"],x=D=>({rendered:"レンダリング結果",source:"HTMLソース",page:"データ表示"})[D],k=Ae(()=>O(o.pageData)),O=D=>{const I=(c,d=0)=>{const b="  ".repeat(d),E="  ".repeat(d+1);if(Array.isArray(c))return c.length===0?"[]":`[
${c.map(u=>E+I(u,d+1)).join(`,
`)}
${b}]`;if(typeof c=="object"&&c!==null){const w=Object.entries(c);return w.length===0?"{}":`{
${w.map(([f,g])=>{let y;if(typeof g=="string"){const p=g.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(p.includes(`
`)){const C=p.split(`
`);y=C.map((P,T)=>T===0?`\`${P}`:T===C.length-1?`${E}${P}\``:`${E}${P}`).join(`
`)}else y=`"${p}"`}else y=I(g,d+1);return`${E}"${f}": ${y}`}).join(`,
`)}
${b}}`}return typeof c=="string"?`"${c.replace(/"/g,'\\"')}"`:JSON.stringify(c)};return I(D)};return(D,I)=>(j(),U("div",Yf,[$("div",Xf,[$("div",Qf,[(j(),U(ze,null,Fe(z,c=>$("button",{key:c,class:ot(["zero-code-data-tab-button",{active:D.modelValue===c}]),onClick:d=>D.$emit("update:modelValue",c)},ae(x(c)),11,ep)),64))]),D.modelValue==="rendered"?(j(),U("div",tp,[$("span",op,ae(pe(h))+"/"+ae(D.pageData.length)+" 折りたたみ中 ",1),$("button",{class:"zero-code-collapse-all-btn",disabled:D.pageData.length===0,onClick:A}," すべて折りたたみ ",8,rp),$("button",{class:"zero-code-expand-all-btn",disabled:pe(h)===0,onClick:I[0]||(I[0]=(...c)=>pe(m)&&pe(m)(...c))}," すべて展開 ",8,np)])):ve("",!0)]),$("div",sp,[D.modelValue==="rendered"?(j(),U("div",ap,[Array.isArray(D.pageData)&&D.pageData.length>0?(j(),U("div",ip,[$("div",lp,[$("button",{class:"zero-code-add-part-button",onClick:I[1]||(I[1]=c=>D.$emit("add-part",0))},I[4]||(I[4]=[$("span",{class:"zero-code-plus-icon"},"＋",-1),$("span",{class:"zero-code-button-text"},"パーツを追加",-1)]))]),et(pe(Jf),{modelValue:n.value,"onUpdate:modelValue":I[2]||(I[2]=c=>n.value=c),animation:200,disabled:D.isTextEditing,"ghost-class":"ghost","chosen-class":"chosen","drag-class":"drag",onStart:s,onEnd:a},{default:Cn(()=>[(j(!0),U(ze,null,Fe(D.pageData,(c,d)=>(j(),U("div",{key:`${c.id||d}`,class:"zero-code-rendered-component zero-code-draggable-item"},[$("div",cp,[$("div",dp,[I[5]||(I[5]=$("div",{class:"zero-code-drag-handle"},[$("span",{class:"zero-code-drag-icon"},"⠿")],-1)),$("span",up,ae(c.type||"unknown"),1),$("span",fp,ae(c.module_name||""),1)]),$("div",pp,[$("button",{class:"zero-code-collapse-btn",title:pe(i)(c.id||`component-${d}`)?"展開":"折りたたみ",onClick:b=>pe(l)(c.id||`component-${d}`)},ae(pe(i)(c.id||`component-${d}`)?"＋":"－"),9,gp),$("button",{class:"zero-code-edit-btn",onClick:b=>D.$emit("edit-part",d)},"編集",8,mp),$("button",{class:"zero-code-delete-btn",onClick:b=>D.$emit("delete-part",d)},"削除",8,hp)])]),et(Su,{name:"collapse"},{default:Cn(()=>[wt((j(),U("div",{key:`preview-${c.id}`,class:"zero-code-component-preview",innerHTML:D.renderComponentWithNested(c,d)},null,8,vp)),[[Fu,!pe(i)(c.id||`component-${d}`)]])]),_:2},1024),$("div",yp,[$("button",{class:"zero-code-add-part-button",onClick:b=>D.$emit("add-part",d+1)},I[6]||(I[6]=[$("span",{class:"zero-code-plus-icon"},"＋",-1),$("span",{class:"zero-code-button-text"},"パーツを追加",-1)]),8,bp)])]))),128))]),_:1},8,["modelValue","disabled"])])):(j(),U("div",_p,[$("div",$p,[I[8]||(I[8]=$("p",{class:"zero-code-empty-message"},"パーツがありません",-1)),$("div",wp,[$("button",{class:"zero-code-add-part-button",onClick:I[3]||(I[3]=c=>D.$emit("add-part",0))},I[7]||(I[7]=[$("span",{class:"zero-code-plus-icon"},"＋",-1),$("span",{class:"zero-code-button-text"},"最初のパーツを追加",-1)]))])])]))])):ve("",!0),D.modelValue==="page"?(j(),U("div",zp,[$("div",Ap,[$("div",Cp,[$("div",Ep,[I[9]||(I[9]=$("h4",{style:{margin:"0 0 16px 0",color:"#374151","font-size":"1.1rem"}},"Pageデータ（リアルタイム更新）",-1)),$("pre",Ip,ae(k.value),1)])])])])):ve("",!0)])]))}}),Sp={class:"zero-code-modal-header"},Tp={class:"zero-code-data-tabs"},Dp={class:"zero-code-tab-buttons"},xp=["onClick"],Mp={class:"zero-code-modal-body"},Np={key:0,class:"zero-code-parts-section"},Fp={key:0,class:"zero-code-parts-list"},Op={class:"zero-code-part-section-title"},kp={class:"zero-code-modules-grid"},Lp=["onClick"],Rp={class:"zero-code-module-title"},Bp=["innerHTML"],Hp={key:1,class:"zero-code-empty-state"},jp={key:1,class:"zero-code-parts-section"},Up={key:0,class:"zero-code-parts-list"},Vp={class:"zero-code-part-section-title"},Zp={class:"zero-code-modules-grid"},Wp=["onClick"],Kp={class:"zero-code-module-title"},qp=["innerHTML"],Gp={key:1,class:"zero-code-empty-state"},lc=it({__name:"PartSelector",props:{parts:{type:Array},isNested:{type:Boolean,default:!1},modalContainer:{default:"body",type:String}},emits:["close","select-part"],setup(e,{emit:t}){const o=e;Ae(()=>!o.modalContainer||o.modalContainer==="body"?!0:typeof document<"u");const r=Ae(()=>!o.modalContainer||o.modalContainer==="body"?"body":typeof document<"u"&&document.querySelector(o.modalContainer)?o.modalContainer:"body"),n=we("common"),s=["common","individual"],a=A=>({common:"共通パーツ",individual:"個別パーツ"})[A],i=Ae(()=>o.parts.map(A=>({...A,module:A.module.filter(z=>{const x=z;return!x.category||x.category==="common"})})).filter(A=>A.module.length>0)),l=Ae(()=>o.parts.map(A=>({...A,module:A.module.filter(z=>z.category==="individual")})).filter(A=>A.module.length>0)),h=t,m=(A,z)=>{h("select-part",A,z)},v=A=>{if(!A)return"";try{let z=A;return z=z.replace(/@slot\(\$[^)]+\)@/g,""),z=z.replace(/\{\$([^:]+):([^}]*)\}/g,(x,k,O)=>O&&O.trim()?O:{title:"サンプルタイトル",text:"サンプルテキストです。",image:"/sample-image.jpg",link:"#",url:"https://example.com",alt:"サンプル画像",content:"サンプルコンテンツ",description:"サンプル説明文です。"}[k]||`[${k}]`),z=z.replace(/\(\$([^:]+):([^)]+)\)/g,(x,k,O)=>O.split("|").filter(I=>I.trim())[0]||""),z=z.replace(/\(\$([^:?]+)\?:([^)]*)\)/g,(x,k,O)=>O||""),z=z.replace(/z-for-wrapper="[^"]*"/g,""),z=z.replace(/z-for="[^"]*"/g,""),z=z.replace(/z-slot="[^"]*"/g,""),z=z.replace(/\$(\w+)/g,(x,k)=>({title:"タイトル",text:"テキスト",content:"コンテンツ"})[k]||`[${k}]`),z}catch{return A}};return(A,z)=>(j(),dt(li,{to:r.value},[$("div",{class:"zero-code-modal-overlay",onClick:z[2]||(z[2]=x=>A.$emit("close"))},[$("div",{class:"zero-code-modal-content",onClick:z[1]||(z[1]=Mt(()=>{},["stop"]))},[$("div",Sp,[$("h4",null,ae(o.isNested?"ネストパーツを選択":"パーツを選択"),1),$("button",{class:"zero-code-close-button",onClick:z[0]||(z[0]=x=>A.$emit("close"))},"✖️")]),$("div",Tp,[$("div",Dp,[(j(),U(ze,null,Fe(s,x=>$("button",{key:x,class:ot(["zero-code-data-tab-button",{active:n.value===x}]),onClick:k=>n.value=x},ae(a(x)),11,xp)),64))])]),$("div",Mp,[n.value==="common"?(j(),U("div",Np,[i.value.length>0?(j(),U("div",Fp,[(j(!0),U(ze,null,Fe(i.value,(x,k)=>(j(),U("div",{key:k,class:"zero-code-part-section"},[$("h5",Op,ae(x.type),1),$("div",kp,[(j(!0),U(ze,null,Fe(x.module,(O,D)=>(j(),U("div",{key:D,class:"zero-code-module-card",onClick:I=>m(x.type,O)},[$("div",Rp,ae(O.title),1),$("div",{class:"zero-code-module-preview",innerHTML:v(O.body)},null,8,Bp)],8,Lp))),128))])]))),128))])):(j(),U("div",Hp,z[3]||(z[3]=[$("p",null,"共通パーツが登録されていません。",-1)])))])):ve("",!0),n.value==="individual"?(j(),U("div",jp,[l.value.length>0?(j(),U("div",Up,[(j(!0),U(ze,null,Fe(l.value,(x,k)=>(j(),U("div",{key:k,class:"zero-code-part-section"},[$("h5",Vp,ae(x.type),1),$("div",Zp,[(j(!0),U(ze,null,Fe(x.module,(O,D)=>(j(),U("div",{key:D,class:"zero-code-module-card",onClick:I=>m(x.type,O)},[$("div",Kp,ae(O.title),1),$("div",{class:"zero-code-module-preview",innerHTML:v(O.body)},null,8,qp)],8,Wp))),128))])]))),128))])):(j(),U("div",Gp,z[4]||(z[4]=[$("p",null,"個別パーツが登録されていません。",-1)])))])):ve("",!0)])])])],8,["to"]))}}),Jp={class:"zero-code-array-field"},Yp={class:"zero-code-array-header"},Xp={key:0,class:"zero-code-empty-array-message"},Qp={class:"zero-code-empty-message-content"},eg={class:"zero-code-empty-text"},tg={class:"zero-code-button-text"},og=["onDragstart","onDrop"],rg={class:"zero-code-array-item-header"},ng={class:"zero-code-component-meta"},sg=["onClick"],ag={class:"zero-code-array-item-fields"},ig=["for"],lg={key:0,class:"zero-code-radio-group"},cg=["id","value","name","checked","onChange"],dg=["for"],ug={key:1,class:"zero-code-checkbox-group"},fg=["id","checked","onChange"],pg=["for"],gg=["id","value","onInput"],mg=["value"],hg=["id","value","onChange"],vg=["value","selected"],yg=["id","value","onInput"],bg=["id","value","type","onInput"],_g={key:0,class:"zero-code-nested-array-field"},$g={class:"zero-code-nested-array-label"},wg={class:"zero-code-nested-array-info"},zg={class:"zero-code-array-count"},Ag=["onClick"],Cg=it({__name:"ArrayFieldEditor",props:{componentId:{type:String},arrayKey:{type:String},items:{type:Array},fields:{type:Object},label:{type:String},itemLabel:{type:String}},emits:["add","remove","update","reorder","edit-nested"],setup(e,{emit:t}){const o=e,r=t,n=(z,x,k)=>{console.log("🔥 [ArrayFieldEditor] updateValue呼び出し:",{index:z,key:x,value:k,componentId:o.componentId,arrayKey:o.arrayKey,itemBefore:o.items[z],timestamp:new Date().toISOString()}),r("update",z,x,k),console.log("🚀 [ArrayFieldEditor] updateイベント発火完了")},s=(z,x,k)=>{const O=z[x];return Array.isArray(O)&&O.includes(k)},a=(z,x,k,O)=>{let I=o.items[z][x]||[];Array.isArray(I)||(I=[]),O?I.includes(k)||(I=[...I,k]):I=I.filter(c=>c!==k),r("update",z,x,I)};let i=null;const l=(z,x)=>{i=x,z.dataTransfer&&(z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",x.toString()));const k=z.target;k.style.opacity="0.5"},h=z=>{z.preventDefault(),z.dataTransfer&&(z.dataTransfer.dropEffect="move")},m=(z,x)=>{z.preventDefault(),i!==null&&i!==x&&r("reorder",i,x),i=null},v=z=>{const x=z.target;x.style.opacity="1",i=null},A=(z,x)=>!Array.isArray(x)||z==="id"||["nested_parts","content"].includes(z)?!1:x.length>0&&typeof x[0]=="object"&&x[0]!==null;return(z,x)=>(j(),U("div",Jp,[$("div",Yp,[$("h5",null,ae(z.label),1),$("button",{class:"zero-code-btn zero-code-add-array-item",onClick:x[0]||(x[0]=k=>z.$emit("add"))},"+ 追加")]),z.items.length===0?(j(),U("div",Xp,[$("div",Qp,[$("p",eg,ae(z.label)+"はまだ追加されていません",1),$("button",{class:"zero-code-btn zero-code-add-array-item-empty",onClick:x[1]||(x[1]=k=>z.$emit("add"))},[x[2]||(x[2]=$("span",{class:"zero-code-plus-icon"},"＋",-1)),$("span",tg,"最初の"+ae(z.label)+"を追加",1)])])])):ve("",!0),(j(!0),U(ze,null,Fe(z.items,(k,O)=>(j(),U("div",{key:k?.id||O,class:"zero-code-array-item",draggable:"true",onDragstart:D=>l(D,O),onDragover:h,onDrop:D=>m(D,O),onDragend:v},[$("div",rg,[$("div",ng,[x[3]||(x[3]=$("span",{class:"zero-code-drag-handle"},"⠿",-1)),$("h6",null,ae(z.itemLabel)+" "+ae(O+1),1)]),$("button",{class:"zero-code-btn zero-code-remove-array-item",onClick:D=>z.$emit("remove",O)},"削除",8,sg)]),$("div",ag,[(j(!0),U(ze,null,Fe(z.fields,(D,I)=>(j(),U("div",{key:I,class:"zero-code-field-group"},[$("label",{for:`${z.componentId}_${z.arrayKey}_${O}_${I}`},ae(D.label)+": ",9,ig),D.type==="radio"&&D.options&&D.options.length>0?(j(),U("div",lg,[(j(!0),U(ze,null,Fe(D.options,c=>(j(),U("div",{key:c,class:"zero-code-radio-item"},[$("input",{id:`${z.componentId}_${z.arrayKey}_${O}_${I}_${c}`,value:c,type:"radio",name:`${z.componentId}_${z.arrayKey}_${O}_${I}`,class:"zero-code-radio-input",checked:k[I]===c||c==="指定なし"&&!k[I],onChange:d=>n(O,I,c==="指定なし"?"":c)},null,40,cg),$("label",{for:`${z.componentId}_${z.arrayKey}_${O}_${I}_${c}`,class:"zero-code-radio-label"},ae(c),9,dg)]))),128))])):ve("",!0),D.type==="checkbox"&&D.options&&D.options.length>0?(j(),U("div",ug,[(j(!0),U(ze,null,Fe(D.options,c=>(j(),U("div",{key:c,class:"zero-code-checkbox-item"},[$("input",{id:`${z.componentId}_${z.arrayKey}_${O}_${I}_${c}`,checked:s(k,I,c),type:"checkbox",class:"zero-code-checkbox-input",onChange:d=>{const b=d.target;a(O,I,c,b.checked)}},null,40,fg),$("label",{for:`${z.componentId}_${z.arrayKey}_${O}_${I}_${c}`,class:"zero-code-checkbox-label"},ae(c),9,pg)]))),128))])):D.type==="select"?(j(),U("select",{key:2,id:`${z.componentId}_${z.arrayKey}_${O}_${I}`,value:k[I],class:"zero-code-field-input zero-code-select-input",onInput:c=>{const d=c.target;n(O,I,d.value)}},[(j(!0),U(ze,null,Fe(D.options,c=>(j(),U("option",{key:c,value:c},ae(c),9,mg))),128))],40,gg)):D.type==="select-multiple"?(j(),U("select",{key:3,id:`${z.componentId}_${z.arrayKey}_${O}_${I}`,value:k[I]||D.defaultValue,multiple:"",class:"zero-code-field-input zero-code-select-multiple",onChange:c=>{const d=c.target,b=Array.from(d.selectedOptions).map(E=>E.value);n(O,I,b)}},[(j(!0),U(ze,null,Fe(D.options,c=>(j(),U("option",{key:c,value:c,selected:Array.isArray(k[I])&&k[I].includes(c)},ae(c),9,vg))),128))],40,hg)):D.type==="textarea"?(j(),U("textarea",{key:4,id:`${z.componentId}_${z.arrayKey}_${O}_${I}`,value:k[I],class:"zero-code-field-input zero-code-field-textarea",onInput:c=>{const d=c.target;n(O,I,d.value)}},null,40,yg)):D.type==="text"||D.type==="number"?(j(),U("input",{key:5,id:`${z.componentId}_${z.arrayKey}_${O}_${I}`,value:k[I],type:D.type==="text"?"text":D.type,class:"zero-code-field-input",onInput:c=>{const d=c.target;n(O,I,d.value)}},null,40,bg)):ve("",!0)]))),128)),(j(!0),U(ze,null,Fe(k,(D,I)=>(j(),U(ze,{key:`nested_${I}`},[Array.isArray(D)&&I!=="id"&&A(I,D)?(j(),U("div",_g,[$("h6",$g,ae(I)+" (ネスト配列)",1),$("div",wg,[$("span",zg,ae(D.length)+"個の要素",1),$("button",{class:"zero-code-btn zero-code-edit-nested-array-btn",title:"ネスト配列を編集",onClick:c=>z.$emit("edit-nested",O,I)}," 編集 ",8,Ag)])])):ve("",!0)],64))),128))])],40,og))),128))]))}});var qe=(e=>(e.VALIDATION="VALIDATION",e.NETWORK="NETWORK",e.COMPONENT="COMPONENT",e.TEMPLATE="TEMPLATE",e.FILE="FILE",e.PERMISSION="PERMISSION",e.IMAGE_LOAD_FAILED="IMAGE_LOAD_FAILED",e.UNKNOWN="UNKNOWN",e.NETWORK_ERROR="NETWORK_ERROR",e.VALIDATION_ERROR="VALIDATION_ERROR",e.PERMISSION_ERROR="PERMISSION_ERROR",e.COMPONENT_ERROR="COMPONENT_ERROR",e.TEMPLATE_PARSE_ERROR="TEMPLATE_PARSE_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(qe||{});class Eg{constructor(){en(this,"errorHistory",[]);en(this,"maxHistorySize",100)}handleError(t,o,r,n,s){const a={type:t,message:o,details:r,componentId:n,action:s,timestamp:Date.now()};return this.errorHistory.unshift(a),this.errorHistory.length>this.maxHistorySize&&(this.errorHistory=this.errorHistory.slice(0,this.maxHistorySize)),t==="VALIDATION"||t==="PERMISSION"?_.warn(`[${t}] ${o}`,r):_.error(`[${t}] ${o}`,r),a}componentError(t,o,r){return this.handleError("COMPONENT",t,r,o,"component_operation")}templateError(t,o){return this.handleError("TEMPLATE",t,o,void 0,"template_processing")}validationError(t,o){return this.handleError("VALIDATION",t,o,void 0,"validation")}fileError(t,o){return this.handleError("FILE",t,o,void 0,"file_operation")}networkError(t,o){return this.handleError("NETWORK",t,o,void 0,"network_request")}permissionError(t,o){return this.handleError("PERMISSION",t,o,void 0,"permission_check")}unknownError(t,o){return this.handleError("UNKNOWN",t,o,void 0,"unknown")}getErrorHistory(){return[...this.errorHistory]}getErrorsByType(t){return this.errorHistory.filter(o=>o.type===t)}clearHistory(){this.errorHistory=[],_.debug("エラー履歴をクリアしました")}getErrorStats(){const t=Object.values(qe).reduce((o,r)=>(o[r]=0,o),{});return this.errorHistory.forEach(o=>{t[o.type]++}),t}}function io(e,t,o,r="UNKNOWN"){try{return e()}catch(n){const s=n instanceof Error?{stack:n.stack,name:n.name}:{error:String(n)};return t.handleError(r,o,s),null}}const lo=new Eg,Ig=["content","nested_parts"],cc=["_isZForItem","_parentComponentId","_arrayName","_arrayIndex","_zForTemplate"];function qr(e){const t=(u,f)=>{if(f.length===0||f[0]>=u.length)return null;let g=u[f[0]];for(let y=1;y<f.length;y++){if(!g.nested_parts||!Array.isArray(g.nested_parts)||f[y]>=g.nested_parts.length)return null;g=g.nested_parts[f[y]]}return g},o=(u,f)=>{if(f.length===1)return u;let g=u[f[0]];for(let y=1;y<f.length-1;y++){if(!g.nested_parts||!Array.isArray(g.nested_parts))return[];g=g.nested_parts[f[y]]}return g.nested_parts||[]},r=u=>u.split("-").map(Number),n=u=>u.join("-"),s=(u,f,g=[])=>{if(_.debug(`findComponentRecursively: 検索開始 - componentId=${f}, depth=${g.length}`),!u||!Array.isArray(u))return _.debug(`findComponentRecursively: 無効なデータ - data=${u}, isArray=${Array.isArray(u)}`),null;_.debug(`findComponentRecursively: ${u.length}個のコンポーネントを検索中`);for(let y=0;y<u.length;y++){const p=u[y],C=[...g,y];if(_.debug(`findComponentRecursively: [${y}] チェック中 - id=${p.id}, type=${p.type}`),p.id===f)return _.success(`findComponentRecursively: 発見！ - ${f} at path=${C.join("-")}`),p;if(p.nested_parts&&Array.isArray(p.nested_parts)){_.debug(`findComponentRecursively: nested_parts検索 - ${p.id} (${p.nested_parts.length}個)`);const P=s(p.nested_parts,f,C);if(P)return P}const S=Object.keys(p);for(const P of S){const T=p[P];if(Array.isArray(T)&&P!=="nested_parts"){_.debug(`findComponentRecursively: z-for配列検索 - ${p.id}.${P} (${T.length}個)`);for(let N=0;N<T.length;N++){const F=T[N];if(F&&typeof F=="object"&&F.id){if(_.debug(`findComponentRecursively: z-for配列アイテム - ${F.id} in ${p.id}.${P}[${N}]`),F.id===f)return _.success(`findComponentRecursively: z-for配列アイテムで発見！ - ${f}`),F;if(F.nested_parts&&Array.isArray(F.nested_parts)){_.debug(`findComponentRecursively: z-for配列アイテムのネストパーツ検索 - ${F.id}.nested_parts (${F.nested_parts.length}個)`);const Z=s(F.nested_parts,f,[...C,N]);if(Z)return _.success(`findComponentRecursively: z-for配列内のネストパーツで発見！ - ${f}`),Z}}}}}}return _.debug(`findComponentRecursively: 未発見 - ${f}`),null},a=(u,f)=>io(()=>{if(u==="z-for-item")return"";if(!Array.isArray(e))throw new Error("Parts配列が無効です");if(!u||!f)throw new Error("Type または ModuleName が指定されていません");const g=e.find(p=>p.type===u);if(!g)throw new Error(`パーツタイプ "${u}" が見つかりません`);const y=g.module.find(p=>p.title===f);if(!y)throw new Error(`モジュール "${f}" が見つかりません (type: ${u})`);return y.body},lo,`テンプレート取得エラー: ${u}/${f}`,qe.TEMPLATE)||"",i=new Set,l=(u,f)=>{_.debug(`extractZForTemplate開始: arrayName=${f}`);const g=new RegExp(`<(\\w+)[^>]*z-for="${f}"[^>]*>`),y=u.match(g);if(!y)return _.warn(`z-for="${f}" 開始タグが見つかりません`),_.debug("親テンプレート内容:",u.substring(0,500)),"";const p=u.indexOf(y[0]),C=y[1];let S=0,P=p,T=p;for(;T<u.length;)if(u.substring(T,T+C.length+1)===`<${C}`){const F=u.indexOf(">",T);F!==-1?(S++,T=F+1):T++}else if(u.substring(T,T+C.length+3)===`</${C}>`){if(S--,S===0){P=T+C.length+3;break}T+=C.length+3}else T++;if(S!==0)return _.warn(`z-for="${f}" の対応する終了タグが見つかりません（深度: ${S}）`),"";const N=u.substring(p,P).trim();return _.debug(`z-for内テンプレート抽出成功: ${f}`,{extractedContent:N.substring(0,200),fullContent:N,startIndex:p,endIndex:P,depth:0}),N},h=()=>"comp_"+Math.random().toString(36).substring(2,11)+Date.now().toString(36),m=u=>{const f=`${u.id}_${u.type}_${u.module_name}`;if(_.debug(`getFieldInfo: _isZForItem=${u._isZForItem}`),_.debug(`getFieldInfo: _arrayName=${u._arrayName}`),i.has(f))return _.warn(`getFieldInfo: 無限ループを検出、処理をスキップ: ${f}`),[];i.add(f);try{let g="";if(u._isZForItem){const P=u._parentType,T=u._parentModuleName;_.debug(`getFieldInfo: z-for-itemのparent情報 - type: ${P}, module: ${T}`),P&&T?g=a(P,T):(_.debug("getFieldInfo: 親情報なし、コンポーネント自体を使用"),g=a(u.type,u.module_name))}else g=a(u.type,u.module_name);if(!g)return[];if(_.debug(`getFieldInfo: component.id=${u.id}, type=${u.type}, module=${u.module_name}`),_.debug(`getFieldInfo: _isZForItem=${u._isZForItem}`),u._isZForItem){const P=u._arrayName;if(_.debug(`getFieldInfo: z-for配列要素を検出, arrayName=${P}`),_.debug("getFieldInfo: componentプロパティ:",Object.keys(u)),P){_.debug("getFieldInfo: 元のテンプレート:",g.substring(0,300));const T=l(g,P);T?(g=T,_.debug("getFieldInfo: z-for内テンプレート抽出完了:",g)):_.warn(`getFieldInfo: z-for内テンプレートの抽出に失敗: arrayName=${P}`)}}else _.debug("getFieldInfo: 通常のコンポーネント処理");const y=[],p=g.match(/\(\$([^:]+):(.*?)\)/g)||[],C=[];if(g.includes("z-for=")){const P=/<(\w+)[^>]*z-for="([^"]+)"[^>]*>/g;let T;for(;(T=P.exec(g))!==null;){const N=T[2],F=T.index;if(_.debug(`z-for検出: ${N}, 現在の配列: ${u._arrayName}`),u._isZForItem&&N!==u._arrayName){let Z=0,H=F,W=F;for(;W<g.length;){if(g.substring(W,W+4)==="<div")Z++;else if(g.substring(W,W+6)==="</div>"&&(Z--,Z===0)){H=W+6;break}W++}if(Z===0){const re=g.substring(F,H).match(/\(\$([^:]+):(.*?)\)/g);re&&re.forEach(_e=>{const Oe=_e.match(/\(\$([^:]+):(.*?)\)/);if(Oe){const Se=Oe[1].replace("?","");C.push(Se)}}),_.debug(`子z-for除外: ${N} のフィールドを除外リストに追加`)}}}}C.length>0&&_.debug("z-for配列内のフィールドを除外:",C);let S;return u._isZForItem?S=p.filter(P=>{const T=P.match(/\(\$([^:]+):(.*?)\)/);if(T){const N=T[1].replace("?",""),F=!C.includes(N);return F?_.debug(`z-for配列アイテム編集: フィールド ${N} を表示`):_.debug(`z-for配列アイテム編集: フィールド ${N} を除外（子z-forフィールド）`),F}return!1}):S=p.filter(P=>{const T=P.match(/\(\$([^:]+):(.*?)\)/);if(T){const N=T[1].replace("?","");let F=!1,Z=!1;const H=new RegExp(`\\(\\$${N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[?:]`,"g"),W=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let G;for(;(G=W.exec(g))!==null;){const re=G[0];if(H.test(re)){F=!0;break}}if(F){const re=g.replace(W,"");H.lastIndex=0,H.test(re)&&(Z=!0)}return F&&!Z?(_.debug(`getFieldInfo: ${N} をz-for内専用フィールドとして除外`),!1):(_.debug(`getFieldInfo: ${N} を表示対象に含める`),!0)}return!0}),S.forEach(P=>{const T=P.match(/\(\$([^:]+):(.*?)\)/);if(T){const[,N,F]=T,Z=N.includes("?"),H=N.replace("?","");if(F.includes("|")){let W=F.split("|"),G=!1;if((F.includes("||")||F.startsWith("|")||F.endsWith("|"))&&(G=!0),W=W.filter(re=>re.trim()!==""),G&&W.unshift("指定なし"),Z){const re=W.length>0?[W[0]]:[],_e={type:"checkbox",paramName:H,propKey:H,options:W,defaultValue:re,label:`${H} (チェックボックス)`};y.push(_e)}else{const re=W[0]||"",_e={type:"radio",paramName:H,propKey:H,options:W,defaultValue:re,label:`${H} (ラジオボタン)`};y.push(_e)}}else if(F.includes(",")){const W=F.split(",").map(G=>G.trim()).filter(G=>G!=="");if(Z){const G=W.length>0?[W[0]]:[],re={type:"select-multiple",paramName:H,propKey:H,options:W,defaultValue:G,label:`${H} (セレクトボックス・複数選択)`};y.push(re)}else{const G=W[0]||"",re={type:"select",paramName:H,propKey:H,options:W,defaultValue:G,label:`${H} (セレクトボックス)`};y.push(re)}}else{const W={type:"text",paramName:H,propKey:H,options:[],defaultValue:F,label:`${H} (テキストボックス)`};y.push(W)}}}),_.debug(`getFieldInfo: 抽出されたフィールド数=${y.length}`,y.map(P=>({paramName:P.paramName,type:P.type}))),y}catch(g){return _.error(`getFieldInfo: エラーが発生しました: ${f}`,g),[]}finally{i.delete(f)}},v=(u,f)=>{try{const g=a(u.type,u.module_name);if(!g)return!1;let y=g;if(u._isZForItem){const T=u._arrayName,N=l(g,T);N&&(y=N)}const p=new RegExp(`\\{\\$${f}:[^}]*\\}`),C=new RegExp(`\\(\\$${f}:[^)]*\\)`),S=new RegExp(`\\(\\$${f}\\?:[^)]*\\)`),P=p.test(y)||C.test(y)||S.test(y);if(!P&&!u._isZForItem){const T=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let N;for(;(N=T.exec(g))!==null;){const F=N[0];if(_.debug(`isTemplateField: z-forブロック検査中 - ${f}`,F.substring(0,100)),p.test(F)||C.test(F)||S.test(F))return _.success(`isTemplateField: ${f} はz-for内で使用されているためメイン編集パネルから除外`),!0}_.debug(`isTemplateField: ${f} - z-for内での使用検出結果: false`),_.debug("isTemplateField: テンプレート内容 (最初200文字):",g.substring(0,200))}return P}catch(g){return _.warn(`isTemplateField error for ${f}:`,g),!1}},A=(u,f)=>!!(["content","nested_parts"].includes(u)||Array.isArray(f)||typeof f=="object"&&f!==null);return{findComponentByPath:t,getParentContainer:o,parseHierarchyPath:r,stringifyHierarchyPath:n,findComponentRecursively:s,getTemplate:a,generateUniqueId:h,getFieldInfo:m,isTemplateField:v,shouldExcludeField:A,shouldShowBasicField:(u,f,g)=>{if(u==="id"||u==="type"||u==="module_name")return!1;const y=a(g.type,g.module_name);if(y&&y.includes("z-for=")){const p=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let C,S=!1,P=!1;const T=new RegExp(`\\(\\$${u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[?:]`,"g");for(;(C=p.exec(y))!==null;){const N=C[0];if(T.test(N)){S=!0;break}}if(S){const N=y.replace(p,"");T.lastIndex=0,T.test(N)&&(P=!0)}if(S&&!P)return!1}return g._isZForItem||cc.includes(u)||A(u,f)||v(g,u)||f===""||f===null||f===void 0||typeof f=="string"&&f.trim()===""||typeof f=="number"&&f===0?!1:typeof f=="string"&&f.trim()!==""||typeof f=="number"&&f!==0||typeof f=="boolean"},shouldShowArrayField:(u,f,g)=>{const y=`${g.id}_${g.type}_${g.module_name}_array_${u}`;if(i.has(y))return _.warn(`shouldShowArrayField: 無限ループを検出、処理をスキップ: ${y}`),!1;i.add(y);try{if(_.debug(`shouldShowArrayField開始: key=${u}, component: ${g.id} (${g.type}/${g.module_name})`,{key:u,value:f,componentId:g.id}),Ig.includes(String(u)))return _.debug(`shouldShowArrayField: ${u} はシステム内部フィールドのため除外`),!1;if(g._isZForItem&&cc.includes(String(u)))return _.debug(`shouldShowArrayField: ${u} はz-forシステムフィールドのため除外`),!1;if(v(g,u))return _.debug(`shouldShowArrayField: ${u} はテンプレート記法フィールドのため除外`),!1;const p=a(g.type,g.module_name);if(p){if(_.debug("shouldShowArrayField: テンプレート取得成功:",p.substring(0,200)),new RegExp(`z-for="${u}"`).test(p))return _.success(`shouldShowArrayField: ${u}はz-for記法で使用されているため編集パネルでは非表示（プレビュー側で編集）`),Array.isArray(f)||(_.debug(`shouldShowArrayField: ${u}は配列でないが、記法で使用されているため空配列で初期化`),g[u]=[]),!1;_.debug(`shouldShowArrayField: ${u}は配列記法で使用されていない`)}else _.debug("shouldShowArrayField: テンプレート取得失敗");return Array.isArray(f)||_.debug(`shouldShowArrayField: ${u}は配列でなく、記法でも使用されていない`),!1}catch(p){return _.error(`shouldShowArrayField: エラーが発生しました: ${y}`,p),!1}finally{i.delete(y)}},shouldShowArrayItemField:(u,f,g,y,p)=>u==="id"||Array.isArray(f)||typeof f=="object"&&f!==null||f===""||f===null||f===void 0||typeof f=="string"&&f.trim()===""||typeof f=="number"&&f===0?!1:(a(g.type,g.module_name),typeof f=="string"&&f.trim()!==""||typeof f=="number"&&f!==0||typeof f=="boolean"),getInputType:u=>u.includes("url")||u.includes("src")?"url":u.includes("email")?"email":u.includes("number")||u.includes("count")?"number":"text",updateCheckboxValue:(u,f,g,y)=>{u[f]||(u[f]=[]);const p=u[f];y?p.includes(g)||p.push(g):u[f]=p.filter(C=>C!==g)},isCheckboxChecked:(u,f,g)=>{const y=u[f];return Array.isArray(y)&&y.includes(g)},addArrayItem:(u,f)=>{u[f]||(u[f]=[]);const g={id:`${f}_${Date.now()}`},y=u[f];if(y.length>0){const p=y[0];Object.keys(p).forEach(C=>{if(C!=="id"){const S=p[C];if(C==="nested_parts"||Array.isArray(S)&&C.includes("nested"))g[C]=[];else{const P=typeof S=="string"?"":S;g[C]=P}}})}y.push(g)},removeArrayItem:(u,f,g)=>{const y=u[f];y&&y.length>g&&y.splice(g,1)},createNewComponent:(u,f)=>io(()=>{if(!u||!f)throw new Error("partType または module が指定されていません");if(!f.title||!f.body)throw new Error("module.title または module.body が無効です");const g=h();_.debug(`createNewComponent開始: partType=${u}, module=${f.title}`);const y={id:g,type:u,module_name:f.title},p=f.body;_.debug("createNewComponent テンプレート:",p.substring(0,300));const C=p.match(/\{\$([^:}]+):([^}]+)\}/g);C&&C.forEach(N=>{const F=N.match(/\{\$([^:}]+):([^}]+)\}/);if(F){const[,Z,H]=F;Z!=="input"&&(y[Z]=String(H))}});const S=p.match(/\(\$([^:?]+):(.*?)\)/g);S&&S.forEach(N=>{const F=N.match(/\(\$([^:?]+):(.*?)\)/);if(F){const[,Z,H]=F,W=H.split("|").filter(G=>G.trim()!=="");W.length>0&&(y[Z]=String(W[0]))}});const P=p.match(/\(\$([^:?]+)\?:(.*?)\)/g);P&&P.forEach(N=>{const F=N.match(/\(\$([^:?]+)\?:(.*?)\)/);if(F){const[,Z,H]=F,W=H.split("|").filter(G=>G.trim()!=="");y[Z]=W.length>0?[W[0]]:[]}});const T=p.match(/z-for="([^"]+)"/g);return T?(_.debug("createNewComponent: z-for記法発見:",T),T.forEach(N=>{const F=N.match(/z-for="([^"]+)"/);if(F){const[,Z]=F;y[Z]?_.debug(`createNewComponent: z-for配列 ${Z} は既に初期化済み`):(_.debug(`createNewComponent: z-for配列 ${Z} を空配列で初期化`),y[Z]=[])}})):_.debug("createNewComponent: z-for記法が見つかりませんでした"),_.debug("createNewComponent完了: newComponent=",y),y},lo,`コンポーネント作成エラー: ${u}/${f?.title}`,qe.COMPONENT)||{id:h(),type:u||"unknown",module_name:f?.title||"unknown"},createArrayItem:u=>{const f={id:h()},g=u.match(/\{\$([^:}]+):([^}]+)\}/g);g&&g.forEach(p=>{const C=p.match(/\{\$([^:}]+):([^}]+)\}/);if(C){const[,S,P]=C;f[S]=String(P)}});const y=u.match(/\(\$([^:?]+):(.*?)\)/g);return y&&y.forEach(p=>{const C=p.match(/\(\$([^:?]+):(.*?)\)/);if(C){const[,S,P]=C,T=P.split("|").filter(N=>N.trim()!=="");T.length>0&&(f[S]=String(T[0]))}}),f},getArrayItemFieldInfo:(u,f)=>{const g=a(u.type,u.module_name);if(!g)return[];const y=[];let p="";const C=l(g,f);return C&&(p=C),p&&(p.match(/\(\$([^:]+):(.*?)\)/g)||[]).forEach(P=>{const T=P.match(/\(\$([^:]+):(.*?)\)/);if(T){const[,N,F]=T,Z=N.includes("?"),H=N.replace("?","");if(F.includes("|")){let W=F.split("|"),G=!1;if((F.includes("||")||F.startsWith("|")||F.endsWith("|"))&&(G=!0),W=W.filter(re=>re.trim()!==""),G&&W.unshift("指定なし"),Z){const re=W.length>0?[W[0]]:[],_e={type:"checkbox",paramName:H,propKey:H,options:W,defaultValue:re,label:`${H} (チェックボックス)`};y.push(_e)}else{const re=W[0]||"",_e={type:"radio",paramName:H,propKey:H,options:W,defaultValue:re,label:`${H} (ラジオボタン)`};y.push(_e)}}else if(F.includes(",")){const W=F.split(",").map(G=>G.trim()).filter(G=>G!=="");if(Z){const G=W.length>0?[W[0]]:[],re={type:"select-multiple",paramName:H,propKey:H,options:W,defaultValue:G,label:`${H} (セレクトボックス・複数選択)`};y.push(re)}else{const G=W[0]||"",re={type:"select",paramName:H,propKey:H,options:W,defaultValue:G,label:`${H} (セレクトボックス)`};y.push(re)}}else{const W={type:"text",paramName:H,propKey:H,options:[],defaultValue:F,label:`${H} (テキストボックス)`};y.push(W)}}}),y}}}const Pg={class:"zero-code-content-sidebar"},Sg={key:0,class:"zero-code-editable-component"},Tg={class:"zero-code-component-info"},Dg={class:"zero-code-component-type"},xg={class:"zero-code-component-module"},Mg={class:"zero-code-component-id"},Ng={class:"zero-code-fields"},Fg={class:"zero-code-field-label"},Og={key:0,class:"zero-code-text-group"},kg=["value","onInput"],Lg={key:1,class:"zero-code-radio-group"},Rg=["id","value","name","checked","onChange"],Bg=["for"],Hg={key:2,class:"zero-code-checkbox-group"},jg=["id","checked","onChange"],Ug=["for"],Vg={key:3,class:"zero-code-select-group"},Zg=["value","onChange"],Wg=["value"],Kg={key:4,class:"zero-code-select-multiple-group"},qg=["value","onChange"],Gg=["value","selected"],Jg={key:0,class:"zero-code-field-group"},Yg=["for"],Xg=["id","value","type","readonly","onInput"],Qg=it({__name:"EditorPanel",props:{showEditor:{type:Boolean},selectedComponent:{type:[Object,null]},getFieldInfo:{type:Function},shouldShowBasicField:{type:Function},shouldShowArrayField:{type:Function},shouldShowArrayItemField:{type:Function},getInputType:{type:Function},isCheckboxChecked:{type:Function},partsData:{type:Array},modalContainer:{default:"body",type:String}},emits:["close","update:value","update:array-item","update:checkbox","add:array-item","remove:array-item","reorder:array-item"],setup(e,{emit:t}){const o=e;Ae(()=>!o.modalContainer||o.modalContainer==="body"?!0:typeof document<"u");const r=Ae(()=>!o.modalContainer||o.modalContainer==="body"?"body":typeof document<"u"&&document.querySelector(o.modalContainer)?o.modalContainer:"body"),n=t,s=()=>{n("close")},a=(O,D)=>{n("update:value",O,D)},i=()=>{if(!o.selectedComponent)return;o.getFieldInfo(o.selectedComponent).forEach(D=>{D.defaultValue&&!o.selectedComponent[D.propKey]&&((D.type==="checkbox"||D.type==="select-multiple")&&Array.isArray(D.defaultValue)?a(D.propKey,[...D.defaultValue]):a(D.propKey,D.defaultValue))})};at(()=>o.selectedComponent,O=>{O&&i()},{immediate:!0});const l=(O,D,I,c)=>{if(console.log("🔥 [EditorPanel] updateArrayItemValue呼び出し:",{key:O,index:D,itemKey:I,value:c,componentId:o.selectedComponent?.id,timestamp:new Date().toISOString()}),!o.selectedComponent){console.error("❌ [EditorPanel] selectedComponentがありません");return}const d=o.selectedComponent[O];if(!Array.isArray(d)){console.error(`❌ [EditorPanel] ${O}は配列ではありません:`,d);return}console.log("📋 [EditorPanel] 更新前のアイテム:",d[D]);const b={...d[D],[I]:c};console.log("📝 [EditorPanel] 更新後のアイテム:",b),console.log("🚀 [EditorPanel] update:array-itemイベント発火:",{key:O,index:D,item:b}),n("update:array-item",O,D,b)},h=(O,D,I)=>{n("update:checkbox",O,D,I)},m=(O,D)=>{O&&n("add:array-item",D)},v=(O,D,I)=>{O&&n("remove:array-item",D,I)},A=(O,D,I)=>{if(!o.selectedComponent)return;const c=o.selectedComponent[O];if(!Array.isArray(c))return;const d=[...c],[b]=d.splice(D,1);d.splice(I,0,b),o.selectedComponent[O]=d,_.debug(`📋 配列並べ替え完了: ${O}[${D}] → [${I}]`),n("reorder:array-item",O,D,I)},z=O=>{if(!o.selectedComponent)return{};const D={};if(o.partsData){const d=qr(o.partsData).getArrayItemFieldInfo(o.selectedComponent,O);if(d.forEach(b=>{D[b.propKey]={label:b.label,type:b.type,options:b.options,defaultValue:b.defaultValue}}),d.length>0)return D}const I=o.selectedComponent[O];if(Array.isArray(I)&&I.length>0){const c=I[0];typeof c=="object"&&c!==null&&Object.keys(c).forEach(d=>{d!=="id"&&(c[d],D[d]={label:d.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase()),type:d.includes("desc")||d.includes("content")?"textarea":"text"})})}return Object.keys(D).length===0?{title:{label:"タイトル",type:"text"},content:{label:"内容",type:"textarea"}}:D},x=O=>O.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()).concat(" 一覧"),k=O=>{let D=O;return O.endsWith("s")&&(D=O.slice(0,-1)),D.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase())};return(O,D)=>(j(),dt(li,{to:r.value},[O.showEditor&&O.selectedComponent?(j(),U("div",{key:0,class:"zero-code-overlay",onClick:s},[$("div",{class:"zero-code-sidebar",onClick:D[0]||(D[0]=Mt(()=>{},["stop"]))},[$("div",{class:"zero-code-header"},[$("div",{class:"zero-code-header-buttons"},[$("button",{class:"zero-code-btn zero-code-close-button",onClick:s},"✖️")])]),$("div",Pg,[O.selectedComponent?(j(),U("div",Sg,[$("div",Tg,[$("span",Dg,ae(O.selectedComponent.type),1),$("span",xg,ae(O.selectedComponent.module_name),1),$("span",Mg,"ID: "+ae(O.selectedComponent.id),1)]),$("div",Ng,[(j(!0),U(ze,null,Fe(O.getFieldInfo(O.selectedComponent),I=>(j(),U("div",{key:I.propKey,class:"zero-code-template-field"},[$("label",Fg,ae(I.label)+":",1),I.type==="text"?(j(),U("div",Og,[$("input",{value:O.selectedComponent[I.propKey]||I.defaultValue,type:"text",class:"zero-code-field-input",onInput:c=>{const d=c.target;a(I.propKey,d.value)}},null,40,kg)])):ve("",!0),I.type==="radio"?(j(),U("div",Lg,[(j(!0),U(ze,null,Fe(I.options,c=>(j(),U("div",{key:c,class:"zero-code-radio-item"},[$("input",{id:`${O.selectedComponent.id}_${I.propKey}_${c}`,value:c,type:"radio",name:`${O.selectedComponent.id}_${I.propKey}`,class:"zero-code-radio-input",checked:O.selectedComponent[I.propKey]===c||c==="指定なし"&&!O.selectedComponent[I.propKey],onChange:d=>a(I.propKey,c==="指定なし"?"":c)},null,40,Rg),$("label",{for:`${O.selectedComponent.id}_${I.propKey}_${c}`,class:"zero-code-radio-label"},ae(c),9,Bg)]))),128))])):ve("",!0),I.type==="checkbox"?(j(),U("div",Hg,[(j(!0),U(ze,null,Fe(I.options,c=>(j(),U("div",{key:c,class:"zero-code-checkbox-item"},[$("input",{id:`${O.selectedComponent.id}_${I.propKey}_${c}`,checked:O.isCheckboxChecked(O.selectedComponent,I.propKey,c)||Array.isArray(I.defaultValue)&&I.defaultValue.includes(c)&&!O.selectedComponent[I.propKey],type:"checkbox",class:"zero-code-checkbox-input",onChange:d=>{const b=d.target;h(I.propKey,c,b.checked)}},null,40,jg),$("label",{for:`${O.selectedComponent.id}_${I.propKey}_${c}`,class:"zero-code-checkbox-label"},ae(c),9,Ug)]))),128))])):ve("",!0),I.type==="select"?(j(),U("div",Vg,[$("select",{value:O.selectedComponent[I.propKey]||I.defaultValue,class:"zero-code-field-input zero-code-select-input",onChange:c=>{const d=c.target;a(I.propKey,d.value)}},[(j(!0),U(ze,null,Fe(I.options,c=>(j(),U("option",{key:c,value:c},ae(c),9,Wg))),128))],40,Zg)])):ve("",!0),I.type==="select-multiple"?(j(),U("div",Kg,[$("select",{value:O.selectedComponent[I.propKey]||I.defaultValue,multiple:"",class:"zero-code-field-input zero-code-select-multiple",onChange:c=>{const d=c.target,b=Array.from(d.selectedOptions).map(E=>E.value);a(I.propKey,b)}},[(j(!0),U(ze,null,Fe(I.options,c=>(j(),U("option",{key:c,value:c,selected:Array.isArray(O.selectedComponent[I.propKey])&&O.selectedComponent[I.propKey].includes(c)},ae(c),9,Gg))),128))],40,qg)])):ve("",!0)]))),128)),(j(!0),U(ze,null,Fe(O.selectedComponent,(I,c)=>(j(),U(ze,{key:String(c)},[O.shouldShowBasicField(String(c),I,O.selectedComponent)?(j(),U("div",Jg,[$("label",{for:`${O.selectedComponent.id}_${String(c)}`},ae(c)+":",9,Yg),$("input",{id:`${O.selectedComponent.id}_${String(c)}`,value:I,type:O.getInputType(String(c)),class:"zero-code-field-input",readonly:String(c)==="id",onInput:d=>{const b=d.target;a(String(c),b.value)}},null,40,Xg)])):ve("",!0)],64))),128)),(j(!0),U(ze,null,Fe(O.selectedComponent,(I,c)=>(j(),U(ze,{key:String(c)},[O.shouldShowArrayField(String(c),I,O.selectedComponent)?(j(),dt(Cg,{key:0,"component-id":O.selectedComponent.id,"array-key":String(c),items:Array.isArray(I)?I:[],fields:z(String(c)),label:x(String(c)),"item-label":k(String(c)),onAdd:()=>m(O.selectedComponent,String(c)),onRemove:d=>v(O.selectedComponent,String(c),d),onReorder:(d,b)=>A(String(c),d,b),onUpdate:(d,b,E)=>l(String(c),d,b,E)},null,8,["component-id","array-key","items","fields","label","item-label","onAdd","onRemove","onReorder","onUpdate"])):ve("",!0)],64))),128))])])):ve("",!0)])])])):ve("",!0)],8,["to"]))}}),em={class:"zero-code-tab-content"},tm=it({__name:"EditorMainPanel",props:{dataTab:{type:String},editablePageData:{type:Array},localParts:{type:Array},localCommonParts:{type:Array},localIndividualParts:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array},showPartSelector:{type:Boolean},showNestedPartSelector:{type:Boolean},showEditor:{type:Boolean},selectedComponent:{type:[Object,null]},renderComponentWithNested:{type:Function},getFieldInfo:{type:Function},shouldShowBasicField:{type:Function},shouldShowArrayField:{type:Function},shouldShowArrayItemField:{type:Function},getInputType:{type:Function},isCheckboxChecked:{type:Function},partsData:{type:Array},isTextEditing:{type:Boolean}},emits:["update:data-tab","add-part","edit-part","delete-part","reorder-parts","close-part-selector","select-part","close-nested-part-selector","select-nested-part","close-editor","update-editor-value","add-array-item","remove-array-item","update-array-item","update-checkbox"],setup(e,{emit:t}){const o=e,r=Math.random().toString(36).substr(2,9);return Ro(async()=>{await Bt();const n=`.modal-container-${r}`;document.querySelector(n)||console.warn(`モーダルコンテナが見つかりません: ${n}`)}),at(()=>o.editablePageData,n=>{},{deep:!0}),(n,s)=>(j(),U("div",em,[et(Pp,{"model-value":n.dataTab,"page-data":n.editablePageData,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"common-parts":n.localCommonParts,"individual-parts":n.localIndividualParts,"common-images":n.commonImages,"individual-images":n.individualImages,"render-component-with-nested":n.renderComponentWithNested,"is-text-editing":n.isTextEditing,"onUpdate:modelValue":s[0]||(s[0]=a=>n.$emit("update:data-tab",a)),onAddPart:s[1]||(s[1]=a=>n.$emit("add-part",a)),onEditPart:s[2]||(s[2]=a=>n.$emit("edit-part",a)),onDeletePart:s[3]||(s[3]=a=>n.$emit("delete-part",a)),onReorderParts:s[4]||(s[4]=a=>n.$emit("reorder-parts",a))},null,8,["model-value","page-data","parts","common-parts","individual-parts","common-images","individual-images","render-component-with-nested","is-text-editing"]),n.showPartSelector?(j(),dt(lc,{key:0,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"modal-container":`.modal-container-${pe(r)}`,onClose:s[5]||(s[5]=a=>n.$emit("close-part-selector")),onSelectPart:s[6]||(s[6]=(a,i)=>n.$emit("select-part",a,i))},null,8,["parts","modal-container"])):ve("",!0),n.showNestedPartSelector?(j(),dt(lc,{key:1,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"is-nested":!0,"modal-container":`.modal-container-${pe(r)}`,onClose:s[7]||(s[7]=a=>n.$emit("close-nested-part-selector")),onSelectPart:s[8]||(s[8]=(a,i)=>n.$emit("select-nested-part",a,i))},null,8,["parts","modal-container"])):ve("",!0),$("div",{class:ot(`modal-container-${pe(r)}`),style:{position:"relative","z-index":"9999"}},null,2),(j(),dt(Qg,{key:2,"show-editor":n.showEditor,"selected-component":n.selectedComponent,"get-field-info":n.getFieldInfo,"should-show-basic-field":n.shouldShowBasicField,"should-show-array-field":n.shouldShowArrayField,"should-show-array-item-field":n.shouldShowArrayItemField,"get-input-type":n.getInputType,"is-checkbox-checked":n.isCheckboxChecked,"modal-container":`.modal-container-${pe(r)}`,onClose:s[9]||(s[9]=a=>n.$emit("close-editor")),"onUpdate:value":s[10]||(s[10]=(a,i)=>n.$emit("update-editor-value",a,i)),"onAdd:arrayItem":s[11]||(s[11]=a=>n.$emit("add-array-item",a)),"onRemove:arrayItem":s[12]||(s[12]=(a,i)=>n.$emit("remove-array-item",a,i)),"onUpdate:arrayItem":s[13]||(s[13]=(a,i,l)=>{console.log("🔥 [EditorMainPanel] update:array-itemイベント受信:",{key:a,index:i,item:l,timestamp:new Date().toISOString()}),n.$emit("update-array-item",a,i,l),console.log("🚀 [EditorMainPanel] update-array-itemイベント発火完了")}),"onUpdate:checkbox":s[14]||(s[14]=a=>n.$emit("update-checkbox",a))},null,8,["show-editor","selected-component","get-field-info","should-show-basic-field","should-show-array-field","should-show-array-item-field","get-input-type","is-checkbox-checked","modal-container"]))]))}}),om={class:"zero-code-data-display"},rm={class:"zero-code-data-tabs"},nm={class:"zero-code-form-group"},sm={class:"zero-code-form-group"},am=["value"],im={class:"zero-code-data-content"},lm={key:0,class:"zero-code-rendered-content"},cm={class:"zero-code-component-header"},dm={class:"zero-code-component-info-header"},um={class:"zero-code-component-type"},fm={class:"zero-code-component-id"},pm={class:"zero-code-rendered-component"},gm={class:"zero-code-component-header"},mm={class:"zero-code-component-info-header"},hm={class:"zero-code-component-module"},vm={class:"zero-code-header-actions"},ym=["onClick"],bm=["onClick"],_m=["innerHTML"],$m={key:1,class:"zero-code-no-parts"},dc=it({__name:"PartsManager",props:{parts:{type:Array},renderPartPreview:{type:Function}},emits:["edit-part","delete-part","search","filter"],setup(e,{emit:t}){const o=e,r=t,n=we(""),s=we(""),a=Ae(()=>Array.from(new Set(o.parts.map(m=>m.type)))),i=Ae(()=>{let m=[...o.parts];if(s.value&&(m=m.filter(v=>v.type===s.value)),n.value){const v=n.value.toLowerCase();m=m.map(A=>({...A,module:A.module.filter(z=>z.title.toLowerCase().includes(v)||z.body.toLowerCase().includes(v))})).filter(A=>A.module.length>0)}return m}),l=()=>{r("search",n.value)},h=()=>{r("filter",s.value)};return(m,v)=>(j(),U("div",om,[v[4]||(v[4]=$("div",{class:"zero-code-component-header"},[$("h4",null,"パーツ管理")],-1)),$("div",rm,[$("div",nm,[wt($("input",{"onUpdate:modelValue":v[0]||(v[0]=A=>n.value=A),placeholder:"パーツ名で検索...",class:"zero-code-form-input",onInput:l},null,544),[[jt,n.value]])]),$("div",sm,[wt($("select",{"onUpdate:modelValue":v[1]||(v[1]=A=>s.value=A),class:"zero-code-form-select",onChange:h},[v[2]||(v[2]=$("option",{value:""},"すべてのType",-1)),(j(!0),U(ze,null,Fe(a.value,A=>(j(),U("option",{key:A,value:A},ae(A),9,am))),128))],544),[[bl,s.value]])])]),$("div",im,[Array.isArray(i.value)&&i.value.length>0?(j(),U("div",lm,[(j(!0),U(ze,null,Fe(i.value,(A,z)=>(j(),U("div",{key:z,class:"zero-code-data-section"},[$("div",cm,[$("div",dm,[$("span",um,ae(A.type),1)]),$("span",fm,ae(A.module.length)+"個のパーツ",1)]),$("div",pm,[(j(!0),U(ze,null,Fe(A.module,(x,k)=>(j(),U("div",{key:k,class:"zero-code-draggable-item"},[$("div",gm,[$("div",mm,[$("span",hm,ae(x.title),1)]),$("div",vm,[$("button",{class:"zero-code-edit-btn",onClick:O=>m.$emit("edit-part",{type:A.type,module:x})}," 編集 ",8,ym),$("button",{class:"zero-code-delete-btn",onClick:O=>m.$emit("delete-part",{type:A.type,title:x.title})}," 削除 ",8,bm)])]),$("div",{class:"zero-code-module-preview",innerHTML:o.renderPartPreview(x.body)},null,8,_m)]))),128))])]))),128))])):(j(),U("div",$m,v[3]||(v[3]=[$("p",null,"登録されたパーツがありません。",-1)])))])]))}}),wm={class:"zero-code-modal-header"},zm={class:"zero-code-modal-title"},Am={class:"zero-code-title-main"},Cm={class:"zero-code-modal-subtitle"},Em={class:"zero-code-modal-body"},Im={class:"zero-code-form-layout"},Pm={class:"zero-code-form-section"},Sm={key:0,class:"zero-code-form-group"},Tm={class:"zero-code-type-input-group"},Dm=["value"],xm={key:1,class:"zero-code-form-group"},Mm={class:"zero-code-form-group"},Nm={class:"zero-code-body-editor-container"},Fm={class:"zero-code-preview-section"},Om={class:"zero-code-preview-container"},km=["innerHTML"],Lm={class:"zero-code-modal-footer"},Rm={class:"zero-code-modal-actions"},Bm=["disabled"],Hm=it({__name:"PartRegistrationModal",props:{isEditing:{type:Boolean,default:!1},existingTypes:{type:Array},partCategory:{default:"common",type:String},editingPart:{default:null,type:[Object,null]},initialData:{default:()=>({type:"",title:"",body:""}),type:Object},renderPartPreview:{type:Function}},emits:["close","save"],setup(e,{emit:t}){const o=e,r=t,s=we(o.isEditing&&o.editingPart?{type:o.editingPart.type,title:o.editingPart.module.title,body:o.editingPart.module.body}:{type:o.initialData.type,title:o.initialData.title,body:o.initialData.body}),a=Ae(()=>(o.isEditing||s.value.type.trim()!==""&&s.value.title.trim()!=="")&&s.value.body.trim()!==""),i=()=>{},l=()=>{a.value&&r("save",{type:s.value.type,title:s.value.title,body:s.value.body,category:o.partCategory||"common"})};return(h,m)=>(j(),U("div",{class:"zero-code-modal-overlay",onClick:m[7]||(m[7]=v=>h.$emit("close"))},[$("div",{class:"zero-code-part-modal",onClick:m[6]||(m[6]=Mt(()=>{},["stop"]))},[$("div",wm,[$("div",zm,[$("div",Am,[$("h3",null,ae(h.isEditing?"パーツ編集":"新規パーツ登録"),1),$("span",{class:ot(["zero-code-badge",h.partCategory])},ae(h.partCategory==="common"?"共通パーツ":"個別パーツ"),3)]),$("p",Cm,ae(h.isEditing?"パーツの内容を編集できます":"新しいパーツを作成します"),1)]),$("button",{class:"zero-code-modal-close-btn",onClick:m[0]||(m[0]=v=>h.$emit("close"))},m[8]||(m[8]=[$("span",null,"✖️",-1)]))]),$("div",Em,[$("div",Im,[$("div",Pm,[h.isEditing?ve("",!0):(j(),U("div",Sm,[m[10]||(m[10]=$("label",{for:"part-type",class:"zero-code-form-label"},"Type",-1)),$("div",Tm,[wt($("select",{id:"part-type","onUpdate:modelValue":m[1]||(m[1]=v=>s.value.type=v),class:"zero-code-form-select"},[m[9]||(m[9]=$("option",{value:""},"新しいTypeを選択",-1)),(j(!0),U(ze,null,Fe(h.existingTypes,v=>(j(),U("option",{key:v,value:v},ae(v),9,Dm))),128))],512),[[bl,s.value.type]]),!s.value.type||!h.existingTypes.includes(s.value.type)?wt((j(),U("input",{key:0,"onUpdate:modelValue":m[2]||(m[2]=v=>s.value.type=v),placeholder:"新しいType名を入力",class:"zero-code-form-input"},null,512)),[[jt,s.value.type]]):ve("",!0)])])),h.isEditing?ve("",!0):(j(),U("div",xm,[m[11]||(m[11]=$("label",{for:"part-title",class:"zero-code-form-label"},"Title",-1)),wt($("input",{id:"part-title","onUpdate:modelValue":m[3]||(m[3]=v=>s.value.title=v),placeholder:"パーツのタイトルを入力",class:"zero-code-form-input"},null,512),[[jt,s.value.title]])])),$("div",Mm,[m[12]||(m[12]=$("label",{for:"part-body",class:"zero-code-form-label"},"HTML Template",-1)),$("div",Nm,[wt($("textarea",{id:"part-body","onUpdate:modelValue":m[4]||(m[4]=v=>s.value.body=v),class:"zero-code-body-editor",placeholder:"HTMLソースを直接編集してください...",onInput:i},null,544),[[jt,s.value.body]])])])]),$("div",Fm,[m[13]||(m[13]=$("div",{class:"zero-code-preview-header"},[$("h4",null,"プレビュー"),$("span",{class:"zero-code-preview-info"},"リアルタイムで表示を確認")],-1)),$("div",Om,[$("div",{class:"zero-code-preview-content",innerHTML:h.renderPartPreview(s.value.body)},null,8,km)])])])]),$("div",Lm,[$("div",Rm,[$("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:m[5]||(m[5]=v=>h.$emit("close"))}," キャンセル "),$("button",{class:"zero-code-btn zero-code-btn-primary",disabled:!a.value,onClick:l},ae(h.isEditing?"更新":"登録"),9,Bm)])])])]))}}),jm={class:"zero-code-tab-content"},Um={class:"zero-code-data-tabs"},Vm={class:"zero-code-tab-buttons"},Zm=["onClick"],Wm={class:"zero-code-parts-content"},Km={key:0,class:"zero-code-parts-section"},qm={class:"zero-code-section-header"},Gm={key:1,class:"zero-code-parts-section"},Jm={class:"zero-code-section-header"},Ym={key:2,class:"zero-code-parts-section"},Xm={class:"zero-code-data-display-section"},Qm={class:"zero-code-parts-sub-tabs"},eh={class:"zero-code-parts-sub-content"},th={key:0,class:"zero-code-parts-sub-section"},oh={key:0},rh={class:"zero-code-data-display-pre"},nh={key:1},sh={key:1,class:"zero-code-parts-sub-section"},ah={key:0},ih={class:"zero-code-data-display-pre"},lh={key:1},ch=it({__name:"PartsManagementPanel",props:{localParts:{type:Array},localCommonParts:{type:Array},localIndividualParts:{type:Array},showPartRegistration:{type:Boolean},existingPartTypes:{type:Array},editingPart:{type:null},renderPartPreview:{type:Function}},emits:["update-parts","edit-part","delete-part","show-registration","close-registration","save-part"],setup(e,{emit:t}){const o=e,r=t,n=we("common"),s=we("common"),a=we("common"),i=["common","individual","data"],l=D=>({common:"共通パーツ",individual:"個別パーツ",data:"データ表示"})[D],h=Ae(()=>o.localCommonParts&&o.localCommonParts.length>0?o.localCommonParts:o.localParts.map(D=>({...D,module:D.module.filter(I=>{const c=I;return!c.category||c.category==="common"})})).filter(D=>D.module.length>0)),m=Ae(()=>o.localIndividualParts&&o.localIndividualParts.length>0?o.localIndividualParts:o.localParts.map(D=>({...D,module:D.module.filter(I=>I.category==="individual")})).filter(D=>D.module.length>0)),v=D=>{s.value=D,r("show-registration")},A=()=>{r("close-registration")},z=D=>{const I=D.module;s.value=I.category||"common",r("edit-part",D)},x=D=>{r("delete-part",D)},k=D=>{const I={...D,category:s.value};r("save-part",I)},O=D=>{const I=(c,d=0)=>{const b="  ".repeat(d),E="  ".repeat(d+1);if(Array.isArray(c))return c.length===0?"[]":`[
${c.map(u=>E+I(u,d+1)).join(`,
`)}
${b}]`;if(typeof c=="object"&&c!==null){const w=Object.entries(c);return w.length===0?"{}":`{
${w.map(([f,g])=>{let y;if(typeof g=="string"){const p=g.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(p.includes(`
`)){const C=p.split(`
`);y=C.map((P,T)=>T===0?`\`${P}`:T===C.length-1?`${E}${P}\``:`${E}${P}`).join(`
`)}else y=`"${p}"`}else y=I(g,d+1);return`${E}"${f}": ${y}`}).join(`,
`)}
${b}}`}return typeof c=="string"?`"${c.replace(/"/g,'\\"')}"`:JSON.stringify(c)};return I(D)};return(D,I)=>(j(),U("div",jm,[$("div",Um,[$("div",Vm,[(j(),U(ze,null,Fe(i,c=>$("button",{key:c,class:ot(["zero-code-data-tab-button",{active:n.value===c}]),onClick:d=>n.value=c},ae(l(c)),11,Zm)),64))])]),$("div",Wm,[n.value==="common"?(j(),U("div",Km,[$("div",qm,[$("h4",null,"共通パーツ ("+ae(h.value.length)+"件)",1),$("button",{class:"zero-code-add-part-btn",onClick:I[0]||(I[0]=c=>v("common"))}," ＋ 共通パーツ登録 ")]),et(dc,{parts:h.value,"render-part-preview":D.renderPartPreview,onEditPart:z,onDeletePart:x},null,8,["parts","render-part-preview"])])):ve("",!0),n.value==="individual"?(j(),U("div",Gm,[$("div",Jm,[$("h4",null,"個別パーツ ("+ae(m.value.length)+"件)",1),$("button",{class:"zero-code-add-part-btn",onClick:I[1]||(I[1]=c=>v("individual"))}," ＋ 個別パーツ登録 ")]),et(dc,{parts:m.value,"render-part-preview":D.renderPartPreview,onEditPart:z,onDeletePart:x},null,8,["parts","render-part-preview"])])):ve("",!0),n.value==="data"?(j(),U("div",Ym,[$("div",Xm,[$("div",Qm,[$("button",{class:ot(["zero-code-parts-sub-tab-button",{active:a.value==="common"}]),onClick:I[2]||(I[2]=c=>a.value="common")}," 共通Partsデータ ",2),$("button",{class:ot(["zero-code-parts-sub-tab-button",{active:a.value==="individual"}]),onClick:I[3]||(I[3]=c=>a.value="individual")}," 個別Partsデータ ",2)]),$("div",eh,[a.value==="common"?(j(),U("div",th,[h.value&&h.value.length>0?(j(),U("div",oh,[$("pre",rh,ae(O(h.value)),1)])):(j(),U("div",nh,I[4]||(I[4]=[$("p",null,"共通パーツデータがありません",-1)])))])):ve("",!0),a.value==="individual"?(j(),U("div",sh,[m.value&&m.value.length>0?(j(),U("div",ah,[$("pre",ih,ae(O(m.value)),1)])):(j(),U("div",lh,I[5]||(I[5]=[$("p",null,"個別パーツデータがありません",-1)])))])):ve("",!0)])])])):ve("",!0)]),D.showPartRegistration?(j(),dt(Hm,{key:0,"existing-types":D.existingPartTypes,"render-part-preview":D.renderPartPreview,"editing-part":D.editingPart,"is-editing":!!D.editingPart,"part-category":s.value,onClose:A,onSave:k},null,8,["existing-types","render-part-preview","editing-part","is-editing","part-category"])):ve("",!0)]))}});function he(e){return e?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):""}let Gr,Yt;function dh(e,t){Gr=e,Yt=t}function ga(e,t){e.querySelectorAll("[z-if]").forEach(r=>{const n=r.getAttribute("z-if");n&&(t[n]?r.removeAttribute("z-if"):r.remove())})}function uh(e,t){const o=e.querySelectorAll("[z-for-wrapper]");o.length>0&&o.forEach(r=>{const n=r.getAttribute("z-for-wrapper");if(n){const s=t[n];!Array.isArray(s)||s.length,r.removeAttribute("z-for-wrapper")}})}function uc(e,t){return`
    <div class="zero-code-add-array-item-button-container">
      <button class="zero-code-add-array-item-button" onclick="window.addArrayItem('${he(e)}', '${he(t)}')">
        <span class="zero-code-plus-icon">＋</span>
        <span class="zero-code-button-text">${t}を追加</span>
      </button>
    </div>
  `}function fh(e,t,o){return`
    <div class="zero-code-z-for-controls" data-component-id="${e}" data-array-name="${t}" data-index="${o}">
      <div class="zero-code-z-for-controls-inner">
        <button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${he(e)}', '${he(t)}', ${o})" title="上に追加">
          <span class="zero-code-control-icon">＋</span>
        </button>
        <span class="zero-code-z-for-drag-handle"
              draggable="true"
              onDragStart="window.handleZForDragStart(event, '${he(e)}', '${he(t)}', ${o})"
              style="cursor: grab;"
              title="ドラッグして並び替え">⠿</span>
        <button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${he(e)}', '${he(t)}', ${o})" title="編集">
          <span class="zero-code-control-icon">✎</span>
        </button>
        <button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${he(e)}', '${he(t)}', ${o})" title="削除">
          <span class="zero-code-control-icon">✕</span>
        </button>
      </div>
    </div>
  `}function fc(e,t,o,r,n,s,a){const i=e.querySelectorAll("[z-for]");i.length>0&&(i.forEach(h=>{const m=h.getAttribute("z-for");if(m){const v=t[m];if(Array.isArray(v)&&v.length>0){const A=n(t.type,t.module_name),z=new RegExp(`<(\\w+)[^>]*z-for="${m}"[^>]*>`),x=A.match(z),k=x?A.indexOf(x[0]):-1;if(k!==-1&&x){const O=x[1];let D=0,I=k;for(let b=k;b<A.length;b++)if(A.substring(b,b+O.length+1)===`<${O}`)D++;else if(A.substring(b,b+O.length+3)===`</${O}>`&&(D--,D===0)){I=b+O.length+3;break}const c=A.substring(k,I),d=[c];if(d&&d[0]){let b="";const E=c.match(new RegExp(`<${O}([^>]*z-for="[^"]*"[^>]*)>`));let w="";E&&E[1]&&(w=E[1].replace(/\s*z-for="[^"]*"\s*/,"").trim());const u=c.indexOf(">")+1,f=c.lastIndexOf(`</${O}>`),g=c.substring(u,f).trim();if(g){const y=g;v.forEach((S,P)=>{let T=y;const N=S.id||`${t.id}_${m}_${P}_${Date.now()}`,F=a||s||t.id;console.log("🔧 [DEBUG] z-forボタン用ID決定:",{originalParentId:a,parentPath:s,componentId:t.id,actualComponentId:F}),t.id.startsWith("comp_")&&F!==t.id&&typeof window<"u"&&window.registerTemporaryIdMapping&&window.registerTemporaryIdMapping(t.id,F);const Z=`<div class="zero-code-z-for-controls" data-component-id="${he(F)}" data-array-name="${he(m)}" data-item-id="${he(N)}" data-index="${P}">
<div class="zero-code-z-for-controls-inner">
<button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${he(t.id)}', '${he(m)}', '${he(N)}')" title="上に追加">
<span class="zero-code-control-icon">＋</span>
</button>
<span class="zero-code-z-for-drag-handle" draggable="true" onDragStart="window.handleZForDragStart(event, '${he(t.id)}', '${he(m)}', '${he(N)}')" title="ドラッグして並び替え">⠿</span>
<button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${he(t.id)}', '${he(m)}', '${he(N)}')" title="編集">
<span class="zero-code-control-icon">✎</span>
</button>
<button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${he(t.id)}', '${he(m)}', '${he(N)}')" title="削除">
<span class="zero-code-control-icon">✕</span>
</button>
</div>
</div>`;if(Gr&&(T=Gr(T,S,t,A,m)),Yt&&(T=Yt(T,S)),T.includes("z-if")||T.includes("z-slot")||T.includes("z-for")){const Ze=new DOMParser().parseFromString(`<div>${T}</div>`,"text/html"),Je=`${t.id}_${m}_${P}`;let Xt=t;if(typeof window<"u"&&window.getLatestComponentData){const Y=window.getLatestComponentData(t.id);Y&&(Xt=Y)}const M={...Xt,...S,type:Xt.type,module_name:Xt.module_name,id:Je};ga(Ze,M),Ze.querySelectorAll("[z-slot]").forEach(Y=>{const K=Y.getAttribute("z-slot");if(K&&M[K]){const X=M[K];if(Array.isArray(X)&&X.length>0){let oe='<div class="zero-code-z-for-nested-parts">';X.forEach((me,$e)=>{const De=`${t.id}.${m}[${P}].${K}`;oe+=`
                            <div class="zero-code-add-nested-part-button-container">
                              <button class="zero-code-add-position-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${he(De)}', ${$e})">
                                <span class="zero-code-plus-icon">＋</span>
                                <span class="zero-code-button-text">上にパーツを追加</span>
                              </button>
                            </div>
                          `;const je=r(me,n,o+2),Te=`${t.id}.${m}[${P}].${K}[${$e}]`,ut=o+2;oe+=`
                            <div class="zero-code-nested-component zero-code-nested-depth-${ut} zero-code-z-for-nested-part" 
                                 draggable="true"
                                 data-component-id="${me.id}" 
                                 data-path="${Te}" 
                                 data-parent-path="${t.id}.${m}[${P}].${K}"
                                 data-index="${$e}"
                                 data-nested-path="${Te}"
                                 data-slot-name="${K}"
                                 data-part-index="${$e}"
                                 ondragstart="window.handleNestedPartDragStart && window.handleNestedPartDragStart(event)"
                                 ondragend="window.handleNestedPartDragEnd && window.handleNestedPartDragEnd(event)"
                                 class="zero-code-nested-component"
                                 onmousedown="this.style.cursor = 'grabbing'"
                                 onmouseup="this.style.cursor = 'grab'">
                              <div class="zero-code-component-header zero-code-nested-header">
                                <!-- ドラッグハンドル（視覚的インジケーター） -->
                                <div class="zero-code-drag-handle-nested" title="ドラッグして並び替え">
                                  ⠿
                                </div>
                                <div class="zero-code-component-meta">
                                  <span class="zero-code-component-type">${me.type}</span>
                                  <span class="zero-code-component-module">${me.module_name}</span>
                                </div>
                                <div class="zero-code-header-actions">
                                  <button 
                                    class="zero-code-collapse-btn"
                                    onclick="window.toggleNestedCollapse('${he(Te)}')"
                                    title="折りたたみ切り替え"
                                    id="collapse-btn-${he(Te)}"
                                  >
                                    －
                                  </button>
                                  <button class="zero-code-edit-button" onclick="window.openNestedEditor('${he(Te)}')">編集</button>
                                  <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${he(Te)}')">削除</button>
                                </div>
                              </div>
                              <div class="zero-code-nested-component-content" 
                                   id="nested-content-${he(Te)}"
                                   ondragover="window.handleNestedPartDragOver && window.handleNestedPartDragOver(event)"
                                   ondrop="window.handleNestedPartDrop && window.handleNestedPartDrop(event)"
                                   data-slot-name="${K}" 
                                   data-part-index="${$e}" 
                                   data-parent-path="${t.id}.${m}[${P}].${K}">${je}</div>
                            </div>
                          `});const Q=`${t.id}.${m}[${P}].${K}`;oe+=`
                          <div class="zero-code-add-nested-part-button-container">
                            <button class="zero-code-add-position-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${he(Q)}', ${X.length})">
                              <span class="zero-code-plus-icon">＋</span>
                              <span class="zero-code-button-text">下にパーツを追加</span>
                            </button>
                          </div>
                        `,oe+="</div>";const ne=Y.innerHTML,ee=document.createElement("div");ee.innerHTML=ne,ee.querySelectorAll('[class*="zero-code-"]').forEach(me=>me.remove());const ce=ee.innerHTML.trim();Y.innerHTML=ce+oe}else{const oe=`${t.id}.${m}[${P}].${K}`,Q=Y.innerHTML,ne=document.createElement("div");ne.innerHTML=Q,ne.querySelectorAll('[class*="zero-code-"]').forEach(ce=>ce.remove());const ye=ne.innerHTML.trim();Y.innerHTML=ye+`
                          <div class="zero-code-z-for-empty-slot">
                            スロット "${K}" は空です
                            <div class="zero-code-add-nested-part-button-container">
                              <button class="zero-code-add-nested-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${he(oe)}', 0)">
                                <span class="zero-code-plus-icon">＋</span>
                                <span class="zero-code-button-text">パーツを追加</span>
                              </button>
                            </div>
                          </div>
                        `}Y.removeAttribute("z-slot")}else if(K){const X=`${t.id}.${m}[${P}].${K}`,oe=Y.innerHTML,Q=document.createElement("div");Q.innerHTML=oe,Q.querySelectorAll('[class*="zero-code-"]').forEach(ye=>ye.remove());const ee=Q.innerHTML.trim();Y.innerHTML=ee+`
                        <div class="zero-code-z-for-empty-slot">
                          スロット "${K}" にデータがありません
                          <div class="zero-code-add-nested-part-button-container">
                            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${he(X)}', 0)">
                              <span class="zero-code-plus-icon">＋</span>
                              <span class="zero-code-button-text">パーツを追加</span>
                            </button>
                          </div>
                        </div>
                      `,Y.removeAttribute("z-slot")}}),Ze.querySelectorAll("[z-for]").length>0&&fc(Ze,M,o+1,r,n,s||t.id,a||t.id),T=Ze.body.innerHTML.replace(/^<div>|<\/div>$/g,"")}let H=w;H.includes("($")&&Yt&&(H=Yt(H,S));let W="",G=H,re="";if(H){const Ze=H.match(/class="([^"]*)"/);Ze&&(W=Ze[1]);const Je=H.match(/style="([^"]*)"/);Je&&(re=Je[1]),G=H.replace(/\s*class="[^"]*"\s*/,"").replace(/\s*style="[^"]*"\s*/,"").trim()}const _e=`${W?W+" ":""}zero-code-z-for-item-wrapper`,Oe=re?`${re}; cursor: grab;`:"cursor: grab;";let Ve=[`class="${_e}"`,'draggable="true"',`data-component-id="${he(t.id)}"`,`data-array-name="${he(m)}"`,`data-item-index="${P}"`,`ondragstart="window.handleZForDragStart && window.handleZForDragStart(event, '${he(t.id)}', '${he(m)}', ${P})"`,'ondragend="window.handleZForDragEnd && window.handleZForDragEnd(event)"','ondragover="window.handleZForArrayItemDragOver && window.handleZForArrayItemDragOver(event)"','ondrop="window.handleZForArrayItemDrop && window.handleZForArrayItemDrop(event)"',`style="${Oe}"`,`onmousedown="this.style.cursor = 'grabbing'"`,`onmouseup="this.style.cursor = 'grab'"`].join(" ");G&&(Ve+=` ${G}`);const xe=`<div ${Ve}>
${Z}
${T}
</div>`;b+=xe});const p=`<div class="zero-code-z-for-add-last-button">
<button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${he(s||t.id)}', '${he(m)}', ${v.length})" title="最後に追加">
<span class="zero-code-control-icon">＋</span>
</button>
</div>`;b+=p;const C=h.parentNode;if(C){const S=document.createElement("div");S.innerHTML=b;const P=document.createDocumentFragment();for(;S.firstChild;)P.appendChild(S.firstChild);C.replaceChild(P,h)}else h.outerHTML=b}}}}else{const A=`<div class="zero-code-z-for-empty-array">
<div class="zero-code-z-for-empty-message">
<p class="zero-code-empty-text">${m}はまだ追加されていません</p>
<button class="zero-code-z-for-btn zero-code-z-for-add-first-btn" onclick="window.addZForArrayItem('${he(a||t.id)}', '${he(m)}', 0)" title="最初の要素を追加">
<span class="zero-code-control-icon">＋</span>
<span class="zero-code-button-text">最初の${m}を追加</span>
</button>
</div>
</div>`;h.innerHTML=A,h.removeAttribute("z-for")}}}),e.querySelectorAll("[z-for-wrapper]").forEach(h=>{h.removeAttribute("z-for-wrapper")}))}function ph(e,t,o){let r=e;const n=/<(\w+)([^>]*z-for="([^"]*)"[^>]*)\s*\/>/g;let s;for(;(s=n.exec(e))!==null;){const[l,h,m,v]=s,A=t[v];if(Array.isArray(A)&&A.length>0){let z="";A.forEach((k,O)=>{let D=m.replace(/\s*z-for="[^"]*"\s*/,"").trim();D.includes("($")&&Yt&&(D=Yt(D,k)),Object.keys(k).forEach(c=>{if(c!=="id"){const d=k[c];if(typeof d=="string"){const b=new RegExp(`\\{\\$${c}:[^}]*\\}`,"g");D=D.replace(b,d)}}});const I=`
          <div class="zero-code-z-for-item-wrapper" 
               data-component-id="${t.id}"
               data-array-name="${v}"
               data-item-index="${O}">
            ${fh(t.id,v,O)}
            <${h}${D?" "+D:""} />
          </div>
        `;z+=I});const x=`
        <div class="zero-code-z-for-add-last-button">
          <button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${originalParentId||t.id}', '${v}', ${A.length})" title="最後に追加">
            <span class="zero-code-control-icon">＋</span>
          </button>
        </div>
      `;z+=x,r=r.replace(l,z)}else r=r.replace(l,uc(t.id,v))}const a=/<(\w+)([^>]*z-for="([^"]*)"[^>]*)>([\s\S]*?)<\/\1>/g;let i;for(;(i=a.exec(e))!==null;){const[l,h,m,v,A]=i,z=t[v];if(Array.isArray(z)&&z.length>0,Array.isArray(z)&&z.length>0){let x="";z.forEach((O,D)=>{let I=A;if(`${he(t.id)}${he(v)}${D}`,Gr&&(I=Gr(I,O,t,e,v)),Yt&&(I=Yt(I,O)),I.includes("z-if")||I.includes("z-slot")||I.includes("z-for")){const p=new DOMParser().parseFromString(`<div>${I}</div>`,"text/html"),C=`${t.id}_${v}_0`;let S=t;if(typeof window<"u"&&window.getLatestComponentData){const N=window.getLatestComponentData(t.id);N&&(S=N)}const P={...O,type:S.type,module_name:S.module_name,id:C};ga(p,P),p.querySelectorAll("[z-slot]").forEach(N=>{const F=N.getAttribute("z-slot");if(F&&P[F]){const Z=P[F];if(Array.isArray(Z)&&Z.length>0){let H='<div class="zero-code-z-for-nested-parts">';Z.forEach((Se,Ve)=>{const xe=`${t.id}.${v}[0].${F}`;H+=`
                    <div class="zero-code-add-nested-part-button-container">
                      <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${he(xe)}', ${Ve})">
                        <span class="zero-code-plus-icon">＋</span>
                        <span class="zero-code-button-text">上にパーツを追加</span>
                      </button>
                    </div>
                  `;let Ze=Se.content||Se.title||Se.name||"(内容なし)";const Je=`${t.id}.${v}[0].${F}[${Ve}]`;H+=`
                    <div class="zero-code-z-for-nested-part">
                      <div class="zero-code-z-for-part-header">
                        <small>${Se.type||"unknown"} (ID: ${Se.id}) [z-for内]</small>
                        <div class="zero-code-z-for-part-actions">
                          <button class="zero-code-edit-button" onclick="window.openNestedEditor('${he(Je)}')">編集</button>
                          <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${he(Je)}')">削除</button>
                        </div>
                      </div>
                      <div>${Ze}</div>
                    </div>
                  `});const W=`${t.id}.${v}[0].${F}`;H+=`
                  <div class="zero-code-add-nested-part-button-container">
                    <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${he(W)}', ${Z.length})">
                      <span class="zero-code-plus-icon">＋</span>
                      <span class="zero-code-button-text">ネストパーツを追加</span>
                    </button>
                  </div>
                `,H+="</div>";const G=N.innerHTML,re=document.createElement("div");re.innerHTML=G,re.querySelectorAll('[class*="zero-code-"]').forEach(Se=>Se.remove());const Oe=re.innerHTML.trim();N.innerHTML=Oe+H}else{const H=N.innerHTML,W=document.createElement("div");W.innerHTML=H,W.querySelectorAll('[class*="zero-code-"]').forEach(_e=>_e.remove());const re=W.innerHTML.trim();N.innerHTML=re+`
                  <div class="zero-code-z-for-empty-slot">
                    スロット "${F}" は空です
                    <div class="zero-code-add-nested-part-button-container">
                      <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${he(t.id)}', 0)">
                        <span class="zero-code-plus-icon">＋</span>
                        <span class="zero-code-button-text">ネストパーツを追加</span>
                      </button>
                    </div>
                  </div>
                `}N.removeAttribute("z-slot")}else if(F){const Z=N.innerHTML,H=document.createElement("div");H.innerHTML=Z,H.querySelectorAll('[class*="zero-code-"]').forEach(re=>re.remove());const G=H.innerHTML.trim();N.innerHTML=G+`
                <div class="zero-code-z-for-empty-slot">
                  スロット "${F}" にデータがありません
                  <div class="zero-code-add-nested-part-button-container">
                    <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${he(t.id)}', 0)">
                      <span class="zero-code-plus-icon">＋</span>
                      <span class="zero-code-button-text">ネストパーツを追加</span>
                    </button>
                  </div>
                </div>
              `,N.removeAttribute("z-slot")}}),I=p.body.innerHTML.replace(/^<div>|<\/div>$/g,"")}let c=m.replace(/\s*z-for="[^"]*"\s*/,"").trim();c.includes("($")&&Yt&&(c=Yt(c,O));let d="",b="",E=c;if(c){const p=c.match(/class="([^"]*)"/);p&&(d=p[1]);const C=c.match(/style="([^"]*)"/);C&&(b=C[1]),E=c.replace(/\s*class="[^"]*"\s*/,"").replace(/\s*style="[^"]*"\s*/,"").trim()}const w=`${d?d+" ":""}zero-code-z-for-item-wrapper`,u=b?`${b}; cursor: grab;`:"cursor: grab;",f=`
          <div class="zero-code-z-for-controls" data-component-id="${t.id}" data-array-name="${v}" data-index="${D}">
            <div class="zero-code-z-for-controls-inner">
              <button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${he(originalParentId||t.id)}', '${he(v)}', ${D})" title="上に追加">
                <span class="zero-code-control-icon">＋</span>
              </button>
              <span class="zero-code-z-for-drag-handle"
                    draggable="true"
                    onDragStart="window.handleZForDragStart(event, '${he(t.id)}', '${he(v)}', ${D})"
                    style="cursor: grab;"
                    title="ドラッグして並び替え">⠿</span>
              <button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${he(t.id)}', '${he(v)}', ${D})" title="編集">
                <span class="control-icon">✎</span>
              </button>
              <button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${he(t.id)}', '${he(v)}', ${D})" title="削除">
                <span class="control-icon">✕</span>
              </button>
            </div>
          </div>
        `;let g=`class="${w}" 
               draggable="true"
               data-component-id="${t.id}"
               data-array-name="${v}"
               data-item-index="${D}"
               ondragstart="window.handleZForDragStart && window.handleZForDragStart(event, '${t.id}', '${v}', ${D})"
               ondragend="window.handleZForDragEnd && window.handleZForDragEnd(event)"
               ondragover="window.handleZForArrayItemDragOver && window.handleZForArrayItemDragOver(event)"
               ondrop="window.handleZForArrayItemDrop && window.handleZForArrayItemDrop(event)"
               style="${u}"
               onmousedown="this.style.cursor = 'grabbing'"
               onmouseup="this.style.cursor = 'grab'"`;E&&(g+=` ${E}`);const y=`
          <div ${g}>
            ${f}
            ${I}
          </div>
        `;x+=y});const k=`
        <div class="zero-code-z-for-add-last-button">
          <button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${originalParentId||t.id}', '${v}', ${z.length})" title="最後に追加">
            <span class="zero-code-control-icon">＋</span>
          </button>
        </div>
      `;x+=k,r=r.replace(l,x)}else r=r.replace(l,uc(t.id,v))}return r}function gh(e,t,o,r,n){e.querySelectorAll("[z-slot]").forEach(a=>{const i=a.getAttribute("z-slot");if(i){const l=t[i],h=Array.isArray(l)?l:[];if(h.length===0){const m=a.innerHTML,v=document.createElement("div");v.innerHTML=m,v.querySelectorAll('[class*="zero-code-"]').forEach(x=>x.remove());const z=v.innerHTML.trim();a.innerHTML=z+`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${he(t.id)}', 0)">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">ネストパーツを追加</span>
            </button>
          </div>
        `}else{let m="";h.forEach((k,O)=>{const D=k.id,I=t.id,c=o+1;m+=`
            <div class="zero-code-add-nested-part-button-container">
              <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${he(I)}', ${O})">
                <span class="zero-code-plus-icon">＋</span>
                <span class="zero-code-button-text">上にパーツを追加（${c}階層目）</span>
              </button>
            </div>
          `,m+=`
            <div class="nested-component nested-depth-${c} draggable-nested" 
                 draggable="true" 
                 data-component-id="${k.id}" 
                 data-path="${D}" 
                 data-parent-path="${I}"
                 data-index="${O}"
                 class="zero-code-nested-component">
              <div class="zero-code-component-header zero-code-nested-header">
                <!-- ドラッグハンドル -->
                <div class="zero-code-drag-handle-nested">
                  ⠿
                </div>
                <div class="zero-code-component-meta">
                  <span class="zero-code-component-type">${k.type}</span>
                  <span class="zero-code-component-module">${k.module_name}</span>
                </div>
                <div class="zero-code-header-actions">
                  <button 
                    class="zero-code-collapse-btn"
                    onclick="window.toggleNestedCollapse('${D}')"
                    title="折りたたみ切り替え"
                    id="collapse-btn-${D}"
                  >
                    －
                  </button>
                  <button class="zero-code-edit-button" onclick="window.openNestedEditor('${D}')">編集</button>
                  <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${D}')">削除</button>
                </div>
              </div>
              <div class="zero-code-nested-component-content" id="nested-content-${D}">
                ${r(k,n,c)}
              </div>
            </div>
          `}),m+=`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${he(t.id)}', ${h.length})">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">下にパーツを追加（${o+1}階層目）</span>
            </button>
          </div>
        `;const v=a.innerHTML,A=document.createElement("div");A.innerHTML=v,A.querySelectorAll('[class*="zero-code-"]').forEach(k=>k.remove());const x=A.innerHTML.trim();a.innerHTML=x+m}a.removeAttribute("z-slot"),_.success(`z-slot属性を除去: ${i}`)}})}const mh=[/v-[a-zA-Z-]+(?::[a-zA-Z-\.]+)?="[^"]*"/g,/@[a-zA-Z-]+(?:\.[a-zA-Z-]+)*="[^"]*"/g,/:[a-zA-Z-]+(?:\.[a-zA-Z-]+)*="[^"]*"/g,/v-slot:[a-zA-Z-]+="[^"]*"/g,/#[a-zA-Z-]+="[^"]*"/g],hh=[/\{\{[^}]+\}\}/g,/v-text="[^"]*"/g,/v-html="[^"]*"/g];function vh(e){return io(()=>{const t=new Map,o=new Map;let r=e;return _.debug("Vue.jsディレクティブ保護開始",{htmlLength:e.length}),mh.forEach((n,s)=>{r=r.replace(n,a=>{const i=`__VUE_DIR_${s}_${t.size}__`;return t.set(i,a),_.debug(`ディレクティブ保護: ${a} → ${i}`),i})}),hh.forEach((n,s)=>{r=r.replace(n,a=>{const i=`__VUE_INT_${s}_${o.size}__`;return o.set(i,a),_.debug(`補間記法保護: ${a} → ${i}`),i})}),_.success("Vue.jsディレクティブ保護完了",{directiveCount:t.size,interpolationCount:o.size,resultLength:r.length}),{html:r,directives:t,interpolations:o}},lo,"Vue.jsディレクティブ保護中にエラーが発生しました",qe.TEMPLATE)||{html:e,directives:new Map,interpolations:new Map}}function pc(e,t){return io(()=>{let o=e;return _.debug("Vue.jsディレクティブ復元開始",{directiveCount:t.directives.size,interpolationCount:t.interpolations.size}),t.directives.forEach((r,n)=>{o=o.replace(new RegExp(n,"g"),r),_.debug(`ディレクティブ復元: ${n} → ${r}`)}),t.interpolations.forEach((r,n)=>{o=o.replace(new RegExp(n,"g"),r),_.debug(`補間記法復元: ${n} → ${r}`)}),_.success("Vue.jsディレクティブ復元完了",{resultLength:o.length}),o},lo,"Vue.jsディレクティブ復元中にエラーが発生しました",qe.TEMPLATE)||e}function yh(e){return io(()=>{const t=vh(e),r=new DOMParser().parseFromString(t.html,"text/html");return _.debug("安全DOMパース完了",{originalLength:e.length,protectedLength:t.html.length,parsedElementCount:r.body.children.length}),{doc:r,preservation:t}},lo,"安全DOMパース中にエラーが発生しました",qe.TEMPLATE)||{doc:new DOMParser().parseFromString("<div></div>","text/html"),preservation:{html:e,directives:new Map,interpolations:new Map}}}function Jr(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," "):""}function ss(e){return e?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/</g,"\\x3C").replace(/>/g,"\\x3E").replace(/&/g,"\\x26").replace(/\0/g,"\\0"):""}function bh(e){if(!e)return e;let t=e.replace(/(<br\s*\/?>)+$/gi,"");return t=t.replace(/\s+$/,""),t}function _h(e,t,o){return io(()=>{_.debug("統合テンプレート処理開始",{componentId:t.id,htmlLength:e.length});let r=e;return r=r.replace(/(\(\$[^:)]+\?:[^)]*\)|\(\$[^:)]+:[^)]*\)|\{\$[^:}]+:[^}]*\})/g,n=>n.includes("?:")?$h(n,t):n.startsWith("(")&&n.includes(":")?wh(n,t):n.startsWith("{")&&n.includes(":")?zh(n,t,o):n),_.success("統合テンプレート処理完了",{componentId:t.id,resultLength:r.length}),r},lo,`統合テンプレート処理中にエラーが発生しました (componentId: ${t.id})`,qe.TEMPLATE)||e}function $h(e,t){const o=e.match(/\(\$([^:?]+)\?:([^)]*)\)/);if(!o)return e;const[,r,n]=o,s=n.split("|"),a=t[r];return Array.isArray(a)?a.join(" "):a&&s.includes(String(a))?String(a):s[0]||""}function wh(e,t){const o=e.match(/\(\$([^:]+):([^)]*)\)/);if(!o)return e;const[,r,n]=o,s=n.split("|"),a=t[r];return a&&s.includes(String(a))?String(a):s[0]||""}function zh(e,t,o){const r=e.match(/\{\$([^:]+):([^}]*)\}/);if(!r)return e;const[,n,s]=r,a=t[n],i=Jr(a?String(a):s);return Ah(o,n)?`<div class="tiptap-content" data-component-id="${t.id}" data-param-name="${n}">${i}</div>`:i}function Ah(e,t){const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(`\\{\\$${o}:[^}]*\\}`,"g");let n;for(;(n=r.exec(e))!==null;){const s=n.index,a=e.substring(0,s),i=a.lastIndexOf("<"),l=a.lastIndexOf(">");if(i>l)continue;const h=[];if([/<(pre|code)[^>]*>[\s\S]*?<\/(pre|code)>/gi,/<div[^>]*class="[^"]*code-block[^"]*"[^>]*>[\s\S]*?<\/div>/gi].forEach(x=>{x.lastIndex=0;let k;for(;(k=x.exec(e))!==null;)h.push({start:k.index,end:k.index+k[0].length})}),!h.some(x=>s>=x.start&&s<=x.end))return!0}return!1}const as=new Map;function Ch(e,t,o){const r=`${e}:${t}`;if(as.has(r))return as.get(r);const n=o(e,t);return as.set(r,n),n}function Eh(){as.clear(),_.debug("テンプレートキャッシュをクリアしました")}const gc=new DOMParser,qo=new Map,Ih=50;function Ph(e){return io(()=>{if(qo.has(e)){const o=qo.get(e);if(o)return _.debug("DOMParser: キャッシュからヒット"),o.cloneNode(!0)}const t=gc.parseFromString(e,"text/html");if(qo.size>=Ih){const o=qo.keys().next().value;o&&qo.delete(o)}return qo.set(e,t.cloneNode(!0)),_.debug("DOMParser: 新規パース＆キャッシュ保存"),t},lo,"HTML解析中にエラーが発生しました",qe.TEMPLATE)||gc.parseFromString("<div></div>","text/html")}function Sh(e,t,o,r=1){return io(()=>{_.debug("最適化z-directive処理開始",{componentId:t.id,currentDepth:r});let n=e;return n=Th(n,t),n=Dh(n,t,o),n=xh(n,t,r,o),_.success("最適化z-directive処理完了",{componentId:t.id,resultLength:n.length}),n},lo,`z-directive処理中にエラーが発生しました (componentId: ${t.id})`,qe.TEMPLATE)||e}function Th(e,t){return e.replace(/<([^>]*z-if="([^"]*)"[^>]*)>([\\s\\S]*?)<\/[^>]*>/g,(o,r,n,s)=>{if(!t[n])return _.debug(`z-if要素を非表示: ${n}`),"";const i=r.replace(/\s*z-if="[^"]*"\s*/," ").trim();return _.debug(`z-if要素を表示: ${n}`),`<div ${i}>${s}</div>`})}function Dh(e,t,o){return e.replace(/<(\w+)([^>]*z-for="([^"]*)"[^>]*)>([\s\S]*?)<\/\1>/g,(r,n,s,a,i)=>{const l=t[a];return _.debug(`z-for処理: ${a}`,{length:Array.isArray(l)?l.length:"not array"}),!Array.isArray(l)||l.length===0?`
          <div class="add-array-item-button-container">
            <button class="add-array-item-button" onclick="window.addArrayItem('${t.id}', '${a}')">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">${a}を追加</span>
            </button>
          </div>
        `:l.map(m=>{let v=i;return Object.keys(m).forEach(A=>{if(A!=="id"){const z=m[A];if(typeof z=="string")[new RegExp(`\\{\\$${A}:([^}]+)\\}`,"g"),new RegExp(`\\(\\$${A}:([^)]+)\\)`,"g")].forEach(k=>{v=v.replace(k,z)});else if(Array.isArray(z)){const x=new RegExp(`\\(\\$${A}\\?:([^)]+)\\)`,"g");v=v.replace(x,z.join(" "))}}}),v}).join("")})}function xh(e,t,o,r){const n=Ph(e),s=n.querySelectorAll("[z-slot]");return _.debug(`z-slot要素発見: ${s.length}個`),s.forEach(a=>{const i=a.getAttribute("z-slot");if(i){const l=t[i],h=Array.isArray(l)?l:[];if(h.length===0){const m=a.innerHTML;a.innerHTML=m+`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${ss(t.id)}', 0)">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">ネストパーツを追加</span>
            </button>
          </div>
        `}else{const m=h.map((A,z)=>{const x=o+1,k=Math.max(0,x-1)*20;return`
            <div class="nested-component nested-depth-${x}" style="margin-left: ${k}px;">
              <div class="component-header">
                <span class="component-type">${A.type}</span>
                <span class="component-module">${A.module_name}</span>
                <button onclick="window.openNestedEditor('${A.id}')">編集</button>
                <button onclick="window.deleteNestedPart('${A.id}')">削除</button>
              </div>
            </div>
          `}).join(""),v=a.innerHTML;a.innerHTML=v+m}a.removeAttribute("z-slot")}}),n.body.innerHTML}function Mh(){qo.clear(),_.debug("DOMキャッシュをクリアしました")}const gr=(()=>{let e=null;return()=>(e||(e=new DOMParser),e)})();function ma(){const e=we(null);let t=!1;const o=(w,u)=>{const f=`\\{\\$${u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}:[^}]*\\}`,g=new RegExp(f,"g");let y;for(;(y=g.exec(w))!==null;){const p=y.index,C=w.substring(0,p),S=C.lastIndexOf("<"),P=C.lastIndexOf(">");if(S>P)continue;const T=[];if([/<(pre|code)[^>]*>[\s\S]*?<\/(pre|code)>/gi,/<div[^>]*class="[^"]*code-block[^"]*"[^>]*>[\s\S]*?<\/div>/gi].forEach(W=>{W.lastIndex=0;let G;for(;(G=W.exec(w))!==null;)T.push({start:G.index,end:G.index+G[0].length})}),!T.some(W=>p>=W.start&&p<=W.end))return!0}return!1},r=(w,u,f)=>w.replace(/\{\$([^:]+):(.*?)\}/g,(g,y,p)=>{const C=String(u[y]||p),S=Jr(C);return o(f,y)?y==="content"?`<div class="zero-code-rich-editable-text block-editable" data-component-id="${u.id}" data-param="${y}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${u.id}', '${y}', this.innerHTML, this);">${S}</div>`:`<span class="zero-code-rich-editable-text inline-editable" data-component-id="${u.id}" data-param="${y}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${u.id}', '${y}', this.innerHTML, this);">${S}</span>`:S}),n=(w,u,f,g,y)=>w.replace(/\{\$([^:]+):(.*?)\}/g,(p,C,S)=>{const P=u[C],T=P!=null&&P!=="",N=String(T?P:S),F=Jr(N);if(C==="card_title"&&console.log(`🔍 [テンプレート処理] ${C}:`,{itemValue:P,hasValue:T,defaultValue:S,finalValue:N,itemKeys:Object.keys(u),itemId:u.id,arrayName:y,fullItem:u}),o(g,C)){const W=f[y].indexOf(u),G=`${f.id}_${y}_${W}_${C}`;return C==="content"?`<div class="zero-code-rich-editable-text array-item-text block-editable" data-component-id="${G}" data-param="${C}" data-array-name="${y}" data-item-index="${W}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${G}', '${C}', this.innerHTML, this);">${F}</div>`:`<span class="zero-code-rich-editable-text array-item-text inline-editable" data-component-id="${G}" data-param="${C}" data-array-name="${y}" data-item-index="${W}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${G}', '${C}', this.innerHTML, this);">${F}</span>`}return F}),s=(w,u)=>{let f=w.replace(/\(\$([^:?]+)\?:(.*?)\)/g,(g,y,p)=>{const C=u[y];return Array.isArray(C)?C.join(" "):p.split("|").filter(P=>P.trim())[0]||""});return f=f.replace(/\(\$([^:?]+):(.*?)\)/g,(g,y,p)=>{if(u[y]){let P=u[y];return P==="指定無し"&&(P=""),Array.isArray(P)?P.join(" "):String(P)}const C=y;if(u[C]){let P=u[C];return P==="指定無し"&&(P=""),Array.isArray(P)?P.join(" "):String(P)}return p.split("|").filter(P=>P.trim())[0]||""}),f},a=(w,u)=>w.replace(/\(\$([^:?]+):(.*?)\)/g,(f,g,y)=>{let p=u[g];return p==="指定無し"&&(p=""),Array.isArray(p)?p.join(" "):p?String(p):y.split("|").filter(S=>S.trim())[0]||""}),i=(w,u)=>w.replace(/\(\$([^:?]+)\?:(.*?)\)/g,(f,g,y)=>{const p=u[g];return Array.isArray(p)?p.join(" "):String(p||"")}),l=(w,u,f,g)=>{const y=f(w.type,w.module_name);if(!y)return`<div>テンプレートが見つかりません: ${w.type}/${w.module_name}</div>`;let p=y;return p=a(p,w),p=i(p,w),p=r(p,w,y),p=A(p,w,f,u,1),p},h=(w,u,f=0)=>{const g=u(w.type,w.module_name);if(!g)return`<div>テンプレートが見つかりません: ${w.type}/${w.module_name}</div>`;let y=g;return y=a(y,w),y=i(y,w),y=r(y,w,g),y=A(y,w,u,f,1),y},m=(w,u,f,g)=>{const y=u(w.type,w.module_name);if(!y)return`<div>テンプレートが見つかりません: ${w.type}/${w.module_name}</div>`;let p=y;return p=a(p,w),p=i(p,w),p=r(p,w,y),p=A(p,w,u,0,f),p},v=(w,u=[],f,g)=>{if(!w||w.length===0)return`
        <div class="zero-code-add-nested-part-button-container">
          <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${ss(f(u))}', 0)">
            <span class="zero-code-plus-icon">＋</span>
            <span class="zero-code-button-text">ネストパーツを追加（${u.length+1}階層目）</span>
          </button>
        </div>
      `;let y="";return w.forEach((p,C)=>{const S=[...u,C],P=f(S),T=S.length;y+=`
        <div class="zero-code-add-nested-part-button-container">
          <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${ss(f(u))}', ${C})">
            <span class="zero-code-plus-icon">＋</span>
            <span class="zero-code-button-text">上にパーツを追加（${u.length+1}階層目）</span>
          </button>
        </div>
      `,y+=`
        <div class="zero-code-nested-component zero-code-nested-depth-${T} zero-code-draggable-nested" 
             draggable="true" 
             data-component-id="${p.id}" 
             data-path="${P}" 
             data-parent-path="${f(u)}"
             data-index="${C}"
>
          <div class="zero-code-component-header zero-code-nested-header">
            <!-- ドラッグハンドル -->
            <div class="zero-code-drag-handle-nested">
              ⠿
            </div>
            <div class="zero-code-component-meta">
              <span class="zero-code-component-type">${p.type}</span>
              <span class="zero-code-component-module">${p.module_name}</span>
            </div>
            <div class="zero-code-header-actions">
              <button 
                class="zero-code-collapse-btn"
                onclick="window.toggleNestedCollapse('${P}')"
                title="折りたたみ切り替え"
                id="collapse-btn-${P}"
              >
                －
              </button>
              <button class="zero-code-edit-button" onclick="window.openNestedEditor('${P}')">編集</button>
              <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${P}')">削除</button>
            </div>
          </div>
          <div class="zero-code-nested-component-content" id="nested-content-${P}">
            ${g?h(p,g):`<div>テンプレートが見つかりません: ${p.type}/${p.module_name}</div>`}
          </div>
          <script>
            // 折りたたみ状態の初期化
            if (typeof window !== 'undefined' && window.isNestedCollapsed) {
              setTimeout(() => {
                const isCollapsed = window.isNestedCollapsed('${P}')
                const contentElement = document.getElementById('nested-content-${P}')
                const buttonElement = document.getElementById('collapse-btn-${P}')
                
                if (contentElement && buttonElement) {
                  if (isCollapsed) {
                    contentElement.style.display = 'none'
                    buttonElement.textContent = '＋'
                    buttonElement.setAttribute('title', '展開')
                  } else {
                    contentElement.style.display = 'block'
                    buttonElement.textContent = '－'
                    buttonElement.setAttribute('title', '折りたたみ')
                  }
                }
              }, 0)
            }
          <\/script>
        </div>
      `,p.nested_parts&&Array.isArray(p.nested_parts)&&p.nested_parts.length>0&&(y+=v(p.nested_parts,S,f,g))}),y+=`
      <div class="zero-code-add-nested-part-button-container">
        <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${ss(f(u))}', ${w.length})">
          <span class="zero-code-plus-icon">＋</span>
          <span class="zero-code-button-text">下にパーツを追加（${u.length+1}階層目）</span>
        </button>
      </div>
    `,y},A=(w,u,f,g=0,y=1)=>io(()=>{t||(dh(n,s),t=!0);const{doc:p,preservation:C}=yh(w),S=(H,W,G)=>m(H,W,G);ga(p,u),uh(p,u),fc(p,u,y,S,f,void 0,u.id);const P=C.html.match(/z-for="[^"]*"/g),T=p.querySelectorAll("[z-for]");if(!(P&&P.length>0&&T.length===0)){if(T.length>0){const H=ph(C.html,u);if(H!==C.html)return pc(H,C)}}gh(p,u,y,S,f),p.querySelectorAll("img").forEach(H=>{H.classList.add("zero-code-editable-image");const W=H.parentElement;W&&W.classList.add("zero-code-image-container");const G=p.createElement("button");G.className="zero-code-image-edit-btn",G.innerHTML="✏️",G.setAttribute("type","button"),G.setAttribute("aria-label","画像を編集"),H.hasAttribute("data-field")||H.setAttribute("data-field","image"),H.parentNode?.insertBefore(G,H.nextSibling)});const F=p.body.innerHTML;return pc(F,C)},lo,`Z-Directive処理中にエラーが発生しました (componentId: ${u.id})`,qe.TEMPLATE)||w,z=(w,u)=>{const f=u(w.type,w.module_name);return f?f.includes("@slot($nested_parts)@"):!1},x=(w,u,f={})=>io(()=>{if(f&&f.isPreviewMode===!0){const p={maxRecursionDepth:f.maxRecursionDepth,isPreviewMode:!0};return k(w,u,p)}const g=Ch(w.type,w.module_name,u);if(!g)return`<div>テンプレートが見つかりません: ${w.type}/${w.module_name}</div>`;let y=_h(g,w,g);return y=Sh(y,w,u,1),y},lo,`最適化レンダリング中にエラーが発生しました (componentId: ${w.id})`,qe.TEMPLATE)||`<div>レンダリングエラー: ${w.id}</div>`,k=(w,u,f={})=>{let g=w;if(typeof window<"u"&&window.getLatestComponentData){const P=window.getLatestComponentData(w.id);P&&(g=P)}const y=u(w.type,w.module_name);if(!y)return"";let p=y,S=Math.min(f.maxRecursionDepth||d(y),50);return S=Math.max(S,1),f.isPreviewMode?(console.log("🔍 プレビューモード開始 - 元のHTML:",p.substring(0,200)),p=a(p,g),console.log("🔍 選択記法処理後:",p.substring(0,200)),p=i(p,g),console.log("🔍 条件付きクラス処理後:",p.substring(0,200)),p=I(p,g),console.log("🔍 テキスト置換処理後:",p.substring(0,200)),p=c(p,g),console.log("🔍 z-for処理後:",p.substring(0,200)),p=D(p),console.log("🔍 クリーンアップ後:",p.substring(0,200))):(p=b(p,g,u,0,S),p=a(p,g),p=i(p,g),p=I(p,g),p=D(p)),p},O=(w,u,f)=>{const y=gr().parseFromString(w,"text/html");return y.querySelectorAll("[z-if]").forEach(T=>{const N=T.getAttribute("z-if");N&&(u[N]?T.removeAttribute("z-if"):T.remove())}),y.querySelectorAll("[z-for-wrapper]").forEach(T=>{const N=T.getAttribute("z-for-wrapper");if(N){const F=u[N];!Array.isArray(F)||F.length===0?T.remove():T.removeAttribute("z-for-wrapper")}}),y.querySelectorAll("[z-slot]").forEach(T=>{const N=T.getAttribute("z-slot");if(N)if(u[N]&&Array.isArray(u[N])){const Z=u[N].map(H=>k(H,f,{})).join("");T.outerHTML=Z}else T.remove()}),y.querySelectorAll("img").forEach(T=>{T.classList.add("zero-code-editable-image");const N=T.parentElement;N&&N.classList.add("zero-code-image-container");const F=y.createElement("button");F.className="zero-code-image-edit-btn",F.innerHTML="✏️",F.setAttribute("type","button"),F.setAttribute("aria-label","画像を編集"),T.hasAttribute("data-field")||T.setAttribute("data-field","image"),T.parentNode?.insertBefore(F,T.nextSibling)}),y.body.innerHTML},D=w=>{console.log("🧹 クリーンアップ開始 - 入力HTML:",w.substring(0,300));let u=w.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'");console.log("🧹 HTMLエンティティデコード後:",u.substring(0,300));const g=gr().parseFromString(u,"text/html"),y=["zero-code-z-for-item-wrapper","zero-code-field-wrapper","zero-code-array-item","zero-code-nested-array","field-editor","tiptap-content","zero-code-z-for-controls","zero-code-z-for-controls-inner","zero-code-z-for-btn","zero-code-z-for-add-btn","zero-code-z-for-edit-btn","zero-code-z-for-delete-btn","zero-code-z-for-drag-handle","zero-code-nested-part","zero-code-add-nested-part-button-container","zero-code-add-nested-part-button","zero-code-rich-editable-text","inline-editable","zero-code-editable-image"];[".zero-code-z-for-controls",".zero-code-add-nested-part-button-container",".zero-code-z-for-add-last-button",'[onclick*="ZForArrayItem"]','[onclick*="NestedPartSelector"]','[onclick*="NestedEditor"]','[onclick*="addZForArrayItem"]','[onclick*="editZForArrayItem"]','[onclick*="removeZForArrayItem"]','[onclick*="startRichTextEdit"]',".zero-code-rich-editable-text",".inline-editable","span[data-component-id]",'span[onclick*="startRichTextEdit"]'].forEach(T=>{g.querySelectorAll(T).forEach(F=>{F.tagName.toLowerCase()==="span"?F.outerHTML=F.innerHTML:F.remove()})});const C=g.querySelectorAll("*");return C.forEach(T=>{const N=T.classList;y.forEach(F=>{N.contains(F)&&N.remove(F)}),Array.from(N).forEach(F=>{F.includes("zero-code")&&N.remove(F)}),T.className===""&&T.removeAttribute("class")}),C.forEach(T=>{Array.from(T.attributes).forEach(N=>{(N.name.startsWith("data-component-id")||N.name.startsWith("data-field-")||N.name.startsWith("data-param-")||N.name.startsWith("data-edit-")||N.name.includes("contenteditable")||N.name==="onclick"||N.name==="draggable")&&T.removeAttribute(N.name)})}),g.querySelectorAll("span").forEach(T=>{(T.hasAttribute("data-component-id")||T.hasAttribute("onclick")||T.classList.contains("zero-code-rich-editable-text")||T.classList.contains("inline-editable"))&&(T.outerHTML=T.innerHTML)}),g.querySelectorAll("img").forEach(T=>{const N=T.getAttribute("alt");if(N&&N.includes("<")&&N.includes(">")){const F=N.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").trim();T.setAttribute("alt",F||"ロゴ")}}),g.body.innerHTML},I=(w,u)=>w.replace(/\{\$([^:]+):(.*?)\}/g,(f,g,y)=>{const p=String(u[g]||y);return Jr(p)}),c=(w,u)=>{const g=gr().parseFromString(w,"text/html");return g.querySelectorAll("[z-for]").forEach(p=>{const C=p.getAttribute("z-for");if(!C)return;const S=u[C];if(!Array.isArray(S)||S.length===0){p.remove();return}let P="";S.forEach(T=>{let N=p.outerHTML;N=N.replace(/\s*z-for="[^"]*"/g,""),Object.keys(T).forEach(F=>{const Z=new RegExp(`\\(\\$${F}:([^)]+)\\)`,"g");N=N.replace(Z,T[F]||"$1")}),P+=N}),p.outerHTML=P}),g.body.innerHTML},d=w=>{const f=gr().parseFromString(`<root>${w}</root>`,"text/html"),g=(C,S=0)=>{let P=S;for(const T of Array.from(C.children)){let N=S;T.hasAttribute("z-for")&&(N+=1);const F=g(T,N);P=Math.max(P,F)}return P},y=f.body.querySelector("root");if(!y)return 3;const p=g(y);return Math.max(p+2,3)},b=(w,u,f,g=0,y)=>{const C=gr().parseFromString(w,"text/html");C.querySelectorAll("[z-if]").forEach(G=>{const re=G.getAttribute("z-if");re&&(u[re]?G.removeAttribute("z-if"):G.remove())}),C.querySelectorAll("[z-for-wrapper]").forEach(G=>{const re=G.getAttribute("z-for-wrapper");if(re){const _e=u[re];!Array.isArray(_e)||_e.length===0?G.remove():G.removeAttribute("z-for-wrapper")}});const T=50;if(g===0&&!y){const G=f(u.type,u.module_name);y=Math.min(d(G),T)}const N=Math.min(y??5,T);if(g>=N)return O(w,u,f);let F=!0,Z=0;for(;F&&Z<3;)F=!1,Z++,Array.from(C.querySelectorAll("[z-for]")).forEach(re=>{const _e=re.getAttribute("z-for");if(!re.hasAttribute("data-zfor-processed")&&_e){let Oe=u;if(typeof window<"u"&&window.getLatestComponentData){const Ve=u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],xe=window.getLatestComponentData(Ve);xe&&(Oe=xe)}let Se=u[_e];if(!Se&&Oe[_e]&&(Se=Oe[_e]),!Se&&_e==="items"&&typeof window<"u"&&window.getLatestComponentData){const Ve=u.id.includes("_categories_")?u.id.split("_categories_")[0]:u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],xe=window.getLatestComponentData(Ve);if(xe&&xe.categories){const Ze=u.id.match(/_categories_(\d+)/);if(Ze){const Je=parseInt(Ze[1]);xe.categories[Je]&&xe.categories[Je].items&&(Se=xe.categories[Je].items)}}}if(Array.isArray(Se)&&Se.length>0){re.setAttribute("data-zfor-processed","true");const Ve=f(u.type,u.module_name),xe=new RegExp(`<(\\w+)[^>]*z-for="${_e}"[^>]*>`),Ze=Ve.match(xe),Je=Ze?Ve.indexOf(Ze[0]):-1;let Xt=re.innerHTML;if(Je!==-1&&Ze){const V=Ze[0].match(/<(\w+)/),Y=V?V[1]:"div";let K=0,X=Je;for(let Q=Je;Q<Ve.length;Q++)if(Ve.substring(Q,Q+Y.length+1)===`<${Y}`)K++;else if(Ve.substring(Q,Q+Y.length+3)===`</${Y}>`&&(K--,K===0)){X=Q+Y.length+3;break}Xt=Ve.substring(Je,X).replace(/\s+z-for="[^"]*"/,"")}const M=Se.map((V,Y)=>{let K=Xt;const X={...u,...V,type:u.type,module_name:u.module_name,id:`${u.id}_${_e}_${Y}`};if(typeof window<"u"&&window.getLatestComponentData){const oe=u.id.includes("_categories_")?u.id.split("_categories_")[0]:u.id.includes("_items_")?u.id.split("_items_")[0]:u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],Q=window.getLatestComponentData(oe);Q&&_e==="categories"&&Q.categories&&Q.categories[Y]&&Object.assign(X,Q.categories[Y])}return K=b(K,X,f,g+1,N),K=a(K,V),K=i(K,V),K=I(K,X),K}).join("");re.outerHTML=M,F=!0;const L=gr().parseFromString(C.body.innerHTML,"text/html");C.body.innerHTML=L.body.innerHTML}else re.remove()}});return C.querySelectorAll("[z-slot]").forEach(G=>{const re=G.getAttribute("z-slot");if(re)if(u[re]&&Array.isArray(u[re])){const Oe=u[re].map(Se=>k(Se,f,{})).join("");G.outerHTML=Oe}else G.remove()}),C.querySelectorAll("img").forEach(G=>{G.classList.add("zero-code-editable-image");const re=G.parentElement;re&&re.classList.add("zero-code-image-container");const _e=C.createElement("button");_e.className="zero-code-image-edit-btn",_e.innerHTML="✏️",_e.setAttribute("type","button"),_e.setAttribute("aria-label","画像を編集"),G.hasAttribute("data-field")||G.setAttribute("data-field","image"),G.parentNode?.insertBefore(_e,G.nextSibling)}),C.body.innerHTML};return{editingText:e,shouldApplyTiptap:o,processTextReplacementWithTemplate:r,processArrayItemTextReplacement:n,processArrayItemParameterReplacement:s,processSelectionSyntax:a,processConditionalClassSyntax:i,processZDirectives:A,renderComponentWithNested:l,renderComponentWithoutSlot:h,renderNestedComponentWithDepth:m,renderNestedComponentsWithUI:v,hasNestedSlot:z,renderComponentOptimized:x,clearAllCaches:()=>{Eh(),Mh()}}}function Yr(){return{getImageSrc:n=>n.fileData?.base64&&n.fileData.base64.trim()!==""?`data:${n.fileData.type||n.type||"image/jpeg"};base64,${n.fileData.base64}`:n.url||"",isImageUpdated:n=>!!(n.fileData?.base64&&n.fileData.base64.trim()!==""),getImageAlt:n=>n.alt||n.name||"画像",updateImageData:(n,s,a)=>({...n,fileData:{...n.fileData,base64:a,type:s.type,size:s.size},type:s.type,size:s.size,uploadedAt:new Date().toISOString()})}}const Nh={class:"zero-code-page-preview"},Fh={class:"zero-code-page-preview-content"},Oh=["innerHTML"],kh=it({__name:"PagePreview",props:{pageData:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array}},setup(e){const t=e,o=ma(),{getImageSrc:r}=Yr(),n=Ae(()=>[...t.commonImages,...t.individualImages]),s=h=>{if(!h||n.value.length===0)return h;let m=h;return m=m.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(v,A,z,x)=>{const k=n.value.find(O=>!!(O.id===z||O.url===z||O.name===z||z.endsWith("/"+O.name)||O.url.endsWith(z)||z.split("/").pop()===O.name));if(k){const O=r(k);return`<img${A}src="${O}"${x}>`}return v}),m},a=(h,m)=>{if(!Array.isArray(t.parts))return"";const v=t.parts.find(z=>z.type===h);if(!v)return"";const A=v.module.find(z=>z.title===m);return A?A.body:""},i=Ae(()=>{if(!Array.isArray(t.pageData)||t.pageData.length===0)return'<div class="zero-code-no-content">ページにコンテンツがありません</div>';let h='<div class="zero-code-page-container">';return t.pageData.forEach(m=>{const v=l(m);!v||v.trim()===""?h+=`<div class="zero-code-error-component">テンプレートが見つかりません: ${m.type}/${m.module_name}</div>`:h+=v}),h+="</div>",h}),l=h=>{const m=o.renderComponentOptimized(h,a,{isPreviewMode:!0});return s(m)};return(h,m)=>(j(),U("div",Nh,[$("div",Fh,[$("div",{innerHTML:i.value},null,8,Oh)])]))}}),Lh={class:"zero-code-tab-content"},Rh={class:"zero-code-data-tabs"},Bh={class:"zero-code-tab-buttons"},Hh=["onClick"],jh={class:"zero-code-preview-content"},Uh={key:0,class:"zero-code-preview-section"},Vh={key:1,class:"zero-code-preview-section"},Zh={class:"zero-code-html-source"},Wh={class:"zero-code-html-source-pre"},Kh=it({__name:"PreviewPanel",props:{editablePageData:{type:Array},localParts:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array}},setup(e){const t=e,o=ma(),r=we("preview"),n=we(0),s=["preview","source"],a=v=>({preview:"プレビュー表示",source:"HTMLソース"})[v],i=(v,A)=>{const z=t.localParts&&t.localParts.length>0?t.localParts:t.parts||[];if(!Array.isArray(z))return"";const x=z.find(O=>O.type===v);if(!x)return"";const k=x.module.find(O=>O.title===A);return k?k.body:""},l=v=>o.renderComponentOptimized(v,i,{isPreviewMode:!0}),h=Ae(()=>{if(!Array.isArray(t.editablePageData)||t.editablePageData.length===0)return'<div class="zero-code-no-content">ページにコンテンツがありません</div>';let v='<div class="zero-code-page-container">';return t.editablePageData.forEach(A=>{const z=l(A);!z||z.trim()===""?v+=`<div class="zero-code-error-component">テンプレートが見つかりません: ${A.type}/${A.module_name}</div>`:v+=z}),v+="</div>",v}),m=v=>{if(!v)return"";try{const x=new globalThis.DOMParser().parseFromString(`<root>${v}</root>`,"text/html").body.firstChild;if(!x)return v;const k=new Set(["img","br","hr","input","meta","link","area","base","col","embed","source","track","wbr"]),O=new Set(["span","a","strong","em","u","mark","code","small","sub","sup","i","b"]),D=(c,d=0,b=!1)=>{const E=c.tagName.toLowerCase(),w=b?"":"  ".repeat(d),u=k.has(E),f=O.has(E);let g=`<${E}`;for(let T=0;T<c.attributes.length;T++){const N=c.attributes[T];g+=` ${N.name}="${N.value}"`}g+=">";let y=w+g;if(u)return y;let p=!1,C=!1;const S=[];let P="";for(let T=0;T<c.childNodes.length;T++){const N=c.childNodes[T];if(N.nodeType===1){p=!0;const Z=D(N,d+1,f||b);S.push(Z)}else if(N.nodeType===3){const F=N.textContent?.replace(/\s+/g," ").trim();F&&(C=!0,P+=F)}}return p&&C?f||b?y+=P+S.join(""):(y+=P+`
`+S.join(`
`),S.length>0&&(y+=`
`+w)):p?f||b?y+=S.join(""):(y+=`
`+S.join(`
`),S.length>0&&(y+=`
`+w)):C&&(y+=P),y+=`</${E}>`,y};let I="";for(let c=0;c<x.childNodes.length;c++){const d=x.childNodes[c];d.nodeType===1&&(I+=D(d)+`
`)}return I.replace(/\n{3,}/g,`

`).replace(/\n\s*\n\s*</g,`
<`).trim()}catch{return v.replace(/>\s*</g,`>
<`).split(`
`).filter(z=>z.trim()).map((z,x,k)=>{const O=z.trim();if(!O)return"";let D=0;for(let I=0;I<x;I++){const c=k[I].trim();c.match(/<[^\/!][^>]*[^\/]>$/)&&D++,c.match(/<\/[^>]+>$/)&&D--}return O.startsWith("</")&&D--,"  ".repeat(Math.max(0,D))+O}).join(`
`)}};return at(()=>t.editablePageData,()=>{n.value++},{deep:!0,immediate:!0}),(v,A)=>(j(),U("div",Lh,[$("div",Rh,[$("div",Bh,[(j(),U(ze,null,Fe(s,z=>$("button",{key:z,class:ot(["zero-code-data-tab-button",{active:r.value===z}]),onClick:x=>r.value=z},ae(a(z)),11,Hh)),64))])]),$("div",jh,[r.value==="preview"?(j(),U("div",Uh,[(j(),dt(kh,{key:n.value,"page-data":v.editablePageData,parts:v.localParts&&v.localParts.length>0?v.localParts:v.parts||[],"common-images":v.commonImages,"individual-images":v.individualImages},null,8,["page-data","parts","common-images","individual-images"]))])):ve("",!0),r.value==="source"?(j(),U("div",Vh,[$("div",Zh,[A[0]||(A[0]=$("div",{class:"zero-code-source-header"},[$("p",{class:"zero-code-source-description"},"パーツごとに改行・インデントされたHTMLソース")],-1)),$("pre",Wh,[$("code",null,ae(m(h.value)),1)])])])):ve("",!0)])]))}}),qh={class:"zero-code-modal-header"},Gh={class:"zero-code-modal-body"},Jh={class:"zero-code-img-file-input-section"},Yh={key:0,class:"zero-code-img-file-info"},Xh={class:"zero-code-img-file-preview"},Qh=["src"],ev={class:"zero-code-img-file-details"},tv={class:"zero-code-form-section"},ov={class:"zero-code-form-group"},rv=["disabled"],nv={class:"zero-code-form-group"},sv=["disabled"],av={key:0,class:"zero-code-form-group"},iv=["disabled"],lv={class:"zero-code-modal-footer"},cv=["disabled"],dv=it({__name:"ImageUploadModal",props:{category:{type:String},componentId:{type:String}},emits:["close","upload"],setup(e,{emit:t}){const o=e,r=t,n=we(null),s=we(""),a=we(""),i=we(""),l=we(o.componentId||""),h=Ae(()=>n.value&&a.value.trim()&&i.value.trim()),m=I=>{const c=I.target;c.files&&c.files[0]&&A(c.files[0])},v=I=>{I.preventDefault(),I.dataTransfer&&I.dataTransfer.files[0]&&A(I.dataTransfer.files[0])},A=I=>{n.value=I,a.value=I.name.replace(/\.[^/.]+$/,""),i.value=I.name,s.value&&URL.revokeObjectURL(s.value),s.value=URL.createObjectURL(I)},z=I=>new Promise((c,d)=>{const b=new FileReader;b.readAsDataURL(I),b.onload=()=>c(b.result),b.onerror=E=>d(E)}),x=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),k=I=>{if(I===0)return"0 Bytes";const c=1024,d=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(I)/Math.log(c));return parseFloat((I/Math.pow(c,b)).toFixed(2))+" "+d[b]},O=async()=>{if(!(!n.value||!h.value))try{const I=await z(n.value),c=I.split(",")[1]||I,d={id:x(),name:a.value,originalName:n.value.name,url:`/img/${a.value}`,alt:i.value,size:n.value.size,type:n.value.type,uploadedAt:new Date().toISOString(),category:o.category,componentId:o.category==="individual"?l.value:void 0,fileData:{base64:c}};r("upload",d)}catch{alert("画像のアップロードに失敗しました。")}};return Ir(()=>{s.value&&URL.revokeObjectURL(s.value)}),(I,c)=>(j(),U("div",{class:"zero-code-modal-overlay",onClick:c[8]||(c[8]=d=>I.$emit("close"))},[$("div",{class:"zero-code-modal-content",onClick:c[7]||(c[7]=Mt(()=>{},["stop"]))},[$("div",qh,[$("h4",null,"画像アップロード（"+ae(I.category==="common"?"共通":"個別")+"）",1),$("button",{class:"zero-code-img-close-btn",onClick:c[0]||(c[0]=d=>I.$emit("close"))},"×")]),$("div",Gh,[$("div",Jh,[c[9]||(c[9]=$("label",{for:"file-input",class:"zero-code-img-file-input-label"},[$("div",{class:"zero-code-img-file-input-area"},[$("span",{class:"zero-code-img-file-input-text"},"クリックしてファイルを選択"),$("span",{class:"zero-code-img-file-input-hint"},"またはドラッグ&ドロップ")])],-1)),$("input",{id:"file-input",type:"file",accept:"image/*",style:{display:"none"},onChange:m,onDrop:v,onDragover:c[1]||(c[1]=Mt(()=>{},["prevent"])),onDragenter:c[2]||(c[2]=Mt(()=>{},["prevent"]))},null,32)]),n.value?(j(),U("div",Yh,[$("div",Xh,[$("img",{src:s.value,alt:"プレビュー"},null,8,Qh)]),$("div",ev,[$("p",null,[c[10]||(c[10]=$("strong",null,"ファイル名:",-1)),sr(" "+ae(n.value.name),1)]),$("p",null,[c[11]||(c[11]=$("strong",null,"サイズ:",-1)),sr(" "+ae(k(n.value.size)),1)]),$("p",null,[c[12]||(c[12]=$("strong",null,"タイプ:",-1)),sr(" "+ae(n.value.type),1)])])])):ve("",!0),$("div",tv,[$("div",ov,[c[13]||(c[13]=$("label",{for:"image-name"},"保存名:",-1)),wt($("input",{id:"image-name","onUpdate:modelValue":c[3]||(c[3]=d=>a.value=d),type:"text",placeholder:"画像の保存名を入力",disabled:!n.value},null,8,rv),[[jt,a.value]])]),$("div",nv,[c[14]||(c[14]=$("label",{for:"image-alt"},"alt属性:",-1)),wt($("input",{id:"image-alt","onUpdate:modelValue":c[4]||(c[4]=d=>i.value=d),type:"text",placeholder:"画像の説明を入力",disabled:!n.value},null,8,sv),[[jt,i.value]])]),I.category==="individual"?(j(),U("div",av,[c[15]||(c[15]=$("label",{for:"component-id"},"コンポーネントID:",-1)),wt($("input",{id:"component-id","onUpdate:modelValue":c[5]||(c[5]=d=>l.value=d),type:"text",placeholder:"コンポーネントIDを入力",disabled:!n.value},null,8,iv),[[jt,l.value]])])):ve("",!0)])]),$("div",lv,[$("button",{class:"zero-code-img-btn zero-code-img-btn-secondary",onClick:c[6]||(c[6]=d=>I.$emit("close"))},"キャンセル"),$("button",{class:"zero-code-img-btn zero-code-img-btn-primary",disabled:!h.value,onClick:O}," アップロード ",8,cv)])])]))}}),uv={class:"zero-code-modal-header"},fv={class:"zero-code-modal-body"},pv={class:"zero-code-img-detail-preview"},gv=["src","alt"],mv={key:0,class:"zero-code-img-updated-badge"},hv={class:"zero-code-form-section"},vv={class:"zero-code-form-group"},yv={class:"zero-code-form-group"},bv={key:0,class:"zero-code-form-group"},_v={class:"zero-code-img-detail-info"},$v={class:"zero-code-img-detail-info-group"},wv={class:"zero-code-img-detail-info-group"},zv={class:"zero-code-img-detail-info-group"},Av={class:"zero-code-img-detail-info-group"},Cv={class:"zero-code-img-detail-info-group"},Ev={class:"zero-code-img-detail-url-group"},Iv={class:"zero-code-modal-footer"},Pv={class:"zero-code-modal-footer-right"},Sv=it({__name:"ImageDetailModal",props:{image:{type:Object}},emits:["close","delete","replace"],setup(e,{emit:t}){const o=e,r=t,n=Oo({...o.image}),s=we(null),{getImageSrc:a,getImageAlt:i,isImageUpdated:l,updateImageData:h}=Yr(),m=Ae(()=>a(n)),v=Ae(()=>i(n)),A=()=>{confirm("この画像を削除しますか？この操作は取り消せません。")&&r("delete",n.id)},z=()=>{s.value&&s.value.click()},x=async c=>{const d=c.target;if(!d.files||!d.files[0])return;const b=d.files[0];if(!confirm(`画像を "${b.name}" に差し替えますか？この操作は取り消せません。`)){d.value="";return}try{const E=await k(b),w=h(n,b,E.split(",")[1]);Object.assign(n,w),r("replace",n.id,w)}catch{alert("画像の差し替えに失敗しました。")}finally{d.value=""}},k=c=>new Promise((d,b)=>{const E=new FileReader;E.readAsDataURL(c),E.onload=()=>d(E.result),E.onerror=w=>b(w)}),O=async c=>{try{await navigator.clipboard.writeText(c),alert("URLをクリップボードにコピーしました")}catch{const b=document.createElement("textarea");b.value=c,document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b),alert("URLをクリップボードにコピーしました")}},D=c=>{if(!c||isNaN(c))return"サイズ不明";if(c===0)return"0 Bytes";const d=1024,b=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(c)/Math.log(d));return parseFloat((c/Math.pow(d,E)).toFixed(2))+" "+b[E]},I=c=>{if(!c)return"日時不明";const d=new Date(c);return isNaN(d.getTime())?"日時不明":d.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return(c,d)=>(j(),U("div",{class:"zero-code-modal-overlay",onClick:d[8]||(d[8]=b=>c.$emit("close"))},[$("div",{class:"zero-code-modal-content",onClick:d[7]||(d[7]=Mt(()=>{},["stop"]))},[$("div",uv,[d[9]||(d[9]=$("h4",null,"画像詳細",-1)),$("button",{class:"zero-code-close-button",onClick:d[0]||(d[0]=b=>c.$emit("close"))},"✖️")]),$("div",fv,[$("div",pv,[$("img",{src:m.value,alt:v.value},null,8,gv),pe(l)(n)?(j(),U("div",mv," 差し替え済み ")):ve("",!0)]),$("div",hv,[$("div",vv,[d[10]||(d[10]=$("label",{for:"detail-image-name"},"ファイル名:",-1)),wt($("input",{id:"detail-image-name","onUpdate:modelValue":d[1]||(d[1]=b=>n.name=b),type:"text",readonly:""},null,512),[[jt,n.name]])]),$("div",yv,[d[11]||(d[11]=$("label",{for:"detail-image-alt"},"alt属性:",-1)),wt($("input",{id:"detail-image-alt","onUpdate:modelValue":d[2]||(d[2]=b=>n.alt=b),type:"text",readonly:""},null,512),[[jt,n.alt]])]),n.componentId?(j(),U("div",bv,[d[12]||(d[12]=$("label",{for:"detail-component-id"},"コンポーネントID:",-1)),wt($("input",{id:"detail-component-id","onUpdate:modelValue":d[3]||(d[3]=b=>n.componentId=b),type:"text",readonly:""},null,512),[[jt,n.componentId]])])):ve("",!0),$("div",_v,[$("div",$v,[d[13]||(d[13]=$("label",null,"カテゴリ:",-1)),$("span",{class:ot(["zero-code-img-detail-category",n.category])},ae(n.category==="common"?"共通画像":"個別画像"),3)]),$("div",wv,[d[14]||(d[14]=$("label",null,"ファイルサイズ:",-1)),$("span",null,ae(D(n.fileData?.size||n.size||0)),1)]),$("div",zv,[d[15]||(d[15]=$("label",null,"ファイルタイプ:",-1)),$("span",null,ae(n.fileData?.type||n.type||"不明"),1)]),$("div",Av,[d[16]||(d[16]=$("label",null,"アップロード日時:",-1)),$("span",null,ae(I(n.uploadedAt)),1)]),$("div",Cv,[d[17]||(d[17]=$("label",null,"画像URL:",-1)),$("div",Ev,[wt($("input",{"onUpdate:modelValue":d[4]||(d[4]=b=>n.url=b),type:"text",readonly:"",class:"zero-code-img-detail-url-input"},null,512),[[jt,n.url]]),$("button",{class:"zero-code-btn zero-code-btn-secondary zero-code-copy-btn",title:"URLをコピー",onClick:d[5]||(d[5]=b=>O(n.url))}," 📋 ")])])])])]),$("div",Iv,[$("div",{class:"zero-code-modal-footer-left"},[$("button",{class:"zero-code-btn zero-code-btn-danger",onClick:A}," 削除 "),$("button",{class:"zero-code-btn zero-code-btn-primary",onClick:z}," 差し替え ")]),$("div",Pv,[$("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:d[6]||(d[6]=b=>c.$emit("close"))}," 閉じる ")]),$("input",{ref_key:"fileInputRef",ref:s,type:"file",accept:"image/*",style:{display:"none"},onChange:x},null,544)])])]))}}),Tv={class:"zero-code-tab-content"},Dv={class:"zero-code-data-tabs"},xv={class:"zero-code-tab-buttons"},Mv=["onClick"],Nv={class:"zero-code-image-content"},Fv={key:0,class:"zero-code-image-section"},Ov={class:"zero-code-section-header"},kv={class:"zero-code-img-grid"},Lv=["onClick"],Rv=["src","alt"],Bv={key:0,class:"zero-code-img-updated-badge"},Hv={class:"zero-code-img-info"},jv={class:"zero-code-img-name"},Uv={class:"zero-code-img-size"},Vv=["onClick"],Zv={key:0,class:"zero-code-empty-state"},Wv={key:1,class:"zero-code-image-section"},Kv={class:"zero-code-section-header"},qv={class:"zero-code-img-grid"},Gv=["onClick"],Jv=["src","alt"],Yv={key:0,class:"zero-code-img-updated-badge"},Xv={class:"zero-code-img-info"},Qv={class:"zero-code-img-name"},ey={class:"zero-code-img-size"},ty=["onClick"],oy={key:0,class:"zero-code-empty-state"},ry={key:2,class:"zero-code-image-section"},ny={class:"zero-code-data-display-section"},sy={class:"zero-code-parts-sub-tabs"},ay={class:"zero-code-parts-sub-content"},iy={key:0,class:"zero-code-parts-sub-section"},ly={key:0},cy={class:"zero-code-data-display-pre"},dy={key:1},uy={key:1,class:"zero-code-parts-sub-section"},fy={key:0},py={class:"zero-code-data-display-pre"},gy={key:1},my={class:"zero-code-image-stats"},hy=it({__name:"ImageManagementPanel",props:{commonImages:{type:Array},individualImages:{type:Array}},emits:["updateCommonImages","updateIndividualImages","sendCommonImagesData","sendIndividualImagesData"],setup(e,{emit:t}){const o=e,r=t,{getImageSrc:n,getImageAlt:s,isImageUpdated:a}=Yr(),i=we("common"),l=we("common"),h=we(!1),m=we(!1),v=we("common"),A=we(null),z=Ae(()=>o.commonImages.length+o.individualImages.length),x=["common","individual","data"],k=g=>({common:"共通画像",individual:"個別画像",data:"データ表示"})[g],O=g=>{if(!g||isNaN(g))return"サイズ不明";if(g===0)return"0 Bytes";const y=1024,p=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(g)/Math.log(y));return parseFloat((g/Math.pow(y,C)).toFixed(2))+" "+p[C]},D=g=>{v.value=g,h.value=!0},I=()=>{h.value=!1},c=g=>{A.value=g,m.value=!0},d=()=>{m.value=!1,A.value=null},b=g=>{if(v.value==="common"){const y=[...o.commonImages,g];r("updateCommonImages",y)}else{const y=[...o.individualImages,g];r("updateIndividualImages",y)}I()},E=g=>{const y=(p,C=0)=>{const S="  ".repeat(C),P="  ".repeat(C+1);if(Array.isArray(p))return p.length===0?"[]":`[
${p.map(N=>P+y(N,C+1)).join(`,
`)}
${S}]`;if(typeof p=="object"&&p!==null){const T=Object.entries(p);return T.length===0?"{}":`{
${T.map(([F,Z])=>{let H;if(typeof Z=="string"){const W=Z.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(W.includes(`
`)){const G=W.split(`
`);H=G.map((_e,Oe)=>Oe===0?`\`${_e}`:Oe===G.length-1?`${P}${_e}\``:`${P}${_e}`).join(`
`)}else H=`"${W}"`}else H=y(Z,C+1);return`${P}"${F}": ${H}`}).join(`,
`)}
${S}}`}return typeof p=="string"?`"${p.replace(/"/g,'\\"')}"`:JSON.stringify(p)};return y(g)},w=g=>{if(!A.value)return;if(A.value.category==="common"){const p=o.commonImages.filter(C=>C.id!==g);r("updateCommonImages",p)}else{const p=o.individualImages.filter(C=>C.id!==g);r("updateIndividualImages",p)}d()},u=(g,y)=>{if(y.category==="common"){const C=o.commonImages.map(S=>S.id===g?y:S);r("updateCommonImages",C)}else{const C=o.individualImages.map(S=>S.id===g?y:S);r("updateIndividualImages",C)}d()},f=(g,y)=>{if(confirm("この画像を削除しますか？"))if(y==="common"){const p=o.commonImages.filter(C=>C.id!==g);r("updateCommonImages",p)}else{const p=o.individualImages.filter(C=>C.id!==g);r("updateIndividualImages",p)}};return(g,y)=>(j(),U("div",Tv,[$("div",Dv,[$("div",xv,[(j(),U(ze,null,Fe(x,p=>$("button",{key:p,class:ot(["zero-code-data-tab-button",{active:i.value===p}]),onClick:C=>i.value=p},ae(k(p)),11,Mv)),64))])]),$("div",Nv,[i.value==="common"?(j(),U("div",Fv,[$("div",Ov,[$("h4",null,"共通画像 ("+ae(g.commonImages.length)+"件)",1),$("button",{class:"zero-code-img-upload-btn common",onClick:y[0]||(y[0]=p=>D("common"))}," 共通画像をアップロード ")]),$("div",kv,[(j(!0),U(ze,null,Fe(g.commonImages,p=>(j(),U("div",{key:p.id,class:"zero-code-img-item",onClick:C=>c(p)},[$("img",{src:pe(n)(p),alt:pe(s)(p)},null,8,Rv),pe(a)(p)?(j(),U("div",Bv," 差し替え済み ")):ve("",!0),$("div",Hv,[$("p",jv,ae(p.name),1),$("p",Uv,ae(O(p.fileData?.size||p.size||0)),1)]),$("button",{class:"zero-code-img-delete-btn",onClick:Mt(C=>f(p.id,"common"),["stop"])}," 削除 ",8,Vv)],8,Lv))),128))]),g.commonImages.length===0?(j(),U("div",Zv,y[4]||(y[4]=[$("p",null,"共通画像が登録されていません。",-1)]))):ve("",!0)])):ve("",!0),i.value==="individual"?(j(),U("div",Wv,[$("div",Kv,[$("h4",null,"個別画像 ("+ae(g.individualImages.length)+"件)",1),$("button",{class:"zero-code-img-upload-btn individual",onClick:y[1]||(y[1]=p=>D("individual"))}," 個別画像をアップロード ")]),$("div",qv,[(j(!0),U(ze,null,Fe(g.individualImages,p=>(j(),U("div",{key:p.id,class:"zero-code-img-item",onClick:C=>c(p)},[$("img",{src:pe(n)(p),alt:pe(s)(p)},null,8,Jv),pe(a)(p)?(j(),U("div",Yv," 差し替え済み ")):ve("",!0),$("div",Xv,[$("p",Qv,ae(p.name),1),$("p",ey,ae(O(p.fileData?.size||p.size||0)),1)]),$("button",{class:"zero-code-img-delete-btn",onClick:Mt(C=>f(p.id,"individual"),["stop"])}," 削除 ",8,ty)],8,Gv))),128))]),g.individualImages.length===0?(j(),U("div",oy,y[5]||(y[5]=[$("p",null,"個別画像が登録されていません。",-1)]))):ve("",!0)])):ve("",!0),i.value==="data"?(j(),U("div",ry,[$("div",ny,[$("div",sy,[$("button",{class:ot(["zero-code-parts-sub-tab-button",{active:l.value==="common"}]),onClick:y[2]||(y[2]=p=>l.value="common")}," 共通画像データ ",2),$("button",{class:ot(["zero-code-parts-sub-tab-button",{active:l.value==="individual"}]),onClick:y[3]||(y[3]=p=>l.value="individual")}," 個別画像データ ",2)]),$("div",ay,[l.value==="common"?(j(),U("div",iy,[g.commonImages&&g.commonImages.length>0?(j(),U("div",ly,[$("pre",cy,ae(E(g.commonImages)),1)])):(j(),U("div",dy,y[6]||(y[6]=[$("p",null,"共通画像データがありません",-1)])))])):ve("",!0),l.value==="individual"?(j(),U("div",uy,[g.individualImages&&g.individualImages.length>0?(j(),U("div",fy,[$("pre",py,ae(E(g.individualImages)),1)])):(j(),U("div",gy,y[7]||(y[7]=[$("p",null,"個別画像データがありません",-1)])))])):ve("",!0)])])])):ve("",!0)]),$("div",my,[y[8]||(y[8]=$("strong",null,"画像情報:",-1)),sr(" 共通画像: "+ae(g.commonImages.length)+"件, 個別画像: "+ae(g.individualImages.length)+"件, 合計: "+ae(z.value)+"件 ",1)]),h.value?(j(),dt(dv,{key:0,category:v.value,onClose:I,onUpload:b},null,8,["category"])):ve("",!0),m.value&&A.value?(j(),dt(Sv,{key:1,image:A.value,onClose:d,onDelete:w,onReplace:u},null,8,["image"])):ve("",!0)]))}});function vy(){const e=we("editor"),t=l=>{e.value!==l&&(_.info(`🔄 タブ切り替え: ${e.value} → ${l}`),e.value=l)};return{activeTab:e,availableTabs:["editor","parts","preview","images"],switchToTab:t,isActiveTab:l=>e.value===l,showEditor:()=>{t("editor")},showPartsManager:()=>{t("parts")},showPreview:()=>{t("preview")},showImageManager:()=>{t("images")}}}function yy(e,t){const o=Oo({editablePageData:[],localParts:[],localCommonParts:[],localIndividualParts:[],activeTab:"editor",dataTab:"rendered",showEditor:!1,showPartSelector:!1,showNestedPartSelector:!1,selectedComponent:null,selectedComponentIndex:null,editingText:null,insertPosition:0,nestedInsertPath:"",nestedInsertPosition:0});at(()=>e.page,l=>{Array.isArray(l)&&l.length>0&&(o.editablePageData=[...l])},{immediate:!0,deep:!0}),at(()=>e.parts,l=>{Array.isArray(l)&&(o.localParts=[...l])},{immediate:!0,deep:!0});const r={currentComponentIndex:Ae(()=>o.selectedComponentIndex===null?-1:typeof o.selectedComponentIndex=="number"?o.selectedComponentIndex:parseInt(o.selectedComponentIndex.toString())),pageDataLength:Ae(()=>o.editablePageData.length),hasSelectedComponent:Ae(()=>o.selectedComponent!==null),isEditing:Ae(()=>o.showEditor&&o.selectedComponent!==null),isTiptapEditing:Ae(()=>o.editingText!==null)},n={switchToTab:l=>{o.activeTab=l,l==="editor"&&(o.dataTab="rendered")},setDataTab:l=>{o.dataTab=l}},s={openEditor:(l,h)=>{o.selectedComponent=l,o.selectedComponentIndex=h,o.showEditor=!0},closeEditor:()=>{t.emit("editorClosed",{componentId:o.selectedComponent?.id,componentIndex:o.selectedComponentIndex}),o.showEditor=!1,o.selectedComponent=null,o.selectedComponentIndex=null},openPartSelector:l=>{o.insertPosition=l,o.showPartSelector=!0},closePartSelector:()=>{o.showPartSelector=!1},openNestedPartSelector:(l,h)=>{o.nestedInsertPath=l,o.nestedInsertPosition=h,o.showNestedPartSelector=!0},closeNestedPartSelector:()=>{o.showNestedPartSelector=!1}},a={startTiptapEdit:(l,h,m=[],v=0,A,z)=>{o.editingText={componentId:l,paramName:h,hierarchyPath:m,depth:v,arrayName:A,itemIndex:z}},stopTiptapEdit:()=>{o.editingText=null}},i=()=>{o.editablePageData=Array.isArray(e.page)?[...e.page]:[],o.localParts=Array.isArray(e.parts)?[...e.parts]:[],o.localCommonParts=Array.isArray(e.commonParts)?[...e.commonParts]:[],o.localIndividualParts=Array.isArray(e.individualParts)?[...e.individualParts]:[]};return at(()=>e.page,l=>{Array.isArray(l)&&(o.editablePageData=[...l])},{deep:!0,immediate:!0}),at(()=>e.parts,l=>{Array.isArray(l)&&(o.localParts=[...l])},{deep:!0,immediate:!0}),at(()=>e.commonParts,l=>{Array.isArray(l)&&(o.localCommonParts=[...l])},{deep:!0,immediate:!0}),at(()=>e.individualParts,l=>{Array.isArray(l)&&(o.localIndividualParts=[...l])},{deep:!0,immediate:!0}),i(),{...qa(o),...r,...n,...s,...a,initializeData:i}}function by(){const e=i=>i.includes("url")||i.includes("src")||i.includes("link")?"url":i.includes("email")?"email":i.includes("number")||i.includes("count")?"number":i.includes("date")?"date":i.includes("time")?"time":i.includes("password")?"password":i.includes("tel")||i.includes("phone")?"tel":"text";return{getInputType:e,formatFileSize:i=>{if(i===0)return"0 Bytes";const l=1024,h=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(i)/Math.log(l));return parseFloat((i/Math.pow(l,m)).toFixed(2))+" "+h[m]},component:{findComponentByPath:(i,l)=>{let h=i,m=null;for(let v=0;v<l.length;v++){const A=l[v];if(A>=0&&A<h.length)m=h[A],v<l.length-1&&(h=m.nested_parts||[]);else return null}return m},createNewComponent:(i,l)=>({id:`comp_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,type:i,module_name:l,nested_parts:[]}),deleteComponent:(i,l)=>i.filter((h,m)=>m!==l),duplicateComponent:i=>{const l=`comp_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;return{...JSON.parse(JSON.stringify(i)),id:l}},addArrayItem:(i,l)=>{i[l]||(i[l]=[]);const h=i[l],m={id:`item_${Date.now()}_${Math.random().toString(36).substring(2,11)}`};h.push(m)},removeArrayItem:(i,l,h)=>{const m=i[l];Array.isArray(m)&&h>=0&&h<m.length&&m.splice(h,1)}},template:{getTemplate:(i,l,h)=>{const m=h.find(A=>A.type===i);return m&&m.module.find(A=>A.title===l)?.body||""},extractFields:i=>{const l=[];return[/\{\$([^:}]+):/g,/\(\$([^:}]+):/g,/\(\$([^?}]+)\?:/g].forEach(m=>{let v;for(;(v=m.exec(i))!==null;){const A=v[1];l.includes(A)||l.push(A)}}),l},extractSlots:i=>[]},array:{addArrayItem:(i,l)=>[...i,l],removeArrayItem:(i,l)=>i.filter((h,m)=>m!==l),updateArrayItem:(i,l,h)=>i.map((m,v)=>v===l?h:m),moveArrayItem:(i,l,h)=>{const m=[...i],[v]=m.splice(l,1);return m.splice(h,0,v),m}},field:{getFieldValue:(i,l)=>i[l]||"",setFieldValue:(i,l,h)=>({...i,[l]:h}),validateField:(i,l)=>{switch(e(i)){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l);case"url":try{return new URL(l),!0}catch{return!1}case"number":return!isNaN(Number(l));default:return!0}}},string:{stringifyHierarchyPath:i=>i.join("."),parseHierarchyPath:i=>{if(!i||typeof i!="string")return _.warn("Invalid pathString provided:",i),[];try{const l=i.split("."),h=[];for(const m of l){const v=m.trim();if(v==="")continue;const A=parseInt(v,10);if(!isNaN(A)&&A>=0)h.push(A);else return _.error(`Invalid path component: "${m}" in pathString: "${i}"`),[]}return h}catch(l){return _.error("Error parsing hierarchy path:",i,l),[]}},camelToKebab:i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kebabToCamel:i=>i.replace(/-([a-z])/g,(l,h)=>h.toUpperCase())}}}function _y(){let e=null;const t=d=>{if(!d||typeof d!="string"||d.trim()==="")return"<p></p>";const b=["p","strong","em","u","s","a","span","br"],E=["href","target","style"],w=document.createElement("div");w.innerHTML=d;const u=g=>{const y=g.tagName.toLowerCase();if(!b.includes(y)){const p=g.parentNode;if(p){for(;g.firstChild;)p.insertBefore(g.firstChild,g);p.removeChild(g)}return}Array.from(g.attributes).forEach(p=>{E.includes(p.name.toLowerCase())||g.removeAttribute(p.name)}),Array.from(g.children).forEach(p=>{u(p)})};Array.from(w.children).forEach(g=>{u(g)});let f=w.innerHTML;return f=f.replace(/<p>\s*<\/p>/g,"<p><br></p>").replace(/<p>\s*<br>\s*<\/p>/g,"<p><br></p>").replace(/(<\w+>)\s*(<\/\w+>)/g,"$1<br>$2"),f.includes("<")||(f=`<p>${f}</p>`),(!f||f.trim()==="")&&(f="<p><br></p>"),f},o=()=>{const d=window.getSelection();if(!d||d.rangeCount===0)return{selection:null,range:null};const b=d.getRangeAt(0);return e?.contains(b.commonAncestorContainer)?{selection:d,range:b}:{selection:null,range:null}},r=(d,b)=>{const E=document.createElement(d);return b&&Object.entries(b).forEach(([w,u])=>{E.setAttribute(w,u)}),E},n=(d,b)=>{try{d.surroundContents(b)}catch{const E=d.extractContents();b.appendChild(E),d.insertNode(b)}},s=(d,b,E)=>{const w=r(b,E);n(d,w)},a=(d,b)=>{const E=document.createElement("span");Object.assign(E.style,b),n(d,E)},i=(d,b)=>{if(!d.collapsed)return;const E=document.createTextNode("テキスト");d.insertNode(E),d.selectNodeContents(E),b.removeAllRanges(),b.addRange(d)},l=d=>{const{selection:b,range:E}=o();if(!b||!E)return;let w=E.commonAncestorContainer;w.nodeType===Node.TEXT_NODE&&(w=w.parentElement||w);const u=w.closest("p");if(u){const f={left:"left",center:"center",right:"right"};u.style.textAlign=f[d]}},h=(d,b)=>{if(!e){_.warn("Editor element not found");return}e.focus();const{selection:E,range:w}=o();if(!E||!w){_.warn("Invalid selection");return}i(w,E);const u={bold:()=>s(w,"strong"),italic:()=>s(w,"em"),underline:()=>s(w,"u"),strikeThrough:()=>s(w,"s"),justifyLeft:()=>l("left"),justifyCenter:()=>l("center"),justifyRight:()=>l("right"),createLink:()=>b&&s(w,"a",{href:b,target:"_blank"}),backColor:()=>b&&a(w,{backgroundColor:b})};try{const f=u[d];f?f():_.warn(`Unknown style: ${d}`)}catch(f){_.error(`Failed to apply style ${d}:`,f);try{document.execCommand(d,!1,b)}catch(g){_.error("Fallback command failed:",g)}}},m=(d,b)=>{if(!e)return;e.focus();const E=window.getSelection();if(E?.rangeCount&&e.contains(E.getRangeAt(0).commonAncestorContainer)){const w=E.getRangeAt(0);E.removeAllRanges(),E.addRange(w)}h(d,b)},v={toggleBold:()=>m("bold"),toggleItalic:()=>m("italic"),toggleUnderline:()=>m("underline"),toggleStrike:()=>m("strikeThrough"),alignLeft:()=>m("justifyLeft"),alignCenter:()=>m("justifyCenter"),alignRight:()=>m("justifyRight"),setLink:()=>{const d=window.prompt("URLを入力してください:");d&&m("createLink",d)},isActive:d=>{if(!e)return!1;const b=window.getSelection();if(!b?.rangeCount)return!1;const E=b.getRangeAt(0);return e.contains(E.commonAncestorContainer)?{bold:()=>A("strong"),italic:()=>A("em"),underline:()=>A("u"),strike:()=>A("s")}[d]?.()??!1:!1}},A=d=>{const{selection:b,range:E}=o();if(!b||!E)return!1;let w=E.commonAncestorContainer;for(w.nodeType===window.Node.TEXT_NODE&&(w=w.parentElement||w);w&&w!==e;){if(w.nodeType===window.Node.ELEMENT_NODE&&w.tagName.toLowerCase()===d.toLowerCase())return!0;w=w.parentElement}return!1},z=()=>`
    border: 2px solid #3b82f6;
    border-radius: 8px;
    padding: 12px 16px;
    min-height: 60px;
    background: white;
    outline: none;
    line-height: 1.6;
    color: #1f2937;
    font-size: 14px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    transition: all 0.2s ease;
  `,x=d=>{Object.entries({"data-gramm":"false",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off"}).forEach(([E,w])=>{d.setAttribute(E,w)})},k=(d,b)=>{let E=null,w=null;d.addEventListener("focus",()=>{d.style.borderColor="#3b82f6",d.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1), 0 1px 3px rgba(0,0,0,0.1)"}),d.addEventListener("blur",()=>{d.style.borderColor="#3b82f6",d.style.boxShadow="0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)"}),d.addEventListener("keydown",f=>{if(f.key==="Enter"&&!f.shiftKey){f.preventDefault();const g=window.getSelection();if(!g?.rangeCount)return;const y=g.getRangeAt(0),p=y.startContainer;let C=null;if(p.nodeType===window.Node.TEXT_NODE?C=p.parentElement?.closest("p")||null:p.nodeType===window.Node.ELEMENT_NODE&&(C=p.closest("p")||null),C){const S=document.createElement("p");S.innerHTML="<br>",C.insertAdjacentElement("afterend",S);const P=document.createRange();P.setStart(S,0),P.setEnd(S,0),g.removeAllRanges(),g.addRange(P)}else{const S=document.createElement("p");S.innerHTML="<br>",y.deleteContents(),y.insertNode(S);const P=document.createRange();P.setStart(S,0),P.setEnd(S,0),g.removeAllRanges(),g.addRange(P)}d.dispatchEvent(new Event("input",{bubbles:!0}))}}),d.addEventListener("input",()=>{E&&window.clearTimeout(E),E=window.setTimeout(()=>{const f=t(d.innerHTML);if(f!==d.innerHTML){const g=window.getSelection();let y=null;if(g&&g.rangeCount>0&&(y=g.getRangeAt(0).cloneRange()),d.innerHTML=f,y&&g)try{g.removeAllRanges(),g.addRange(y)}catch{const C=document.createRange();C.selectNodeContents(d),C.collapse(!1),g.removeAllRanges(),g.addRange(C)}}b?.(d.innerHTML)},300)}),d.addEventListener("selectionchange",()=>{try{d.dispatchEvent(new CustomEvent("selectionchange"))}catch(f){_.warn("Selection change error:",f)}});const u=new globalThis.MutationObserver(()=>{w&&window.clearTimeout(w),w=window.setTimeout(()=>{b?.(d.innerHTML)},100)});return u.observe(d,{childList:!0,subtree:!0,characterData:!0}),{saveTimeout:E,updateTimeout:w,observer:u}},O=(d,b,E)=>{const w=b.querySelector(".simple-editor-content");w&&w.remove();const u=document.createElement("div");u.className="simple-editor-content",u.contentEditable="true";const f=t(d);u.innerHTML=f,u.style.cssText=z(),x(u);const{saveTimeout:g,updateTimeout:y,observer:p}=k(u,E);return b.appendChild(u),e=u,{element:u,getHTML:()=>u.innerHTML,setContent:C=>u.innerHTML=C,destroy:()=>{window.clearTimeout(g),window.clearTimeout(y),p.disconnect(),u.remove(),e=null},isActive:C=>v.isActive(C),isInitialized:!0,isDestroyed:!1,isFocused:!1,chain:()=>({focus:()=>({toggleMark:C=>({run:()=>{({bold:v.toggleBold,italic:v.toggleItalic,underline:v.toggleUnderline,strike:v.toggleStrike})[C]?.()}}),setTextAlign:C=>({run:()=>{({left:v.alignLeft,center:v.alignCenter,right:v.alignRight})[C]?.()}})})})}},D=(d,b,E)=>{try{return b.innerHTML="",O(d,b,E)}catch(w){throw _.error("Editor init error:",w),w}},I=()=>{if(e)try{e.remove(),e=null}catch(d){_.error("Editor destroy error:",d)}},c=()=>!!e;return xs(()=>I()),{initEditor:D,destroyEditor:I,getEditor:()=>e,isEditorReady:c}}function $y(e,t){let o=null;return(...r)=>{o&&clearTimeout(o),o=setTimeout(()=>{e(...r),o=null},t)}}class mc{constructor(){en(this,"events",new Map);en(this,"isEnabled",!0)}on(t,o){this.events.has(t)||this.events.set(t,new Set);const r=this.events.get(t);return r.add(o),()=>{r.delete(o)}}emit(t,o){if(!this.isEnabled){_.warn(`EventBus: 無効化されているため ${t} イベントを無視`);return}const r=this.events.get(t);if(!r||r.size===0){_.warn(`EventBus: ${t} イベントのリスナーが見つかりません`);return}const n=[];r.forEach(s=>{try{const a=s(o);a instanceof Promise&&n.push(a)}catch(a){_.error(`EventBus: ${t} イベントリスナーでエラー`,a)}}),n.length>0&&Promise.allSettled(n).then(s=>{s.forEach((a,i)=>{a.status==="rejected"&&_.error(`EventBus: ${t} 非同期リスナー[${i}]でエラー`,a.reason)})})}off(t){this.events.delete(t)}clear(){this.events.clear()}disable(){this.isEnabled=!1}enable(){this.isEnabled=!0}getListenerCount(t){if(t)return this.events.get(t)?.size||0;let o=0;return this.events.forEach(r=>{o+=r.size}),o}}const Pt=new mc,wy={addArrayItem:(e,t)=>{Pt.emit("addArrayItem",{componentId:e,arrayKey:t})},addZForArrayItem:(e,t,o)=>{Pt.emit("addZForArrayItem",{componentId:e,arrayName:t,insertIndex:o})},removeZForArrayItem:(e,t,o)=>{Pt.emit("removeZForArrayItem",{componentId:e,arrayName:t,index:o})},reorderZForArrayItem:(e,t,o,r)=>{Pt.emit("reorderZForArrayItem",{componentId:e,arrayName:t,fromIndex:o,toIndex:r})},editZForArrayItem:(e,t,o)=>{Pt.emit("editZForArrayItem",{componentId:e,arrayName:t,index:o})},deleteNestedPart:e=>{Pt.emit("deleteNestedPart",{pathString:e})},openNestedEditor:e=>{Pt.emit("openNestedEditor",{pathString:e})},openNestedPartSelector:(e,t)=>{Pt.emit("openNestedPartSelector",{pathString:e,position:t})},startRichTextEdit:(e,t,o)=>Pt.emit("startRichTextEdit",{componentId:e,paramName:t,currentValue:o}),selectImage:(e,t)=>{Pt.emit("selectImage",{componentId:e,paramName:t})},uploadImage:(e,t,o)=>{Pt.emit("uploadImage",{file:e,category:t,componentId:o})}};function zy(e,t){return t.toLowerCase().includes("url")||t.toLowerCase().includes("image")||t.toLowerCase().includes("icon")||e.startsWith("/")||e.includes(".jpg")||e.includes(".png")||e.includes(".gif")||e.includes(".svg"),e}function Ay(e,t){console.log("🔥 [useZeroCode] 初期化開始");const o=new mc,r=yy(e,o),n=by(),s=ma(),a=_y(),i=new Map,l=(c,d)=>{console.log("🔍 findComponentDirect 呼び出し:",d,"コンポーネント数:",c.length);const b=(E,w,u=0)=>{const f="  ".repeat(u);console.log(`${f}🔍 [深層検索 L${u}] 検索中...`);for(const g of E){if(console.log(`${f}🔍 [L${u}] ${g.id} === ${w}:`,g.id===w),g.id===w)return console.log(`${f}✅ [発見!] ${g.id} (レベル${u})`),g;if(g.nested_parts&&g.nested_parts.length>0){console.log(`${f}📂 [L${u}] ${g.id} のnested_parts (${g.nested_parts.length}個) を検索`);const y=b(g.nested_parts,w,u+1);if(y)return y}for(const y of Object.keys(g))if(Array.isArray(g[y])){console.log(`${f}🔄 [L${u}] ${g.id}.${y} 配列 (${g[y].length}個) を検索`);for(let p=0;p<g[y].length;p++){const C=g[y][p];if(C&&typeof C=="object"&&C.nested_parts){console.log(`${f}🔍 [L${u}] ${g.id}.${y}[${p}] のnested_parts検索`);const S=b(C.nested_parts,w,u+2);if(S)return console.log(`${f}🎯 [配列内発見!] ${S.id}`),S}}}}return console.log(`${f}❌ [L${u}] 見つからず`),null};return b(c,d)};window.registerTemporaryIdMapping=(c,d)=>{console.log("🗺️ [IDマッピング登録]:",c,"->",d),i.set(c,d)},console.log("🔥 [useZeroCode] z-forイベントリスナー登録開始"),o.on("addZForArrayItem",({componentId:c,arrayName:d,insertIndex:b})=>{console.log("🚀 [優先処理] 配列名ベース検索:",{componentId:c,arrayName:d,insertIndex:b});try{console.log("🔍 [修正版] componentId:",c,"arrayName:",d);const E=c.startsWith("comp_");let w=null;if(E){const u=(f,g,y=0)=>{const p="  ".repeat(y);for(const C of f){if(C.id===g)return console.log(`${p}✅ [発見!] ${C.id} (レベル${y})`),C;if(C.nested_parts&&C.nested_parts.length>0){const S=u(C.nested_parts,g,y+1);if(S)return S}for(const S of Object.keys(C))if(Array.isArray(C[S]))for(let P=0;P<C[S].length;P++){const T=C[S][P];if(T&&typeof T=="object"&&T.nested_parts){const N=u(T.nested_parts,g,y+2);if(N)return console.log(`${p}🎯 [配列内発見!] ${N.id}`),N}}}return null};w=u(r.editablePageData.value,c),console.log("🎯 [一時的ID検索] 結果:",!!w,w?.id)}else{const u=(f,g)=>{for(const y of f){if(console.log(`🔍 [配列検索] ${y.id} の ${g}:`,!!y[g]),y[g]&&Array.isArray(y[g]))return console.log("🎯 [配列発見]:",y.id,"に",g,"配列あり"),y;if(y.nested_parts){const p=u(y.nested_parts,g);if(p)return p}}return null};w=u(r.editablePageData.value,d),console.log("🔥 [通常ID検索] 配列名ベース検索結果:",!!w,w?.id)}if(w){console.log("🎯 [成功] 配列所有者発見:",w.id);const u=w[d];let f=typeof b=="number"?b:0;if(typeof b=="string"){const C=u.findIndex(S=>S.id&&S.id===b||S.stableItemId&&S.stableItemId===b);C!==-1&&(f=C)}const g=r.localParts.value&&r.localParts.value.length>0?r.localParts.value:[],y=qr(g),p={id:y.generateUniqueId(),stableItemId:y.generateUniqueId()};if(u.length>0){const C=u[0];console.log("🚀 [テンプレート処理] templateItem:",C),console.log("🚀 [テンプレート処理] テンプレートキー:",Object.keys(C)),Object.keys(C).length<=2?(console.log("⚠️ [警告] テンプレートアイテムが不完全 - 基本構造のみ作成"),p.nested_parts=[],console.log("🔧 [修復完了] 基本構造のみのアイテム:",p)):Object.keys(C).forEach(S=>{if(S!=="id"&&S!=="stableItemId"){const P=C[S];console.log(`🚀 [フィールド処理] ${S} = ${P} (型: ${typeof P})`),typeof P=="string"?(p[S]=P,console.log(`🚀 [文字列フィールド] ${S}: "${P}" → "${p[S]}"`)):Array.isArray(P)?(p[S]=[],console.log(`🚀 [配列フィールド] ${S}: [] で初期化`)):(p[S]=P,console.log(`🚀 [その他フィールド] ${S}: ${P} をコピー`))}}),console.log("🚀 [作成完了] newItem:",p),console.log("🚀 [作成完了] newItemキー数:",Object.keys(p).length),console.log("🚀 [作成完了] newItemキー一覧:",Object.keys(p))}else console.log("🚀 [空配列] デフォルト構造を作成"),p.nested_parts||(p.nested_parts=[]),console.log("🚀 [空配列処理完了] newItem:",p);u.splice(f,0,p),console.log("🎯 [成功] アイテム追加完了:",p.id),r.editablePageData.value=[...r.editablePageData.value];return}else console.log("⚠️ [警告] 配列名ベース検索で見つからず、従来処理に移行")}catch(E){console.error("🚀 [優先処理エラー]:",E)}console.log("🔥 [EventBus受信] addZForArrayItem受信 (従来処理):",{componentId:c,arrayName:d,insertIndex:b});try{let E;if(typeof b=="string"){const P=l(r.editablePageData.value,c);if(P&&P[d]&&Array.isArray(P[d])){const T=P[d],N=T.findIndex(F=>(F.id||`${c}_${d}_${T.indexOf(F)}_${Date.now()}`)===b);if(N===-1){const F=b.match(/_\d+_?/);E=F?parseInt(F[0].replace(/_/g,"")):T.length}else E=N}else E=0;console.log("🔥 [DEBUG] stableItemId -> actualInsertIndex:",{insertIndex:b,actualInsertIndex:E})}else E=b;console.log("🔥 [処理実行] 配列アイテム追加処理開始",{actualInsertIndex:E});const w=c.split("_");console.log("🔥 [DEBUG] componentId parts:",w);let u,f=null;const g=l(r.editablePageData.value,c),y=g&&g.id===c;if(w.length>=3&&/^\d+$/.test(w[w.length-1])&&!y){const P=parseInt(w[w.length-1]);let T="",N="";const F=`_${P}`,Z=c.slice(0,-F.length),H=w.slice(0,4).join("_");if(Z.startsWith(H+"_"))N=H,T=Z.slice(H.length+1);else{const re=Z.lastIndexOf("_");re!==-1&&(T=Z.slice(re+1),N=Z.slice(0,re))}if(!T){const re=c.match(/^(.+)_([^_]+_[^_]+)_(\d+)$/);re?(N=re[1],T=re[2]):(N=w.slice(0,-2).join("_"),T=w[w.length-2])}console.log("🔥 [DEBUG] 修正版ネスト形式検出:",{componentId:c,parts:w,baseParentId:N,parentArrayName:T,parentIndex:P,arrayName:d});const W=N;console.log("🔥 [DEBUG] baseParentIdでコンポーネント検索:",N);const G=h(r.editablePageData.value,N);if(console.log("🔥 [DEBUG] 検索結果:",G?G.id:"null"),G)if(console.log("🔥 [DEBUG] 親コンポーネントの配列確認:",T,G[T]),G[T]&&G[T][P])f=G[T][P],console.log("🔥 [DEBUG] ネスト対象コンポーネント:",f),f&&!Array.isArray(f[d])&&(f[d]=[],console.log("🔥 [DEBUG] 配列フィールド初期化:",d)),u=f?f[d]:void 0,console.log("🔥 [DEBUG] ネスト対象特定完了:",{targetComponentId:f?f.id:"null",arrayName:d,currentArrayLength:u?u.length:0});else throw console.error("🔥 [DEBUG] 親配列または指定インデックスが見つかりません:",{parentArrayName:T,parentIndex:P,parentArray:G[T],parentArrayLength:G[T]?.length}),new Error(`Parent array or index not found: ${T}[${P}]`);else throw console.error("🔥 [DEBUG] baseParentIdでコンポーネントが見つかりません:",N),console.error("🔥 [DEBUG] 現在のページデータ:",r.editablePageData.value.map(re=>re.id)),new Error(`Parent component not found: ${N}`)}else console.log("🔥 [DEBUG] 通常形式検出:",c),console.log("🔥 [DEBUG] 現在のページデータ構造:",r.editablePageData.value.map(P=>({id:P.id,type:P.type}))),f=g||l(r.editablePageData.value,c),console.log("🔥 [DEBUG] targetComponent found:",!!f,f?.id),f&&(console.log("🔥 [DEBUG] targetComponent[arrayName] before:",f[d]),Array.isArray(f[d])||(f[d]=[]),u=f[d],console.log("🔥 [DEBUG] targetArray after:",u,Array.isArray(u)));if(console.log("🔥 [DEBUG] 最終チェック - targetComponent:",!!f,"targetArray:",!!u),!f||!u)throw new Error(`Target component or array not found: ${c}`);const p=r.localParts.value&&r.localParts.value.length>0?r.localParts.value:[],S={id:qr(p).generateUniqueId()};if(u&&u.length>0){console.log("🔥 [DEBUG] 既存アイテムベース生成開始");const P=u[0];console.log("🔥 [DEBUG] サンプルアイテム:",P),console.log("🔥 [DEBUG] サンプルアイテムのキー:",Object.keys(P)),Object.keys(P).length<=2?(console.log("🔥 [警告] サンプルアイテムが不完全 - 基本構造のみ作成"),S.nested_parts||(S.nested_parts=[]),console.log("🔥 [修復完了] 基本構造のみのアイテム:",S)):Object.keys(P).forEach(T=>{if(T!=="id"){const N=P[T];console.log(`🔥 [DEBUG] フィールド処理中: ${T} = ${N} (型: ${typeof N})`),typeof N=="string"?(S[T]=zy(N,T),console.log(`🔥 [DEBUG] 文字列フィールドコピー: ${T} = "${S[T]}"`)):Array.isArray(N)?(S[T]=[],console.log(`🔥 [DEBUG] 配列フィールド初期化: ${T} = []`)):typeof N=="number"?(S[T]=N===0?0:Math.floor(Math.random()*100)+1,console.log(`🔥 [DEBUG] 数値フィールドコピー: ${T} = ${S[T]}`)):typeof N=="boolean"?(S[T]=!1,console.log(`🔥 [DEBUG] ブール値フィールド初期化: ${T} = ${S[T]}`)):(S[T]=N,console.log(`🔥 [DEBUG] その他フィールドコピー: ${T} = ${S[T]}`))}}),console.log("🔥 [DEBUG] 既存アイテムベース生成完了:",S),console.log("🔥 [DEBUG] 新アイテムのキー数:",Object.keys(S).length),console.log("🔥 [DEBUG] 新アイテムのキー一覧:",Object.keys(S))}else{console.log("🔥 [DEBUG] 空配列 - デフォルト値設定");const P=d.replace(/_/g,"");S.name=`新しい${P}${(u?.length||0)+1}`}u.splice(E,0,S),console.log("🔥 [DEBUG] z-for配列アイテム追加完了:",{arrayName:d,originalInsertIndex:b,actualInsertIndex:E,newItem:S,finalArrayLength:u.length}),t("update:page",r.editablePageData.value),console.log("🔥 [処理完了] アイテム追加成功！")}catch(E){console.error("🔥 [処理エラー] z-forアイテム追加エラー:",E),alert(`エラーが発生しました: ${E instanceof Error?E.message:String(E)}`)}}),o.on("reorderZForArrayItem",({componentId:c,arrayName:d,fromIndex:b,toIndex:E})=>{console.log("🔥 [EventBus受信] reorderZForArrayItem受信 (早期登録版):",{componentId:c,arrayName:d,fromIndex:b,toIndex:E});try{console.log("🔥 [処理実行] 配列アイテム並べ替え処理開始");const w=(S,P,T=0)=>{const N="  ".repeat(T);console.log(`${N}🔍 [深層検索 L${T}] 検索中...`);for(const F of S){if(console.log(`${N}🔍 [L${T}] ${F.id} === ${P}:`,F.id===P),F.id===P)return console.log(`${N}✅ [発見!] ${F.id} (レベル${T})`),F;if(F.nested_parts&&F.nested_parts.length>0){console.log(`${N}📂 [L${T}] ${F.id} のnested_parts (${F.nested_parts.length}個) を検索`);const Z=w(F.nested_parts,P,T+1);if(Z)return Z}for(const Z of Object.keys(F))if(Array.isArray(F[Z])){console.log(`${N}🔄 [L${T}] ${F.id}.${Z} 配列 (${F[Z].length}個) を検索`);for(let H=0;H<F[Z].length;H++){const W=F[Z][H];if(W&&typeof W=="object"&&W.nested_parts){console.log(`${N}🔍 [L${T}] ${F.id}.${Z}[${H}] のnested_parts検索`);const G=w(W.nested_parts,P,T+2);if(G)return console.log(`${N}🎯 [配列内発見!] ${G.id}`),G}}}}return console.log(`${N}❌ [L${T}] 見つからず`),null},u=c.split("_");console.log("🔥 [DEBUG] 並べ替えcomponentId parts:",u);let f,g=null;const y=w(r.editablePageData.value,c),p=y&&y.id===c;if(u.length>=3&&/^\d+$/.test(u[u.length-1])&&!p){const S=parseInt(u[u.length-1]);let P="",T="";const N=`_${S}`,F=c.slice(0,-N.length),Z=u.slice(0,4).join("_");if(F.startsWith(Z+"_"))T=Z,P=F.slice(Z.length+1);else{const W=F.lastIndexOf("_");W!==-1&&(P=F.slice(W+1),T=F.slice(0,W))}if(!P){const W=c.match(/^(.+)_([^_]+_[^_]+)_(\d+)$/);W?(T=W[1],P=W[2]):(T=u.slice(0,-2).join("_"),P=u[u.length-2])}console.log("🔥 [DEBUG] 並べ替えネスト形式検出:",{componentId:c,parts:u,baseParentId:T,parentArrayName:P,parentIndex:S,arrayName:d});const H=h(r.editablePageData.value,T);if(console.log("🔥 [DEBUG] 並べ替え親要素検索結果:",{baseParentId:T,parentArrayName:P,parentIndex:S,realComponentFound:!!H,realComponentId:H?.id,realComponentKeys:H?Object.keys(H):null,hasParentArray:H?!!H[P]:!1,parentArrayLength:H&&H[P]?H[P].length:0,hasTargetIndex:H&&H[P]?!!H[P][S]:!1,availableArrays:H?Object.keys(H).filter(W=>Array.isArray(H[W])):null}),H&&H[P]&&H[P][S])g=H[P][S],g&&!Array.isArray(g[d])&&(g[d]=[]),f=g?g[d]:void 0,console.log("🔥 [DEBUG] 並べ替えネスト対象特定完了:",{targetComponentId:g?g.id:null,arrayName:d,currentArrayLength:f?f.length:0});else throw console.error("🔥 [ERROR] 並べ替え失敗詳細:",{baseParentId:T,parentArrayName:P,parentIndex:S,realComponent:H?{id:H.id,keys:Object.keys(H)}:null,parentArray:H&&H[P]?H[P]:null}),new Error(`Parent array or index not found for reorder: ${P}[${S}]`)}else console.log("🔥 [DEBUG] 並べ替え通常形式検出:",c),g=y||l(r.editablePageData.value,c),g&&(Array.isArray(g[d])||(g[d]=[]),f=g[d]);if(!g||!f)throw new Error(`Target component or array not found for reorder: ${c}`);console.log("🔥 [DEBUG] 並べ替え前のアイテムデータ:",{fromItem:f[b],fromItemKeys:Object.keys(f[b]),fromItemCardTitle:f[b]?.card_title});const[C]=f.splice(b,1);f.splice(E,0,C),console.log("🔥 [DEBUG] z-for配列アイテム並べ替え完了:",{arrayName:d,fromIndex:b,toIndex:E,movedItem:C.id||C,movedItemKeys:Object.keys(C),movedItemCardTitle:C.card_title,finalArrayLength:f.length,finalArray:f.map(S=>({id:S.id,card_title:S.card_title}))}),t("update:page",r.editablePageData.value),console.log("🔥 [処理完了] アイテム並べ替え成功！")}catch(w){console.error("🔥 [処理エラー] z-forアイテム並べ替えエラー:",w),alert(`並べ替えでエラーが発生しました: ${w instanceof Error?w.message:String(w)}`)}}),console.log("🔥 [useZeroCode] 早期z-forリスナー登録完了（追加・並べ替え）");const h=(c,d)=>l(c,d),m=$y(c=>{t("update:page",c),_.debug("💾 ページデータ更新をemit")},100),v=(c,d)=>{const b=()=>{c._isZForItem&&delete c._isZForItem,c._parentComponentId&&delete c._parentComponentId,c._arrayName&&delete c._arrayName,c._arrayIndex&&delete c._arrayIndex,c.module_name&&delete c.module_name,_.debug("🧹 z-for配列アイテムのメタデータクリーンアップ完了:",{editorId:d,cleanedProperties:["_isZForItem","_parentComponentId","_arrayName","_arrayIndex","module_name"]})},E=()=>{b(),o.off("editorClosed")};o.on("editorClosed",E),_.debug("🔧 z-for配列アイテム編集クリーンアップ処理を設定:",{editorId:d,hasMetadata:{_isZForItem:!!c._isZForItem,_parentComponentId:!!c._parentComponentId,_arrayName:!!c._arrayName,_arrayIndex:!!c._arrayIndex}})},A=(c,d,b)=>{_.debug(`🔍 updateNestedComponent: 検索開始 - targetId: ${d}, components数: ${c.length}`);for(let E=0;E<c.length;E++){const w=c[E];if(_.debug(`🔍 チェック中: ${w.id} === ${d} ?`),w.id===d)return _.debug(`✅ コンポーネント発見 - 更新実行: ${d}`),_.debug("🔍 更新前:",w),_.debug("🔍 更新後:",b),c[E]=b,!0;if(w.nested_parts&&Array.isArray(w.nested_parts)&&(_.debug(`🔍 nested_parts内を検索: ${w.id}`),A(w.nested_parts,d,b)))return!0;for(const[u,f]of Object.entries(w))if(Array.isArray(f)&&u!=="nested_parts"){_.debug(`🔍 配列プロパティ検索: ${w.id}.${u}`);for(const g of f)if(g&&typeof g=="object"){for(const[y,p]of Object.entries(g))if(Array.isArray(p)&&(_.debug(`🔍 スロット検索: ${w.id}.${u}[].${y}`),A(p,d,b)))return!0}}}return _.debug(`❌ コンポーネントが見つかりませんでした: ${d}`),!1},z=(c,d)=>{for(let b=0;b<c.length;b++){if(c[b].id===d)return c.splice(b,1),!0;if(c[b].nested_parts&&Array.isArray(c[b].nested_parts)&&z(c[b].nested_parts,d))return!0;for(const[E,w]of Object.entries(c[b]))if(Array.isArray(w)&&E!=="nested_parts"){for(const u of w)if(u&&typeof u=="object"){for(const[f,g]of Object.entries(u))if(Array.isArray(g)&&z(g,d))return!0}}}return!1},x={addPart:(c,d)=>{_.debug("🔧 addPart呼び出し:",{part:c,position:d,currentPageData:r.editablePageData.value});const b=[...r.editablePageData.value];b.splice(d,0,c),r.editablePageData.value=b,_.debug("🔧 新しいページデータ:",b),_.debug("✅ パーツ追加成功後、キャッシュをクリア"),t("update:page",b)},deletePart:c=>{if(window.confirm("このパーツを削除しますか？")){const d=n.component.deleteComponent(r.editablePageData.value,c);r.editablePageData.value=d,_.debug("✅ パーツ削除成功後、キャッシュをクリア"),t("update:page",d)}},duplicatePart:c=>{const d=r.editablePageData.value[c];if(d){const b=n.component.duplicateComponent(d),E=[...r.editablePageData.value];E.splice(c+1,0,b),r.editablePageData.value=E,t("update:page",E)}},reorderParts:c=>{r.editablePageData.value=c,t("update:page",c)},movePart:(c,d)=>{const b=[...r.editablePageData.value],[E]=b.splice(c,1);b.splice(d,0,E),r.editablePageData.value=b,t("update:page",b)},reorderNestedParts:(c,d)=>{const b=n.string.parseHierarchyPath(c),E=JSON.parse(JSON.stringify(r.editablePageData.value)),w=n.component.findComponentByPath(E,b);w?(w.nested_parts=[...d],r.editablePageData.value=E,t("update:page",E)):_.error("❌ 親コンポーネントが見つかりません:",{pathString:c,path:b})},moveNestedPart:(c,d,b)=>{const E=n.string.parseHierarchyPath(c),w=JSON.parse(JSON.stringify(r.editablePageData.value)),u=n.component.findComponentByPath(w,E);if(u?.nested_parts&&u.nested_parts.length>Math.max(d,b)){const f=[...u.nested_parts];if(d>=0&&d<f.length&&b>=0&&b<f.length&&d!==b){const[g]=f.splice(d,1);f.splice(b,0,g),u.nested_parts=f,r.editablePageData.value=w,t("update:page",w)}else _.error("❌ 無効なインデックス:",{fromIndex:d,toIndex:b,arrayLength:f.length})}else _.error("❌ 親コンポーネントまたはnested_partsが見つかりません:",{pathString:c,path:E})},moveNestedPartBetweenLevels:(c,d,b,E)=>{const w=n.string.parseHierarchyPath(c),u=n.string.parseHierarchyPath(b),f=[...r.editablePageData.value],g=n.component.findComponentByPath(f,w);if(!g?.nested_parts)return;const[y]=g.nested_parts.splice(d,1),p=n.component.findComponentByPath(f,u);p&&(p.nested_parts||(p.nested_parts=[]),p.nested_parts.splice(E,0,y),r.editablePageData.value=f,t("update:page",f))},moveNestedPartById:(c,d,b)=>{_.debug(`🔧 moveNestedPartById: 親ID=${c}, ${d} → ${b}`);const E=JSON.parse(JSON.stringify(r.editablePageData.value)),w=h(E,c);if(w?.nested_parts&&w.nested_parts.length>Math.max(d,b)){const u=[...w.nested_parts];if(d>=0&&d<u.length&&b>=0&&b<u.length&&d!==b){const[f]=u.splice(d,1);u.splice(b,0,f),w.nested_parts=u,r.editablePageData.value=E,t("update:page",E),_.debug(`  - ✅ 並べ替え成功: ${f.id} を位置 ${b} に移動`)}else _.error("❌ 無効なインデックス:",{fromIndex:d,toIndex:b,arrayLength:u.length})}else _.error("❌ 親コンポーネントまたはnested_partsが見つかりません:",{parentComponentId:c})},moveNestedPartBetweenLevelsById:(c,d,b,E)=>{_.debug(`🔧 moveNestedPartBetweenLevelsById: ${c}[${d}] → ${b}[${E}]`);const w=JSON.parse(JSON.stringify(r.editablePageData.value)),u=h(w,c);if(!u?.nested_parts){_.error("❌ ソース親コンポーネントが見つかりません:",c);return}const[f]=u.nested_parts.splice(d,1),g=h(w,b);if(!g){_.error("❌ ターゲット親コンポーネントが見つかりません:",b);return}g.nested_parts||(g.nested_parts=[]),g.nested_parts.splice(E,0,f),r.editablePageData.value=w,t("update:page",w),_.debug(`  - ✅ 階層間移動成功: ${f.id} を ${b} の位置 ${E} に移動`)},moveZForNestedPart:(c,d,b)=>{_.debug(`🔥🔧 moveZForNestedPart: パス=${c}, ${d} → ${b}`);const E=c.match(/^(\w+)\.(\w+)\[(\d+)\]\.(\w+)$/);if(_.debug("🔥 パス解析結果:",{parentPath:c,pathMatch:E}),!E){_.error("❌ 無効なz-forネストパーツパス:",c);return}const[,w,u,f,g]=E,y=parseInt(f);_.debug("🔥 解析済み情報:",{componentId:w,arrayName:u,arrayIndex:y,slotName:g});const p=JSON.parse(JSON.stringify(r.editablePageData.value)),C=h(p,w);if(_.debug("🔥 コンポーネント検索結果:",C),!C){_.error("❌ コンポーネントが見つかりません:",w);return}const S=C[u];if(_.debug("🔥 z-for配列:",{arrayName:u,array:S,isArray:Array.isArray(S),length:S?.length}),!Array.isArray(S)||y>=S.length){_.error("❌ 配列が見つかりません:",{arrayName:u,arrayIndex:y,arrayLength:S?.length});return}const P=S[y];if(_.debug("🔥 配列アイテム:",{arrayIndex:y,arrayItem:P}),!P||!P[g]||!Array.isArray(P[g])){_.error("❌ ネストパーツ配列が見つかりません:",{slotName:g,arrayItem:P,slot:P?.[g]});return}const T=P[g];if(_.debug("🔥 ネストパーツ配列:",{slotName:g,nestedParts:T,length:T.length}),d<0||d>=T.length||b<0||b>=T.length){_.error("❌ 無効なインデックス:",{fromIndex:d,toIndex:b,arrayLength:T.length});return}if(d===b){_.debug("📍 同じ位置のため移動なし");return}_.debug("🔥 並べ替え前:",T.map(F=>F.id));const[N]=T.splice(d,1);T.splice(b,0,N),_.debug("🔥 並べ替え後:",T.map(F=>F.id)),r.editablePageData.value=p,t("update:page",p),_.debug(`✅ z-for内ネストパーツ並べ替え成功: ${N.id} を位置 ${b} に移動`)},openEditor:c=>{const d=r.editablePageData.value[c];d&&r.openEditor(d,c)},saveComponent:c=>{const d=r.selectedComponentIndex.value;if(_.debug("🐛 saveComponent デバッグ:",{selectedIndex:d,selectedIndexType:typeof d,updatedComponentId:c.id,updatedComponentData:c,isZForItem:c._isZForItem}),c._isZForItem){_.debug("🔍 z-for配列アイテム保存開始");const b=c._parentComponentId,E=c._parentArrayName,w=c._parentIndex,u=c._arrayName,f=c._arrayIndex;_.debug("🔍 z-for保存パラメータ:",{parentComponentId:b,parentArrayName:E,parentIndex:w,arrayName:u,arrayIndex:f,updatedComponentKeys:Object.keys(c),updatedComponentDataSample:{id:c.id,type:c.type,card_title:c.card_title}});const g=JSON.parse(JSON.stringify(r.editablePageData.value));if(b&&E&&w!==void 0){const y=h(g,b);if(y&&Array.isArray(y[E])){const p=y[E];if(w>=0&&w<p.length){const C=p[w];if(C[u]&&Array.isArray(C[u])){const S=C[u];if(f>=0&&f<S.length){const{_isZForItem:P,_parentComponentId:T,_parentArrayName:N,_parentIndex:F,_arrayName:Z,_arrayIndex:H,_parentType:W,_parentModuleName:G,_zForTemplate:re,type:_e,module_name:Oe,...Se}=c;S[f]={...S[f],...Se},r.editablePageData.value=g,t("update:page",g),_.debug(`✅ ネストz-for配列アイテム保存完了 - ${E}[${w}].${u}[${f}]`)}else _.error(`❌ 子配列インデックス範囲外: ${f}`)}else _.error(`❌ 子配列が見つからない: ${u}`)}else _.error(`❌ 親配列インデックス範囲外: ${w}`)}else _.error(`❌ 親コンポーネントまたは親配列が見つからない: ${b}.${E}`)}else{const y=h(g,b);if(y&&Array.isArray(y[u])){const p=y[u];if(f>=0&&f<p.length){const{_isZForItem:C,_parentComponentId:S,_arrayName:P,_arrayIndex:T,_zForTemplate:N,type:F,module_name:Z,...H}=c;_.debug("🔍 z-for保存前データ:",{originalItem:p[f],originalKeys:Object.keys(p[f]),cleanedComponent:H,cleanedKeys:Object.keys(H),cleanedCardTitle:H.card_title}),p[f]={...p[f],...H},_.debug("🔍 z-for保存後データ:",{savedItem:p[f],savedKeys:Object.keys(p[f]),savedCardTitle:p[f].card_title}),r.editablePageData.value=g,t("update:page",g),_.debug(`✅ z-for配列アイテム保存完了 - ${u}[${f}]`)}else _.error(`❌ z-for配列インデックス範囲外: ${f}`)}else _.error(`❌ z-for親コンポーネントまたは配列が見つからない: ${b}.${u}`)}r.closeEditor();return}if(typeof d=="number"&&d>=0){const b=[...r.editablePageData.value];b[d]=c,r.editablePageData.value=b,t("update:page",b),_.debug(`✅ メインコンポーネント保存完了 - ID: ${c.id}`)}else if(typeof d=="string"){_.debug(`🔍 ネストコンポーネント保存開始 - 検索対象ID: ${d}`);const b=JSON.parse(JSON.stringify(r.editablePageData.value));_.debug("🔍 保存前のPageData:",JSON.stringify(b,null,2));const E=A(b,d,c);_.debug(`🔍 updateNestedComponent結果: ${E}`),_.debug("🔍 保存後のPageData:",JSON.stringify(b,null,2)),E?(r.editablePageData.value=b,t("update:page",b),_.debug(`✅ ネストコンポーネント保存完了 - ID: ${c.id}, パス: ${d}`),_.debug("✅ ネストコンポーネント保存成功後、キャッシュをクリア")):_.error(`❌ ネストコンポーネント保存失敗 - ID: ${c.id}, パス: ${d}`)}else _.error(`❌ 無効なselectedIndex: ${d} (type: ${typeof d})`);r.closeEditor()},addNestedPart:(c,d,b)=>{_.debug(`🔧 addNestedPart: 親ID=${c}, 位置=${d}, 新コンポーネント=${b.id}`);const E=JSON.parse(JSON.stringify(r.editablePageData.value)),w=/^(.+)\.(.+)\[(\d+)\]\.(.+)$/,u=c.match(w);_.debug(`🔍 パス解析: ${c} -> zForMatch:`,u);let f=!1;if(u){const[,g,y,p,C]=u;_.debug("z-for内ネストパーツ追加:",{parentId:g,arrayName:y,arrayIndex:p,slotName:C,position:d});const S=h(E,g);if(S)if(_.debug(`✅ 親コンポーネント発見: ${S.id}`),_.debug(`🔍 配列チェック: ${y} ->`,S[y]),S[y]&&Array.isArray(S[y])){const P=S[y][parseInt(p)];_.debug(`🔍 配列アイテム[${p}]:`,P),P?(P[C]||(P[C]=[],_.debug(`🆕 スロット初期化: ${C}`)),_.debug(`🔍 スロット[${C}]現在の内容:`,P[C]),P[C].splice(d,0,b),_.debug(`✅ z-for内パーツ追加成功: ${b.id} -> スロット内容:`,P[C]),f=!0):_.debug(`❌ 配列アイテムが見つかりません: インデックス${p}`)}else _.debug(`❌ 配列が見つかりません: ${y}`);else _.debug(`❌ 親コンポーネントが見つかりません: ${g}`)}else{const g=h(E,c);g&&(g.nested_parts||(g.nested_parts=[]),g.nested_parts.splice(d,0,b),_.debug(`  - ✅ パーツ追加成功: ${b.id} を ${c} の位置 ${d} に追加`),_.debug("  - 追加後のnested_parts:",g.nested_parts.map(y=>y.id)),f=!0)}f?(r.editablePageData.value=E,t("update:page",E),_.debug("✅ ネストパーツ追加成功後、キャッシュをクリア")):_.debug(`  - ❌ 親コンポーネントが見つかりません: ${c}`)},deleteNestedPart:c=>{if(window.confirm("このネストパーツを削除しますか？")){const d=JSON.parse(JSON.stringify(r.editablePageData.value)),b=/^(.+)\.(.+)\[(\d+)\]\.(.+)\[(\d+)\]$/,E=c.match(b);let w=!1;if(E){const[,u,f,g,y,p]=E;_.debug("z-for内ネストパーツ削除:",{parentId:u,arrayName:f,arrayIndex:g,slotName:y,partIndex:p});const C=h(d,u);if(C)if(_.debug(`✅ 削除対象の親コンポーネント発見: ${C.id}`),C[f]&&Array.isArray(C[f])){const S=C[f][parseInt(g)];S&&S[y]&&Array.isArray(S[y])?(_.debug(`🗑️ z-for内パーツ削除実行: ${y}[${p}]`),S[y].splice(parseInt(p),1),w=!0):_.debug(`❌ スロットまたはパーツが見つかりません: ${y}`)}else _.debug(`❌ 配列が見つかりません: ${f}`);else _.debug(`❌ 削除対象の親コンポーネントが見つかりません: ${u}`)}else w=z(d,c);w?(r.editablePageData.value=d,t("update:page",d),_.debug("✅ ネストパーツ削除成功後、キャッシュをクリア")):_.debug(`❌ Component not found for deletion: ${c}`)}},startTiptapEdit:(c,d,b=[],E=0)=>{r.startTiptapEdit(c,d,b,E)},startSimpleTiptapEdit:(c,d)=>{r.startTiptapEdit(c,d,[],0)},stopTiptapEdit:()=>{r.stopTiptapEdit()},sendPageData:()=>{m(r.editablePageData.value)},sendCommonPartsData:()=>{t("update:commonParts",r.localCommonParts.value)},sendIndividualPartsData:()=>{t("update:individualParts",r.localIndividualParts.value)},addArrayItem:(c,d)=>{n.component.addArrayItem(c,d),m(r.editablePageData.value)},removeArrayItem:(c,d,b)=>{n.component.removeArrayItem(c,d,b),m(r.editablePageData.value)},resetPageData:()=>{r.editablePageData.value=Array.isArray(e.page)?[...e.page]:[],t("update:page",r.editablePageData.value)},resetPartsData:()=>{r.localParts.value=Array.isArray(e.parts)?[...e.parts]:[],t("update:parts",r.localParts.value)}},k={currentComponent:Ae(()=>r.selectedComponent.value),currentTemplate:Ae(()=>{const c=r.selectedComponent.value;return c?n.template.getTemplate(c.type,c.module_name,r.localParts.value):""}),currentFields:Ae(()=>{const c=k.currentTemplate.value;return n.template.extractFields(c)}),currentSlots:Ae(()=>{const c=k.currentTemplate.value;return n.template.extractSlots(c)}),renderComponent:c=>s.renderComponentWithoutSlot(c,(d,b)=>n.template.getTemplate(d,b,r.localParts.value)),renderPartPreview:c=>{if(!c)return"";try{let d=c;return d=d.replace(/\{\$([^:]+):([^}]*)\}/g,(b,E,w)=>w&&w.trim()?w:{title:"サンプルタイトル",text:"サンプルテキスト",content:"サンプルコンテンツ",heading:"見出し",description:"説明文",label:"ラベル",source:"情報源",tooltip:"ツールチップ"}[E]||`[${E}]`),d=d.replace(/\(\$([^:]+):([^)]+)\)/g,(b,E,w)=>w.split("|").filter(f=>f.trim())[0]||""),d=d.replace(/\(\$([^:?]+)\?:([^)]*)\)/g,(b,E,w)=>w||""),d=d.replace(/z-slot="[^"]*"/g,""),d=d.replace(/z-for="[^"]*"/g,""),d=d.replace(/z-for-wrapper="[^"]*"/g,""),d}catch(d){return _.error("プレビューレンダリングエラー:",d),c}}},O=()=>{o.on("addArrayItem",({componentId:c,arrayKey:d})=>{try{if(_.debug(`EventBus: addArrayItem - componentId=${c}, arrayKey=${d}`),!c||!d)throw new Error("componentId または arrayKey が指定されていません");const b=l(r.editablePageData.value,c);if(!b)throw new Error(`Component not found: ${c}`);_.success(`Component found: ${b.id}, adding array item to ${d}`);const E=r.localParts.value&&r.localParts.value.length>0?r.localParts.value:[];E.length>0?qr(E).addArrayItem(b,d):x.addArrayItem(b,d),t("update:page",r.editablePageData.value)}catch(b){_.error(`配列アイテム追加エラー: ${b}`,{componentId:c,arrayKey:d})}}),o.on("removeZForArrayItem",({componentId:c,arrayName:d,index:b})=>{try{_.debug(`EventBus: removeZForArrayItem - componentId=${c}, arrayName=${d}, index=${b}`);const E=(p,C,S=0)=>{const P="  ".repeat(S);for(const T of p){if(T.id===C)return console.log(`${P}✅ [発見!] ${T.id} (レベル${S})`),T;if(T.nested_parts&&T.nested_parts.length>0){const N=E(T.nested_parts,C,S+1);if(N)return N}for(const N of Object.keys(T))if(Array.isArray(T[N]))for(let F=0;F<T[N].length;F++){const Z=T[N][F];if(Z&&typeof Z=="object"&&Z.nested_parts){const H=E(Z.nested_parts,C,S+2);if(H)return console.log(`${P}🎯 [配列内発見!] ${H.id}`),H}}}return null};let w=typeof b=="number"?b:-1;if(typeof b=="string"){_.debug("🔧 stableItemIdから実際のindexに変換:",b);const p=E(r.editablePageData.value,c);if(p&&p[d]){const C=p[d];if(Array.isArray(C)){const S=C.findIndex(P=>P.id&&P.id===b||P.stableItemId&&P.stableItemId===b);if(S!==-1)w=S,_.debug("✅ stableItemId変換成功:",{stableItemId:b,actualIndex:w});else{_.error("❌ Invalid stableItemId:",{stableItemId:b,arrayName:d,arrayLength:C.length,componentId:c});return}}else{_.error("❌ Target array is not an array:",{componentId:c,arrayName:d});return}}else{_.error("❌ Target component or array not found:",{componentId:c,arrayName:d});return}}_.debug("🔥 DELETE - componentId:",c);const u=c.split("_");_.debug("🔥 DELETE - componentId parts:",u);let f;const g=l(r.editablePageData.value,c),y=g&&g.id===c;if(u.length>=3&&/^\d+$/.test(u[u.length-1])&&!y){const p=u.slice(0,-2).join("_"),C=u[u.length-2],S=u[u.length-1];_.debug("🔥 DELETE - ネスト形式検出:",{baseParentId:p,parentArrayName:C,parentIndex:S}),_.debug("ネストz-forアイテム削除:",{baseParentId:p,parentArrayName:C,parentIndex:S});let P=p,T=C;if(!h(r.editablePageData.value,p)){const Z=[];for(let H=0;H<p.length;H++)p[H]==="_"&&Z.push(H);if(Z.length>=1){const H=Z[Z.length-1];P=p.substring(0,H),T=`${p.substring(H+1)}_${C}`,_.debug("🔥 DELETE - ネストz-for IDを修正:",{originalBaseParentId:p,realComponentId:P,realArrayPath:T,parentIndex:S})}}const F=h(r.editablePageData.value,P);if(F&&Array.isArray(F[T])){const Z=F[T][parseInt(S)];_.debug("🔥 DELETE - Parent item:",Z),_.debug("🔥 DELETE - Parent item target array name:",d),_.debug("🔥 DELETE - Parent item target array:",Z?Z[d]:void 0),Z&&Array.isArray(Z[d])&&(f=Z[d])}}else{_.debug("🔥 DELETE - 通常形式検出:",c);const p=g||l(r.editablePageData.value,c);p&&Array.isArray(p[d])&&(f=p[d])}if(!f||w<0||w>=f.length)throw new Error(`Invalid target array or index: ${d}[${w}]`);f.splice(w,1),_.success(`z-for配列アイテム削除完了: ${d}[${w}]`),t("update:page",r.editablePageData.value)}catch(E){_.error(`z-for配列アイテム削除エラー: ${E}`,{componentId:c,arrayName:d,index:b})}}),o.on("editZForArrayItem",({componentId:c,arrayName:d,index:b})=>{try{_.debug(`EventBus: editZForArrayItem - componentId=${c}, arrayName=${d}, index=${b}`);let E=typeof b=="number"?b:-1;if(typeof b=="string"){_.debug("🔧 stableItemIdから実際のindexに変換:",b);const P=(N,F,Z=0)=>{const H="  ".repeat(Z);for(const W of N){if(W.id===F)return console.log(`${H}✅ [発見!] ${W.id} (レベル${Z})`),W;if(W.nested_parts&&W.nested_parts.length>0){const G=P(W.nested_parts,F,Z+1);if(G)return G}for(const G of Object.keys(W))if(Array.isArray(W[G]))for(let re=0;re<W[G].length;re++){const _e=W[G][re];if(_e&&typeof _e=="object"&&_e.nested_parts){const Oe=P(_e.nested_parts,F,Z+2);if(Oe)return console.log(`${H}🎯 [配列内発見!] ${Oe.id}`),Oe}}}return null},T=P(r.editablePageData.value,c);if(T&&T[d]){const N=T[d];if(Array.isArray(N)){const F=N.findIndex(Z=>Z.id&&Z.id===b||Z.stableItemId&&Z.stableItemId===b);if(F!==-1)E=F,_.debug("✅ stableItemId変換成功:",{stableItemId:b,actualIndex:E});else{_.error("❌ Invalid stableItemId:",{stableItemId:b,arrayName:d,arrayLength:N.length,componentId:c});return}}else{_.error("❌ Target array is not an array:",{componentId:c,arrayName:d});return}}else{_.error("❌ Target component or array not found:",{componentId:c,arrayName:d});return}}const w=(P,T,N=0)=>{const F="  ".repeat(N);for(const Z of P){if(Z.id===T)return console.log(`${F}✅ [発見!] ${Z.id} (レベル${N})`),Z;if(Z.nested_parts&&Z.nested_parts.length>0){const H=w(Z.nested_parts,T,N+1);if(H)return H}for(const H of Object.keys(Z))if(Array.isArray(Z[H]))for(let W=0;W<Z[H].length;W++){const G=Z[H][W];if(G&&typeof G=="object"&&G.nested_parts){const re=w(G.nested_parts,T,N+2);if(re)return console.log(`${F}🎯 [配列内発見!] ${re.id}`),re}}}return null},u=w(r.editablePageData.value,c),f=d,g=E;if(!u){const P=c.split("_");_.debug("🔥 EDIT - componentId parts:",P);const T=l(r.editablePageData.value,c),N=T&&T.id===c;if(P.length>=3&&/^\d+$/.test(P[P.length-1])&&!N){const F=P.slice(0,-2).join("_"),Z=P[P.length-2],H=P[P.length-1];_.debug("🔥 EDIT - ネスト形式検出:",{baseParentId:F,parentArrayName:Z,parentIndex:H}),_.debug("ネストz-forアイテム編集:",{baseParentId:F,parentArrayName:Z,parentIndex:H});let W=F,G=Z;if(!h(r.editablePageData.value,F)){const Oe=[];for(let Se=0;Se<F.length;Se++)F[Se]==="_"&&Oe.push(Se);if(Oe.length>=1){const Se=Oe[Oe.length-1];W=F.substring(0,Se),G=`${F.substring(Se+1)}_${Z}`,_.debug("🔥 EDIT - ネストz-for IDを修正:",{originalBaseParentId:F,realComponentId:W,realArrayPath:G,parentIndex:H})}}const _e=h(r.editablePageData.value,W);if(_e){const Oe=_e[G];if(Array.isArray(Oe)&&Number(H)<Oe.length){const Se=Oe[Number(H)];if(Se[d]){const Ve=Se[d];if(Array.isArray(Ve)&&E<Ve.length){const xe=Ve[E];xe._isZForItem=!0,xe._arrayName=d,xe._arrayIndex=E,xe._parentType=_e.type,xe._parentModuleName=_e.module_name,xe._parentComponentId=F,xe._parentArrayName=Z,xe._parentIndex=Number(H);const Ze=xe.type,Je=xe.module_name;xe.type="z-for-item",xe.module_name=_e.module_name,_.debug("子z-for配列アイテム編集:",{parentComponent:_e.id,parentArrayName:Z,parentIndex:Number(H),childArrayName:d,childIndex:b,childItem:xe}),r.openEditor(xe,`${c}_${d}_${b}`),v(xe,`${c}_${d}_${b}`);return}}}}}}if(!u)throw new Error(`Component not found: ${c}`);const y=u,p=y[d];if(!Array.isArray(p)||E<0||E>=p.length)throw new Error(`Invalid array or index: ${d}[${E}]`);const C=p[E];_.debug("🔍 z-for配列アイテム詳細:",{componentId:c,arrayName:d,index:b,originalItem:C,itemKeys:Object.keys(C),itemType:C.type,itemModuleName:C.module_name,itemId:C.id,parentType:y.type,parentModuleName:y.module_name});const S=JSON.parse(JSON.stringify(C));S.id||(S.id=`${c}_${d}_${b}`),S.type||(S.type=y.type),S.module_name||(S.module_name=y.module_name),S._isZForItem=!0,S._parentComponentId=c,S._arrayName=d,S._arrayIndex=E,S._zForTemplate=null,_.debug("🔍 z-forアイテム編集準備:",{itemId:S.id,itemType:S.type,itemModuleName:S.module_name,allKeys:Object.keys(S),originalKeys:Object.keys(C),internalMetadata:{_isZForItem:S._isZForItem,_parentComponentId:S._parentComponentId,_arrayName:S._arrayName,_arrayIndex:S._arrayIndex}}),_.debug("z-for配列アイテム編集: コンポーネント検索結果",{componentId:c,componentFound:!!y,componentType:y.type,componentModuleName:y.module_name,arrayName:d,arrayLength:p.length,index:b,actualIndex:E,editableItemKeys:Object.keys(S),originalItemKeys:Object.keys(C),editableItemId:S.id,originalItemId:C.id,editableItemCardTitle:S.card_title,originalItemCardTitle:C.card_title,targetArraySnapshot:p.map(P=>({id:P.id,stableItemId:P.stableItemId,card_title:P.card_title}))}),r.openEditor(S,`${c}_${d}_${b}`),_.success(`z-for配列アイテム編集開始: ${d}[${b}]`)}catch(E){_.error(`z-for配列アイテム編集エラー: ${E}`,{componentId:c,arrayName:d,index:b})}}),o.on("deleteNestedPart",({pathString:c})=>{_.debug(`EventBus: deleteNestedPart - path=${c}`),x.deleteNestedPart(c)}),o.on("openNestedEditor",({pathString:c})=>{if(_.debug(`EventBus: openNestedEditor - path=${c}`),!c||typeof c!="string"){_.error("Invalid pathString:",c);return}const d=/^(.+)\.(.+)\[(\d+)\]\.(.+)\[(\d+)\]$/,b=c.match(d);let E=null;if(b){const[,w,u,f,g,y]=b;_.debug("z-for内パス解析:",{parentId:w,arrayName:u,arrayIndex:f,slotName:g,partIndex:y});const p=h(r.editablePageData.value,w);if(p&&p[u]&&Array.isArray(p[u])){const C=p[u][parseInt(f)];C&&C[g]&&Array.isArray(C[g])&&(E=C[g][parseInt(y)],_.debug("z-for内ネストパーツを発見:",E))}}else E=h(r.editablePageData.value,c);E?(_.debug("Found component:",{id:E.id,type:E.type,module:E.module_name}),r.openEditor(E,c)):_.error(`Component not found with ID: ${c}`)}),o.on("openNestedPartSelector",({pathString:c,position:d})=>{_.debug(`EventBus: openNestedPartSelector - path=${c}, position=${d}`),r.openNestedPartSelector(c,d)})},D=c=>{["startTiptapEdit","stopTiptapEdit","openPartSelector","openNestedPartSelector","openNestedEditor","deleteNestedPart","addArrayItem","addZForArrayItem","removeZForArrayItem","reorderZForArrayItem","editZForArrayItem","handleZForDragStart","handleZForDragEnd","handleZForArrayItemDragOver","handleZForArrayItemDrop"].forEach(f=>{delete window[f]});const b=`inst_${Math.random().toString(36).substr(2,9)}`,E={addArrayItem:(f,g)=>{o.emit("addArrayItem",{componentId:f,arrayKey:g})},addZForArrayItem:(f,g,y)=>{o.emit("addZForArrayItem",{componentId:f,arrayName:g,insertIndex:y})},removeZForArrayItem:(f,g,y)=>{o.emit("removeZForArrayItem",{componentId:f,arrayName:g,index:y})},reorderZForArrayItem:(f,g,y,p)=>{o.emit("reorderZForArrayItem",{componentId:f,arrayName:g,fromIndex:y,toIndex:p})},editZForArrayItem:(f,g,y)=>{o.emit("editZForArrayItem",{componentId:f,arrayName:g,index:y})},deleteNestedPart:f=>{o.emit("deleteNestedPart",{pathString:f})},openNestedEditor:f=>{o.emit("openNestedEditor",{pathString:f})},openNestedPartSelector:(f,g)=>{o.emit("openNestedPartSelector",{pathString:f,position:g})}};window[`startTiptapEdit_${b}`]=c||x.startSimpleTiptapEdit,window[`stopTiptapEdit_${b}`]=x.stopTiptapEdit,window[`openPartSelector_${b}`]=f=>r.openPartSelector(f),window[`openNestedPartSelector_${b}`]=E.openNestedPartSelector,window[`openNestedEditor_${b}`]=E.openNestedEditor,window[`deleteNestedPart_${b}`]=E.deleteNestedPart,window[`addArrayItem_${b}`]=E.addArrayItem,window.startTiptapEdit=c||x.startSimpleTiptapEdit,window.stopTiptapEdit=x.stopTiptapEdit,window.openPartSelector=f=>r.openPartSelector(f),window.openNestedPartSelector=E.openNestedPartSelector,window.openNestedEditor=E.openNestedEditor,window.deleteNestedPart=E.deleteNestedPart,window.addArrayItem=E.addArrayItem,window.addZForArrayItem=E.addZForArrayItem,window.removeZForArrayItem=E.removeZForArrayItem,window.reorderZForArrayItem=E.reorderZForArrayItem,window.editZForArrayItem=E.editZForArrayItem;let w=null,u=null;window.handleZForDragStart=(f,g,y,p)=>{const C=f.target;if(_.debug("🔥 z-for drag start called",{target:C,componentId:g,arrayName:y,index:p}),C.tagName==="BUTTON"||C.tagName==="A"||C.closest("button, a")){_.debug("🔥 z-for: クリック可能要素からのドラッグをブロック"),f.preventDefault();return}f.stopPropagation(),w={componentId:g,arrayName:y,index:p},_.debug("🔥 z-for dragged item set:",w);const S=C.closest(".zero-code-z-for-item-wrapper");S?(_.debug("🔥 z-for item wrapper found:",S),S.style.opacity="0.5",S.style.transform="scale(0.95)",S.classList.add("dragging")):(_.debug("🔥 z-for item wrapper not found, using target"),C.style.opacity="0.5"),f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/html",C.outerHTML),_.debug("z-for drag start",{componentId:g,arrayName:y,index:p})},window.handleZForDragEnd=f=>{const g=f.target,y=g.closest(".zero-code-z-for-item-wrapper");y?(y.style.opacity="1",y.style.transform="scale(1)",y.classList.remove("dragging")):g.style.opacity="1",document.querySelectorAll(".z-for-item-wrapper.drag-over").forEach(p=>{p.classList.remove("drag-over")}),setTimeout(()=>{w=null,_.debug("z-for drag end - draggedItem reset")},50),_.debug("z-for drag end")},window.handleZForArrayItemDragOver=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move";const y=f.currentTarget.closest(".zero-code-z-for-item-wrapper");y&&!y.classList.contains("dragging")&&(document.querySelectorAll(".z-for-item-wrapper.drag-over").forEach(p=>{p.classList.remove("drag-over")}),y.classList.add("drag-over"))},window.handleZForArrayItemDrop=f=>{f.preventDefault(),f.stopPropagation();const g=f.currentTarget;_.debug("🔥 handleZForArrayItemDrop called",{target:g,draggedItem:w});const y=g.closest(".zero-code-z-for-item-wrapper");if(y&&y.classList.remove("drag-over"),!w){_.error("🔥 No dragged item found in drop handler"),_.warn("No dragged item found");return}_.debug("🔥 Dragged item found:",w);const p=y?.getAttribute("data-component-id")||g.getAttribute("data-component-id"),C=y?.getAttribute("data-array-name")||g.getAttribute("data-array-name"),S=y?.getAttribute("data-item-index")||g.getAttribute("data-item-index"),P=parseInt(S||"0");w.componentId===p&&w.arrayName===C&&w.index!==P&&(_.debug("🔥 z-for reorder executing:",{componentId:w.componentId,arrayName:w.arrayName,fromIndex:w.index,toIndex:P}),wy.reorderZForArrayItem(w.componentId,w.arrayName,w.index,P),_.debug("🔥 z-for reorder completed"),_.success("z-for array item reordered",{from:w.index,to:P})),w=null},window.handleNestedPartDragStart=f=>{_.debug("🔥 handleNestedPartDragStart called",f.target);const g=f.target;if(g.tagName==="BUTTON"||g.tagName==="A"||g.closest("button, a")){_.debug("🔥 クリック可能要素からのドラッグをブロック"),f.preventDefault();return}const y=g.closest(".z-for-nested-part");if(y){const p=y.getAttribute("data-nested-path"),C=y.getAttribute("data-slot-name"),S=y.getAttribute("data-part-index");_.debug("🔥 z-forネストパーツドラッグ情報:",{nestedPath:p,slotName:C,partIndex:S}),p&&C&&S!==null&&(u={path:p,slotName:C,index:parseInt(S)},y.classList.add("dragging"),y.style.opacity="0.5",_.debug("🔥 draggingクラス追加:",y),f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/html",y.outerHTML),_.debug("🔥 z-for nested part drag start",u),_.debug("z-for nested part drag start",u))}else _.debug("🔥 z-for内ネストパーツではない:",g.classList.toString())},window.handleNestedPartDragEnd=f=>{const y=f.target.closest(".z-for-nested-part");y&&(y.classList.remove("dragging"),y.style.opacity="1"),document.querySelectorAll(".z-for-nested-part.drag-over").forEach(p=>{p.classList.remove("drag-over")}),u=null,_.debug("z-for nested part drag end")},window.handleNestedPartDragOver=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move";const y=f.currentTarget.closest(".z-for-nested-part");y&&!y.classList.contains("dragging")&&(document.querySelectorAll(".z-for-nested-part.drag-over").forEach(p=>{p.classList.remove("drag-over")}),y.classList.add("drag-over"))},window.handleNestedPartDrop=f=>{_.debug("🔥 handleNestedPartDrop called",f.currentTarget),f.preventDefault();const g=f.currentTarget,y=g.closest(".z-for-nested-part")||g.closest(".nested-component");if(y&&y.classList.remove("drag-over"),!u){_.debug("🔥 No dragged nested part found"),_.warn("No dragged nested part found");return}const p=g.getAttribute("data-slot-name"),C=g.getAttribute("data-part-index");if(_.debug("🔥 ドロップ先情報:",{dropSlotName:p,dropPartIndex:C,draggedNestedPart:u}),p&&C!==null){const S=parseInt(C);if(p===u.slotName){const P=u.path.match(/^(.+\.\w+\[\d+\]\.\w+)\[\d+\]$/);if(_.debug("🔥 パス解析:",{path:u.path,pathMatch:P}),P){const T=P[1];_.debug("🔥 並べ替え実行:",{parentPath:T,fromIndex:u.index,toIndex:S}),_.debug("z-for nested part reorder",{parentPath:T,fromIndex:u.index,toIndex:S}),x.moveZForNestedPart(T,u.index,S)}}else _.debug("🔥 異なるスロット間の移動は未サポート:",{dropSlotName:p,draggedSlotName:u.slotName})}else _.debug("🔥 ドロップ先の情報が不完全:",{dropSlotName:p,dropPartIndex:C});u=null},_.debug("グローバル関数を安全に公開完了")},I=()=>{_.debug("useZeroCode クリーンアップ実行")};return{state:{editablePageData:r.editablePageData,localParts:r.localParts,localCommonParts:r.localCommonParts,localIndividualParts:r.localIndividualParts,activeTab:r.activeTab,dataTab:r.dataTab,showEditor:r.showEditor,showPartSelector:r.showPartSelector,showNestedPartSelector:r.showNestedPartSelector,selectedComponent:r.selectedComponent,selectedComponentIndex:r.selectedComponentIndex,editingText:r.editingText,insertPosition:r.insertPosition,nestedInsertPath:r.nestedInsertPath,nestedInsertPosition:r.nestedInsertPosition},computed:{currentComponentIndex:r.currentComponentIndex,pageDataLength:r.pageDataLength,hasSelectedComponent:r.hasSelectedComponent,isEditing:r.isEditing,isTiptapEditing:r.isTiptapEditing,...k},actions:x,utils:n,templateProcessor:s,simpleEditor:a,switchToTab:r.switchToTab,setDataTab:r.setDataTab,openEditor:r.openEditor,closeEditor:r.closeEditor,openPartSelector:r.openPartSelector,closePartSelector:r.closePartSelector,openNestedPartSelector:r.openNestedPartSelector,closeNestedPartSelector:r.closeNestedPartSelector,setupEventListeners:O,exposeGlobalFunctions:D,cleanup:I}}const hc={parts:{common:[{type:"title",description:"タイトル系のコンポーネント",module:[{title:"title_1_1",category:"common",description:"メインタイトル（z-for、z-slot対応版）",tags:["title","z-for","z-slot","nested"],body:`
<div class="m_titleA ($state:s_state1|s_state2) ($variant:s_state3|s_state4|)">
  <h1 class="m_titleA__title">{$title:メインタイトルテキスト}</h1>
  <div class="m_titleA__label ($label_state?:s_state5|s_state6|s_state7)">{$label:ラベルテキスト}</div>
  <div z-slot="nested_parts" class="m_titleA__contents"></div>
  <div><img src="($image_url:/img/hero_image.jpg)" alt="($image_alt:画像の説明テキスト)"></div>
  <div class="m_titleA__card" z-for-wrapper="cards">
    <div z-for="cards" class="m_titleA__cardList ($card_state:s_state1|s_state2)">
      <div>{$card_title:カードアイテム1}</div>
      <div>{$card_desc:カードアイテム2}</div>
      <div z-slot="nested_parts"></div>
    </div>
  </div>
  <div class="m_titleA__category ($category:news,blog,event,product,service)">
    <span>カテゴリ選択</span>
  </div>
  <div class="m_titleA__tags ($tags?:important,featured,popular,trending,new)">
    <span>タグ選択（複数）</span>
  </div>
</div>`},{title:"title_1_2",category:"common",description:"シンプルタイトル",tags:["title","simple"],body:`
<div class="m_titleB">
  <h2 class="m_titleB__title">{$title:サブタイトルテキスト}</h2>
  <p class="m_titleB__subtitle">{$subtitle:サブタイトル説明文}</p>
</div>`}]},{type:"hero",description:"ヒーロー系のコンポーネント",module:[{title:"hero_1_1",category:"common",description:"メインヒーロー（配列カード対応）",tags:["hero","z-for","cards"],body:`
<div class="m_heroA ($layout:full|contained) ($theme:light|dark)">
  <div class="m_heroA__background">
    <img src="($bg_image:/img/hero_image.jpg)" alt="($bg_alt:ヒーロー背景画像)">
  </div>
  <div class="m_heroA__content">
    <h1 class="m_heroA__title">{$title:ヒーローメインタイトル}</h1>
    <p class="m_heroA__description">{$description:ヒーロー説明文がここに入ります}</p>
    <div class="m_heroA__actions">
      <a href="($cta_url:#)" class="m_heroA__cta ($cta_style:primary|secondary)">{$cta_text:今すぐ始める}</a>
    </div>
  </div>
  <div class="m_heroA__features" z-for-wrapper="features">
    <div z-for="features" class="m_heroA__feature">
      <div class="m_heroA__feature-icon">
        <img src="($icon_url:/img/placeholder.jpg)" alt="($icon_alt:アイコン)">
      </div>
      <h3>{$feature_title:機能タイトル}</h3>
      <p>{$feature_description:機能の説明文}</p>
    </div>
  </div>
</div>`}]},{type:"content",description:"コンテンツ系のコンポーネント",module:[{title:"content_1_1",category:"common",description:"基本コンテンツブロック",tags:["content","text","simple"],body:`
<div class="m_contentA ($alignment:left|center|right) ($size:small|medium|large)">
  <div class="m_contentA__header">
    <h2 class="m_contentA__title">{$title:コンテンツタイトル}</h2>
    <p class="m_contentA__subtitle">{$subtitle:サブタイトル}</p>
  </div>
  <div class="m_contentA__body">
    <p class="m_contentA__text">{$content:ここにメインコンテンツが入ります。リッチテキスト編集に対応しています。}</p>
    <div class="m_contentA__image ($image_position:top|bottom|left|right)">
      <img src="($image_url:/img/placeholder.jpg)" alt="($image_alt:コンテンツ画像)">
    </div>
  </div>
  <div z-slot="nested_parts" class="m_contentA__nested"></div>
</div>`}]}],individual:[{type:"button",description:"ボタン系のコンポーネント",module:[{title:"button_1_1",category:"individual",description:"基本ボタン",tags:["button","cta","action"],body:`
<div class="m_buttonA">
  <a href="($url:#)" class="m_buttonA__link ($style:primary|secondary|outline) ($size:small|medium|large)">
    {$text:ボタンテキスト}
  </a>
</div>`},{title:"button_1_2",category:"individual",description:"アイコン付きボタン",tags:["button","icon","cta"],body:`
<div class="m_buttonB">
  <button class="m_buttonB__button ($variant:filled|outline|text) ($color:primary|secondary|success|warning|error)">
    <span class="m_buttonB__icon ($icon_position:left|right)">
      <img src="($icon_url:/img/placeholder.jpg)" alt="($icon_alt:アイコン)">
    </span>
    <span class="m_buttonB__text">{$text:アイコンボタン}</span>
  </button>
</div>`}]},{type:"card",description:"カード系のコンポーネント",module:[{title:"card_1_1",category:"individual",description:"基本カード（配列対応）",tags:["card","z-for","list"],body:`
<div class="m_cardA ($layout:grid|list) ($columns:1|2|3|4)">
  <div class="m_cardA__container" z-for-wrapper="items">
    <div z-for="items" class="m_cardA__item ($card_style:flat|elevated|outline)">
      <div class="m_cardA__image">
        <img src="($image_url:/img/placeholder.jpg)" alt="($image_alt:カード画像)">
      </div>
      <div class="m_cardA__content">
        <h3 class="m_cardA__title">{$title:カードタイトル}</h3>
        <p class="m_cardA__description">{$description:カードの説明文がここに入ります}</p>
        <div class="m_cardA__meta">
          <span class="m_cardA__category ($category:news|blog|product)">{$category_label:カテゴリ}</span>
          <time class="m_cardA__date">{$date:2024-01-01}</time>
        </div>
      </div>
      <div class="m_cardA__actions">
        <a href="($link_url:#)" class="m_cardA__link">{$link_text:詳細を見る}</a>
      </div>
    </div>
  </div>
</div>`}]},{type:"form",description:"フォーム系のコンポーネント",module:[{title:"form_1_1",category:"individual",description:"基本フォーム",tags:["form","contact","input"],body:`
<div class="m_formA ($layout:vertical|horizontal) ($style:modern|classic)">
  <form class="m_formA__form">
    <div class="m_formA__header">
      <h2 class="m_formA__title">{$title:お問い合わせフォーム}</h2>
      <p class="m_formA__description">{$description:ご質問やお問い合わせがございましたら、以下のフォームよりお送りください。}</p>
    </div>
    <div class="m_formA__fields" z-for-wrapper="fields">
      <div z-for="fields" class="m_formA__field ($field_type:text|email|tel|textarea|select)">
        <label class="m_formA__label">{$label:フィールドラベル}</label>
        <input type="($input_type:text|email|tel)" class="m_formA__input ($required?:required)" placeholder="($placeholder:入力してください)">
        <span class="m_formA__help">{$help_text:補助テキスト}</span>
      </div>
    </div>
    <div class="m_formA__actions">
      <button type="submit" class="m_formA__submit ($submit_style:primary|secondary)">{$submit_text:送信する}</button>
    </div>
  </form>
</div>`}]}]},pages:[{id:"default-page",title:"デフォルトページ",description:"Vue CMS エディターのサンプルページ",components:[{id:"hero-1",type:"hero",module_name:"hero_1_1",title:"Vue CMS エディターへようこそ",description:"直感的で強力なコンテンツ管理システムです。ドラッグ&ドロップでページを作成し、リアルタイムでプレビューできます。",bg_image:"/img/hero_image.jpg",bg_alt:"Vue CMS ヒーロー画像",layout:"full",theme:"light",cta_text:"今すぐ始める",cta_url:"#get-started",cta_style:"primary",features:[{id:"feature-1",feature_title:"簡単操作",feature_description:"ドラッグ&ドロップで直感的にページを作成",icon_url:"/img/placeholder.jpg",icon_alt:"簡単操作アイコン"},{id:"feature-2",feature_title:"リアルタイムプレビュー",feature_description:"編集内容をリアルタイムで確認できます",icon_url:"/img/placeholder.jpg",icon_alt:"プレビューアイコン"},{id:"feature-3",feature_title:"Web Components",feature_description:"どこでも使える再利用可能なコンポーネント",icon_url:"/img/placeholder.jpg",icon_alt:"コンポーネントアイコン"}]},{id:"title-1",type:"title",module_name:"title_1_1",title:"主な機能",label:"Features",state:"s_state1",variant:"s_state3",label_state:["s_state5","s_state6"],image_url:"/img/banner.jpg",image_alt:"機能紹介画像",category:"product",tags:["featured","popular"],cards:[{id:"card-1",card_title:"テンプレート記法",card_desc:"{$param:default} 形式でテキストを編集",card_state:"s_state1",nested_parts:[]},{id:"card-2",card_title:"選択記法",card_desc:"($param:option1|option2) 形式で選択肢を提供",card_state:"s_state2",nested_parts:[]},{id:"card-3",card_title:"配列記法",card_desc:"z-for で繰り返し要素を管理",card_state:"s_state1",nested_parts:[]}],nested_parts:[{id:"content-1",type:"content",module_name:"content_1_1",title:"ネストされたコンテンツ",subtitle:"z-slot 機能のデモンストレーション",content:"このコンテンツは title コンポーネントの中にネストされています。z-slot 記法を使用することで、柔軟な構造を作ることができます。",alignment:"center",size:"medium",image_url:"/img/team.jpg",image_alt:"チーム画像",image_position:"right"}]},{id:"card-section-1",type:"card",module_name:"card_1_1",layout:"grid",columns:"3",items:[{id:"item-1",title:"はじめての方へ",description:"Vue CMS エディターの基本的な使い方を学びましょう",image_url:"/img/product1.jpg",image_alt:"チュートリアル画像",category:"blog",category_label:"ブログ",date:"2024-01-15",link_text:"チュートリアルを見る",link_url:"/tutorial",card_style:"elevated"},{id:"item-2",title:"アドバンス機能",description:"上級者向けの機能と使用方法について詳しく解説",image_url:"/img/background.jpg",image_alt:"アドバンス機能画像",category:"product",category_label:"製品",date:"2024-01-20",link_text:"詳細を見る",link_url:"/advanced",card_style:"elevated"},{id:"item-3",title:"コミュニティ",description:"ユーザーコミュニティに参加して情報交換をしましょう",image_url:"/img/logo.png",image_alt:"コミュニティ画像",category:"news",category_label:"ニュース",date:"2024-01-25",link_text:"参加する",link_url:"/community",card_style:"elevated"}]}]}],images:{common:[{id:"hero-bg",name:"hero_image.jpg",url:"/img/hero_image.jpg",alt:"ヒーロー背景画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:256e3}},{id:"logo",name:"logo.png",url:"/img/logo.png",alt:"Vue CMS ロゴ",category:"common",fileData:{base64:"",type:"image/png",size:48e3}},{id:"banner",name:"banner.jpg",url:"/img/banner.jpg",alt:"バナー画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:128e3}},{id:"background",name:"background.jpg",url:"/img/background.jpg",alt:"背景画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:512e3}},{id:"team",name:"team.jpg",url:"/img/team.jpg",alt:"チーム画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:196e3}},{id:"placeholder",name:"placeholder.jpg",url:"/img/placeholder.jpg",alt:"プレースホルダー画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:32e3}}],individual:[{id:"product-1",name:"product1.jpg",url:"/img/product1.jpg",alt:"製品画像1",category:"individual",fileData:{base64:"",type:"image/jpeg",size:86e3}}]}},vc=[{type:"basic_list",description:"基本的なz-for内z-slotパターン",module:[{title:"item",category:"test",body:`
          <div class="category-item">
            <h3>{$title:アイテムタイトル}</h3>
            <p>{$description:アイテムの説明}</p>
            <div z-for="items" class="($item_class:item-wrapper|highlight-item|normal-item)">
              <div class="product-card">
                <h4>{$name:商品名}</h4>
                <p>{$price:価格}</p>
                <div class="slot-content" z-slot="details">
                  <!-- 商品詳細スロット -->
                </div>
              </div>
            </div>
          </div>
        `,description:"基本的なリストアイテムパーツ",tags:["z-for","z-slot","basic"]}]},{type:"nested_list",description:"ネストしたz-for内z-slotパターン",module:[{title:"category",category:"test",body:`
          <div class="nested-list">
            <h2>{$category_name:カテゴリー名}</h2>
            <div z-for="categories" class="category-wrapper">
              <h3>{$cat_title:サブカテゴリー}</h3>
              <div z-for="products" class="product-list">
                <div class="product-card">
                  <h4>{$product_name:商品名}</h4>
                  <span>{$product_price:価格}</span>
                  <div class="slot-content" z-slot="product_details">
                    <!-- 商品詳細スロット -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        `,description:"ネストしたカテゴリーパーツ",tags:["z-for","z-slot","nested"]}]},{type:"multi_slot",description:"複数スロットパターン",module:[{title:"container",category:"test",body:`
          <div class="multi-slot-container">
            <h2>{$container_title:コンテナタイトル}</h2>
            <div z-for="sections" class="section-item">
              <div class="section-header">
                <h3>{$section_title:セクションタイトル}</h3>
                <div z-slot="header_parts" class="header-slot">
                  <!-- ヘッダースロット -->
                </div>
              </div>
              <div class="section-content">
                <p>{$section_content:セクション内容}</p>
                <div z-slot="content_parts" class="content-slot">
                  <!-- コンテンツスロット -->
                </div>
              </div>
              <div class="section-footer">
                <div z-slot="footer_parts" class="footer-slot">
                  <!-- フッタースロット -->
                </div>
              </div>
            </div>
          </div>
        `,description:"複数スロットコンテナパーツ",tags:["z-for","z-slot","multiple"]}]},{type:"conditional",description:"条件付きz-slotパターン",module:[{title:"faq",category:"test",body:`
          <div class="faq-container">
            <h2>{$faq_title:FAQタイトル}</h2>
            <div z-for="questions" class="faq-item">
              <h3>{$question:質問}</h3>
              <p>{$answer:回答}</p>
              <div z-if="has_details" class="details-section">
                <div z-slot="additional_info" class="slot-content">
                  <!-- 追加情報スロット（条件付き） -->
                </div>
              </div>
            </div>
          </div>
        `,description:"条件付きFAQパーツ",tags:["z-for","z-slot","conditional","z-if"]}]},{type:"empty",description:"空スロットパターン",module:[{title:"list",category:"test",body:`
          <div class="empty-slot-container">
            <h2>{$list_title:リストタイトル}</h2>
            <div z-for="empty_items" class="empty-item">
              <h3>{$item_title:アイテム}</h3>
              <div z-slot="empty_slot" class="slot-content">
                <!-- 初期状態で空のスロット -->
              </div>
            </div>
          </div>
        `,description:"空スロットリストパーツ",tags:["z-for","z-slot","empty"]}]},{type:"dynamic",description:"動的スロット名パターン",module:[{title:"mixed",category:"test",body:`
          <div class="dynamic-slot-container">
            <h2>{$container_title:動的スロットコンテナ}</h2>
            <div z-for="mixed_items" class="mixed-item">
              <h3>{$item_name:アイテム名} - Type: {$item_type:タイプ}</h3>
              <div z-if="type_a" z-slot="slot_type_a" class="slot-content">
                <!-- タイプAスロット -->
              </div>
              <div z-if="type_b" z-slot="slot_type_b" class="slot-content">
                <!-- タイプBスロット -->
              </div>
              <div z-if="type_c" z-slot="slot_type_c" class="slot-content">
                <!-- タイプCスロット -->
              </div>
            </div>
          </div>
        `,description:"動的スロットパーツ",tags:["z-for","z-slot","dynamic","conditional"]}]},{type:"parts",description:"テスト用共通パーツ",module:[{title:"text",category:"common",body:'<p class="text-part">{$text:テキストパーツ}</p>',description:"テキストパーツ",tags:["common","text"]},{title:"button",category:"common",body:'<button class="btn-part ($btn_style:primary|secondary|danger)">{$btn_text:ボタン}</button>',description:"ボタンパーツ",tags:["common","button"]},{title:"image",category:"common",body:'<img src="{$img_src:https://via.placeholder.com/150}" alt="{$img_alt:画像}" class="img-part">',description:"画像パーツ",tags:["common","image"]},{title:"link",category:"common",body:'<a href="{$link_url:#}" class="link-part">{$link_text:リンク}</a>',description:"リンクパーツ",tags:["common","link"]},{title:"badge",category:"common",body:'<span class="badge ($badge_color:blue|green|red|yellow)">{$badge_text:バッジ}</span>',description:"バッジパーツ",tags:["common","badge"]},{title:"card",category:"common",body:`
          <div class="card-part">
            <h4>{$card_title:カードタイトル}</h4>
            <p>{$card_content:カード内容}</p>
          </div>
        `,description:"カードパーツ",tags:["common","card"]}]}],Cy=[{id:"zfor-zslot-tests",title:"z-for & z-slot テストページ",description:"z-for内でz-slotを使用する様々なパターンのテスト",components:[{id:"test_basic_zfor_zslot",type:"basic_list",module_name:"item",title:"基本リスト",description:"z-for内の各アイテムにz-slotがある基本パターン",item_class:"normal-item",items:[{id:"item_001",name:"アイテム1",price:"¥1,000",details:[{id:"detail_001",type:"parts",module_name:"text",text:"このアイテムの詳細説明です"},{id:"detail_002",type:"parts",module_name:"button",btn_text:"詳細を見る",btn_style:"primary"}]},{id:"item_002",name:"アイテム2",price:"¥2,000",details:[{id:"detail_003",type:"parts",module_name:"badge",badge_text:"新商品",badge_color:"green"}]},{id:"item_003",name:"アイテム3",price:"¥3,000",details:[]}]},{id:"test_nested_zfor_zslot",type:"nested_list",module_name:"category",category_name:"商品カタログ",categories:[{id:"cat_001",cat_title:"電化製品",products:[{id:"prod_001",product_name:"ノートPC",product_price:"¥98,000",product_details:[{id:"pd_001",type:"parts",module_name:"text",text:"高性能ノートパソコン"}]},{id:"prod_002",product_name:"タブレット",product_price:"¥45,000",product_details:[{id:"pd_002",type:"parts",module_name:"badge",badge_text:"セール中",badge_color:"red"}]}]},{id:"cat_002",cat_title:"家具",products:[{id:"prod_003",product_name:"デスク",product_price:"¥25,000",product_details:[]}]}]},{id:"test_multiple_zslot",type:"multi_slot",module_name:"container",container_title:"複数スロットテスト",sections:[{id:"sec_001",section_title:"セクション1",section_content:"これはセクション1の内容です",header_parts:[{id:"hp_001",type:"parts",module_name:"badge",badge_text:"ヘッダー",badge_color:"blue"}],content_parts:[{id:"cp_001",type:"parts",module_name:"text",text:"コンテンツエリアのテキスト"},{id:"cp_002",type:"parts",module_name:"button",btn_text:"アクション",btn_style:"secondary"}],footer_parts:[{id:"fp_001",type:"parts",module_name:"link",link_text:"フッターリンク",link_url:"#footer"}]},{id:"sec_002",section_title:"セクション2",section_content:"これはセクション2の内容です",header_parts:[],content_parts:[{id:"cp_003",type:"parts",module_name:"card",card_title:"カード",card_content:"カードコンテンツ"}],footer_parts:[]}]},{id:"test_conditional_zslot",type:"conditional",module_name:"faq",faq_title:"よくある質問",questions:[{id:"q_001",question:"配送料はいくらですか？",answer:"全国一律500円です。",has_details:!0,additional_info:[{id:"ai_001",type:"parts",module_name:"text",text:"10,000円以上のご購入で送料無料"},{id:"ai_002",type:"parts",module_name:"badge",badge_text:"期間限定",badge_color:"yellow"}]},{id:"q_002",question:"返品は可能ですか？",answer:"商品到着後7日以内であれば可能です。",has_details:!1,additional_info:[]},{id:"q_003",question:"支払い方法は？",answer:"クレジットカード、銀行振込、代金引換が利用可能です。",has_details:!0,additional_info:[{id:"ai_003",type:"parts",module_name:"link",link_text:"詳しい支払い方法",link_url:"#payment"}]}]},{id:"test_empty_zslot",type:"empty",module_name:"list",list_title:"空スロットテスト",empty_items:[{id:"empty_001",item_title:"空のアイテム1",empty_slot:[]},{id:"empty_002",item_title:"空のアイテム2",empty_slot:[]},{id:"empty_003",item_title:"空のアイテム3",empty_slot:[]}]},{id:"test_dynamic_zslot",type:"dynamic",module_name:"mixed",container_title:"動的スロットテスト",mixed_items:[{id:"mix_001",item_name:"タイプA アイテム",item_type:"A",type_a:!0,type_b:!1,type_c:!1,slot_type_a:[{id:"sta_001",type:"parts",module_name:"text",text:"タイプA専用コンテンツ"}],slot_type_b:[],slot_type_c:[]},{id:"mix_002",item_name:"タイプB アイテム",item_type:"B",type_a:!1,type_b:!0,type_c:!1,slot_type_a:[],slot_type_b:[{id:"stb_001",type:"parts",module_name:"button",btn_text:"タイプB ボタン",btn_style:"danger"}],slot_type_c:[]},{id:"mix_003",item_name:"タイプC アイテム",item_type:"C",type_a:!1,type_b:!1,type_c:!0,slot_type_a:[],slot_type_b:[],slot_type_c:[{id:"stc_001",type:"parts",module_name:"badge",badge_text:"タイプC",badge_color:"green"},{id:"stc_002",type:"parts",module_name:"link",link_text:"タイプCリンク",link_url:"#type-c"}]}]}]}],Ey={parts:{common:vc.filter(e=>e.type==="parts"||e.module.some(t=>t.category==="common")),individual:vc.filter(e=>e.type!=="parts"&&!e.module.some(t=>t.category==="common"))},pages:Cy,images:{common:[],individual:[]}},yc=we({environment:"development",enableMockData:!0,defaultDataSet:"samples"}),Do=we(hc),ha=we(!1),va=we(null);function Iy(){const e=h=>{yc.value.environment=h,_.info(`🌍 データ環境を ${h} に設定しました`)},t=async(h="samples")=>{ha.value=!0,va.value=null;try{if(h==="samples")Do.value=hc;else if(h==="tests"||h==="zfor-zslot")Do.value=Ey;else throw new Error(`未知のデータセット: ${h}`);return!0}catch(m){const v=m instanceof Error?m.message:"データ読み込みエラー";return va.value=v,_.error(`❌ データ読み込み失敗: ${v}`),!1}finally{ha.value=!1}},o=Ae(()=>Do.value.parts),r=Ae(()=>Do.value.pages),n=Ae(()=>Do.value.images),s=Ae(()=>[...Do.value.parts.common,...Do.value.parts.individual]),a=Ae(()=>Do.value.pages[0]?.components||[]),i=hn({isLoading:ha,loadError:va,config:hn(yc)});return{parts:o,pages:r,images:n,combinedParts:s,defaultPageData:a,state:i,setEnvironment:e,loadData:t,initialize:async()=>{await t("samples")}}}const Py={class:"zero-code-tab-navigation"},Sy=["onClick"],Ty=it({__name:"TabNavigation",props:{activeTab:{type:String}},emits:["update:active-tab"],setup(e){const t=["editor","preview","parts","images"],o=r=>({editor:"エディタ",preview:"ページプレビュー",parts:"パーツ管理",images:"画像管理"})[r];return(r,n)=>(j(),U("div",Py,[(j(),U(ze,null,Fe(t,s=>$("button",{key:s,class:ot(["zero-code-tab-button",{active:r.activeTab===s}]),onClick:a=>r.$emit("update:active-tab",s)},ae(o(s)),11,Sy)),64))]))}});function Dy(){const e=we([]),t=Ae(()=>e.value.length>0),o=(i,l=qe.UNKNOWN,h)=>{const m={id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:l,message:i instanceof Error?i.message:i,details:i instanceof Error?i.stack:void 0,timestamp:new Date,context:h};e.value.push(m),setTimeout(()=>{n(m.id)},1e4)},r=()=>{e.value=[]},n=i=>{const l=e.value.findIndex(h=>h.id===i);l!==-1&&e.value.splice(l,1)};return{errors:e,hasErrors:t,handleError:o,clearErrors:r,clearError:n,getErrorsByType:i=>e.value.filter(l=>l.type===i),showErrorNotification:(i,l=qe.UNKNOWN)=>{o(i,l)}}}const xy={class:"zero-code-error-boundary"},My={key:0,class:"zero-code-error-notifications"},Ny={class:"zero-code-error-content"},Fy={class:"zero-code-error-message"},Oy={class:"zero-code-error-icon"},ky={class:"zero-code-error-text"},Ly=["onClick"],Ry={key:0,class:"zero-code-error-details"},By={class:"zero-code-error-details-pre"},Hy={class:"zero-code-error-boundary-content"},jy=it({__name:"ErrorBoundary",props:{showDetails:{type:Boolean,default:!1}},setup(e){const{errors:t,hasErrors:o,clearError:r}=Dy(),n=a=>{switch(a){case qe.NETWORK_ERROR:return"error-network";case qe.VALIDATION_ERROR:return"error-validation";case qe.PERMISSION_ERROR:return"error-permission";case qe.COMPONENT_ERROR:return"error-component";case qe.IMAGE_LOAD_FAILED:return"error-image";case qe.TEMPLATE_PARSE_ERROR:return"error-template";default:return"error-unknown"}},s=a=>{switch(a){case qe.NETWORK_ERROR:return"🌐";case qe.VALIDATION_ERROR:return"⚠️";case qe.PERMISSION_ERROR:return"🔒";case qe.COMPONENT_ERROR:return"🧩";case qe.IMAGE_LOAD_FAILED:return"🖼️";case qe.TEMPLATE_PARSE_ERROR:return"📄";default:return"❌"}};return(a,i)=>(j(),U("div",xy,[pe(o)?(j(),U("div",My,[(j(!0),U(ze,null,Fe(pe(t),l=>(j(),U("div",{key:l.id,class:ot(["zero-code-error-notification",n(l.type)])},[$("div",Ny,[$("div",Fy,[$("span",Oy,ae(s(l.type)),1),$("span",ky,ae(l.message),1)]),$("button",{class:"zero-code-error-close",title:"エラーを閉じる",onClick:h=>pe(r)(l.id)}," × ",8,Ly)]),l.details&&a.showDetails?(j(),U("div",Ry,[$("pre",By,ae(l.details),1)])):ve("",!0)],2))),128))])):ve("",!0),$("div",Hy,[Md(a.$slots,"default")])]))}}),Uy={class:"zero-code-toolbar-content"},Vy={class:"zero-code-toolbar-section"},Zy={key:0,class:"zero-code-toolbar-separator"},Wy=["title","disabled","onClick"],Ky={class:"zero-code-toolbar-section"},qy=it({__name:"RichTextToolbar",props:{show:{type:Boolean},position:{type:Object},actions:{type:Array},editingState:{type:null},isEditing:{type:Boolean}},emits:["executeCommand","save","cancel"],setup(e,{emit:t}){const o=e;Ro(()=>{_.debug("🔧 RichTextToolbar mounted")}),at(()=>o.show,i=>{_.debug("🔧 RichTextToolbar show changed:",i)},{immediate:!0}),at(()=>o.position,i=>{_.debug("🔧 RichTextToolbar position changed:",i)},{deep:!0,immediate:!0}),at(()=>o.actions,i=>{_.debug("🔧 RichTextToolbar actions changed:",i?.length||0)},{immediate:!0});const r=t,n=i=>{_.debug("🔧 ツールバーコマンド実行:",i),r("executeCommand",i)},s=()=>{r("save")},a=()=>{r("cancel")};return(i,l)=>i.show?(j(),U("div",{key:0,class:"zero-code-rich-text-toolbar",style:cn({top:i.position.top+"px",left:i.position.left+"px"})},[$("div",Uy,[$("div",Vy,[(j(!0),U(ze,null,Fe(i.actions,(h,m)=>(j(),U(ze,{key:m},[h&&h.name==="separator"?(j(),U("div",Zy)):h?(j(),U("button",{key:1,class:ot(["zero-code-toolbar-btn",{active:h.active,disabled:!i.isEditing}]),title:h.title||"",disabled:!i.isEditing,tabindex:"-1",onClick:v=>n(h.command||""),onMousedown:l[0]||(l[0]=Mt(()=>{},["prevent","stop"]))},ae(h.icon||""),43,Wy)):ve("",!0)],64))),128))]),l[3]||(l[3]=$("div",{class:"zero-code-toolbar-separator"},null,-1)),$("div",Ky,[$("button",{class:"zero-code-toolbar-btn zero-code-save-btn",title:"保存 (Ctrl+S)",tabindex:"-1",onClick:s,onMousedown:l[1]||(l[1]=Mt(()=>{},["prevent","stop"]))}," ✓ ",32),$("button",{class:"zero-code-toolbar-btn zero-code-cancel-btn",title:"キャンセル (Esc)",tabindex:"-1",onClick:a,onMousedown:l[2]||(l[2]=Mt(()=>{},["prevent","stop"]))}," ✕ ",32)])])],4)):ve("",!0)}}),Gy={class:"zero-code-tab-navigation"},Jy={class:"zero-code-search-section"},Yy={class:"zero-code-modal-body"},Xy={key:0,class:"zero-code-empty-state"},Qy={key:1,class:"zero-code-image-grid"},eb=["title","onClick"],tb={class:"zero-code-image-preview"},ob=["src","alt","onError"],rb={key:0,class:"zero-code-img-updated-badge"},nb={key:1,class:"zero-code-selection-indicator"},sb={class:"zero-code-image-info"},ab={class:"zero-code-image-name"},ib={class:"zero-code-image-alt"},lb={key:0,class:"zero-code-image-preview-section"},cb={class:"zero-code-selected-preview"},db=["src","alt"],ub={class:"zero-code-selected-info"},fb={class:"zero-code-info-item"},pb={class:"zero-code-info-item"},gb={class:"zero-code-info-item"},mb={key:0,class:"zero-code-info-item"},hb={class:"zero-code-modal-footer"},vb={class:"zero-code-modal-footer-right"},yb=["disabled"],bb=it({__name:"ImageSelectorModal",props:{visible:{type:Boolean},commonImages:{default:()=>[],type:Array},individualImages:{default:()=>[],type:Array},currentValue:{type:String}},emits:["close","select","upload"],setup(e,{emit:t}){const o=e,r=t,{getImageSrc:n,getImageAlt:s,isImageUpdated:a}=Yr(),i=we("common"),l=we(""),h=we(null),m=we(null),v=Ae(()=>i.value==="common"?o.commonImages||[]:o.individualImages||[]),A=Ae(()=>{const b=l.value.toLowerCase();return b?v.value.filter(E=>E.name.toLowerCase().includes(b)||E.alt&&E.alt.toLowerCase().includes(b)||E.url.toLowerCase().includes(b)):v.value}),z=()=>{r("close")},x=b=>{h.value?.id===b.id?h.value=null:h.value=b},k=()=>{h.value=null},O=()=>{if(h.value){if(!!(h.value.fileData?.base64&&h.value.fileData.base64.trim()!=="")){const E=n(h.value),w=s(h.value);r("select",E,w)}else r("select",h.value.url,h.value.alt||"");z()}},D=(b,E)=>{const w=b.target;w.src="/img/placeholder.jpg",console.warn(`画像読み込みエラー: ${E.url}`)};at(()=>o.visible,b=>{if(b){if(o.currentValue){const w=[...o.commonImages||[],...o.individualImages||[]].find(u=>u.url===o.currentValue);w&&(h.value=w,i.value=w.category)}l.value=""}else h.value=null}),at(i,()=>{h.value=null});const I=()=>{m.value&&m.value.click()},c=async b=>{const E=b.target;if(!E.files||!E.files[0])return;const w=E.files[0];if(!confirm(`現在の画像を "${w.name}" に差し替えますか？`)){E.value="";return}try{const u=await d(w),f=u.split(",")[1],g=u,y=w.name.replace(/\.[^/.]+$/,"");r("upload",g,y),z()}catch(u){alert("画像のアップロードに失敗しました。"),console.error("ファイルアップロードエラー:",u)}finally{E.value=""}},d=b=>new Promise((E,w)=>{const u=new FileReader;u.readAsDataURL(b),u.onload=()=>E(u.result),u.onerror=f=>w(f)});return(b,E)=>b.visible?(j(),U("div",{key:0,class:"zero-code-modal-overlay",onClick:z},[$("div",{class:"zero-code-modal-content zero-code-image-selector-modal",onClick:E[3]||(E[3]=Mt(()=>{},["stop"]))},[$("div",{class:"zero-code-modal-header"},[E[4]||(E[4]=$("h3",{class:"zero-code-modal-title"},"画像を選択",-1)),$("button",{class:"zero-code-close-button",title:"閉じる",onClick:z}," ✕ ")]),$("div",Gy,[$("button",{class:ot(["zero-code-tab-button",{active:i.value==="common"}]),onClick:E[0]||(E[0]=w=>i.value="common")}," 共通画像 ("+ae((b.commonImages||[]).length)+") ",3),$("button",{class:ot(["zero-code-tab-button",{active:i.value==="individual"}]),onClick:E[1]||(E[1]=w=>i.value="individual")}," 個別画像 ("+ae((b.individualImages||[]).length)+") ",3)]),$("div",Jy,[wt($("input",{"onUpdate:modelValue":E[2]||(E[2]=w=>l.value=w),type:"text",placeholder:"画像を検索...",class:"zero-code-search-input"},null,512),[[jt,l.value]])]),$("div",Yy,[A.value.length===0?(j(),U("div",Xy,E[5]||(E[5]=[$("p",null,"該当する画像がありません",-1)]))):(j(),U("div",Qy,[(j(!0),U(ze,null,Fe(A.value,w=>(j(),U("div",{key:w.id,class:ot(["zero-code-image-item",{selected:h.value?.id===w.id}]),title:h.value?.id===w.id?"クリックで選択解除":"クリックで選択",onClick:u=>x(w)},[$("div",tb,[$("img",{src:pe(n)(w),alt:pe(s)(w),loading:"lazy",onError:u=>D(u,w)},null,40,ob),pe(a)(w)?(j(),U("div",rb," 差し替え済み ")):ve("",!0),h.value?.id===w.id?(j(),U("div",nb,E[6]||(E[6]=[$("span",{class:"zero-code-check-icon"},"✓",-1)]))):ve("",!0)]),$("div",sb,[$("div",ab,ae(w.name),1),$("div",ib,ae(w.alt),1)])],10,eb))),128))]))]),h.value?(j(),U("div",lb,[$("div",{class:"zero-code-preview-header"},[E[8]||(E[8]=$("h4",{class:"zero-code-preview-title"},"選択中の画像",-1)),$("button",{class:"zero-code-clear-selection-btn",title:"選択を解除",onClick:k},E[7]||(E[7]=[$("span",{class:"zero-code-clear-icon"},"✕",-1),sr(" 選択解除 ")]))]),$("div",cb,[$("img",{src:pe(n)(h.value),alt:pe(s)(h.value)},null,8,db),$("div",ub,[$("div",fb,[E[9]||(E[9]=$("label",{class:"zero-code-info-label"},"ファイル名",-1)),$("strong",null,ae(h.value.name),1)]),$("div",pb,[E[10]||(E[10]=$("label",{class:"zero-code-info-label"},"説明",-1)),$("p",null,ae(h.value.alt||"説明なし"),1)]),$("div",gb,[E[11]||(E[11]=$("label",{class:"zero-code-info-label"},"URL",-1)),$("code",null,ae(h.value.url),1)]),pe(a)(h.value)?(j(),U("div",mb,E[12]||(E[12]=[$("label",{class:"zero-code-info-label"},"状態",-1),$("span",{class:"zero-code-status-badge"},"差し替え済み",-1)]))):ve("",!0)])])])):ve("",!0),$("div",hb,[$("div",{class:"zero-code-modal-footer-left"},[$("button",{class:"zero-code-btn zero-code-btn-primary zero-code-upload-btn",onClick:I,title:"ファイルを選んで現在の画像を差し替え"}," 📁 現在の画像を差し替え ")]),$("div",vb,[$("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:z}," キャンセル "),$("button",{class:"zero-code-btn zero-code-btn-primary",disabled:!h.value,onClick:O},ae(h.value&&pe(a)(h.value)?"差し替え画像を適用":"選択した画像を適用"),9,yb)]),$("input",{ref_key:"fileInputRef",ref:m,type:"file",accept:"image/*",style:{display:"none"},onChange:c},null,544)])])])):ve("",!0)}}),_b={class:"zero-code-editor-content"},$b={class:"zero-code-button-section"},wb={key:0,class:"zero-code-data-display-area"},zb={class:"zero-code-data-display-header"},Ab={class:"zero-code-data-display-content"},Cb={class:"zero-code-data-display-pre"},ya=Gu(it({__name:"ZeroCode.ce",props:{parts:{default:()=>[],type:Array},commonParts:{default:()=>[],type:Array},individualParts:{default:()=>[],type:Array},page:{default:()=>[],type:Array},commonImages:{default:()=>[],type:Array},individualImages:{default:()=>[],type:Array}},emits:["update:parts","update:commonParts","update:individualParts","update:page","update:commonImages","update:individualImages"],setup(e,{expose:t,emit:o}){const r=e,n=o,s=we(`zero-code-${Math.random().toString(36).substr(2,9)}`),a=Iy(),{getImageSrc:i}=Yr(),l=Ae(()=>[...Ue.value,...Ye.value]),h=R=>{if(!R)return R;const B=l.value;if(B.length===0)return R;let J=R;return J=J.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(q,te,se,de)=>{const ge=B.find(ue=>!!(ue.id===se||ue.url===se||ue.name===se||se.endsWith("/"+ue.name)||ue.url.endsWith(se)||se.split("/").pop()===ue.name));if(ge){const ue=i(ge);return`<img${te}src="${ue}"${de}>`}return q}),J},m=R=>{const B=Ue.value.findIndex(q=>q.id===R);if(B!==-1){const q=[...Ue.value];q[B]={...q[B],fileData:{...q[B].fileData,base64:""}},kt(q);return}const J=Ye.value.findIndex(q=>q.id===R);if(J!==-1){const q=[...Ye.value];q[J]={...q[J],fileData:{...q[J].fileData,base64:""}},xo(q)}};Ro(async()=>{try{_.info("🏭 本番モード：外部データ待機中（内部サンプルデータは読み込みません）"),x.value=[],z.value=[],Ue.value=[],Ye.value=[],_.success("✅ 本番モード初期化完了（空の状態）"),Bt(()=>{const B=new CustomEvent("zero-code-initialized",{detail:{partsCount:x.value?.length||0,pageCount:z.value?.length||0}});document.dispatchEvent(B),_.debug("🎉 zero-code-initialized イベントを発火")})}catch(R){_.error("❌ データローダー初期化失敗:",R)}});const v=Ay(r,n),A=v.state.selectedComponent;v.state.selectedComponentIndex;const z=v.state.editablePageData,x=v.state.localParts,k=v.state.dataTab,O=we(!1),D=we({top:0,left:0}),I=we(null),c=we(""),d=we(""),b=we(""),E=Ae(()=>I.value!==null),w=we(!1),u=we(""),f=we(null),g=we(""),y=Oo({showToolbar:Ae(()=>O.value),position:Ae(()=>D.value),actions:[{name:"bold",icon:"B",title:"太字",command:"bold"},{name:"italic",icon:"I",title:"斜体",command:"italic"},{name:"underline",icon:"U",title:"下線",command:"underline"},{name:"separator"},{name:"link",icon:"🔗",title:"リンク",command:"link"}],editingState:{},executeCommand:R=>{_.debug("リッチテキストコマンド実行:",R),p(R)},stopEdit:R=>{_.debug("リッチテキスト編集終了:",R),S(R)}}),p=R=>{if(I.value){_.debug("🔧 書式設定コマンド実行:",R);try{if(R==="link"){const B=prompt("リンクのURLを入力してください:","https://");if(B&&B.trim()){const J=document.execCommand("createLink",!1,B);_.debug("🔧 リンク作成:",J?"成功":"失敗")}}else{const B=document.execCommand(R,!1,void 0);_.debug("🔧 書式設定:",R,B?"成功":"失敗")}_.debug("🔧 データ更新をスキップ（選択範囲保護）")}catch(B){_.error("🚨 execCommandエラー:",B)}}},C=()=>{if(!I.value||!d.value||!b.value)return;const R=I.value.innerHTML,B=bh(R),J=q=>{const se=(de=>{const ge=/^(.+)_([a-zA-Z_]+)_(\d+)_([a-zA-Z_]+)$/,ue=de.match(ge);if(ue){const[,fe,Me,He,Ge]=ue;return{parentId:fe,arrayName:Me,arrayIndex:parseInt(He),paramName:Ge}}const ie=de.split("_");if(ie.length>=5){const fe=ie[ie.length-1],Me=ie[ie.length-2];if(!/^\d+$/.test(Me))return null;const He=ie[ie.length-3];return{parentId:ie.slice(0,-3).join("_"),arrayName:He,arrayIndex:parseInt(Me),paramName:fe}}return null})(d.value);if(se){const{parentId:de,arrayName:ge,arrayIndex:ue,paramName:ie}=se,fe=(He,Ge)=>{for(const Tt of He){if(Tt.id===Ge&&Array.isArray(Tt[ge]))return Tt[ge][ue];if(Tt.nested_parts&&Array.isArray(Tt.nested_parts)){const co=fe(Tt.nested_parts,Ge);if(co)return co}for(const[co,Vt]of Object.entries(Tt))if(Array.isArray(Vt)&&co!=="nested_parts")for(let _o=0;_o<Vt.length;_o++){const Go=Vt[_o];if(Go&&typeof Go=="object"){if(`${Tt.id}_${co}_${_o}`===Ge&&Array.isArray(Go[ge]))return Go[ge][ue];for(const[Qr,ls]of Object.entries(Go))if(Array.isArray(ls)){const _c=fe(ls,Ge);if(_c)return _c}}}}return null},Me=fe(q,de);return Me&&typeof Me=="object"?(Me[ie]=B,!0):!1}for(const de of q){if(de.id===d.value)return de[b.value]=B,!0;if(de.nested_parts&&Array.isArray(de.nested_parts)&&(_.debug(`🔍 nested_parts内を検索: ${de.id}`),J(de.nested_parts)))return!0;for(const[ge,ue]of Object.entries(de))if(Array.isArray(ue)&&ge!=="nested_parts"){_.debug(`🔍 配列プロパティ検索: ${de.id}.${ge}`);for(const ie of ue)if(ie&&typeof ie=="object"){if(ie.id===d.value)return ie[b.value]=B,_.debug("🔧 配列内コンポーネント更新完了:",ie),!0;for(const[fe,Me]of Object.entries(ie))if(Array.isArray(Me)&&(_.debug(`🔍 スロット検索: ${de.id}.${ge}[].${fe}`),J(Me)))return!0}}}return _.debug(`❌ コンポーネントが見つかりませんでした: ${d.value}`),!1};J(z.value)&&(I.value&&R!==B&&(I.value.innerHTML=B),n("update:page",z.value))},S=R=>{I.value&&(_.debug("🔧 編集終了:",R?"保存":"キャンセル"),R?(C(),_.debug("🔧 最終保存完了")):(I.value.innerHTML=c.value,_.debug("🔧 変更を破棄しました")),I.value.contentEditable="false",I.value.classList.remove("editing"),I.value.style.userSelect="",I.value.style.webkitUserSelect="",_.debug("🔧 編集終了、スタイルクリーンアップ完了"),_.debug("🔧 編集モード終了処理完了"),I.value._cleanup&&(I.value._cleanup(),delete I.value._cleanup),I.value=null,c.value="",d.value="",b.value="",O.value=!1,_.debug("🔧 ツールバーを非表示にしました"))},P=R=>{v.actions.openEditor(R)},T=()=>{const R=A.value;R&&(_.debug("📝 エディター終了前の保存処理を実行"),v.actions.saveComponent(R)),v.closeEditor()},N=R=>{v.actions.deletePart(R)},F=R=>{v.actions.reorderParts(R)},Z=()=>{const R=document.querySelector(`.${s.value}`);if(!R)return;let B=null,J=null;const q=ge=>{const ue=ge,ie=ue.target;if(ie.classList.contains("draggable-nested")){if(I.value){_.debug("🔧 テキスト編集中のためネストパーツドラッグを無効化"),ue.preventDefault();return}if(ie.classList.contains("z-for-nested-part")){_.debug("🔧 z-for内ネストパーツ - z-for専用ハンドラーに委譲");return}B=ie;const fe=ie.dataset.componentId||"",Me=ie.dataset.path||"",He=ie.dataset.parentPath||"",Ge=parseInt(ie.dataset.index||"0");J={componentId:fe,path:Me,parentPath:He,index:Ge},ue.dataTransfer&&(ue.dataTransfer.effectAllowed="move",ue.dataTransfer.setData("text/plain","nested-component")),ie.style.opacity="0.5",_.debug("🔧 ネストパーツドラッグ開始:",J)}},te=ge=>{const ue=ge;ue.preventDefault(),ue.dataTransfer&&(ue.dataTransfer.dropEffect="move")},se=ge=>{const ue=ge;if(ue.preventDefault(),!B||!J)return;const fe=ue.target.closest(".draggable-nested");if(fe&&fe!==B){const Me=fe.dataset.parentPath||"",He=parseInt(fe.dataset.index||"0");_.debug("🔧 ネストパーツドロップ:",{draggedParentPath:J.parentPath,draggedIndex:J.index,targetParentPath:Me,targetIndex:He}),J.parentPath===Me?(_.debug("🔧 同じ親内での並べ替え実行"),v.actions.moveNestedPartById(J.parentPath,J.index,He)):_.debug("🔧 異なる親間の移動は未対応")}B&&(B.style.opacity="1"),B=null,J=null},de=ge=>{const ue=ge.target;ue.classList.contains("draggable-nested")&&(ue.style.opacity="1"),B=null,J=null};return R.addEventListener("dragstart",q),R.addEventListener("dragover",te),R.addEventListener("drop",se),R.addEventListener("dragend",de),_.debug("🔧 ネストパーツドラッグ&ドロップリスナー設定完了"),()=>{R.removeEventListener("dragstart",q),R.removeEventListener("dragover",te),R.removeEventListener("drop",se),R.removeEventListener("dragend",de),_.debug("🔧 ネストパーツドラッグ&ドロップリスナー削除完了")}},H=we(null),W=we(""),G=we(""),re=R=>{let B=null,J="";switch(R){case"page":B=z.value,J="Pageデータ";break;case"commonParts":B=v.state.localCommonParts.value,(!B||B.length===0)&&(B=x.value?.map(q=>({...q,module:q.module?.filter(te=>!te.category||te.category==="common")})).filter(q=>q.module&&q.module.length>0)||[]),(!B||B.length===0)&&(B=r.parts?.map(q=>({...q,module:q.module?.filter(te=>!te.category||te.category==="common")})).filter(q=>q.module&&q.module.length>0)||[]),J="共通Partsデータ",console.log("🔍 最終共通パーツデータ:",JSON.stringify(B,null,2));break;case"individualParts":B=v.state.localIndividualParts.value,(!B||B.length===0)&&(B=x.value?.map(q=>({...q,module:q.module?.filter(te=>te.category==="individual")})).filter(q=>q.module&&q.module.length>0)||[]),(!B||B.length===0)&&(B=r.parts?.map(q=>({...q,module:q.module?.filter(te=>te.category==="individual")})).filter(q=>q.module&&q.module.length>0)||[]),J="個別Partsデータ",console.log("🔍 最終個別パーツデータ:",JSON.stringify(B,null,2));break;case"commonImages":B=Ue.value,J="共通画像データ";break;case"individualImages":B=Ye.value,J="個別画像データ";break;default:return}H.value=B,W.value=J,G.value=R},_e=()=>{H.value=null,W.value="",G.value=""},Oe=Ae(()=>H.value?JSON.stringify(H.value,null,2):""),Se=async()=>{try{await navigator.clipboard.writeText(Oe.value),alert("データをクリップボードにコピーしました")}catch(R){console.error("クリップボードのコピーに失敗:",R),alert("クリップボードのコピーに失敗しました")}},Ve=()=>{if(G.value){switch(G.value){case"page":v.actions.sendPageData();break;case"commonParts":v.actions.sendCommonPartsData();break;case"individualParts":v.actions.sendIndividualPartsData();break;case"commonImages":Xr();break;case"individualImages":bt();break}alert(`${W.value}を送信しました`)}},xe=()=>{v.actions.resetPageData()},Ze=we(null),Je=Ae(()=>{const R=new Set;return x.value&&x.value.forEach(B=>{B.type&&R.add(B.type)}),Array.from(R)}),Xt=we(new Map),M=(R,B)=>{console.log(`🔥 [EDITOR] renderComponentWithNested呼び出し - componentId: ${R.id}, type: ${R.type}/${R.module_name}`),R.id.includes("div_nested_zfor");let J=B;J===void 0&&(J=z.value.findIndex(He=>He.id===R.id),J===-1&&(J=0));const q=z.value[J]||R;Object.keys(q).filter(He=>Array.isArray(q[He]));const te=(He,Ge="")=>{const Tt=[];for(const[co,Vt]of Object.entries(He))if(Array.isArray(Vt)){const _o=Ge?`${Ge}.${co}`:co,Go=`${_o}:${Vt.length}:${JSON.stringify(Vt.map((No,Qr)=>({i:Qr,id:No?.id||No?.name||`item_${Qr}`,...Object.fromEntries(Object.entries(No||{}).slice(0,3))})))}`;Tt.push(Go),Vt.forEach((No,Qr)=>{if(No&&typeof No=="object"){const ls=te(No,`${_o}[${Qr}]`);Tt.push(...ls)}})}return Tt},de=te(q).join("|"),ge=`${q.id}-${J}`;Xt.value.get(ge)!==de&&(Xt.value.set(ge,de),Object.keys(q).filter(Ge=>Array.isArray(q[Ge])).forEach(Ge=>{q[Ge].length>0}));const fe=v.templateProcessor.renderComponentWithNested(q,J,(He,Ge)=>v.utils.template.getTemplate(He,Ge,x.value),(He,Ge,Tt,co)=>v.templateProcessor.renderNestedComponentsWithUI(He,Ge,Vt=>Vt.join("-"),co||((Vt,_o)=>v.utils.template.getTemplate(Vt,_o,x.value))));return q.id,console.log(`🔥 [EDITOR] ${q.id} - 最終レンダリング結果:`,{resultLength:fe?.length||0,resultPreview:fe?.substring(0,300)+"...",hasInnerItems:fe?.includes("inner_items"),hasNestedContent:fe?.includes("ネスト1-1")}),h(fe)},L=R=>{n("update:parts",R)},V=R=>{Ze.value=R,ce.value=!0},Y=R=>{console.log("🔧 deletePartFromManager呼び出し:",R);const{type:B,title:J}=R;if(confirm(`パーツ「${J}」を削除しますか？`)){const q=se=>se.map(de=>de.type===B?{...de,module:de.module.filter(ge=>ge.title!==J)}:de).filter(de=>de.module.length>0),te=q(x.value);if(x.value=te,n("update:parts",te),v.state.localCommonParts.value.length>0){const se=q(v.state.localCommonParts.value);v.state.localCommonParts.value=se,n("update:commonParts",se)}if(v.state.localIndividualParts.value.length>0){const se=q(v.state.localIndividualParts.value);v.state.localIndividualParts.value=se,n("update:individualParts",se)}console.log("🔧 削除処理完了")}},K=R=>{const B=typeof R=="string"?R:R.body||"",J=v.computed.renderPartPreview(B);return h(J)},X=R=>{const{type:B,title:J,body:q,category:te="common"}=R,se=[...x.value];let de=se.find(ue=>ue.type===B);de||(de={type:B,module:[]},se.push(de));const ge={title:J,body:q,category:te};if(Ze.value){const ue=de.module.findIndex(ie=>ie.title===Ze.value.module.title);ue!==-1&&(de.module[ue]=ge)}else de.module.push(ge);x.value=se,n("update:parts",se),Te()},{activeTab:oe,switchToTab:Q}=vy(),ne=R=>{Q(R),v.switchToTab(R)},ee=v.state.showPartSelector,ye=v.state.showNestedPartSelector,ce=we(!1),me=R=>{v.openPartSelector(R)},$e=()=>{v.closePartSelector()},De=()=>{v.closeNestedPartSelector()},je=()=>{ce.value=!0},Te=()=>{ce.value=!1,Ze.value=null},ut=v.state.showEditor,Ue=we([]),Ye=we([]),kt=R=>{Ue.value=R,n("update:commonImages",R)},xo=R=>{Ye.value=R,n("update:individualImages",R)},Xr=()=>{n("update:commonImages",Ue.value)},bt=()=>{n("update:individualImages",Ye.value)},St=ic(),is=(R,B,J)=>{_.debug("🔧 selectPart呼び出し:",{type:R,module:B,index:J,insertPosition:v.state.insertPosition.value});const q=Mo.value.createNewComponent(R,B),te=J!==void 0?J:v.state.insertPosition.value;_.debug("🔧 新しいコンポーネント作成:",q),_.debug("🔧 挿入位置:",te),v.actions.addPart(q,te),$e()},Eb=(R,B)=>{const J=v.state.nestedInsertPath.value,q=v.state.nestedInsertPosition.value,te=Mo.value.createNewComponent(R,B);v.actions.addNestedPart(J,q,te),De()},Mo=Ae(()=>{const R=x.value&&x.value.length>0?x.value:r.parts||[];return _.debug("componentUtils更新: parts length:",R.length),qr(R)}),Ib=R=>Mo.value.getFieldInfo(R),Pb=(R,B,J)=>Mo.value.shouldShowBasicField(R,B,J),Sb=(R,B,J)=>Mo.value.shouldShowArrayField(R,B,J),Tb=(R,B,J,q,te)=>Mo.value.shouldShowArrayItemField(R,B,J,q,te),Db=R=>Mo.value.getInputType(R),xb=(R,B,J)=>Mo.value.isCheckboxChecked(R,B,J),Mb=(R,B)=>{const J=A.value;if(J){if(J[R]=B,J._isZForItem){const q=J._parentComponentId,te=J._arrayName,se=J._arrayIndex;_.debug(`🔄 z-for配列アイテムリアルタイム更新: ${q}.${te}[${se}].${R} = ${B}`,{beforeUpdate:J[R],afterUpdate:B,componentId:J.id,isEditableItem:!0});const de=(ue,ie)=>{for(const fe of ue){if(fe.id===ie)return fe;if(fe.nested_parts&&Array.isArray(fe.nested_parts)){const Me=de(fe.nested_parts,ie);if(Me)return Me}for(const Me of Object.keys(fe))if(Array.isArray(fe[Me])){for(const He of fe[Me])if(He&&typeof He=="object"&&He.nested_parts){const Ge=de(He.nested_parts,ie);if(Ge)return Ge}}}return null},ge=de(z.value,q);if(ge&&Array.isArray(ge[te])){const ue=ge[te];_.debug("🔍 handleUpdateEditorValue: 配列取得詳細",{parentComponentId:q,parentComponentFound:!!ge,parentComponentType:ge?.type,arrayName:te,arrayFound:Array.isArray(ge[te]),arrayLength:ue.length,arraySnapshot:ue.map(fe=>({id:fe.id,stableItemId:fe.stableItemId,card_title:fe.card_title})),editingKey:R,editingValue:B,editingComponentId:J.id});let ie=-1;if(typeof se=="string"?(ie=ue.findIndex(fe=>fe.stableItemId===se||fe.id===se),_.debug(`🔍 stableItemId "${se}" を実際のインデックス ${ie} に変換`)):typeof se=="number"&&(ie=se),ie>=0&&ie<ue.length){const fe=ue[ie][R];ue[ie][R]=B,_.debug(`✅ z-for配列アイテム更新完了: ${q}.${te}[${ie}].${R}`,{beforeValue:fe,afterValue:ue[ie][R],actualIndex:ie,arrayLength:ue.length,fullArrayItem:ue[ie],arrayItemId:ue[ie].id,editingComponentId:J.id,parentComponentFound:!!ge,parentComponentId:ge?.id}),ue[ie][R]===B?_.success(`🎯 リアルタイム更新成功確認: ${R}="${B}" が正しく配列に保存された`):_.error(`❌ リアルタイム更新失敗: ${R}="${B}" の保存に失敗`)}else _.error(`❌ z-for配列アイテムのインデックスが見つかりません: ${se}`,{arrayIndex:se,arrayLength:ue.length,availableIds:ue.map(fe=>({id:fe.id,stableItemId:fe.stableItemId}))})}}n("update:page",z.value)}},Nb=R=>{const B=A.value;B&&(v.actions.addZForArrayItem(B,R),n("update:page",z.value))},Fb=(R,B)=>{const J=A.value;J&&(v.actions.removeZForArrayItem(J,R,B),n("update:page",z.value))},Ob=(R,B,J)=>{console.log("🔥🔥🔥 [ZeroCode] handleUpdateArrayItem呼び出し開始",{key:R,index:B,item:J,timestamp:new Date().toISOString(),selectedComponentId:A.value?.id});const q=A.value;if(!q){console.error("❌ [ZeroCode] 選択されたコンポーネントがありません");return}console.log("📋 [ZeroCode] 選択中のコンポーネント:",{id:q.id,keys:Object.keys(q),targetKey:R,hasTargetKey:R in q});const te=q[R];if(!Array.isArray(te)){console.error(`❌ [ZeroCode] ${R}は配列ではありません:`,te);return}if(B<0||B>=te.length){console.error(`❌ [ZeroCode] インデックス${B}が範囲外です`,{index:B,arrayLength:te.length,array:te.map((de,ge)=>({index:ge,id:de.id,keys:Object.keys(de)}))});return}console.log(`📋 [ZeroCode] 更新前の配列[${B}]:`,te[B]);const se={...J};delete se._isZForItem,delete se._parentComponentId,delete se._arrayName,delete se._arrayIndex,delete se._zForTemplate,te[B].id&&(se.id=te[B].id),te[B].stableItemId&&(se.stableItemId=te[B].stableItemId),console.log("📝 [ZeroCode] クリーニング後のアイテム:",se),te[B]=se,console.log(`📋 [ZeroCode] 更新後の配列[${B}]:`,te[B]),console.log("📋 [ZeroCode] 配列全体の確認:",te.map((de,ge)=>({index:ge,id:de.id,card_title:de.card_title||"なし",keys:Object.keys(de)}))),_.success("✅ [ZeroCode] 配列アイテム更新成功",{key:R,index:B,updatedItem:se}),console.log("🚀 [ZeroCode] update:pageイベント発火前"),n("update:page",z.value),console.log("✅ [ZeroCode] update:pageイベント発火完了")},kb=R=>{const{key:B,option:J,checked:q}=R,te=A.value;if(te){let se=te[B]||[];Array.isArray(se)||(se=[]),q?se.includes(J)||(se=[...se,J]):se=se.filter(de=>de!==J),te[B]=se,n("update:page",z.value)}};at(()=>r.commonImages,R=>{Array.isArray(R)&&(Ue.value=JSON.parse(JSON.stringify(R)))},{immediate:!0}),at(()=>r.individualImages,R=>{Array.isArray(R)&&(Ye.value=JSON.parse(JSON.stringify(R)))},{immediate:!0});const ba=()=>{w.value=!1,f.value=null,g.value="",u.value=""},Lb=(R,B)=>{if(console.log("🖼️ 画像選択完了:",{imageUrl:R.substring(R.lastIndexOf("/")+1),imageAlt:B,targetComponent:f.value?.id,targetField:g.value,currentValue:f.value?.[g.value]}),f.value&&g.value){let J=R,q=null;R.startsWith("data:")?(q=[...Ue.value,...Ye.value].find(ge=>i(ge)===R),q&&(J=q.url)):q=[...Ue.value,...Ye.value].find(ge=>ge.url===R),q&&!R.startsWith("data:")&&q.fileData?.base64&&q.fileData.base64.trim()!==""&&m(q.id);const te=f.value[g.value];f.value[g.value]=J,console.log("🖼️ フィールド更新完了:",{componentId:f.value.id,fieldName:g.value,oldValue:te,newValue:J,actualValue:f.value[g.value]});const se=g.value.replace(/url$/i,"alt").replace(/image$/i,"alt");se!==g.value&&f.value[se]!==void 0&&(f.value[se]=B),n("update:page",z.value),Bt(()=>{bn(z),x.value&&bn(x)}),_.debug("🖼️ 画像選択完了:",J)}ba()},Rb=(R,B)=>{if(console.log("📁 画像アップロード完了:",{imageUrl:R.startsWith("data:")?"ファイルアップロード(Base64)":R,imageAlt:B,targetComponent:f.value?.id,targetField:g.value}),f.value&&g.value){f.value[g.value]=R;const J=g.value+"_alt";J!==g.value&&f.value[J]!==void 0&&(f.value[J]=B),n("update:page",z.value),Bt(()=>{bn(z),x.value&&bn(x)}),_.debug("📁 アップロード画像適用完了:",R.substring(0,50)+"...")}ba()},bc=R=>{const B=R.target,J=document.querySelector(`.${s.value}`);if(!(!J||!J.contains(B))){if(B.tagName==="IMG"){const q=B;console.log("🖼️ 画像クリックされました:",{imgSrc:q.src.substring(q.src.lastIndexOf("/")+1),hasEditableClass:q.classList.contains("zero-code-editable-image"),allClasses:Array.from(q.classList),componentId:q.closest("[data-component-id]")?.getAttribute("data-component-id")})}if(B.classList.contains("zero-code-image-edit-btn")){R.preventDefault(),R.stopPropagation();const q=B.previousElementSibling;if(!q||q.tagName!=="IMG"){console.log("🖼️ 編集ボタンに対応する画像が見つかりません");return}const te=q.closest("[data-component-id]")?.getAttribute("data-component-id");let se=q.getAttribute("data-field")||"image";console.log("🖼️ 画像クリック検出:",{imgSrc:q.src.substring(q.src.lastIndexOf("/")+1),hasEditableClass:q.classList.contains("zero-code-editable-image"),componentId:te,fieldName:se,availableComponents:z.value.map(ge=>ge.id)});let de=null;if(te){const ge=(ue,ie)=>{for(const fe of ue){if(fe.id===ie)return fe;if(fe.nested_parts&&fe.nested_parts.length>0){const Me=ge(fe.nested_parts,ie);if(Me)return Me}}return null};de=ge(z.value,te)}else{console.log("🖼️ componentId が見つからないため、画像から適切なコンポーネントを検索");const ge=q.src;console.log("🖼️ 検索対象の画像src:",ge);for(const ue of z.value){console.log(`🔍 コンポーネント ${ue.id} を検査:`,ue);for(const[ie,fe]of Object.entries(ue))if(typeof fe=="string"&&(ie.toLowerCase().includes("image")||ie.toLowerCase().includes("url")||ie.toLowerCase().includes("icon"))&&(console.log(`🔍 画像フィールド候補: ${ie} = ${fe}`),fe&&(ge.includes(fe)||fe.includes(ge.split("/").pop()||"")))){console.log(`✅ 一致発見! コンポーネント: ${ue.id}, フィールド: ${ie}`),de=ue,se=ie;break}if(de)break}!de&&z.value.length>0&&(de=z.value[0],console.log("🖼️ 適切なコンポーネントが見つからないため、フォールバック:",de.id))}if(de){f.value=de,g.value=se,u.value=q.src,w.value=!0;return}else console.log("🖼️ コンポーネントが見つからないため、モーダルを表示できません")}!I.value||!O.value||B.closest(".zero-code-rich-text-toolbar")||B===I.value||I.value.contains(B)||(_.debug("🔧 編集外エリアクリック、自動保存してツールバー非表示"),S(!0))}};let _a=null;return Ro(async()=>{_.debug("🔧 ZeroCode初期化開始"),document.addEventListener("click",bc),_.debug("🔧 グローバルクリックリスナー追加完了"),_.debug("🖼️ CSS方式の画像編集を採用（浮遊ボタン処理は不要）"),_.debug("🔧 イベントリスナー設定中..."),v.setupEventListeners(),_.debug("🔧 EventBusリスナー登録中..."),Pt.on("reorderZForArrayItem",({componentId:R,arrayName:B,fromIndex:J,toIndex:q})=>{_.debug("🔄 z-for並び替えイベント受信:",{componentId:R,arrayName:B,fromIndex:J,toIndex:q});const te=(ge,ue)=>{for(const ie of ge){if(ie.id===ue)return ie;if(ie.nested_parts&&ie.nested_parts.length>0){const fe=te(ie.nested_parts,ue);if(fe)return fe}for(const fe of Object.keys(ie))if(Array.isArray(ie[fe]))for(let Me=0;Me<ie[fe].length;Me++){const He=ie[fe][Me];if(He&&typeof He=="object"&&He.nested_parts){const Ge=te(He.nested_parts,ue);if(Ge)return Ge}}}return null},se=te(z.value,R);if(!se){_.warn("対象コンポーネントが見つかりません:",{componentId:R,arrayName:B,availableIds:z.value.map(ge=>ge.id)});return}let de=null;if(se.arrayFields&&(de=se.arrayFields[B]),!de&&se[B]&&(de=se[B]),!de||!Array.isArray(de)){_.warn("指定された配列フィールドが見つからないか、配列ではありません:",{componentId:R,arrayName:B,foundDirectly:!!se[B],foundInArrayFields:!!(se.arrayFields&&se.arrayFields[B]),itemType:typeof de});return}if(J>=0&&q>=0&&J<de.length&&q<de.length){const[ge]=de.splice(J,1);de.splice(q,0,ge),_.debug("✅ z-for並び替え完了:",{arrayName:B,from:J,to:q})}else _.warn("無効な並び替えインデックス:",{fromIndex:J,toIndex:q,arrayLength:de.length})}),_.debug("🔧 グローバル関数公開中..."),v.exposeGlobalFunctions((R,B)=>{_.debug("🔧 Tiptap編集開始:",{componentId:R,paramName:B}),O.value=!0,v.actions.startTiptapEdit(R,B,[],0)}),typeof window<"u"&&(window.testAddImageButtons=()=>{_.debug("🔍 手動テスト：画像ボタン追加実行")},window.testImageInfo=()=>{const R=document.querySelector(`.${s.value}`);if(!R)return;const B=R.querySelectorAll("img");_.debug("🔍 手動テスト：全画像数",B.length),B.forEach((q,te)=>{const se=q.getBoundingClientRect();_.debug(`🔍 画像${te}:`,{src:q.src.substring(q.src.lastIndexOf("/")+1),parent:q.parentElement?.tagName,hasDataId:!!q.closest("[data-component-id]"),visible:se.width>0&&se.height>0,rect:{top:se.top,left:se.left,width:se.width,height:se.height}})});const J=document.querySelectorAll(".zero-code-image-floating-button");_.debug("🔍 現在の浮遊ボタン数:",J.length)}),typeof window<"u"&&(window.getLatestComponentData=R=>{const B=z.value.find(te=>te.id===R);if(B)return B;const J=/^(.+?)_([^_]+_[^_]+)_(\d+)$/,q=R.match(J);if(q){const[,te,se,de]=q,ge=parseInt(de,10),ue=z.value.find(ie=>ie.id===te);if(ue&&Array.isArray(ue[se])&&ue[se][ge]){const ie=ue[se][ge];return{...ue,...ie,type:ue.type,module_name:ue.module_name,id:R}}}return null}),window.toggleNestedCollapse=R=>{_.debug("🔧 ネストパーツ折りたたみ切り替え:",R),St.toggleCollapse(R),Bt(()=>{const B=document.getElementById(`nested-content-${R}`),J=document.querySelector(`[onclick="window.toggleNestedCollapse('${R}')"]`);B&&J&&(St.isCollapsed(R)?(B.style.display="none",J.textContent="＋",J.setAttribute("title","展開")):(B.style.display="block",J.textContent="－",J.setAttribute("title","折りたたみ")))})},window.isNestedCollapsed=R=>St.isCollapsed(R),window.reorderZForArrayItem=(R,B,J,q)=>{_.debug("🔄 reorderZForArrayItem グローバル関数呼び出し:",{componentId:R,arrayName:B,fromIndex:J,toIndex:q}),Pt.emit("reorderZForArrayItem",{componentId:R,arrayName:B,fromIndex:J,toIndex:q})},_a=Z()||null,window.startRichTextEdit=async(R,B,J,q)=>{_.debug("🔧 リッチテキスト編集開始:",{componentId:R,paramName:B,currentValue:J});const te=q||window.event?.target;if(I.value===te){_.debug("🔧 既に編集中の要素、スキップ");return}if(te){I.value&&(_.debug("🔧 前回の編集セッションを終了"),S(!1)),_.debug("🔧 事前設定開始"),I.value=te,c.value=te.innerHTML,d.value=R,b.value=B,await Bt(),te.contentEditable="true",_.debug("🔧 contentEditable設定完了:",te.contentEditable),te.style.userSelect="text",te.style.webkitUserSelect="text",_.debug("🔧 user-select設定完了:",te.style.userSelect),te.classList.add("editing"),_.debug("🔧 editingクラス追加完了"),_.debug("🔧 編集モード設定完了");const se=ie=>{const fe=ie.relatedTarget;if(fe&&fe.closest(".zero-code-rich-text-toolbar")){_.debug("🔧 ツールバーへのフォーカス移動、編集継続");return}_.debug("🔧 フォーカス喪失、自動保存とツールバー非表示"),setTimeout(()=>{I.value===te&&S(!0)},150)};te.addEventListener("blur",se),_.debug("🔧 イベントリスナー追加完了"),te._cleanup=()=>{te.removeEventListener("blur",se),_.debug("🔧 イベントリスナークリーンアップ完了")},_.debug("🔧 ツールバー位置計算開始");const de=te.getBoundingClientRect(),ge=window.pageYOffset||document.documentElement.scrollTop,ue=window.pageXOffset||document.documentElement.scrollLeft;D.value={top:de.top+ge-80,left:de.left+ue},_.debug("🔧 ツールバー位置設定完了:",D.value),_.debug("🔧 ツールバー表示開始"),O.value=!0,_.debug("🔧 リッチテキスト編集開始完了（ツールバー付き）"),await Bt(),setTimeout(()=>{if(te&&I.value===te){te.focus();const ie=document.createRange(),fe=window.getSelection();if(fe&&te.childNodes.length>0){const Me=te.childNodes[te.childNodes.length-1];Me.nodeType===Node.TEXT_NODE?ie.setStart(Me,Me.textContent?.length||0):ie.setStartAfter(Me),ie.collapse(!0),fe.removeAllRanges(),fe.addRange(ie),_.debug("🔧 カーソルを末尾に移動完了")}else fe&&(ie.selectNodeContents(te),ie.collapse(!1),fe.removeAllRanges(),fe.addRange(ie),_.debug("🔧 空要素の末尾にカーソル設定完了"));_.debug("🔧 遅延フォーカス完了、テキスト選択準備完了（末尾から開始）")}},10)}},_.debug("localParts.value:",x.value),_.debug("props.parts:",r.parts),_.debug("🔧 グローバル関数確認:"),_.debug("  openNestedPartSelector:",typeof window.openNestedPartSelector),_.debug("  openNestedEditor:",typeof window.openNestedEditor),_.debug("✅ ZeroCode初期化完了")}),t({parts:Ae(()=>x.value&&x.value.length>0?x.value:r.parts||[]),page:Ae(()=>z.value||[])}),Ir(()=>{_.debug("🔧 ZeroCode破棄処理開始"),document.removeEventListener("click",bc);const R=document.querySelector(`.${s.value}`);(R?R.querySelectorAll(".zero-code-image-floating-button"):[]).forEach(J=>J.remove()),_a&&_a(),Pt.off("reorderZForArrayItem"),_.debug("🔧 ZeroCode破棄処理完了")}),(R,B)=>(j(),dt(jy,null,{default:Cn(()=>[$("div",{class:ot(`zero-code editor-container ${s.value}`)},[et(Ty,{"active-tab":pe(oe)||"editor","onUpdate:activeTab":ne},null,8,["active-tab"]),et(qy,{show:O.value,position:D.value,actions:y.actions,"editing-state":y.editingState,"is-editing":O.value,onExecuteCommand:y.executeCommand,onSave:B[0]||(B[0]=J=>y.stopEdit(!0)),onCancel:B[1]||(B[1]=J=>y.stopEdit(!1))},null,8,["show","position","actions","editing-state","is-editing","onExecuteCommand"]),$("div",_b,[pe(oe)==="editor"?(j(),dt(tm,{key:0,"data-tab":pe(k),"editable-page-data":pe(z),"local-parts":pe(x),"local-common-parts":pe(v).state.localCommonParts.value,"local-individual-parts":pe(v).state.localIndividualParts.value,parts:r.parts||[],"common-images":Ue.value,"individual-images":Ye.value,"show-part-selector":pe(ee),"show-nested-part-selector":pe(ye),"show-editor":pe(ut),"selected-component":pe(A),"render-component-with-nested":M,"get-field-info":Ib,"should-show-basic-field":Pb,"should-show-array-field":Sb,"should-show-array-item-field":Tb,"get-input-type":Db,"is-checkbox-checked":xb,"parts-data":pe(x)&&pe(x).length>0?pe(x):r.parts||[],"is-text-editing":E.value,"onUpdate:dataTab":B[2]||(B[2]=J=>k.value=J),onAddPart:me,onEditPart:P,onDeletePart:N,onReorderParts:F,onClosePartSelector:$e,onSelectPart:is,onCloseNestedPartSelector:De,onSelectNestedPart:Eb,onCloseEditor:T,onUpdateEditorValue:Mb,onAddArrayItem:Nb,onRemoveArrayItem:Fb,onUpdateArrayItem:Ob,onUpdateCheckbox:kb},null,8,["data-tab","editable-page-data","local-parts","local-common-parts","local-individual-parts","parts","common-images","individual-images","show-part-selector","show-nested-part-selector","show-editor","selected-component","parts-data","is-text-editing"])):ve("",!0),pe(oe)==="parts"?(j(),dt(ch,{key:1,"local-parts":pe(x),"local-common-parts":pe(v).state.localCommonParts.value,"local-individual-parts":pe(v).state.localIndividualParts.value,"show-part-registration":ce.value,"existing-part-types":Je.value,"editing-part":Ze.value,"render-part-preview":K,onUpdateParts:L,onShowRegistration:je,onEditPart:V,onDeletePart:Y,onCloseRegistration:Te,onSavePart:X},null,8,["local-parts","local-common-parts","local-individual-parts","show-part-registration","existing-part-types","editing-part"])):ve("",!0),pe(oe)==="preview"?(j(),dt(Kh,{key:2,"editable-page-data":pe(z),"local-parts":pe(x),parts:r.parts||[],"common-images":Ue.value,"individual-images":Ye.value},null,8,["editable-page-data","local-parts","parts","common-images","individual-images"])):ve("",!0),pe(oe)==="images"?(j(),dt(hy,{key:3,"common-images":Ue.value,"individual-images":Ye.value,onUpdateCommonImages:kt,onUpdateIndividualImages:xo,onSendCommonImagesData:Xr,onSendIndividualImagesData:bt},null,8,["common-images","individual-images"])):ve("",!0)]),$("div",$b,[$("button",{class:"zero-code-send-btn zero-code-page-btn",onClick:B[3]||(B[3]=J=>re("page"))},"Pageデータを表示"),$("button",{class:"zero-code-send-btn zero-code-common-parts-btn",onClick:B[4]||(B[4]=J=>re("commonParts"))},"共通Partsデータを表示"),$("button",{class:"zero-code-send-btn zero-code-individual-parts-btn",onClick:B[5]||(B[5]=J=>re("individualParts"))},"個別Partsデータを表示"),$("button",{class:"zero-code-send-btn zero-code-common-images-btn",onClick:B[6]||(B[6]=J=>re("commonImages"))}," 共通画像データを表示 "),$("button",{class:"zero-code-send-btn zero-code-individual-images-btn",onClick:B[7]||(B[7]=J=>re("individualImages"))}," 個別画像データを表示 "),$("button",{class:"zero-code-send-btn zero-code-reset-btn",onClick:xe},"リセット")]),H.value?(j(),U("div",wb,[$("div",zb,[$("h4",null,ae(W.value),1),$("button",{class:"zero-code-close-button",onClick:_e},"✕")]),$("div",Ab,[$("pre",Cb,ae(Oe.value),1)]),$("div",{class:"zero-code-data-display-footer"},[$("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:Se},"クリップボードにコピー"),$("button",{class:"zero-code-btn zero-code-btn-primary",onClick:Ve},"このデータを送信")])])):ve("",!0),et(bb,{visible:w.value,"common-images":Ue.value,"individual-images":Ye.value,"current-value":u.value,onClose:ba,onSelect:Lb,onUpload:Rb},null,8,["visible","common-images","individual-images","current-value"])],2)]),_:1}))}}),{shadowRoot:!1});customElements.define("zero-code",ya),Dt.ZeroCode=ya,Dt.default=ya,Object.defineProperties(Dt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=vue-cms-editor.optimized.umd.js.map
