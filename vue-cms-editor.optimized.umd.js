(function(Rt,Et){typeof exports=="object"&&typeof module<"u"?Et(exports):typeof define=="function"&&define.amd?define(["exports"],Et):(Rt=typeof globalThis<"u"?globalThis:Rt||self,Et(Rt.VueCMSEditor={}))})(this,function(Rt){"use strict";var By=Object.defineProperty;var jy=(Rt,Et,ke)=>Et in Rt?By(Rt,Et,{enumerable:!0,configurable:!0,writable:!0,value:ke}):Rt[Et]=ke;var tn=(Rt,Et,ke)=>jy(Rt,typeof Et!="symbol"?Et+"":Et,ke);/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Et(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const ke={},Qo=[],ao=()=>{},Ec=()=>!1,on=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),us=e=>e.startsWith("onUpdate:"),rt=Object.assign,ps=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},Pc=Object.prototype.hasOwnProperty,Re=(e,t)=>Pc.call(e,t),ve=Array.isArray,er=e=>vr(e)==="[object Map]",rn=e=>vr(e)==="[object Set]",Ea=e=>vr(e)==="[object Date]",Ee=e=>typeof e=="function",Ye=e=>typeof e=="string",Xt=e=>typeof e=="symbol",Ze=e=>e!==null&&typeof e=="object",Pa=e=>(Ze(e)||Ee(e))&&Ee(e.then)&&Ee(e.catch),Sa=Object.prototype.toString,vr=e=>Sa.call(e),Sc=e=>vr(e).slice(8,-1),nn=e=>vr(e)==="[object Object]",fs=e=>Ye(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,br=Et(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sn=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},Ic=/-(\w)/g,Qt=sn(e=>e.replace(Ic,(t,o)=>o?o.toUpperCase():"")),Tc=/\B([A-Z])/g,qt=sn(e=>e.replace(Tc,"-$1").toLowerCase()),Ia=sn(e=>e.charAt(0).toUpperCase()+e.slice(1)),ms=sn(e=>e?`on${Ia(e)}`:""),Eo=(e,t)=>!Object.is(e,t),an=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},gs=(e,t,o,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:o})},ln=e=>{const t=parseFloat(e);return isNaN(t)?e:t},hs=e=>{const t=Ye(e)?Number(e):NaN;return isNaN(t)?e:t};let Ta;const cn=()=>Ta||(Ta=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dn(e){if(ve(e)){const t={};for(let o=0;o<e.length;o++){const r=e[o],n=Ye(r)?Nc(r):dn(r);if(n)for(const s in n)t[s]=n[s]}return t}else if(Ye(e)||Ze(e))return e}const Dc=/;(?![^(]*\))/g,xc=/:([^]+)/,Mc=/\/\*[^]*?\*\//g;function Nc(e){const t={};return e.replace(Mc,"").split(Dc).forEach(o=>{if(o){const r=o.split(xc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function et(e){let t="";if(Ye(e))t=e;else if(ve(e))for(let o=0;o<e.length;o++){const r=et(e[o]);r&&(t+=r+" ")}else if(Ze(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Fc=Et("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Da(e){return!!e||e===""}function kc(e,t){if(e.length!==t.length)return!1;let o=!0;for(let r=0;o&&r<e.length;r++)o=un(e[r],t[r]);return o}function un(e,t){if(e===t)return!0;let o=Ea(e),r=Ea(t);if(o||r)return o&&r?e.getTime()===t.getTime():!1;if(o=Xt(e),r=Xt(t),o||r)return e===t;if(o=ve(e),r=ve(t),o||r)return o&&r?kc(e,t):!1;if(o=Ze(e),r=Ze(t),o||r){if(!o||!r)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!un(e[a],t[a]))return!1}}return String(e)===String(t)}function Oc(e,t){return e.findIndex(o=>un(o,t))}const xa=e=>!!(e&&e.__v_isRef===!0),oe=e=>Ye(e)?e:e==null?"":ve(e)||Ze(e)&&(e.toString===Sa||!Ee(e.toString))?xa(e)?oe(e.value):JSON.stringify(e,Ma,2):String(e),Ma=(e,t)=>xa(t)?Ma(e,t.value):er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[r,n],s)=>(o[vs(r,s)+" =>"]=n,o),{})}:rn(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>vs(o))}:Xt(t)?vs(t):Ze(t)&&!ve(t)&&!nn(t)?String(t):t,vs=(e,t="")=>{var o;return Xt(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nt;class Lc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nt,!t&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Nt;try{return Nt=this,t()}finally{Nt=o}}}on(){++this._on===1&&(this.prevScope=Nt,Nt=this)}off(){this._on>0&&--this._on===0&&(Nt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,r;for(o=0,r=this.effects.length;o<r;o++)this.effects[o].stop();for(this.effects.length=0,o=0,r=this.cleanups.length;o<r;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,r=this.scopes.length;o<r;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Rc(){return Nt}let We;const bs=new WeakSet;class Na{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nt&&Nt.active&&Nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bs.has(this)&&(bs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ka(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ba(this),Oa(this);const t=We,o=eo;We=this,eo=!0;try{return this.fn()}finally{La(this),We=t,eo=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ws(t);this.deps=this.depsTail=void 0,Ba(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$s(this)&&this.run()}get dirty(){return $s(this)}}let Fa=0,yr,_r;function ka(e,t=!1){if(e.flags|=8,t){e.next=_r,_r=e;return}e.next=yr,yr=e}function ys(){Fa++}function _s(){if(--Fa>0)return;if(_r){let t=_r;for(_r=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;yr;){let t=yr;for(yr=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=o}}if(e)throw e}function Oa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function La(e){let t,o=e.depsTail,r=o;for(;r;){const n=r.prevDep;r.version===-1?(r===o&&(o=n),ws(r),Hc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=o}function $s(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ra(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ra(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$r)||(e.globalVersion=$r,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!$s(e))))return;e.flags|=2;const t=e.dep,o=We,r=eo;We=e,eo=!0;try{Oa(e);const n=e.fn(e._value);(t.version===0||Eo(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{We=o,eo=r,La(e),e.flags&=-3}}function ws(e,t=!1){const{dep:o,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),o.subs===e&&(o.subs=r,!r&&o.computed)){o.computed.flags&=-5;for(let s=o.computed.deps;s;s=s.nextDep)ws(s,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function Hc(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let eo=!0;const Ha=[];function io(){Ha.push(eo),eo=!1}function lo(){const e=Ha.pop();eo=e===void 0?!0:e}function Ba(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=We;We=void 0;try{t()}finally{We=o}}}let $r=0;class Bc{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zs{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!We||!eo||We===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==We)o=this.activeLink=new Bc(We,this),We.deps?(o.prevDep=We.depsTail,We.depsTail.nextDep=o,We.depsTail=o):We.deps=We.depsTail=o,ja(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const r=o.nextDep;r.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=r),o.prevDep=We.depsTail,o.nextDep=void 0,We.depsTail.nextDep=o,We.depsTail=o,We.deps===o&&(We.deps=r)}return o}trigger(t){this.version++,$r++,this.notify(t)}notify(t){ys();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{_s()}}}function ja(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ja(r)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const pn=new WeakMap,Ro=Symbol(""),As=Symbol(""),wr=Symbol("");function yt(e,t,o){if(eo&&We){let r=pn.get(e);r||pn.set(e,r=new Map);let n=r.get(o);n||(r.set(o,n=new zs),n.map=r,n.key=o),n.track()}}function vo(e,t,o,r,n,s){const a=pn.get(e);if(!a){$r++;return}const i=l=>{l&&l.trigger()};if(ys(),t==="clear")a.forEach(i);else{const l=ve(e),b=l&&fs(o);if(l&&o==="length"){const m=Number(r);a.forEach((h,E)=>{(E==="length"||E===wr||!Xt(E)&&E>=m)&&i(h)})}else switch((o!==void 0||a.has(void 0))&&i(a.get(o)),b&&i(a.get(wr)),t){case"add":l?b&&i(a.get("length")):(i(a.get(Ro)),er(e)&&i(a.get(As)));break;case"delete":l||(i(a.get(Ro)),er(e)&&i(a.get(As)));break;case"set":er(e)&&i(a.get(Ro));break}}_s()}function jc(e,t){const o=pn.get(e);return o&&o.get(t)}function tr(e){const t=xe(e);return t===e?t:(yt(t,"iterate",wr),Kt(e)?t:t.map(gt))}function fn(e){return yt(e=xe(e),"iterate",wr),e}const Uc={__proto__:null,[Symbol.iterator](){return Cs(this,Symbol.iterator,gt)},concat(...e){return tr(this).concat(...e.map(t=>ve(t)?tr(t):t))},entries(){return Cs(this,"entries",e=>(e[1]=gt(e[1]),e))},every(e,t){return bo(this,"every",e,t,void 0,arguments)},filter(e,t){return bo(this,"filter",e,t,o=>o.map(gt),arguments)},find(e,t){return bo(this,"find",e,t,gt,arguments)},findIndex(e,t){return bo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return bo(this,"findLast",e,t,gt,arguments)},findLastIndex(e,t){return bo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return bo(this,"forEach",e,t,void 0,arguments)},includes(...e){return Es(this,"includes",e)},indexOf(...e){return Es(this,"indexOf",e)},join(e){return tr(this).join(e)},lastIndexOf(...e){return Es(this,"lastIndexOf",e)},map(e,t){return bo(this,"map",e,t,void 0,arguments)},pop(){return zr(this,"pop")},push(...e){return zr(this,"push",e)},reduce(e,...t){return Ua(this,"reduce",e,t)},reduceRight(e,...t){return Ua(this,"reduceRight",e,t)},shift(){return zr(this,"shift")},some(e,t){return bo(this,"some",e,t,void 0,arguments)},splice(...e){return zr(this,"splice",e)},toReversed(){return tr(this).toReversed()},toSorted(e){return tr(this).toSorted(e)},toSpliced(...e){return tr(this).toSpliced(...e)},unshift(...e){return zr(this,"unshift",e)},values(){return Cs(this,"values",gt)}};function Cs(e,t,o){const r=fn(e),n=r[t]();return r!==e&&!Kt(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=o(s.value)),s}),n}const Vc=Array.prototype;function bo(e,t,o,r,n,s){const a=fn(e),i=a!==e&&!Kt(e),l=a[t];if(l!==Vc[t]){const h=l.apply(e,s);return i?gt(h):h}let b=o;a!==e&&(i?b=function(h,E){return o.call(this,gt(h),E,e)}:o.length>2&&(b=function(h,E){return o.call(this,h,E,e)}));const m=l.call(a,b,r);return i&&n?n(m):m}function Ua(e,t,o,r){const n=fn(e);let s=o;return n!==e&&(Kt(e)?o.length>3&&(s=function(a,i,l){return o.call(this,a,i,l,e)}):s=function(a,i,l){return o.call(this,a,gt(i),l,e)}),n[t](s,...r)}function Es(e,t,o){const r=xe(e);yt(r,"iterate",wr);const n=r[t](...o);return(n===-1||n===!1)&&Ss(o[0])?(o[0]=xe(o[0]),r[t](...o)):n}function zr(e,t,o=[]){io(),ys();const r=xe(e)[t].apply(e,o);return _s(),lo(),r}const Zc=Et("__proto__,__v_isRef,__isVue"),Va=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xt));function Wc(e){Xt(e)||(e=String(e));const t=xe(this);return yt(t,"has",e),t.hasOwnProperty(e)}class Za{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,r){if(o==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_isShallow")return s;if(o==="__v_raw")return r===(n?s?Ya:Ja:s?Ga:Ka).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ve(t);if(!n){let l;if(a&&(l=Uc[o]))return l;if(o==="hasOwnProperty")return Wc}const i=Reflect.get(t,o,nt(t)?t:r);return(Xt(o)?Va.has(o):Zc(o))||(n||yt(t,"get",o),s)?i:nt(i)?a&&fs(o)?i:i.value:Ze(i)?n?vn(i):Ho(i):i}}class Wa extends Za{constructor(t=!1){super(!1,t)}set(t,o,r,n){let s=t[o];if(!this._isShallow){const l=Po(s);if(!Kt(r)&&!Po(r)&&(s=xe(s),r=xe(r)),!ve(t)&&nt(s)&&!nt(r))return l?!1:(s.value=r,!0)}const a=ve(t)&&fs(o)?Number(o)<t.length:Re(t,o),i=Reflect.set(t,o,r,nt(t)?t:n);return t===xe(n)&&(a?Eo(r,s)&&vo(t,"set",o,r):vo(t,"add",o,r)),i}deleteProperty(t,o){const r=Re(t,o);t[o];const n=Reflect.deleteProperty(t,o);return n&&r&&vo(t,"delete",o,void 0),n}has(t,o){const r=Reflect.has(t,o);return(!Xt(o)||!Va.has(o))&&yt(t,"has",o),r}ownKeys(t){return yt(t,"iterate",ve(t)?"length":Ro),Reflect.ownKeys(t)}}class qa extends Za{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const qc=new Wa,Kc=new qa,Gc=new Wa(!0),Jc=new qa(!0),Ps=e=>e,mn=e=>Reflect.getPrototypeOf(e);function Yc(e,t,o){return function(...r){const n=this.__v_raw,s=xe(n),a=er(s),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,b=n[e](...r),m=o?Ps:t?yn:gt;return!t&&yt(s,"iterate",l?As:Ro),{next(){const{value:h,done:E}=b.next();return E?{value:h,done:E}:{value:i?[m(h[0]),m(h[1])]:m(h),done:E}},[Symbol.iterator](){return this}}}}function gn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Xc(e,t){const o={get(n){const s=this.__v_raw,a=xe(s),i=xe(n);e||(Eo(n,i)&&yt(a,"get",n),yt(a,"get",i));const{has:l}=mn(a),b=t?Ps:e?yn:gt;if(l.call(a,n))return b(s.get(n));if(l.call(a,i))return b(s.get(i));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!e&&yt(xe(n),"iterate",Ro),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,a=xe(s),i=xe(n);return e||(Eo(n,i)&&yt(a,"has",n),yt(a,"has",i)),n===i?s.has(n):s.has(n)||s.has(i)},forEach(n,s){const a=this,i=a.__v_raw,l=xe(i),b=t?Ps:e?yn:gt;return!e&&yt(l,"iterate",Ro),i.forEach((m,h)=>n.call(s,b(m),b(h),a))}};return rt(o,e?{add:gn("add"),set:gn("set"),delete:gn("delete"),clear:gn("clear")}:{add(n){!t&&!Kt(n)&&!Po(n)&&(n=xe(n));const s=xe(this);return mn(s).has.call(s,n)||(s.add(n),vo(s,"add",n,n)),this},set(n,s){!t&&!Kt(s)&&!Po(s)&&(s=xe(s));const a=xe(this),{has:i,get:l}=mn(a);let b=i.call(a,n);b||(n=xe(n),b=i.call(a,n));const m=l.call(a,n);return a.set(n,s),b?Eo(s,m)&&vo(a,"set",n,s):vo(a,"add",n,s),this},delete(n){const s=xe(this),{has:a,get:i}=mn(s);let l=a.call(s,n);l||(n=xe(n),l=a.call(s,n)),i&&i.call(s,n);const b=s.delete(n);return l&&vo(s,"delete",n,void 0),b},clear(){const n=xe(this),s=n.size!==0,a=n.clear();return s&&vo(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{o[n]=Yc(n,e,t)}),o}function hn(e,t){const o=Xc(e,t);return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(Re(o,n)&&n in r?o:r,n,s)}const Qc={get:hn(!1,!1)},ed={get:hn(!1,!0)},td={get:hn(!0,!1)},od={get:hn(!0,!0)},Ka=new WeakMap,Ga=new WeakMap,Ja=new WeakMap,Ya=new WeakMap;function rd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nd(e){return e.__v_skip||!Object.isExtensible(e)?0:rd(Sc(e))}function Ho(e){return Po(e)?e:bn(e,!1,qc,Qc,Ka)}function sd(e){return bn(e,!1,Gc,ed,Ga)}function vn(e){return bn(e,!0,Kc,td,Ja)}function Vy(e){return bn(e,!0,Jc,od,Ya)}function bn(e,t,o,r,n){if(!Ze(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=nd(e);if(s===0)return e;const a=n.get(e);if(a)return a;const i=new Proxy(e,s===2?r:o);return n.set(e,i),i}function or(e){return Po(e)?or(e.__v_raw):!!(e&&e.__v_isReactive)}function Po(e){return!!(e&&e.__v_isReadonly)}function Kt(e){return!!(e&&e.__v_isShallow)}function Ss(e){return e?!!e.__v_raw:!1}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function ad(e){return!Re(e,"__v_skip")&&Object.isExtensible(e)&&gs(e,"__v_skip",!0),e}const gt=e=>Ze(e)?Ho(e):e,yn=e=>Ze(e)?vn(e):e;function nt(e){return e?e.__v_isRef===!0:!1}function _e(e){return id(e,!1)}function id(e,t){return nt(e)?e:new ld(e,t)}class ld{constructor(t,o){this.dep=new zs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:xe(t),this._value=o?t:gt(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,r=this.__v_isShallow||Kt(t)||Po(t);t=r?t:xe(t),Eo(t,o)&&(this._rawValue=t,this._value=r?t:gt(t),this.dep.trigger())}}function Is(e){e.dep&&e.dep.trigger()}function fe(e){return nt(e)?e.value:e}const cd={get:(e,t,o)=>t==="__v_raw"?e:fe(Reflect.get(e,t,o)),set:(e,t,o,r)=>{const n=e[t];return nt(n)&&!nt(o)?(n.value=o,!0):Reflect.set(e,t,o,r)}};function Xa(e){return or(e)?e:new Proxy(e,cd)}function Qa(e){const t=ve(e)?new Array(e.length):{};for(const o in e)t[o]=ud(e,o);return t}class dd{constructor(t,o,r){this._object=t,this._key=o,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return jc(xe(this._object),this._key)}}function ud(e,t,o){const r=e[t];return nt(r)?r:new dd(e,t,o)}class pd{constructor(t,o,r){this.fn=t,this.setter=o,this._value=void 0,this.dep=new zs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$r-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return ka(this,!0),!0}get value(){const t=this.dep.track();return Ra(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fd(e,t,o=!1){let r,n;return Ee(e)?r=e:(r=e.get,n=e.set),new pd(r,n,o)}const _n={},$n=new WeakMap;let Bo;function md(e,t=!1,o=Bo){if(o){let r=$n.get(o);r||$n.set(o,r=[]),r.push(e)}}function gd(e,t,o=ke){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:i,call:l}=o,b=f=>n?f:Kt(f)||n===!1||n===0?yo(f,1):yo(f);let m,h,E,z,T=!1,k=!1;if(nt(e)?(h=()=>e.value,T=Kt(e)):or(e)?(h=()=>b(e),T=!0):ve(e)?(k=!0,T=e.some(f=>or(f)||Kt(f)),h=()=>e.map(f=>{if(nt(f))return f.value;if(or(f))return b(f);if(Ee(f))return l?l(f,2):f()})):Ee(e)?t?h=l?()=>l(e,2):e:h=()=>{if(E){io();try{E()}finally{lo()}}const f=Bo;Bo=m;try{return l?l(e,3,[z]):e(z)}finally{Bo=f}}:h=ao,t&&n){const f=h,C=n===!0?1/0:n;h=()=>yo(f(),C)}const M=Rc(),p=()=>{m.stop(),M&&M.active&&ps(M.effects,m)};if(s&&t){const f=t;t=(...C)=>{f(...C),p()}}let c=k?new Array(e.length).fill(_n):_n;const d=f=>{if(!(!(m.flags&1)||!m.dirty&&!f))if(t){const C=m.run();if(n||T||(k?C.some((I,A)=>Eo(I,c[A])):Eo(C,c))){E&&E();const I=Bo;Bo=m;try{const A=[C,c===_n?void 0:k&&c[0]===_n?[]:c,z];c=C,l?l(t,3,A):t(...A)}finally{Bo=I}}}else m.run()};return i&&i(d),m=new Na(h),m.scheduler=a?()=>a(d,!1):d,z=f=>md(f,!1,m),E=m.onStop=()=>{const f=$n.get(m);if(f){if(l)l(f,4);else for(const C of f)C();$n.delete(m)}},t?r?d(!0):c=m.run():a?a(d.bind(null,!0),!0):m.run(),p.pause=m.pause.bind(m),p.resume=m.resume.bind(m),p.stop=p,p}function yo(e,t=1/0,o){if(t<=0||!Ze(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,nt(e))yo(e.value,t,o);else if(ve(e))for(let r=0;r<e.length;r++)yo(e[r],t,o);else if(rn(e)||er(e))e.forEach(r=>{yo(r,t,o)});else if(nn(e)){for(const r in e)yo(e[r],t,o);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&yo(e[r],t,o)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ar=[];let Ts=!1;function Zy(e,...t){if(Ts)return;Ts=!0,io();const o=Ar.length?Ar[Ar.length-1].component:null,r=o&&o.appContext.config.warnHandler,n=hd();if(r)rr(r,o,11,[e+t.map(s=>{var a,i;return(i=(a=s.toString)==null?void 0:a.call(s))!=null?i:JSON.stringify(s)}).join(""),o&&o.proxy,n.map(({vnode:s})=>`at <${tl(o,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...vd(n)),console.warn(...s)}lo(),Ts=!1}function hd(){let e=Ar[Ar.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function vd(e){const t=[];return e.forEach((o,r)=>{t.push(...r===0?[]:[`
`],...bd(o))}),t}function bd({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,n=` at <${tl(e.component,e.type,r)}`,s=">"+o;return e.props?[n,...yd(e.props),s]:[n+s]}function yd(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(r=>{t.push(...ei(r,e[r]))}),o.length>3&&t.push(" ..."),t}function ei(e,t,o){return Ye(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:nt(t)?(t=ei(e,xe(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):Ee(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=xe(t),o?t:[`${e}=`,t])}function rr(e,t,o,r){try{return r?e(...r):e()}catch(n){wn(n,t,o)}}function to(e,t,o,r){if(Ee(e)){const n=rr(e,t,o,r);return n&&Pa(n)&&n.catch(s=>{wn(s,t,o)}),n}if(ve(e)){const n=[];for(let s=0;s<e.length;s++)n.push(to(e[s],t,o,r));return n}}function wn(e,t,o,r=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||ke;if(t){let i=t.parent;const l=t.proxy,b=`https://vuejs.org/error-reference/#runtime-${o}`;for(;i;){const m=i.ec;if(m){for(let h=0;h<m.length;h++)if(m[h](e,l,b)===!1)return}i=i.parent}if(s){io(),rr(s,null,10,[e,l,b]),lo();return}}_d(e,o,n,r,a)}function _d(e,t,o,r=!0,n=!1){if(n)throw e;console.error(e)}const Pt=[];let co=-1;const nr=[];let So=null,sr=0;const ti=Promise.resolve();let zn=null;function St(e){const t=zn||ti;return e?t.then(this?e.bind(this):e):t}function $d(e){let t=co+1,o=Pt.length;for(;t<o;){const r=t+o>>>1,n=Pt[r],s=Cr(n);s<e||s===e&&n.flags&2?t=r+1:o=r}return t}function Ds(e){if(!(e.flags&1)){const t=Cr(e),o=Pt[Pt.length-1];!o||!(e.flags&2)&&t>=Cr(o)?Pt.push(e):Pt.splice($d(t),0,e),e.flags|=1,oi()}}function oi(){zn||(zn=ti.then(si))}function wd(e){ve(e)?nr.push(...e):So&&e.id===-1?So.splice(sr+1,0,e):e.flags&1||(nr.push(e),e.flags|=1),oi()}function ri(e,t,o=co+1){for(;o<Pt.length;o++){const r=Pt[o];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Pt.splice(o,1),o--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ni(e){if(nr.length){const t=[...new Set(nr)].sort((o,r)=>Cr(o)-Cr(r));if(nr.length=0,So){So.push(...t);return}for(So=t,sr=0;sr<So.length;sr++){const o=So[sr];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}So=null,sr=0}}const Cr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function si(e){try{for(co=0;co<Pt.length;co++){const t=Pt[co];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),rr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;co<Pt.length;co++){const t=Pt[co];t&&(t.flags&=-2)}co=-1,Pt.length=0,ni(),zn=null,(Pt.length||nr.length)&&si()}}let ht=null,ai=null;function An(e){const t=ht;return ht=e,ai=e&&e.type.__scopeId||null,t}function Cn(e,t=ht,o){if(!t||e._n)return e;const r=(...n)=>{r._d&&Ki(-1);const s=An(t);let a;try{a=e(...n)}finally{An(s),r._d&&Ki(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function It(e,t){if(ht===null)return e;const o=Ln(ht),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,i,l=ke]=t[n];s&&(Ee(s)&&(s={mounted:s,updated:s}),s.deep&&yo(a),r.push({dir:s,instance:o,value:a,oldValue:void 0,arg:i,modifiers:l}))}return e}function jo(e,t,o,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const i=n[a];s&&(i.oldValue=s[a].value);let l=i.dir[r];l&&(io(),to(l,o,8,[e.el,i,e,t]),lo())}}const ii=Symbol("_vte"),li=e=>e.__isTeleport,Er=e=>e&&(e.disabled||e.disabled===""),ci=e=>e&&(e.defer||e.defer===""),di=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ui=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,xs=(e,t)=>{const o=e&&e.to;return Ye(o)?t?t(o):null:o},pi={name:"Teleport",__isTeleport:!0,process(e,t,o,r,n,s,a,i,l,b){const{mc:m,pc:h,pbc:E,o:{insert:z,querySelector:T,createText:k,createComment:M}}=b,p=Er(t.props);let{shapeFlag:c,children:d,dynamicChildren:f}=t;if(e==null){const C=t.el=k(""),I=t.anchor=k("");z(C,o,r),z(I,o,r);const A=(v,_)=>{c&16&&(n&&n.isCE&&(n.ce._teleportTarget=v),m(d,v,_,n,s,a,i,l))},u=()=>{const v=t.target=xs(t.props,T),_=mi(v,t,k,z);v&&(a!=="svg"&&di(v)?a="svg":a!=="mathml"&&ui(v)&&(a="mathml"),p||(A(v,_),Pn(t,!1)))};p&&(A(o,I),Pn(t,!0)),ci(t.props)?(t.el.__isMounted=!1,Dt(()=>{u(),delete t.el.__isMounted},s)):u()}else{if(ci(t.props)&&e.el.__isMounted===!1){Dt(()=>{pi.process(e,t,o,r,n,s,a,i,l,b)},s);return}t.el=e.el,t.targetStart=e.targetStart;const C=t.anchor=e.anchor,I=t.target=e.target,A=t.targetAnchor=e.targetAnchor,u=Er(e.props),v=u?o:I,_=u?C:A;if(a==="svg"||di(I)?a="svg":(a==="mathml"||ui(I))&&(a="mathml"),f?(E(e.dynamicChildren,f,v,n,s,a,i),Vs(e,t,!0)):l||h(e,t,v,_,n,s,a,i,!1),p)u?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):En(t,o,C,b,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const $=t.target=xs(t.props,T);$&&En(t,$,null,b,0)}else u&&En(t,I,A,b,1);Pn(t,p)}},remove(e,t,o,{um:r,o:{remove:n}},s){const{shapeFlag:a,children:i,anchor:l,targetStart:b,targetAnchor:m,target:h,props:E}=e;if(h&&(n(b),n(m)),s&&n(l),a&16){const z=s||!Er(E);for(let T=0;T<i.length;T++){const k=i[T];r(k,t,o,z,!!k.dynamicChildren)}}},move:En,hydrate:zd};function En(e,t,o,{o:{insert:r},m:n},s=2){s===0&&r(e.targetAnchor,t,o);const{el:a,anchor:i,shapeFlag:l,children:b,props:m}=e,h=s===2;if(h&&r(a,t,o),(!h||Er(m))&&l&16)for(let E=0;E<b.length;E++)n(b[E],t,o,2);h&&r(i,t,o)}function zd(e,t,o,r,n,s,{o:{nextSibling:a,parentNode:i,querySelector:l,insert:b,createText:m}},h){const E=t.target=xs(t.props,l);if(E){const z=Er(t.props),T=E._lpa||E.firstChild;if(t.shapeFlag&16)if(z)t.anchor=h(a(e),t,i(e),o,r,n,s),t.targetStart=T,t.targetAnchor=T&&a(T);else{t.anchor=a(e);let k=T;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,E._lpa=t.targetAnchor&&a(t.targetAnchor);break}}k=a(k)}t.targetAnchor||mi(E,t,m,b),h(T&&a(T),t,E,o,r,n,s)}Pn(t,z)}return t.anchor&&a(t.anchor)}const fi=pi;function Pn(e,t){const o=e.ctx;if(o&&o.ut){let r,n;for(t?(r=e.el,n=e.anchor):(r=e.targetStart,n=e.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",o.uid),r=r.nextSibling;o.ut()}}function mi(e,t,o,r){const n=t.targetStart=o(""),s=t.targetAnchor=o("");return n[ii]=s,e&&(r(n,e),r(s,e)),s}const Io=Symbol("_leaveCb"),Sn=Symbol("_enterCb");function Ad(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Uo(()=>{e.isMounted=!0}),Fs(()=>{e.isUnmounting=!0}),e}const Gt=[Function,Array],gi={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gt,onEnter:Gt,onAfterEnter:Gt,onEnterCancelled:Gt,onBeforeLeave:Gt,onLeave:Gt,onAfterLeave:Gt,onLeaveCancelled:Gt,onBeforeAppear:Gt,onAppear:Gt,onAfterAppear:Gt,onAppearCancelled:Gt},hi=e=>{const t=e.subTree;return t.component?hi(t.component):t},Cd={name:"BaseTransition",props:gi,setup(e,{slots:t}){const o=kn(),r=Ad();return()=>{const n=t.default&&_i(t.default(),!0);if(!n||!n.length)return;const s=vi(n),a=xe(e),{mode:i}=a;if(r.isLeaving)return Ns(s);const l=yi(s);if(!l)return Ns(s);let b=Ms(l,a,r,o,h=>b=h);l.type!==_t&&Pr(l,b);let m=o.subTree&&yi(o.subTree);if(m&&m.type!==_t&&!Zo(l,m)&&hi(o).type!==_t){let h=Ms(m,a,r,o);if(Pr(m,h),i==="out-in"&&l.type!==_t)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,o.job.flags&8||o.update(),delete h.afterLeave,m=void 0},Ns(s);i==="in-out"&&l.type!==_t?h.delayLeave=(E,z,T)=>{const k=bi(r,m);k[String(m.key)]=m,E[Io]=()=>{z(),E[Io]=void 0,delete b.delayedLeave,m=void 0},b.delayedLeave=()=>{T(),delete b.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return s}}};function vi(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==_t){t=o;break}}return t}const Ed=Cd;function bi(e,t){const{leavingVNodes:o}=e;let r=o.get(t.type);return r||(r=Object.create(null),o.set(t.type,r)),r}function Ms(e,t,o,r,n){const{appear:s,mode:a,persisted:i=!1,onBeforeEnter:l,onEnter:b,onAfterEnter:m,onEnterCancelled:h,onBeforeLeave:E,onLeave:z,onAfterLeave:T,onLeaveCancelled:k,onBeforeAppear:M,onAppear:p,onAfterAppear:c,onAppearCancelled:d}=t,f=String(e.key),C=bi(o,e),I=(v,_)=>{v&&to(v,r,9,_)},A=(v,_)=>{const $=_[1];I(v,_),ve(v)?v.every(g=>g.length<=1)&&$():v.length<=1&&$()},u={mode:a,persisted:i,beforeEnter(v){let _=l;if(!o.isMounted)if(s)_=M||l;else return;v[Io]&&v[Io](!0);const $=C[f];$&&Zo(e,$)&&$.el[Io]&&$.el[Io](),I(_,[v])},enter(v){let _=b,$=m,g=h;if(!o.isMounted)if(s)_=p||b,$=c||m,g=d||h;else return;let P=!1;const N=v[Sn]=D=>{P||(P=!0,D?I(g,[v]):I($,[v]),u.delayedLeave&&u.delayedLeave(),v[Sn]=void 0)};_?A(_,[v,N]):N()},leave(v,_){const $=String(e.key);if(v[Sn]&&v[Sn](!0),o.isUnmounting)return _();I(E,[v]);let g=!1;const P=v[Io]=N=>{g||(g=!0,_(),N?I(k,[v]):I(T,[v]),v[Io]=void 0,C[$]===e&&delete C[$])};C[$]=e,z?A(z,[v,P]):P()},clone(v){const _=Ms(v,t,o,r,n);return n&&n(_),_}};return u}function Ns(e){if(In(e))return e=To(e),e.children=null,e}function yi(e){if(!In(e))return li(e.type)&&e.children?vi(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&Ee(o.default))return o.default()}}function Pr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Pr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _i(e,t=!1,o){let r=[],n=0;for(let s=0;s<e.length;s++){let a=e[s];const i=o==null?a.key:String(o)+String(a.key!=null?a.key:s);a.type===$e?(a.patchFlag&128&&n++,r=r.concat(_i(a.children,t,i))):(t||a.type!==_t)&&r.push(i!=null?To(a,{key:i}):a)}if(n>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function lt(e,t){return Ee(e)?rt({name:e.name},t,{setup:e}):e}function $i(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Sr(e,t,o,r,n=!1){if(ve(e)){e.forEach((T,k)=>Sr(T,t&&(ve(t)?t[k]:t),o,r,n));return}if(ar(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Sr(e,t,o,r.component.subTree);return}const s=r.shapeFlag&4?Ln(r.component):r.el,a=n?null:s,{i,r:l}=e,b=t&&t.r,m=i.refs===ke?i.refs={}:i.refs,h=i.setupState,E=xe(h),z=h===ke?()=>!1:T=>Re(E,T);if(b!=null&&b!==l&&(Ye(b)?(m[b]=null,z(b)&&(h[b]=null)):nt(b)&&(b.value=null)),Ee(l))rr(l,i,12,[a,m]);else{const T=Ye(l),k=nt(l);if(T||k){const M=()=>{if(e.f){const p=T?z(l)?h[l]:m[l]:l.value;n?ve(p)&&ps(p,s):ve(p)?p.includes(s)||p.push(s):T?(m[l]=[s],z(l)&&(h[l]=m[l])):(l.value=[s],e.k&&(m[e.k]=l.value))}else T?(m[l]=a,z(l)&&(h[l]=a)):k&&(l.value=a,e.k&&(m[e.k]=a))};a?(M.id=-1,Dt(M,o)):M()}}}cn().requestIdleCallback,cn().cancelIdleCallback;const ar=e=>!!e.type.__asyncLoader,In=e=>e.type.__isKeepAlive;function Pd(e,t){wi(e,"a",t)}function Sd(e,t){wi(e,"da",t)}function wi(e,t,o=$t){const r=e.__wdc||(e.__wdc=()=>{let n=o;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Tn(t,r,o),o){let n=o.parent;for(;n&&n.parent;)In(n.parent.vnode)&&Id(r,t,o,n),n=n.parent}}function Id(e,t,o,r){const n=Tn(t,e,r,!0);Ir(()=>{ps(r[t],n)},o)}function Tn(e,t,o=$t,r=!1){if(o){const n=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...a)=>{io();const i=Fr(o),l=to(t,o,e,a);return i(),lo(),l});return r?n.unshift(s):n.push(s),s}}const _o=e=>(t,o=$t)=>{(!kr||e==="sp")&&Tn(e,(...r)=>t(...r),o)},Td=_o("bm"),Uo=_o("m"),Dd=_o("bu"),xd=_o("u"),Fs=_o("bum"),Ir=_o("um"),Md=_o("sp"),Nd=_o("rtg"),Fd=_o("rtc");function kd(e,t=$t){Tn("ec",e,t)}const Od=Symbol.for("v-ndc");function Me(e,t,o,r){let n;const s=o,a=ve(e);if(a||Ye(e)){const i=a&&or(e);let l=!1,b=!1;i&&(l=!Kt(e),b=Po(e),e=fn(e)),n=new Array(e.length);for(let m=0,h=e.length;m<h;m++)n[m]=t(l?b?yn(gt(e[m])):gt(e[m]):e[m],m,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,s)}else if(Ze(e))if(e[Symbol.iterator])n=Array.from(e,(i,l)=>t(i,l,void 0,s));else{const i=Object.keys(e);n=new Array(i.length);for(let l=0,b=i.length;l<b;l++){const m=i[l];n[l]=t(e[m],m,l,s)}}else n=[];return n}function Ld(e,t,o={},r,n){if(ht.ce||ht.parent&&ar(ht.parent)&&ht.parent.ce)return L(),ft($e,null,[Xe("slot",o,r)],64);let s=e[t];s&&s._c&&(s._d=!1),L();const a=s&&zi(s(o)),i=o.key||a&&a.key,l=ft($e,{key:(i&&!Xt(i)?i:`_${t}`)+""},a||[],a&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function zi(e){return e.some(t=>Nr(t)?!(t.type===_t||t.type===$e&&!zi(t.children)):!0)?e:null}const ks=e=>e?Xi(e)?Ln(e):ks(e.parent):null,Tr=rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ks(e.parent),$root:e=>ks(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pi(e),$forceUpdate:e=>e.f||(e.f=()=>{Ds(e.update)}),$nextTick:e=>e.n||(e.n=St.bind(e.proxy)),$watch:e=>au.bind(e)}),Os=(e,t)=>e!==ke&&!e.__isScriptSetup&&Re(e,t),Rd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:r,data:n,props:s,accessCache:a,type:i,appContext:l}=e;let b;if(t[0]!=="$"){const z=a[t];if(z!==void 0)switch(z){case 1:return r[t];case 2:return n[t];case 4:return o[t];case 3:return s[t]}else{if(Os(r,t))return a[t]=1,r[t];if(n!==ke&&Re(n,t))return a[t]=2,n[t];if((b=e.propsOptions[0])&&Re(b,t))return a[t]=3,s[t];if(o!==ke&&Re(o,t))return a[t]=4,o[t];Ls&&(a[t]=0)}}const m=Tr[t];let h,E;if(m)return t==="$attrs"&&yt(e.attrs,"get",""),m(e);if((h=i.__cssModules)&&(h=h[t]))return h;if(o!==ke&&Re(o,t))return a[t]=4,o[t];if(E=l.config.globalProperties,Re(E,t))return E[t]},set({_:e},t,o){const{data:r,setupState:n,ctx:s}=e;return Os(n,t)?(n[t]=o,!0):r!==ke&&Re(r,t)?(r[t]=o,!0):Re(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:r,appContext:n,propsOptions:s}},a){let i;return!!o[a]||e!==ke&&Re(e,a)||Os(t,a)||(i=s[0])&&Re(i,a)||Re(r,a)||Re(Tr,a)||Re(n.config.globalProperties,a)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:Re(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function Ai(e){return ve(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let Ls=!0;function Hd(e){const t=Pi(e),o=e.proxy,r=e.ctx;Ls=!1,t.beforeCreate&&Ci(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:i,provide:l,inject:b,created:m,beforeMount:h,mounted:E,beforeUpdate:z,updated:T,activated:k,deactivated:M,beforeDestroy:p,beforeUnmount:c,destroyed:d,unmounted:f,render:C,renderTracked:I,renderTriggered:A,errorCaptured:u,serverPrefetch:v,expose:_,inheritAttrs:$,components:g,directives:P,filters:N}=t;if(b&&Bd(b,r,null),a)for(const O in a){const R=a[O];Ee(R)&&(r[O]=R.bind(o))}if(n){const O=n.call(o,o);Ze(O)&&(e.data=Ho(O))}if(Ls=!0,s)for(const O in s){const R=s[O],se=Ee(R)?R.bind(o,o):Ee(R.get)?R.get.bind(o,o):ao,q=!Ee(R)&&Ee(R.set)?R.set.bind(o):ao,W=we({get:se,set:q});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>W.value,set:Y=>W.value=Y})}if(i)for(const O in i)Ei(i[O],r,o,O);if(l){const O=Ee(l)?l.call(o):l;Reflect.ownKeys(O).forEach(R=>{qd(R,O[R])})}m&&Ci(m,e,"c");function x(O,R){ve(R)?R.forEach(se=>O(se.bind(o))):R&&O(R.bind(o))}if(x(Td,h),x(Uo,E),x(Dd,z),x(xd,T),x(Pd,k),x(Sd,M),x(kd,u),x(Fd,I),x(Nd,A),x(Fs,c),x(Ir,f),x(Md,v),ve(_))if(_.length){const O=e.exposed||(e.exposed={});_.forEach(R=>{Object.defineProperty(O,R,{get:()=>o[R],set:se=>o[R]=se})})}else e.exposed||(e.exposed={});C&&e.render===ao&&(e.render=C),$!=null&&(e.inheritAttrs=$),g&&(e.components=g),P&&(e.directives=P),v&&$i(e)}function Bd(e,t,o=ao){ve(e)&&(e=Rs(e));for(const r in e){const n=e[r];let s;Ze(n)?"default"in n?s=xn(n.from||r,n.default,!0):s=xn(n.from||r):s=xn(n),nt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function Ci(e,t,o){to(ve(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,o)}function Ei(e,t,o,r){let n=r.includes(".")?Ui(o,r):()=>o[r];if(Ye(e)){const s=t[e];Ee(s)&&tt(n,s)}else if(Ee(e))tt(n,e.bind(o));else if(Ze(e))if(ve(e))e.forEach(s=>Ei(s,t,o,r));else{const s=Ee(e.handler)?e.handler.bind(o):t[e.handler];Ee(s)&&tt(n,s,e)}}function Pi(e){const t=e.type,{mixins:o,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,i=s.get(t);let l;return i?l=i:!n.length&&!o&&!r?l=t:(l={},n.length&&n.forEach(b=>Dn(l,b,a,!0)),Dn(l,t,a)),Ze(t)&&s.set(t,l),l}function Dn(e,t,o,r=!1){const{mixins:n,extends:s}=t;s&&Dn(e,s,o,!0),n&&n.forEach(a=>Dn(e,a,o,!0));for(const a in t)if(!(r&&a==="expose")){const i=jd[a]||o&&o[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const jd={data:Si,props:Ii,emits:Ii,methods:Dr,computed:Dr,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:Dr,directives:Dr,watch:Vd,provide:Si,inject:Ud};function Si(e,t){return t?e?function(){return rt(Ee(e)?e.call(this,this):e,Ee(t)?t.call(this,this):t)}:t:e}function Ud(e,t){return Dr(Rs(e),Rs(t))}function Rs(e){if(ve(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function Tt(e,t){return e?[...new Set([].concat(e,t))]:t}function Dr(e,t){return e?rt(Object.create(null),e,t):t}function Ii(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:rt(Object.create(null),Ai(e),Ai(t??{})):t}function Vd(e,t){if(!e)return t;if(!t)return e;const o=rt(Object.create(null),e);for(const r in t)o[r]=Tt(e[r],t[r]);return o}function Ti(){return{app:null,config:{isNativeTag:Ec,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zd=0;function Wd(e,t){return function(r,n=null){Ee(r)||(r=rt({},r)),n!=null&&!Ze(n)&&(n=null);const s=Ti(),a=new WeakSet,i=[];let l=!1;const b=s.app={_uid:Zd++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Iu,get config(){return s.config},set config(m){},use(m,...h){return a.has(m)||(m&&Ee(m.install)?(a.add(m),m.install(b,...h)):Ee(m)&&(a.add(m),m(b,...h))),b},mixin(m){return s.mixins.includes(m)||s.mixins.push(m),b},component(m,h){return h?(s.components[m]=h,b):s.components[m]},directive(m,h){return h?(s.directives[m]=h,b):s.directives[m]},mount(m,h,E){if(!l){const z=b._ceVNode||Xe(r,n);return z.appContext=s,E===!0?E="svg":E===!1&&(E=void 0),e(z,m,E),l=!0,b._container=m,m.__vue_app__=b,Ln(z.component)}},onUnmount(m){i.push(m)},unmount(){l&&(to(i,b._instance,16),e(null,b._container),delete b._container.__vue_app__)},provide(m,h){return s.provides[m]=h,b},runWithContext(m){const h=ir;ir=b;try{return m()}finally{ir=h}}};return b}}let ir=null;function qd(e,t){if($t){let o=$t.provides;const r=$t.parent&&$t.parent.provides;r===o&&(o=$t.provides=Object.create(r)),o[e]=t}}function xn(e,t,o=!1){const r=$t||ht;if(r||ir){let n=ir?ir._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return o&&Ee(t)?t.call(r&&r.proxy):t}}const Di={},xi=()=>Object.create(Di),Mi=e=>Object.getPrototypeOf(e)===Di;function Kd(e,t,o,r=!1){const n={},s=xi();e.propsDefaults=Object.create(null),Ni(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);o?e.props=r?n:sd(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function Gd(e,t,o,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,i=xe(n),[l]=e.propsOptions;let b=!1;if((r||a>0)&&!(a&16)){if(a&8){const m=e.vnode.dynamicProps;for(let h=0;h<m.length;h++){let E=m[h];if(Mn(e.emitsOptions,E))continue;const z=t[E];if(l)if(Re(s,E))z!==s[E]&&(s[E]=z,b=!0);else{const T=Qt(E);n[T]=Hs(l,i,T,z,e,!1)}else z!==s[E]&&(s[E]=z,b=!0)}}}else{Ni(e,t,n,s)&&(b=!0);let m;for(const h in i)(!t||!Re(t,h)&&((m=qt(h))===h||!Re(t,m)))&&(l?o&&(o[h]!==void 0||o[m]!==void 0)&&(n[h]=Hs(l,i,h,void 0,e,!0)):delete n[h]);if(s!==i)for(const h in s)(!t||!Re(t,h))&&(delete s[h],b=!0)}b&&vo(e.attrs,"set","")}function Ni(e,t,o,r){const[n,s]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(br(l))continue;const b=t[l];let m;n&&Re(n,m=Qt(l))?!s||!s.includes(m)?o[m]=b:(i||(i={}))[m]=b:Mn(e.emitsOptions,l)||(!(l in r)||b!==r[l])&&(r[l]=b,a=!0)}if(s){const l=xe(o),b=i||ke;for(let m=0;m<s.length;m++){const h=s[m];o[h]=Hs(n,l,h,b[h],e,!Re(b,h))}}return a}function Hs(e,t,o,r,n,s){const a=e[o];if(a!=null){const i=Re(a,"default");if(i&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ee(l)){const{propsDefaults:b}=n;if(o in b)r=b[o];else{const m=Fr(n);r=b[o]=l.call(null,t),m()}}else r=l;n.ce&&n.ce._setProp(o,r)}a[0]&&(s&&!i?r=!1:a[1]&&(r===""||r===qt(o))&&(r=!0))}return r}const Jd=new WeakMap;function Fi(e,t,o=!1){const r=o?Jd:t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},i=[];let l=!1;if(!Ee(e)){const m=h=>{l=!0;const[E,z]=Fi(h,t,!0);rt(a,E),z&&i.push(...z)};!o&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!s&&!l)return Ze(e)&&r.set(e,Qo),Qo;if(ve(s))for(let m=0;m<s.length;m++){const h=Qt(s[m]);ki(h)&&(a[h]=ke)}else if(s)for(const m in s){const h=Qt(m);if(ki(h)){const E=s[m],z=a[h]=ve(E)||Ee(E)?{type:E}:rt({},E),T=z.type;let k=!1,M=!0;if(ve(T))for(let p=0;p<T.length;++p){const c=T[p],d=Ee(c)&&c.name;if(d==="Boolean"){k=!0;break}else d==="String"&&(M=!1)}else k=Ee(T)&&T.name==="Boolean";z[0]=k,z[1]=M,(k||Re(z,"default"))&&i.push(h)}}const b=[a,i];return Ze(e)&&r.set(e,b),b}function ki(e){return e[0]!=="$"&&!br(e)}const Bs=e=>e[0]==="_"||e==="$stable",js=e=>ve(e)?e.map(uo):[uo(e)],Yd=(e,t,o)=>{if(t._n)return t;const r=Cn((...n)=>js(t(...n)),o);return r._c=!1,r},Oi=(e,t,o)=>{const r=e._ctx;for(const n in e){if(Bs(n))continue;const s=e[n];if(Ee(s))t[n]=Yd(n,s,r);else if(s!=null){const a=js(s);t[n]=()=>a}}},Li=(e,t)=>{const o=js(t);e.slots.default=()=>o},Ri=(e,t,o)=>{for(const r in t)(o||!Bs(r))&&(e[r]=t[r])},Xd=(e,t,o)=>{const r=e.slots=xi();if(e.vnode.shapeFlag&32){const n=t.__;n&&gs(r,"__",n,!0);const s=t._;s?(Ri(r,t,o),o&&gs(r,"_",s,!0)):Oi(t,r)}else t&&Li(e,t)},Qd=(e,t,o)=>{const{vnode:r,slots:n}=e;let s=!0,a=ke;if(r.shapeFlag&32){const i=t._;i?o&&i===1?s=!1:Ri(n,t,o):(s=!t.$stable,Oi(t,n)),a=t}else t&&(Li(e,t),a={default:1});if(s)for(const i in n)!Bs(i)&&a[i]==null&&delete n[i]},Dt=fu;function eu(e){return tu(e)}function tu(e,t){const o=cn();o.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:i,createComment:l,setText:b,setElementText:m,parentNode:h,nextSibling:E,setScopeId:z=ao,insertStaticContent:T}=e,k=(S,F,B,U=null,V=null,K=null,J=void 0,re=null,ee=!!F.dynamicChildren)=>{if(S===F)return;S&&!Zo(S,F)&&(U=Ge(S),Y(S,V,K,!0),S=null),F.patchFlag===-2&&(ee=!1,F.dynamicChildren=null);const{type:G,ref:he,shapeFlag:ae}=F;switch(G){case Nn:M(S,F,B,U);break;case _t:p(S,F,B,U);break;case Zs:S==null&&c(F,B,U,J);break;case $e:g(S,F,B,U,V,K,J,re,ee);break;default:ae&1?C(S,F,B,U,V,K,J,re,ee):ae&6?P(S,F,B,U,V,K,J,re,ee):(ae&64||ae&128)&&G.process(S,F,B,U,V,K,J,re,ee,Ot)}he!=null&&V?Sr(he,S&&S.ref,K,F||S,!F):he==null&&S&&S.ref!=null&&Sr(S.ref,null,K,S,!0)},M=(S,F,B,U)=>{if(S==null)r(F.el=i(F.children),B,U);else{const V=F.el=S.el;F.children!==S.children&&b(V,F.children)}},p=(S,F,B,U)=>{S==null?r(F.el=l(F.children||""),B,U):F.el=S.el},c=(S,F,B,U)=>{[S.el,S.anchor]=T(S.children,F,B,U,S.el,S.anchor)},d=({el:S,anchor:F},B,U)=>{let V;for(;S&&S!==F;)V=E(S),r(S,B,U),S=V;r(F,B,U)},f=({el:S,anchor:F})=>{let B;for(;S&&S!==F;)B=E(S),n(S),S=B;n(F)},C=(S,F,B,U,V,K,J,re,ee)=>{F.type==="svg"?J="svg":F.type==="math"&&(J="mathml"),S==null?I(F,B,U,V,K,J,re,ee):v(S,F,V,K,J,re,ee)},I=(S,F,B,U,V,K,J,re)=>{let ee,G;const{props:he,shapeFlag:ae,transition:me,dirs:ze}=S;if(ee=S.el=a(S.type,K,he&&he.is,he),ae&8?m(ee,S.children):ae&16&&u(S.children,ee,null,U,V,Us(S,K),J,re),ze&&jo(S,null,U,"created"),A(ee,S,S.scopeId,J,U),he){for(const Ve in he)Ve!=="value"&&!br(Ve)&&s(ee,Ve,null,he[Ve],K,U);"value"in he&&s(ee,"value",null,he.value,K),(G=he.onVnodeBeforeMount)&&po(G,U,S)}ze&&jo(S,null,U,"beforeMount");const Te=ou(V,me);Te&&me.beforeEnter(ee),r(ee,F,B),((G=he&&he.onVnodeMounted)||Te||ze)&&Dt(()=>{G&&po(G,U,S),Te&&me.enter(ee),ze&&jo(S,null,U,"mounted")},V)},A=(S,F,B,U,V)=>{if(B&&z(S,B),U)for(let K=0;K<U.length;K++)z(S,U[K]);if(V){let K=V.subTree;if(F===K||qi(K.type)&&(K.ssContent===F||K.ssFallback===F)){const J=V.vnode;A(S,J,J.scopeId,J.slotScopeIds,V.parent)}}},u=(S,F,B,U,V,K,J,re,ee=0)=>{for(let G=ee;G<S.length;G++){const he=S[G]=re?Do(S[G]):uo(S[G]);k(null,he,F,B,U,V,K,J,re)}},v=(S,F,B,U,V,K,J)=>{const re=F.el=S.el;let{patchFlag:ee,dynamicChildren:G,dirs:he}=F;ee|=S.patchFlag&16;const ae=S.props||ke,me=F.props||ke;let ze;if(B&&Vo(B,!1),(ze=me.onVnodeBeforeUpdate)&&po(ze,B,F,S),he&&jo(F,S,B,"beforeUpdate"),B&&Vo(B,!0),(ae.innerHTML&&me.innerHTML==null||ae.textContent&&me.textContent==null)&&m(re,""),G?_(S.dynamicChildren,G,re,B,U,Us(F,V),K):J||R(S,F,re,null,B,U,Us(F,V),K,!1),ee>0){if(ee&16)$(re,ae,me,B,V);else if(ee&2&&ae.class!==me.class&&s(re,"class",null,me.class,V),ee&4&&s(re,"style",ae.style,me.style,V),ee&8){const Te=F.dynamicProps;for(let Ve=0;Ve<Te.length;Ve++){const Le=Te[Ve],zt=ae[Le],Be=me[Le];(Be!==zt||Le==="value")&&s(re,Le,zt,Be,V,B)}}ee&1&&S.children!==F.children&&m(re,F.children)}else!J&&G==null&&$(re,ae,me,B,V);((ze=me.onVnodeUpdated)||he)&&Dt(()=>{ze&&po(ze,B,F,S),he&&jo(F,S,B,"updated")},U)},_=(S,F,B,U,V,K,J)=>{for(let re=0;re<F.length;re++){const ee=S[re],G=F[re],he=ee.el&&(ee.type===$e||!Zo(ee,G)||ee.shapeFlag&198)?h(ee.el):B;k(ee,G,he,null,U,V,K,J,!0)}},$=(S,F,B,U,V)=>{if(F!==B){if(F!==ke)for(const K in F)!br(K)&&!(K in B)&&s(S,K,F[K],null,V,U);for(const K in B){if(br(K))continue;const J=B[K],re=F[K];J!==re&&K!=="value"&&s(S,K,re,J,V,U)}"value"in B&&s(S,"value",F.value,B.value,V)}},g=(S,F,B,U,V,K,J,re,ee)=>{const G=F.el=S?S.el:i(""),he=F.anchor=S?S.anchor:i("");let{patchFlag:ae,dynamicChildren:me,slotScopeIds:ze}=F;ze&&(re=re?re.concat(ze):ze),S==null?(r(G,B,U),r(he,B,U),u(F.children||[],B,he,V,K,J,re,ee)):ae>0&&ae&64&&me&&S.dynamicChildren?(_(S.dynamicChildren,me,B,V,K,J,re),(F.key!=null||V&&F===V.subTree)&&Vs(S,F,!0)):R(S,F,B,he,V,K,J,re,ee)},P=(S,F,B,U,V,K,J,re,ee)=>{F.slotScopeIds=re,S==null?F.shapeFlag&512?V.ctx.activate(F,B,U,J,ee):N(F,B,U,V,K,J,ee):D(S,F,ee)},N=(S,F,B,U,V,K,J)=>{const re=S.component=_u(S,U,V);if(In(S)&&(re.ctx.renderer=Ot),$u(re,!1,J),re.asyncDep){if(V&&V.registerDep(re,x,J),!S.el){const ee=re.subTree=Xe(_t);p(null,ee,F,B)}}else x(re,S,F,B,V,K,J)},D=(S,F,B)=>{const U=F.component=S.component;if(uu(S,F,B))if(U.asyncDep&&!U.asyncResolved){O(U,F,B);return}else U.next=F,U.update();else F.el=S.el,U.vnode=F},x=(S,F,B,U,V,K,J)=>{const re=()=>{if(S.isMounted){let{next:ae,bu:me,u:ze,parent:Te,vnode:Ve}=S;{const Zt=Hi(S);if(Zt){ae&&(ae.el=Ve.el,O(S,ae,J)),Zt.asyncDep.then(()=>{S.isUnmounted||re()});return}}let Le=ae,zt;Vo(S,!1),ae?(ae.el=Ve.el,O(S,ae,J)):ae=Ve,me&&an(me),(zt=ae.props&&ae.props.onVnodeBeforeUpdate)&&po(zt,Te,ae,Ve),Vo(S,!0);const Be=Zi(S),Ke=S.subTree;S.subTree=Be,k(Ke,Be,h(Ke.el),Ge(Ke),S,V,K),ae.el=Be.el,Le===null&&pu(S,Be.el),ze&&Dt(ze,V),(zt=ae.props&&ae.props.onVnodeUpdated)&&Dt(()=>po(zt,Te,ae,Ve),V)}else{let ae;const{el:me,props:ze}=F,{bm:Te,m:Ve,parent:Le,root:zt,type:Be}=S,Ke=ar(F);Vo(S,!1),Te&&an(Te),!Ke&&(ae=ze&&ze.onVnodeBeforeMount)&&po(ae,Le,F),Vo(S,!0);{zt.ce&&zt.ce._def.shadowRoot!==!1&&zt.ce._injectChildStyle(Be);const Zt=S.subTree=Zi(S);k(null,Zt,B,U,S,V,K),F.el=Zt.el}if(Ve&&Dt(Ve,V),!Ke&&(ae=ze&&ze.onVnodeMounted)){const Zt=F;Dt(()=>po(ae,Le,Zt),V)}(F.shapeFlag&256||Le&&ar(Le.vnode)&&Le.vnode.shapeFlag&256)&&S.a&&Dt(S.a,V),S.isMounted=!0,F=B=U=null}};S.scope.on();const ee=S.effect=new Na(re);S.scope.off();const G=S.update=ee.run.bind(ee),he=S.job=ee.runIfDirty.bind(ee);he.i=S,he.id=S.uid,ee.scheduler=()=>Ds(he),Vo(S,!0),G()},O=(S,F,B)=>{F.component=S;const U=S.vnode.props;S.vnode=F,S.next=null,Gd(S,F.props,U,B),Qd(S,F.children,B),io(),ri(S),lo()},R=(S,F,B,U,V,K,J,re,ee=!1)=>{const G=S&&S.children,he=S?S.shapeFlag:0,ae=F.children,{patchFlag:me,shapeFlag:ze}=F;if(me>0){if(me&128){q(G,ae,B,U,V,K,J,re,ee);return}else if(me&256){se(G,ae,B,U,V,K,J,re,ee);return}}ze&8?(he&16&&Ne(G,V,K),ae!==G&&m(B,ae)):he&16?ze&16?q(G,ae,B,U,V,K,J,re,ee):Ne(G,V,K,!0):(he&8&&m(B,""),ze&16&&u(ae,B,U,V,K,J,re,ee))},se=(S,F,B,U,V,K,J,re,ee)=>{S=S||Qo,F=F||Qo;const G=S.length,he=F.length,ae=Math.min(G,he);let me;for(me=0;me<ae;me++){const ze=F[me]=ee?Do(F[me]):uo(F[me]);k(S[me],ze,B,null,V,K,J,re,ee)}G>he?Ne(S,V,K,!0,!1,ae):u(F,B,U,V,K,J,re,ee,ae)},q=(S,F,B,U,V,K,J,re,ee)=>{let G=0;const he=F.length;let ae=S.length-1,me=he-1;for(;G<=ae&&G<=me;){const ze=S[G],Te=F[G]=ee?Do(F[G]):uo(F[G]);if(Zo(ze,Te))k(ze,Te,B,null,V,K,J,re,ee);else break;G++}for(;G<=ae&&G<=me;){const ze=S[ae],Te=F[me]=ee?Do(F[me]):uo(F[me]);if(Zo(ze,Te))k(ze,Te,B,null,V,K,J,re,ee);else break;ae--,me--}if(G>ae){if(G<=me){const ze=me+1,Te=ze<he?F[ze].el:U;for(;G<=me;)k(null,F[G]=ee?Do(F[G]):uo(F[G]),B,Te,V,K,J,re,ee),G++}}else if(G>me)for(;G<=ae;)Y(S[G],V,K,!0),G++;else{const ze=G,Te=G,Ve=new Map;for(G=Te;G<=me;G++){const At=F[G]=ee?Do(F[G]):uo(F[G]);At.key!=null&&Ve.set(At.key,G)}let Le,zt=0;const Be=me-Te+1;let Ke=!1,Zt=0;const Oo=new Array(Be);for(G=0;G<Be;G++)Oo[G]=0;for(G=ze;G<=ae;G++){const At=S[G];if(zt>=Be){Y(At,V,K,!0);continue}let Lt;if(At.key!=null)Lt=Ve.get(At.key);else for(Le=Te;Le<=me;Le++)if(Oo[Le-Te]===0&&Zo(At,F[Le])){Lt=Le;break}Lt===void 0?Y(At,V,K,!0):(Oo[Lt-Te]=G+1,Lt>=Zt?Zt=Lt:Ke=!0,k(At,F[Lt],B,null,V,K,J,re,ee),zt++)}const Qr=Ke?ru(Oo):Qo;for(Le=Qr.length-1,G=Be-1;G>=0;G--){const At=Te+G,Lt=F[At],cs=At+1<he?F[At+1].el:U;Oo[G]===0?k(null,Lt,B,cs,V,K,J,re,ee):Ke&&(Le<0||G!==Qr[Le]?W(Lt,B,cs,2):Le--)}}},W=(S,F,B,U,V=null)=>{const{el:K,type:J,transition:re,children:ee,shapeFlag:G}=S;if(G&6){W(S.component.subTree,F,B,U);return}if(G&128){S.suspense.move(F,B,U);return}if(G&64){J.move(S,F,B,Ot);return}if(J===$e){r(K,F,B);for(let ae=0;ae<ee.length;ae++)W(ee[ae],F,B,U);r(S.anchor,F,B);return}if(J===Zs){d(S,F,B);return}if(U!==2&&G&1&&re)if(U===0)re.beforeEnter(K),r(K,F,B),Dt(()=>re.enter(K),V);else{const{leave:ae,delayLeave:me,afterLeave:ze}=re,Te=()=>{S.ctx.isUnmounted?n(K):r(K,F,B)},Ve=()=>{ae(K,()=>{Te(),ze&&ze()})};me?me(K,Te,Ve):Ve()}else r(K,F,B)},Y=(S,F,B,U=!1,V=!1)=>{const{type:K,props:J,ref:re,children:ee,dynamicChildren:G,shapeFlag:he,patchFlag:ae,dirs:me,cacheIndex:ze}=S;if(ae===-2&&(V=!1),re!=null&&(io(),Sr(re,null,B,S,!0),lo()),ze!=null&&(F.renderCache[ze]=void 0),he&256){F.ctx.deactivate(S);return}const Te=he&1&&me,Ve=!ar(S);let Le;if(Ve&&(Le=J&&J.onVnodeBeforeUnmount)&&po(Le,F,S),he&6)Oe(S.component,B,U);else{if(he&128){S.suspense.unmount(B,U);return}Te&&jo(S,null,F,"beforeUnmount"),he&64?S.type.remove(S,F,B,Ot,U):G&&!G.hasOnce&&(K!==$e||ae>0&&ae&64)?Ne(G,F,B,!1,!0):(K===$e&&ae&384||!V&&he&16)&&Ne(ee,F,B),U&&pe(S)}(Ve&&(Le=J&&J.onVnodeUnmounted)||Te)&&Dt(()=>{Le&&po(Le,F,S),Te&&jo(S,null,F,"unmounted")},B)},pe=S=>{const{type:F,el:B,anchor:U,transition:V}=S;if(F===$e){Se(B,U);return}if(F===Zs){f(S);return}const K=()=>{n(B),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(S.shapeFlag&1&&V&&!V.persisted){const{leave:J,delayLeave:re}=V,ee=()=>J(B,K);re?re(S.el,K,ee):ee()}else K()},Se=(S,F)=>{let B;for(;S!==F;)B=E(S),n(S),S=B;n(F)},Oe=(S,F,B)=>{const{bum:U,scope:V,job:K,subTree:J,um:re,m:ee,a:G,parent:he,slots:{__:ae}}=S;Bi(ee),Bi(G),U&&an(U),he&&ve(ae)&&ae.forEach(me=>{he.renderCache[me]=void 0}),V.stop(),K&&(K.flags|=8,Y(J,S,F,B)),re&&Dt(re,F),Dt(()=>{S.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},Ne=(S,F,B,U=!1,V=!1,K=0)=>{for(let J=K;J<S.length;J++)Y(S[J],F,B,U,V)},Ge=S=>{if(S.shapeFlag&6)return Ge(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const F=E(S.anchor||S.el),B=F&&F[ii];return B?E(B):F};let ut=!1;const pt=(S,F,B)=>{S==null?F._vnode&&Y(F._vnode,null,null,!0):k(F._vnode||null,S,F,null,null,null,B),F._vnode=S,ut||(ut=!0,ri(),ni(),ut=!1)},Ot={p:k,um:Y,m:W,r:pe,mt:N,mc:u,pc:R,pbc:_,n:Ge,o:e};return{render:pt,hydrate:void 0,createApp:Wd(pt)}}function Us({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Vo({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ou(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vs(e,t,o=!1){const r=e.children,n=t.children;if(ve(r)&&ve(n))for(let s=0;s<r.length;s++){const a=r[s];let i=n[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=n[s]=Do(n[s]),i.el=a.el),!o&&i.patchFlag!==-2&&Vs(a,i)),i.type===Nn&&(i.el=a.el),i.type===_t&&!i.el&&(i.el=a.el)}}function ru(e){const t=e.slice(),o=[0];let r,n,s,a,i;const l=e.length;for(r=0;r<l;r++){const b=e[r];if(b!==0){if(n=o[o.length-1],e[n]<b){t[r]=n,o.push(r);continue}for(s=0,a=o.length-1;s<a;)i=s+a>>1,e[o[i]]<b?s=i+1:a=i;b<e[o[s]]&&(s>0&&(t[r]=o[s-1]),o[s]=r)}}for(s=o.length,a=o[s-1];s-- >0;)o[s]=a,a=t[a];return o}function Hi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hi(t)}function Bi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const nu=Symbol.for("v-scx"),su=()=>xn(nu);function tt(e,t,o){return ji(e,t,o)}function ji(e,t,o=ke){const{immediate:r,deep:n,flush:s,once:a}=o,i=rt({},o),l=t&&r||!t&&s!=="post";let b;if(kr){if(s==="sync"){const z=su();b=z.__watcherHandles||(z.__watcherHandles=[])}else if(!l){const z=()=>{};return z.stop=ao,z.resume=ao,z.pause=ao,z}}const m=$t;i.call=(z,T,k)=>to(z,m,T,k);let h=!1;s==="post"?i.scheduler=z=>{Dt(z,m&&m.suspense)}:s!=="sync"&&(h=!0,i.scheduler=(z,T)=>{T?z():Ds(z)}),i.augmentJob=z=>{t&&(z.flags|=4),h&&(z.flags|=2,m&&(z.id=m.uid,z.i=m))};const E=gd(e,t,i);return kr&&(b?b.push(E):l&&E()),E}function au(e,t,o){const r=this.proxy,n=Ye(e)?e.includes(".")?Ui(r,e):()=>r[e]:e.bind(r,r);let s;Ee(t)?s=t:(s=t.handler,o=t);const a=Fr(this),i=ji(n,s.bind(r),o);return a(),i}function Ui(e,t){const o=t.split(".");return()=>{let r=e;for(let n=0;n<o.length&&r;n++)r=r[o[n]];return r}}const iu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Qt(t)}Modifiers`]||e[`${qt(t)}Modifiers`];function lu(e,t,...o){if(e.isUnmounted)return;const r=e.vnode.props||ke;let n=o;const s=t.startsWith("update:"),a=s&&iu(r,t.slice(7));a&&(a.trim&&(n=o.map(m=>Ye(m)?m.trim():m)),a.number&&(n=o.map(ln)));let i,l=r[i=ms(t)]||r[i=ms(Qt(t))];!l&&s&&(l=r[i=ms(qt(t))]),l&&to(l,e,6,n);const b=r[i+"Once"];if(b){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,to(b,e,6,n)}}function Vi(e,t,o=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},i=!1;if(!Ee(e)){const l=b=>{const m=Vi(b,t,!0);m&&(i=!0,rt(a,m))};!o&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!i?(Ze(e)&&r.set(e,null),null):(ve(s)?s.forEach(l=>a[l]=null):rt(a,s),Ze(e)&&r.set(e,a),a)}function Mn(e,t){return!e||!on(t)?!1:(t=t.slice(2).replace(/Once$/,""),Re(e,t[0].toLowerCase()+t.slice(1))||Re(e,qt(t))||Re(e,t))}function Wy(){}function Zi(e){const{type:t,vnode:o,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:i,emit:l,render:b,renderCache:m,props:h,data:E,setupState:z,ctx:T,inheritAttrs:k}=e,M=An(e);let p,c;try{if(o.shapeFlag&4){const f=n||r,C=f;p=uo(b.call(C,f,m,h,z,E,T)),c=i}else{const f=t;p=uo(f.length>1?f(h,{attrs:i,slots:a,emit:l}):f(h,null)),c=t.props?i:cu(i)}}catch(f){xr.length=0,wn(f,e,1),p=Xe(_t)}let d=p;if(c&&k!==!1){const f=Object.keys(c),{shapeFlag:C}=d;f.length&&C&7&&(s&&f.some(us)&&(c=du(c,s)),d=To(d,c,!1,!0))}return o.dirs&&(d=To(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(o.dirs):o.dirs),o.transition&&Pr(d,o.transition),p=d,An(M),p}const cu=e=>{let t;for(const o in e)(o==="class"||o==="style"||on(o))&&((t||(t={}))[o]=e[o]);return t},du=(e,t)=>{const o={};for(const r in e)(!us(r)||!(r.slice(9)in t))&&(o[r]=e[r]);return o};function uu(e,t,o){const{props:r,children:n,component:s}=e,{props:a,children:i,patchFlag:l}=t,b=s.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&l>=0){if(l&1024)return!0;if(l&16)return r?Wi(r,a,b):!!a;if(l&8){const m=t.dynamicProps;for(let h=0;h<m.length;h++){const E=m[h];if(a[E]!==r[E]&&!Mn(b,E))return!0}}}else return(n||i)&&(!i||!i.$stable)?!0:r===a?!1:r?a?Wi(r,a,b):!0:!!a;return!1}function Wi(e,t,o){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!Mn(o,s))return!0}return!1}function pu({vnode:e,parent:t},o){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=o,t=t.parent;else break}}const qi=e=>e.__isSuspense;function fu(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):wd(e)}const $e=Symbol.for("v-fgt"),Nn=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),Zs=Symbol.for("v-stc"),xr=[];let Ht=null;function L(e=!1){xr.push(Ht=e?null:[])}function mu(){xr.pop(),Ht=xr[xr.length-1]||null}let Mr=1;function Ki(e,t=!1){Mr+=e,e<0&&Ht&&t&&(Ht.hasOnce=!0)}function Gi(e){return e.dynamicChildren=Mr>0?Ht||Qo:null,mu(),Mr>0&&Ht&&Ht.push(e),e}function H(e,t,o,r,n,s){return Gi(w(e,t,o,r,n,s,!0))}function ft(e,t,o,r,n){return Gi(Xe(e,t,o,r,n,!0))}function Nr(e){return e?e.__v_isVNode===!0:!1}function Zo(e,t){return e.type===t.type&&e.key===t.key}const Ji=({key:e})=>e??null,Fn=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Ye(e)||nt(e)||Ee(e)?{i:ht,r:e,k:t,f:!!o}:e:null);function w(e,t=null,o=null,r=0,n=null,s=e===$e?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ji(t),ref:t&&Fn(t),scopeId:ai,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ht};return i?(Ws(l,o),s&128&&e.normalize(l)):o&&(l.shapeFlag|=Ye(o)?8:16),Mr>0&&!a&&Ht&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ht.push(l),l}const Xe=gu;function gu(e,t=null,o=null,r=0,n=null,s=!1){if((!e||e===Od)&&(e=_t),Nr(e)){const i=To(e,t,!0);return o&&Ws(i,o),Mr>0&&!s&&Ht&&(i.shapeFlag&6?Ht[Ht.indexOf(e)]=i:Ht.push(i)),i.patchFlag=-2,i}if(Su(e)&&(e=e.__vccOpts),t){t=hu(t);let{class:i,style:l}=t;i&&!Ye(i)&&(t.class=et(i)),Ze(l)&&(Ss(l)&&!ve(l)&&(l=rt({},l)),t.style=dn(l))}const a=Ye(e)?1:qi(e)?128:li(e)?64:Ze(e)?4:Ee(e)?2:0;return w(e,t,o,r,n,a,s,!0)}function hu(e){return e?Ss(e)||Mi(e)?rt({},e):e:null}function To(e,t,o=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:i,transition:l}=e,b=t?vu(n||{},t):n,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&Ji(b),ref:t&&t.ref?o&&s?ve(s)?s.concat(Fn(t)):[s,Fn(t)]:Fn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==$e?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&To(e.ssContent),ssFallback:e.ssFallback&&To(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Pr(m,l.clone(m)),m}function lr(e=" ",t=0){return Xe(Nn,null,e,t)}function ge(e="",t=!1){return t?(L(),ft(_t,null,e)):Xe(_t,null,e)}function uo(e){return e==null||typeof e=="boolean"?Xe(_t):ve(e)?Xe($e,null,e.slice()):Nr(e)?Do(e):Xe(Nn,null,String(e))}function Do(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:To(e)}function Ws(e,t){let o=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ve(t))o=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Ws(e,n()),n._c&&(n._d=!0));return}else{o=32;const n=t._;!n&&!Mi(t)?t._ctx=ht:n===3&&ht&&(ht.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ee(t)?(t={default:t,_ctx:ht},o=32):(t=String(t),r&64?(o=16,t=[lr(t)]):o=8);e.children=t,e.shapeFlag|=o}function vu(...e){const t={};for(let o=0;o<e.length;o++){const r=e[o];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=et([t.class,r.class]));else if(n==="style")t.style=dn([t.style,r.style]);else if(on(n)){const s=t[n],a=r[n];a&&s!==a&&!(ve(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function po(e,t,o,r=null){to(e,t,7,[o,r])}const bu=Ti();let yu=0;function _u(e,t,o){const r=e.type,n=(t?t.appContext:e.appContext)||bu,s={uid:yu++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fi(r,n),emitsOptions:Vi(r,n),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=lu.bind(null,s),e.ce&&e.ce(s),s}let $t=null;const kn=()=>$t||ht;let On,qs;{const e=cn(),t=(o,r)=>{let n;return(n=e[o])||(n=e[o]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};On=t("__VUE_INSTANCE_SETTERS__",o=>$t=o),qs=t("__VUE_SSR_SETTERS__",o=>kr=o)}const Fr=e=>{const t=$t;return On(e),e.scope.on(),()=>{e.scope.off(),On(t)}},Yi=()=>{$t&&$t.scope.off(),On(null)};function Xi(e){return e.vnode.shapeFlag&4}let kr=!1;function $u(e,t=!1,o=!1){t&&qs(t);const{props:r,children:n}=e.vnode,s=Xi(e);Kd(e,r,s,t),Xd(e,n,o||t);const a=s?wu(e,t):void 0;return t&&qs(!1),a}function wu(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Rd);const{setup:r}=o;if(r){io();const n=e.setupContext=r.length>1?Au(e):null,s=Fr(e),a=rr(r,e,0,[e.props,n]),i=Pa(a);if(lo(),s(),(i||e.sp)&&!ar(e)&&$i(e),i){if(a.then(Yi,Yi),t)return a.then(l=>{Qi(e,l)}).catch(l=>{wn(l,e,0)});e.asyncDep=a}else Qi(e,a)}else el(e)}function Qi(e,t,o){Ee(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ze(t)&&(e.setupState=Xa(t)),el(e)}function el(e,t,o){const r=e.type;e.render||(e.render=r.render||ao);{const n=Fr(e);io();try{Hd(e)}finally{lo(),n()}}}const zu={get(e,t){return yt(e,"get",""),e[t]}};function Au(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,zu),slots:e.slots,emit:e.emit,expose:t}}function Ln(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xa(ad(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in Tr)return Tr[o](e)},has(t,o){return o in t||o in Tr}})):e.proxy}const Cu=/(?:^|[-_])(\w)/g,Eu=e=>e.replace(Cu,t=>t.toUpperCase()).replace(/[-_]/g,"");function Pu(e,t=!0){return Ee(e)?e.displayName||e.name:e.name||t&&e.__name}function tl(e,t,o=!1){let r=Pu(t);if(!r&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(r=n[1])}if(!r&&e&&e.parent){const n=s=>{for(const a in s)if(s[a]===t)return a};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?Eu(r):o?"App":"Anonymous"}function Su(e){return Ee(e)&&"__vccOpts"in e}const we=(e,t)=>fd(e,t,kr);function ol(e,t,o){const r=arguments.length;return r===2?Ze(t)&&!ve(t)?Nr(t)?Xe(e,null,[t]):Xe(e,t):Xe(e,null,t):(r>3?o=Array.prototype.slice.call(arguments,2):r===3&&Nr(o)&&(o=[o]),Xe(e,t,o))}const Iu="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ks;const rl=typeof window<"u"&&window.trustedTypes;if(rl)try{Ks=rl.createPolicy("vue",{createHTML:e=>e})}catch{}const nl=Ks?e=>Ks.createHTML(e):e=>e,Tu="http://www.w3.org/2000/svg",Du="http://www.w3.org/1998/Math/MathML",$o=typeof document<"u"?document:null,sl=$o&&$o.createElement("template"),xu={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,r)=>{const n=t==="svg"?$o.createElementNS(Tu,e):t==="mathml"?$o.createElementNS(Du,e):o?$o.createElement(e,{is:o}):$o.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>$o.createTextNode(e),createComment:e=>$o.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$o.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,r,n,s){const a=o?o.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),o),!(n===s||!(n=n.nextSibling)););else{sl.innerHTML=nl(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const i=sl.content;if(r==="svg"||r==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,o)}return[a?a.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},xo="transition",Or="animation",Lr=Symbol("_vtc"),al={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Mu=rt({},gi,al),Nu=(e=>(e.displayName="Transition",e.props=Mu,e))((e,{slots:t})=>ol(Ed,Fu(e),t)),Wo=(e,t=[])=>{ve(e)?e.forEach(o=>o(...t)):e&&e(...t)},il=e=>e?ve(e)?e.some(t=>t.length>1):e.length>1:!1;function Fu(e){const t={};for(const g in e)g in al||(t[g]=e[g]);if(e.css===!1)return t;const{name:o="v",type:r,duration:n,enterFromClass:s=`${o}-enter-from`,enterActiveClass:a=`${o}-enter-active`,enterToClass:i=`${o}-enter-to`,appearFromClass:l=s,appearActiveClass:b=a,appearToClass:m=i,leaveFromClass:h=`${o}-leave-from`,leaveActiveClass:E=`${o}-leave-active`,leaveToClass:z=`${o}-leave-to`}=e,T=ku(n),k=T&&T[0],M=T&&T[1],{onBeforeEnter:p,onEnter:c,onEnterCancelled:d,onLeave:f,onLeaveCancelled:C,onBeforeAppear:I=p,onAppear:A=c,onAppearCancelled:u=d}=t,v=(g,P,N,D)=>{g._enterCancelled=D,qo(g,P?m:i),qo(g,P?b:a),N&&N()},_=(g,P)=>{g._isLeaving=!1,qo(g,h),qo(g,z),qo(g,E),P&&P()},$=g=>(P,N)=>{const D=g?A:c,x=()=>v(P,g,N);Wo(D,[P,x]),ll(()=>{qo(P,g?l:s),wo(P,g?m:i),il(D)||cl(P,r,k,x)})};return rt(t,{onBeforeEnter(g){Wo(p,[g]),wo(g,s),wo(g,a)},onBeforeAppear(g){Wo(I,[g]),wo(g,l),wo(g,b)},onEnter:$(!1),onAppear:$(!0),onLeave(g,P){g._isLeaving=!0;const N=()=>_(g,P);wo(g,h),g._enterCancelled?(wo(g,E),pl()):(pl(),wo(g,E)),ll(()=>{g._isLeaving&&(qo(g,h),wo(g,z),il(f)||cl(g,r,M,N))}),Wo(f,[g,N])},onEnterCancelled(g){v(g,!1,void 0,!0),Wo(d,[g])},onAppearCancelled(g){v(g,!0,void 0,!0),Wo(u,[g])},onLeaveCancelled(g){_(g),Wo(C,[g])}})}function ku(e){if(e==null)return null;if(Ze(e))return[Gs(e.enter),Gs(e.leave)];{const t=Gs(e);return[t,t]}}function Gs(e){return hs(e)}function wo(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[Lr]||(e[Lr]=new Set)).add(t)}function qo(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const o=e[Lr];o&&(o.delete(t),o.size||(e[Lr]=void 0))}function ll(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Ou=0;function cl(e,t,o,r){const n=e._endId=++Ou,s=()=>{n===e._endId&&r()};if(o!=null)return setTimeout(s,o);const{type:a,timeout:i,propCount:l}=Lu(e,t);if(!a)return r();const b=a+"end";let m=0;const h=()=>{e.removeEventListener(b,E),s()},E=z=>{z.target===e&&++m>=l&&h()};setTimeout(()=>{m<l&&h()},i+1),e.addEventListener(b,E)}function Lu(e,t){const o=window.getComputedStyle(e),r=T=>(o[T]||"").split(", "),n=r(`${xo}Delay`),s=r(`${xo}Duration`),a=dl(n,s),i=r(`${Or}Delay`),l=r(`${Or}Duration`),b=dl(i,l);let m=null,h=0,E=0;t===xo?a>0&&(m=xo,h=a,E=s.length):t===Or?b>0&&(m=Or,h=b,E=l.length):(h=Math.max(a,b),m=h>0?a>b?xo:Or:null,E=m?m===xo?s.length:l.length:0);const z=m===xo&&/\b(transform|all)(,|$)/.test(r(`${xo}Property`).toString());return{type:m,timeout:h,propCount:E,hasTransform:z}}function dl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,r)=>ul(o)+ul(e[r])))}function ul(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pl(){return document.body.offsetHeight}function Ru(e,t,o){const r=e[Lr];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const Rn=Symbol("_vod"),fl=Symbol("_vsh"),Hu={beforeMount(e,{value:t},{transition:o}){e[Rn]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):Rr(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:r}){!t!=!o&&(r?t?(r.beforeEnter(e),Rr(e,!0),r.enter(e)):r.leave(e,()=>{Rr(e,!1)}):Rr(e,t))},beforeUnmount(e,{value:t}){Rr(e,t)}};function Rr(e,t){e.style.display=t?e[Rn]:"none",e[fl]=!t}const Bu=Symbol(""),ju=/(^|;)\s*display\s*:/;function Uu(e,t,o){const r=e.style,n=Ye(o);let s=!1;if(o&&!n){if(t)if(Ye(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();o[i]==null&&Hn(r,i,"")}else for(const a in t)o[a]==null&&Hn(r,a,"");for(const a in o)a==="display"&&(s=!0),Hn(r,a,o[a])}else if(n){if(t!==o){const a=r[Bu];a&&(o+=";"+a),r.cssText=o,s=ju.test(o)}}else t&&e.removeAttribute("style");Rn in e&&(e[Rn]=s?r.display:"",e[fl]&&(r.display="none"))}const ml=/\s*!important$/;function Hn(e,t,o){if(ve(o))o.forEach(r=>Hn(e,t,r));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const r=Vu(e,t);ml.test(o)?e.setProperty(qt(r),o.replace(ml,""),"important"):e[r]=o}}const gl=["Webkit","Moz","ms"],Js={};function Vu(e,t){const o=Js[t];if(o)return o;let r=Qt(t);if(r!=="filter"&&r in e)return Js[t]=r;r=Ia(r);for(let n=0;n<gl.length;n++){const s=gl[n]+r;if(s in e)return Js[t]=s}return t}const hl="http://www.w3.org/1999/xlink";function vl(e,t,o,r,n,s=Fc(t)){r&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(hl,t.slice(6,t.length)):e.setAttributeNS(hl,t,o):o==null||s&&!Da(o)?e.removeAttribute(t):e.setAttribute(t,s?"":Xt(o)?String(o):o)}function bl(e,t,o,r,n){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?nl(o):o);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,l=o==null?e.type==="checkbox"?"on":"":String(o);(i!==l||!("_value"in e))&&(e.value=l),o==null&&e.removeAttribute(t),e._value=o;return}let a=!1;if(o===""||o==null){const i=typeof e[t];i==="boolean"?o=Da(o):o==null&&i==="string"?(o="",a=!0):i==="number"&&(o=0,a=!0)}try{e[t]=o}catch{}a&&e.removeAttribute(n||t)}function Ko(e,t,o,r){e.addEventListener(t,o,r)}function Zu(e,t,o,r){e.removeEventListener(t,o,r)}const yl=Symbol("_vei");function Wu(e,t,o,r,n=null){const s=e[yl]||(e[yl]={}),a=s[t];if(r&&a)a.value=r;else{const[i,l]=qu(t);if(r){const b=s[t]=Ju(r,n);Ko(e,i,b,l)}else a&&(Zu(e,i,a,l),s[t]=void 0)}}const _l=/(?:Once|Passive|Capture)$/;function qu(e){let t;if(_l.test(e)){t={};let r;for(;r=e.match(_l);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):qt(e.slice(2)),t]}let Ys=0;const Ku=Promise.resolve(),Gu=()=>Ys||(Ku.then(()=>Ys=0),Ys=Date.now());function Ju(e,t){const o=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=o.attached)return;to(Yu(r,o.value),t,5,[r])};return o.value=e,o.attached=Gu(),o}function Yu(e,t){if(ve(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const $l=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Xu=(e,t,o,r,n,s)=>{const a=n==="svg";t==="class"?Ru(e,r,a):t==="style"?Uu(e,o,r):on(t)?us(t)||Wu(e,t,o,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qu(e,t,r,a))?(bl(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vl(e,t,r,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ye(r))?bl(e,Qt(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),vl(e,t,r,a))};function Qu(e,t,o,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&$l(t)&&Ee(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return $l(t)&&Ye(o)?!1:t in e}const wl={};/*! #__NO_SIDE_EFFECTS__ */function ep(e,t,o){const r=lt(e,t);nn(r)&&rt(r,t);class n extends Xs{constructor(a){super(r,a,o)}}return n.def=r,n}const tp=typeof HTMLElement<"u"?HTMLElement:class{};class Xs extends tp{constructor(t,o={},r=Sl){super(),this._def=t,this._props=o,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Sl?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Xs){this._parent=t;break}this._instance||(this._resolved?this._mount(this._def):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._inheritParentContext(t))}_inheritParentContext(t=this._parent){t&&this._app&&Object.setPrototypeOf(this._app._context.provides,t._instance.provides)}disconnectedCallback(){this._connected=!1,St(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,n=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:a}=r;let i;if(s&&!ve(s))for(const l in s){const b=s[l];(b===Number||b&&b.type===Number)&&(l in this._props&&(this._props[l]=hs(this._props[l])),(i||(i=Object.create(null)))[Qt(l)]=!0)}this._numberProps=i,this._resolveProps(r),this.shadowRoot&&this._applyStyles(a),this._mount(r)},o=this._def.__asyncLoader;o?this._pendingResolve=o().then(r=>{r.configureApp=this._def.configureApp,t(this._def=r,!0)}):t(this._def)}_mount(t){this._app=this._createApp(t),this._inheritParentContext(),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const o=this._instance&&this._instance.exposed;if(o)for(const r in o)Re(this,r)||Object.defineProperty(this,r,{get:()=>fe(o[r])})}_resolveProps(t){const{props:o}=t,r=ve(o)?o:Object.keys(o||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n]);for(const n of r.map(Qt))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(s){this._setProp(n,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const o=this.hasAttribute(t);let r=o?this.getAttribute(t):wl;const n=Qt(t);o&&this._numberProps&&this._numberProps[n]&&(r=hs(r)),this._setProp(n,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,o,r=!0,n=!1){if(o!==this._props[t]&&(o===wl?delete this._props[t]:(this._props[t]=o,t==="key"&&this._app&&(this._app._ceVNode.key=o)),n&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),o===!0?this.setAttribute(qt(t),""):typeof o=="string"||typeof o=="number"?this.setAttribute(qt(t),o+""):o||this.removeAttribute(qt(t)),s&&s.observe(this,{attributes:!0})}}_update(){const t=this._createVNode();this._app&&(t.appContext=this._app._context),ap(t,this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const o=Xe(this._def,rt(t,this._props));return this._instance||(o.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const n=(s,a)=>{this.dispatchEvent(new CustomEvent(s,nn(a[0])?rt({detail:a},a[0]):{detail:a}))};r.emit=(s,...a)=>{n(s,a),qt(s)!==s&&n(qt(s),a)},this._setParent()}),o}_applyStyles(t,o){if(!t)return;if(o){if(o===this._def||this._styleChildren.has(o))return;this._styleChildren.add(o)}const r=this._nonce;for(let n=t.length-1;n>=0;n--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=t[n],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let o;for(;o=this.firstChild;){const r=o.nodeType===1&&o.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(o),this.removeChild(o)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),o=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const n=t[r],s=n.getAttribute("name")||"default",a=this._slots[s],i=n.parentNode;if(a)for(const l of a){if(o&&l.nodeType===1){const b=o+"-s",m=document.createTreeWalker(l,1);l.setAttribute(b,"");let h;for(;h=m.nextNode();)h.setAttribute(b,"")}i.insertBefore(l,n)}else for(;n.firstChild;)i.insertBefore(n.firstChild,n);i.removeChild(n)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}const Bn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?o=>an(t,o):t};function op(e){e.target.composing=!0}function zl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cr=Symbol("_assign"),Jt={created(e,{modifiers:{lazy:t,trim:o,number:r}},n){e[cr]=Bn(n);const s=r||n.props&&n.props.type==="number";Ko(e,t?"change":"input",a=>{if(a.target.composing)return;let i=e.value;o&&(i=i.trim()),s&&(i=ln(i)),e[cr](i)}),o&&Ko(e,"change",()=>{e.value=e.value.trim()}),t||(Ko(e,"compositionstart",op),Ko(e,"compositionend",zl),Ko(e,"change",zl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:r,trim:n,number:s}},a){if(e[cr]=Bn(a),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?ln(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===o||n&&e.value.trim()===l)||(e.value=l))}},Al={deep:!0,created(e,{value:t,modifiers:{number:o}},r){const n=rn(t);Ko(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>o?ln(jn(a)):jn(a));e[cr](e.multiple?n?new Set(s):s:s[0]),e._assigning=!0,St(()=>{e._assigning=!1})}),e[cr]=Bn(r)},mounted(e,{value:t}){Cl(e,t)},beforeUpdate(e,t,o){e[cr]=Bn(o)},updated(e,{value:t}){e._assigning||Cl(e,t)}};function Cl(e,t){const o=e.multiple,r=ve(t);if(!(o&&!r&&!rn(t))){for(let n=0,s=e.options.length;n<s;n++){const a=e.options[n],i=jn(a);if(o)if(r){const l=typeof i;l==="string"||l==="number"?a.selected=t.some(b=>String(b)===String(i)):a.selected=Oc(t,i)>-1}else a.selected=t.has(i);else if(un(jn(a),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function jn(e){return"_value"in e?e._value:e.value}const rp=["ctrl","shift","alt","meta"],np={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>rp.some(o=>e[`${o}Key`]&&!t.includes(o))},Bt=(e,t)=>{const o=e._withMods||(e._withMods={}),r=t.join(".");return o[r]||(o[r]=(n,...s)=>{for(let a=0;a<t.length;a++){const i=np[t[a]];if(i&&i(n,t))return}return e(n,...s)})},sp=rt({patchProp:Xu},xu);let El;function Pl(){return El||(El=eu(sp))}const ap=(...e)=>{Pl().render(...e)},Sl=(...e)=>{const t=Pl().createApp(...e),{mount:o}=t;return t.mount=r=>{const n=lp(r);if(!n)return;const s=t._component;!Ee(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=o(n,!1,ip(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function ip(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function lp(e){return Ye(e)?document.querySelector(e):e}const y={debug:(e,...t)=>{},info:(e,...t)=>{},warn:(e,...t)=>{console.warn(`⚠️ ${e}`,...t)},error:(e,...t)=>{console.error(`❌ ${e}`,...t)},success:(e,...t)=>{},process:(e,...t)=>{},time:e=>{},timeEnd:e=>{},group:e=>{},groupEnd:()=>{}};var cp=Object.defineProperty,Un=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,Dl=(e,t,o)=>t in e?cp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,dr=(e,t)=>{for(var o in t||(t={}))Il.call(t,o)&&Dl(e,o,t[o]);if(Un)for(var o of Un(t))Tl.call(t,o)&&Dl(e,o,t[o]);return e},xl=(e,t)=>{var o={};for(var r in e)Il.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&Un)for(var r of Un(e))t.indexOf(r)<0&&Tl.call(e,r)&&(o[r]=e[r]);return o};const Ml="[vue-draggable-plus]: ";function dp(e){console.warn(Ml+e)}function up(e){console.error(Ml+e)}function Nl(e,t,o){return o>=0&&o<e.length&&e.splice(o,0,e.splice(t,1)[0]),e}function pp(e){return e.replace(/-(\w)/g,(t,o)=>o?o.toUpperCase():"")}function fp(e){return Object.keys(e).reduce((t,o)=>(typeof e[o]<"u"&&(t[pp(o)]=e[o]),t),{})}function Fl(e,t){return Array.isArray(e)&&e.splice(t,1),e}function kl(e,t,o){return Array.isArray(e)&&e.splice(t,0,o),e}function mp(e){return typeof e>"u"}function gp(e){return typeof e=="string"}function Ol(e,t,o){const r=e.children[o];e.insertBefore(t,r)}function Qs(e){e.parentNode&&e.parentNode.removeChild(e)}function hp(e,t=document){var o;let r=null;return typeof t?.querySelector=="function"?r=(o=t?.querySelector)==null?void 0:o.call(t,e):r=document.querySelector(e),r||dp(`Element not found: ${e}`),r}function vp(e,t,o=null){return function(...r){return e.apply(o,r),t.apply(o,r)}}function bp(e,t){const o=dr({},e);return Object.keys(t).forEach(r=>{o[r]?o[r]=vp(e[r],t[r]):o[r]=t[r]}),o}function yp(e){return e instanceof HTMLElement}function Ll(e,t){Object.keys(e).forEach(o=>{t(o,e[o])})}function _p(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const $p=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Rl(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),o.push.apply(o,r)}return o}function fo(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Rl(Object(o),!0).forEach(function(r){wp(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Rl(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function Vn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vn=function(t){return typeof t}:Vn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}function wp(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function zo(){return zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},zo.apply(this,arguments)}function zp(e,t){if(e==null)return{};var o={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function Ap(e,t){if(e==null)return{};var o=zp(e,t),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Cp="1.15.2";function Ao(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Co=Ao(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Hr=Ao(/Edge/i),Hl=Ao(/firefox/i),Br=Ao(/safari/i)&&!Ao(/chrome/i)&&!Ao(/android/i),Bl=Ao(/iP(ad|od|hone)/i),jl=Ao(/chrome/i)&&Ao(/android/i),Ul={capture:!1,passive:!1};function He(e,t,o){e.addEventListener(t,o,!Co&&Ul)}function Fe(e,t,o){e.removeEventListener(t,o,!Co&&Ul)}function Zn(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ep(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function oo(e,t,o,r){if(e){o=o||document;do{if(t!=null&&(t[0]===">"?e.parentNode===o&&Zn(e,t):Zn(e,t))||r&&e===o)return e;if(e===o)break}while(e=Ep(e))}return null}var Vl=/\s+/g;function jt(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Vl," ").replace(" "+t+" "," ");e.className=(r+(o?" "+t:"")).replace(Vl," ")}}function Ae(e,t,o){var r=e&&e.style;if(r){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),t===void 0?o:o[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=o+(typeof o=="string"?"":"px")}}function ur(e,t){var o="";if(typeof e=="string")o=e;else do{var r=Ae(e,"transform");r&&r!=="none"&&(o=r+" "+o)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function Zl(e,t,o){if(e){var r=e.getElementsByTagName(t),n=0,s=r.length;if(o)for(;n<s;n++)o(r[n],n);return r}return[]}function mo(){var e=document.scrollingElement;return e||document.documentElement}function ct(e,t,o,r,n){if(!(!e.getBoundingClientRect&&e!==window)){var s,a,i,l,b,m,h;if(e!==window&&e.parentNode&&e!==mo()?(s=e.getBoundingClientRect(),a=s.top,i=s.left,l=s.bottom,b=s.right,m=s.height,h=s.width):(a=0,i=0,l=window.innerHeight,b=window.innerWidth,m=window.innerHeight,h=window.innerWidth),(t||o)&&e!==window&&(n=n||e.parentNode,!Co))do if(n&&n.getBoundingClientRect&&(Ae(n,"transform")!=="none"||o&&Ae(n,"position")!=="static")){var E=n.getBoundingClientRect();a-=E.top+parseInt(Ae(n,"border-top-width")),i-=E.left+parseInt(Ae(n,"border-left-width")),l=a+s.height,b=i+s.width;break}while(n=n.parentNode);if(r&&e!==window){var z=ur(n||e),T=z&&z.a,k=z&&z.d;z&&(a/=k,i/=T,h/=T,m/=k,l=a+m,b=i+h)}return{top:a,left:i,bottom:l,right:b,width:h,height:m}}}function Wl(e,t,o){for(var r=Mo(e,!0),n=ct(e)[t];r;){var s=ct(r)[o],a=void 0;if(a=n>=s,!a)return r;if(r===mo())break;r=Mo(r,!1)}return!1}function pr(e,t,o,r){for(var n=0,s=0,a=e.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==Ce.ghost&&(r||a[s]!==Ce.dragged)&&oo(a[s],o.draggable,e,!1)){if(n===t)return a[s];n++}s++}return null}function ea(e,t){for(var o=e.lastElementChild;o&&(o===Ce.ghost||Ae(o,"display")==="none"||t&&!Zn(o,t));)o=o.previousElementSibling;return o||null}function Yt(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ce.clone&&(!t||Zn(e,t))&&o++;return o}function ql(e){var t=0,o=0,r=mo();if(e)do{var n=ur(e),s=n.a,a=n.d;t+=e.scrollLeft*s,o+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,o]}function Pp(e,t){for(var o in e)if(e.hasOwnProperty(o)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[o][r])return Number(o)}return-1}function Mo(e,t){if(!e||!e.getBoundingClientRect)return mo();var o=e,r=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=Ae(o);if(o.clientWidth<o.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return mo();if(r||t)return o;r=!0}}while(o=o.parentNode);return mo()}function Sp(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function ta(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var jr;function Kl(e,t){return function(){if(!jr){var o=arguments,r=this;o.length===1?e.call(r,o[0]):e.apply(r,o),jr=setTimeout(function(){jr=void 0},t)}}}function Ip(){clearTimeout(jr),jr=void 0}function Gl(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function Jl(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function Yl(e,t,o){var r={};return Array.from(e.children).forEach(function(n){var s,a,i,l;if(!(!oo(n,t.draggable,e,!1)||n.animated||n===o)){var b=ct(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,b.left),r.top=Math.min((a=r.top)!==null&&a!==void 0?a:1/0,b.top),r.right=Math.max((i=r.right)!==null&&i!==void 0?i:-1/0,b.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,b.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Ut="Sortable"+new Date().getTime();function Tp(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(Ae(r,"display")==="none"||r===Ce.ghost)){e.push({target:r,rect:ct(r)});var n=fo({},e[e.length-1].rect);if(r.thisAnimationDuration){var s=ur(r,!0);s&&(n.top-=s.f,n.left-=s.e)}r.fromRect=n}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(Pp(e,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var n=!1,s=0;e.forEach(function(a){var i=0,l=a.target,b=l.fromRect,m=ct(l),h=l.prevFromRect,E=l.prevToRect,z=a.rect,T=ur(l,!0);T&&(m.top-=T.f,m.left-=T.e),l.toRect=m,l.thisAnimationDuration&&ta(h,m)&&!ta(b,m)&&(z.top-m.top)/(z.left-m.left)===(b.top-m.top)/(b.left-m.left)&&(i=xp(z,h,E,r.options)),ta(m,b)||(l.prevFromRect=b,l.prevToRect=m,i||(i=r.options.animation),r.animate(l,z,m,i)),i&&(n=!0,s=Math.max(s,i),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},i),l.thisAnimationDuration=i)}),clearTimeout(t),n?t=setTimeout(function(){typeof o=="function"&&o()},s):typeof o=="function"&&o(),e=[]},animate:function(o,r,n,s){if(s){Ae(o,"transition",""),Ae(o,"transform","");var a=ur(this.el),i=a&&a.a,l=a&&a.d,b=(r.left-n.left)/(i||1),m=(r.top-n.top)/(l||1);o.animatingX=!!b,o.animatingY=!!m,Ae(o,"transform","translate3d("+b+"px,"+m+"px,0)"),this.forRepaintDummy=Dp(o),Ae(o,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Ae(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){Ae(o,"transition",""),Ae(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},s)}}}}function Dp(e){return e.offsetWidth}function xp(e,t,o,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*r.animation}var fr=[],oa={initializeByDefault:!0},Ur={mount:function(e){for(var t in oa)oa.hasOwnProperty(t)&&!(t in e)&&(e[t]=oa[t]);fr.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),fr.push(e)},pluginEvent:function(e,t,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var n=e+"Global";fr.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][n]&&t[s.pluginName][n](fo({sortable:t},o)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](fo({sortable:t},o)))})},initializePlugins:function(e,t,o,r){fr.forEach(function(a){var i=a.pluginName;if(!(!e.options[i]&&!a.initializeByDefault)){var l=new a(e,t,e.options);l.sortable=e,l.options=e.options,e[i]=l,zo(o,l.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var s=this.modifyOption(e,n,e.options[n]);typeof s<"u"&&(e.options[n]=s)}},getEventProperties:function(e,t){var o={};return fr.forEach(function(r){typeof r.eventProperties=="function"&&zo(o,r.eventProperties.call(t[r.pluginName],e))}),o},modifyOption:function(e,t,o){var r;return fr.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[t]=="function"&&(r=n.optionListeners[t].call(e[n.pluginName],o))}),r}};function Mp(e){var t=e.sortable,o=e.rootEl,r=e.name,n=e.targetEl,s=e.cloneEl,a=e.toEl,i=e.fromEl,l=e.oldIndex,b=e.newIndex,m=e.oldDraggableIndex,h=e.newDraggableIndex,E=e.originalEvent,z=e.putSortable,T=e.extraEventProperties;if(t=t||o&&o[Ut],!!t){var k,M=t.options,p="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Co&&!Hr?k=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(r,!0,!0)),k.to=a||o,k.from=i||o,k.item=n||o,k.clone=s,k.oldIndex=l,k.newIndex=b,k.oldDraggableIndex=m,k.newDraggableIndex=h,k.originalEvent=E,k.pullMode=z?z.lastPutMode:void 0;var c=fo(fo({},T),Ur.getEventProperties(r,t));for(var d in c)k[d]=c[d];o&&o.dispatchEvent(k),M[p]&&M[p].call(t,k)}}var Np=["evt"],Ft=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,n=Ap(o,Np);Ur.pluginEvent.bind(Ce)(e,t,fo({dragEl:ne,parentEl:ot,ghostEl:Pe,rootEl:Je,nextEl:Go,lastDownEl:Wn,cloneEl:Qe,cloneHidden:No,dragStarted:Zr,putSortable:vt,activeSortable:Ce.active,originalEvent:r,oldIndex:mr,oldDraggableIndex:Vr,newIndex:Vt,newDraggableIndex:Fo,hideGhostForTarget:nc,unhideGhostForTarget:sc,cloneNowHidden:function(){No=!0},cloneNowShown:function(){No=!1},dispatchSortableEvent:function(s){xt({sortable:t,name:s,originalEvent:r})}},n))};function xt(e){Mp(fo({putSortable:vt,cloneEl:Qe,targetEl:ne,rootEl:Je,oldIndex:mr,oldDraggableIndex:Vr,newIndex:Vt,newDraggableIndex:Fo},e))}var ne,ot,Pe,Je,Go,Wn,Qe,No,mr,Vt,Vr,Fo,qn,vt,gr=!1,Kn=!1,Gn=[],Jo,ro,ra,na,Xl,Ql,Zr,hr,Wr,qr=!1,Jn=!1,Yn,wt,sa=[],aa=!1,Xn=[],Qn=typeof document<"u",es=Bl,ec=Hr||Co?"cssFloat":"float",Fp=Qn&&!jl&&!Bl&&"draggable"in document.createElement("div"),tc=function(){if(Qn){if(Co)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),oc=function(e,t){var o=Ae(e),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=pr(e,0,t),s=pr(e,1,t),a=n&&Ae(n),i=s&&Ae(s),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ct(n).width,b=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ct(s).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&a.float!=="none"){var m=a.float==="left"?"left":"right";return s&&(i.clear==="both"||i.clear===m)?"vertical":"horizontal"}return n&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=r&&o[ec]==="none"||s&&o[ec]==="none"&&l+b>r)?"vertical":"horizontal"},kp=function(e,t,o){var r=o?e.left:e.top,n=o?e.right:e.bottom,s=o?e.width:e.height,a=o?t.left:t.top,i=o?t.right:t.bottom,l=o?t.width:t.height;return r===a||n===i||r+s/2===a+l/2},Op=function(e,t){var o;return Gn.some(function(r){var n=r[Ut].options.emptyInsertThreshold;if(!(!n||ea(r))){var s=ct(r),a=e>=s.left-n&&e<=s.right+n,i=t>=s.top-n&&t<=s.bottom+n;if(a&&i)return o=r}}),o},rc=function(e){function t(n,s){return function(a,i,l,b){var m=a.options.group.name&&i.options.group.name&&a.options.group.name===i.options.group.name;if(n==null&&(s||m))return!0;if(n==null||n===!1)return!1;if(s&&n==="clone")return n;if(typeof n=="function")return t(n(a,i,l,b),s)(a,i,l,b);var h=(s?a:i).options.group.name;return n===!0||typeof n=="string"&&n===h||n.join&&n.indexOf(h)>-1}}var o={},r=e.group;(!r||Vn(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=t(r.pull,!0),o.checkPut=t(r.put),o.revertClone=r.revertClone,e.group=o},nc=function(){!tc&&Pe&&Ae(Pe,"display","none")},sc=function(){!tc&&Pe&&Ae(Pe,"display","")};Qn&&!jl&&document.addEventListener("click",function(e){if(Kn)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Kn=!1,!1},!0);var Yo=function(e){if(ne){e=e.touches?e.touches[0]:e;var t=Op(e.clientX,e.clientY);if(t){var o={};for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[Ut]._onDragOver(o)}}},Lp=function(e){ne&&ne.parentNode[Ut]._isOutsideThisEl(e.target)};function Ce(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=zo({},t),e[Ut]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oc(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ce.supportPointer!==!1&&"PointerEvent"in window&&!Br,emptyInsertThreshold:5};Ur.initializePlugins(this,e,o);for(var r in o)!(r in t)&&(t[r]=o[r]);rc(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:Fp,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?He(e,"pointerdown",this._onTapStart):(He(e,"mousedown",this._onTapStart),He(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(He(e,"dragover",this),He(e,"dragenter",this)),Gn.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),zo(this,Tp())}Ce.prototype={constructor:Ce,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(hr=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,ne):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,r=this.options,n=r.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,b=r.filter;if(Wp(o),!ne&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||r.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Br&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=oo(i,r.draggable,o,!1),!(i&&i.animated)&&Wn!==i)){if(mr=Yt(i),Vr=Yt(i,r.draggable),typeof b=="function"){if(b.call(this,e,i,this)){xt({sortable:t,rootEl:l,name:"filter",targetEl:i,toEl:o,fromEl:o}),Ft("filter",t,{evt:e}),n&&e.cancelable&&e.preventDefault();return}}else if(b&&(b=b.split(",").some(function(m){if(m=oo(l,m.trim(),o,!1),m)return xt({sortable:t,rootEl:m,name:"filter",targetEl:i,fromEl:o,toEl:o}),Ft("filter",t,{evt:e}),!0}),b)){n&&e.cancelable&&e.preventDefault();return}r.handle&&!oo(l,r.handle,o,!1)||this._prepareDragStart(e,a,i)}}},_prepareDragStart:function(e,t,o){var r=this,n=r.el,s=r.options,a=n.ownerDocument,i;if(o&&!ne&&o.parentNode===n){var l=ct(o);if(Je=n,ne=o,ot=ne.parentNode,Go=ne.nextSibling,Wn=o,qn=s.group,Ce.dragged=ne,Jo={target:ne,clientX:(t||e).clientX,clientY:(t||e).clientY},Xl=Jo.clientX-l.left,Ql=Jo.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ne.style["will-change"]="all",i=function(){if(Ft("delayEnded",r,{evt:e}),Ce.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Hl&&r.nativeDraggable&&(ne.draggable=!0),r._triggerDragStart(e,t),xt({sortable:r,name:"choose",originalEvent:e}),jt(ne,s.chosenClass,!0)},s.ignore.split(",").forEach(function(b){Zl(ne,b.trim(),ia)}),He(a,"dragover",Yo),He(a,"mousemove",Yo),He(a,"touchmove",Yo),He(a,"mouseup",r._onDrop),He(a,"touchend",r._onDrop),He(a,"touchcancel",r._onDrop),Hl&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ne.draggable=!0),Ft("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Hr||Co))){if(Ce.eventCanceled){this._onDrop();return}He(a,"mouseup",r._disableDelayedDrag),He(a,"touchend",r._disableDelayedDrag),He(a,"touchcancel",r._disableDelayedDrag),He(a,"mousemove",r._delayedDragTouchMoveHandler),He(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&He(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,s.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ne&&ia(ne),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Fe(e,"mouseup",this._disableDelayedDrag),Fe(e,"touchend",this._disableDelayedDrag),Fe(e,"touchcancel",this._disableDelayedDrag),Fe(e,"mousemove",this._delayedDragTouchMoveHandler),Fe(e,"touchmove",this._delayedDragTouchMoveHandler),Fe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?He(document,"pointermove",this._onTouchMove):t?He(document,"touchmove",this._onTouchMove):He(document,"mousemove",this._onTouchMove):(He(ne,"dragend",this),He(Je,"dragstart",this._onDragStart));try{document.selection?os(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(gr=!1,Je&&ne){Ft("dragStarted",this,{evt:t}),this.nativeDraggable&&He(document,"dragover",Lp);var o=this.options;!e&&jt(ne,o.dragClass,!1),jt(ne,o.ghostClass,!0),Ce.active=this,e&&this._appendGhost(),xt({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ro){this._lastX=ro.clientX,this._lastY=ro.clientY,nc();for(var e=document.elementFromPoint(ro.clientX,ro.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ro.clientX,ro.clientY),e!==t);)t=e;if(ne.parentNode[Ut]._isOutsideThisEl(e),t)do{if(t[Ut]){var o=void 0;if(o=t[Ut]._onDragOver({clientX:ro.clientX,clientY:ro.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);sc()}},_onTouchMove:function(e){if(Jo){var t=this.options,o=t.fallbackTolerance,r=t.fallbackOffset,n=e.touches?e.touches[0]:e,s=Pe&&ur(Pe,!0),a=Pe&&s&&s.a,i=Pe&&s&&s.d,l=es&&wt&&ql(wt),b=(n.clientX-Jo.clientX+r.x)/(a||1)+(l?l[0]-sa[0]:0)/(a||1),m=(n.clientY-Jo.clientY+r.y)/(i||1)+(l?l[1]-sa[1]:0)/(i||1);if(!Ce.active&&!gr){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Pe){s?(s.e+=b-(ra||0),s.f+=m-(na||0)):s={a:1,b:0,c:0,d:1,e:b,f:m};var h="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Ae(Pe,"webkitTransform",h),Ae(Pe,"mozTransform",h),Ae(Pe,"msTransform",h),Ae(Pe,"transform",h),ra=b,na=m,ro=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Pe){var e=this.options.fallbackOnBody?document.body:Je,t=ct(ne,!0,es,!0,e),o=this.options;if(es){for(wt=e;Ae(wt,"position")==="static"&&Ae(wt,"transform")==="none"&&wt!==document;)wt=wt.parentNode;wt!==document.body&&wt!==document.documentElement?(wt===document&&(wt=mo()),t.top+=wt.scrollTop,t.left+=wt.scrollLeft):wt=mo(),sa=ql(wt)}Pe=ne.cloneNode(!0),jt(Pe,o.ghostClass,!1),jt(Pe,o.fallbackClass,!0),jt(Pe,o.dragClass,!0),Ae(Pe,"transition",""),Ae(Pe,"transform",""),Ae(Pe,"box-sizing","border-box"),Ae(Pe,"margin",0),Ae(Pe,"top",t.top),Ae(Pe,"left",t.left),Ae(Pe,"width",t.width),Ae(Pe,"height",t.height),Ae(Pe,"opacity","0.8"),Ae(Pe,"position",es?"absolute":"fixed"),Ae(Pe,"zIndex","100000"),Ae(Pe,"pointerEvents","none"),Ce.ghost=Pe,e.appendChild(Pe),Ae(Pe,"transform-origin",Xl/parseInt(Pe.style.width)*100+"% "+Ql/parseInt(Pe.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,r=e.dataTransfer,n=o.options;if(Ft("dragStart",this,{evt:e}),Ce.eventCanceled){this._onDrop();return}Ft("setupClone",this),Ce.eventCanceled||(Qe=Jl(ne),Qe.removeAttribute("id"),Qe.draggable=!1,Qe.style["will-change"]="",this._hideClone(),jt(Qe,this.options.chosenClass,!1),Ce.clone=Qe),o.cloneId=os(function(){Ft("clone",o),!Ce.eventCanceled&&(o.options.removeCloneOnHide||Je.insertBefore(Qe,ne),o._hideClone(),xt({sortable:o,name:"clone"}))}),!t&&jt(ne,n.dragClass,!0),t?(Kn=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Fe(document,"mouseup",o._onDrop),Fe(document,"touchend",o._onDrop),Fe(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(o,r,ne)),He(document,"drop",o),Ae(ne,"transform","translateZ(0)")),gr=!0,o._dragStartId=os(o._dragStarted.bind(o,t,e)),He(document,"selectstart",o),Zr=!0,Br&&Ae(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,r,n,s,a=this.options,i=a.group,l=Ce.active,b=qn===i,m=a.sort,h=vt||l,E,z=this,T=!1;if(aa)return;function k(O,R){Ft(O,z,fo({evt:e,isOwner:b,axis:E?"vertical":"horizontal",revert:s,dragRect:r,targetRect:n,canSort:m,fromSortable:h,target:o,completed:p,onMove:function(se,q){return ts(Je,t,ne,r,se,ct(se),e,q)},changed:c},R))}function M(){k("dragOverAnimationCapture"),z.captureAnimationState(),z!==h&&h.captureAnimationState()}function p(O){return k("dragOverCompleted",{insertion:O}),O&&(b?l._hideClone():l._showClone(z),z!==h&&(jt(ne,vt?vt.options.ghostClass:l.options.ghostClass,!1),jt(ne,a.ghostClass,!0)),vt!==z&&z!==Ce.active?vt=z:z===Ce.active&&vt&&(vt=null),h===z&&(z._ignoreWhileAnimating=o),z.animateAll(function(){k("dragOverAnimationComplete"),z._ignoreWhileAnimating=null}),z!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===ne&&!ne.animated||o===t&&!o.animated)&&(hr=null),!a.dragoverBubble&&!e.rootEl&&o!==document&&(ne.parentNode[Ut]._isOutsideThisEl(e.target),!O&&Yo(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),T=!0}function c(){Vt=Yt(ne),Fo=Yt(ne,a.draggable),xt({sortable:z,name:"change",toEl:t,newIndex:Vt,newDraggableIndex:Fo,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=oo(o,a.draggable,t,!0),k("dragOver"),Ce.eventCanceled)return T;if(ne.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||z._ignoreWhileAnimating===o)return p(!1);if(Kn=!1,l&&!a.disabled&&(b?m||(s=ot!==Je):vt===this||(this.lastPutMode=qn.checkPull(this,l,ne,e))&&i.checkPut(this,l,ne,e))){if(E=this._getDirection(e,o)==="vertical",r=ct(ne),k("dragOverValid"),Ce.eventCanceled)return T;if(s)return ot=Je,M(),this._hideClone(),k("revert"),Ce.eventCanceled||(Go?Je.insertBefore(ne,Go):Je.appendChild(ne)),p(!0);var d=ea(t,a.draggable);if(!d||jp(e,E,this)&&!d.animated){if(d===ne)return p(!1);if(d&&t===e.target&&(o=d),o&&(n=ct(o)),ts(Je,t,ne,r,o,n,e,!!o)!==!1)return M(),d&&d.nextSibling?t.insertBefore(ne,d.nextSibling):t.appendChild(ne),ot=t,c(),p(!0)}else if(d&&Bp(e,E,this)){var f=pr(t,0,a,!0);if(f===ne)return p(!1);if(o=f,n=ct(o),ts(Je,t,ne,r,o,n,e,!1)!==!1)return M(),t.insertBefore(ne,f),ot=t,c(),p(!0)}else if(o.parentNode===t){n=ct(o);var C=0,I,A=ne.parentNode!==t,u=!kp(ne.animated&&ne.toRect||r,o.animated&&o.toRect||n,E),v=E?"top":"left",_=Wl(o,"top","top")||Wl(ne,"top","top"),$=_?_.scrollTop:void 0;hr!==o&&(I=n[v],qr=!1,Jn=!u&&a.invertSwap||A),C=Up(e,o,n,E,u?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Jn,hr===o);var g;if(C!==0){var P=Yt(ne);do P-=C,g=ot.children[P];while(g&&(Ae(g,"display")==="none"||g===Pe))}if(C===0||g===o)return p(!1);hr=o,Wr=C;var N=o.nextElementSibling,D=!1;D=C===1;var x=ts(Je,t,ne,r,o,n,e,D);if(x!==!1)return(x===1||x===-1)&&(D=x===1),aa=!0,setTimeout(Hp,30),M(),D&&!N?t.appendChild(ne):o.parentNode.insertBefore(ne,D?N:o),_&&Gl(_,0,$-_.scrollTop),ot=ne.parentNode,I!==void 0&&!Jn&&(Yn=Math.abs(I-ct(o)[v])),c(),p(!0)}if(t.contains(ne))return p(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Fe(document,"mousemove",this._onTouchMove),Fe(document,"touchmove",this._onTouchMove),Fe(document,"pointermove",this._onTouchMove),Fe(document,"dragover",Yo),Fe(document,"mousemove",Yo),Fe(document,"touchmove",Yo)},_offUpEvents:function(){var e=this.el.ownerDocument;Fe(e,"mouseup",this._onDrop),Fe(e,"touchend",this._onDrop),Fe(e,"pointerup",this._onDrop),Fe(e,"touchcancel",this._onDrop),Fe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(Vt=Yt(ne),Fo=Yt(ne,o.draggable),Ft("drop",this,{evt:e}),ot=ne&&ne.parentNode,Vt=Yt(ne),Fo=Yt(ne,o.draggable),Ce.eventCanceled){this._nulling();return}gr=!1,Jn=!1,qr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),la(this.cloneId),la(this._dragStartId),this.nativeDraggable&&(Fe(document,"drop",this),Fe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Br&&Ae(document.body,"user-select",""),Ae(ne,"transform",""),e&&(Zr&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Pe&&Pe.parentNode&&Pe.parentNode.removeChild(Pe),(Je===ot||vt&&vt.lastPutMode!=="clone")&&Qe&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),ne&&(this.nativeDraggable&&Fe(ne,"dragend",this),ia(ne),ne.style["will-change"]="",Zr&&!gr&&jt(ne,vt?vt.options.ghostClass:this.options.ghostClass,!1),jt(ne,this.options.chosenClass,!1),xt({sortable:this,name:"unchoose",toEl:ot,newIndex:null,newDraggableIndex:null,originalEvent:e}),Je!==ot?(Vt>=0&&(xt({rootEl:ot,name:"add",toEl:ot,fromEl:Je,originalEvent:e}),xt({sortable:this,name:"remove",toEl:ot,originalEvent:e}),xt({rootEl:ot,name:"sort",toEl:ot,fromEl:Je,originalEvent:e}),xt({sortable:this,name:"sort",toEl:ot,originalEvent:e})),vt&&vt.save()):Vt!==mr&&Vt>=0&&(xt({sortable:this,name:"update",toEl:ot,originalEvent:e}),xt({sortable:this,name:"sort",toEl:ot,originalEvent:e})),Ce.active&&((Vt==null||Vt===-1)&&(Vt=mr,Fo=Vr),xt({sortable:this,name:"end",toEl:ot,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ft("nulling",this),Je=ne=ot=Pe=Go=Qe=Wn=No=Jo=ro=Zr=Vt=Fo=mr=Vr=hr=Wr=vt=qn=Ce.dragged=Ce.ghost=Ce.clone=Ce.active=null,Xn.forEach(function(e){e.checked=!0}),Xn.length=ra=na=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ne&&(this._onDragOver(e),Rp(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,r=0,n=o.length,s=this.options;r<n;r++)t=o[r],oo(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Zp(t));return e},sort:function(e,t){var o={},r=this.el;this.toArray().forEach(function(n,s){var a=r.children[s];oo(a,this.options.draggable,r,!1)&&(o[n]=a)},this),t&&this.captureAnimationState(),e.forEach(function(n){o[n]&&(r.removeChild(o[n]),r.appendChild(o[n]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return oo(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var r=Ur.modifyOption(this,e,t);typeof r<"u"?o[e]=r:o[e]=t,e==="group"&&rc(o)},destroy:function(){Ft("destroy",this);var e=this.el;e[Ut]=null,Fe(e,"mousedown",this._onTapStart),Fe(e,"touchstart",this._onTapStart),Fe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Fe(e,"dragover",this),Fe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Gn.splice(Gn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!No){if(Ft("hideClone",this),Ce.eventCanceled)return;Ae(Qe,"display","none"),this.options.removeCloneOnHide&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),No=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(No){if(Ft("showClone",this),Ce.eventCanceled)return;ne.parentNode==Je&&!this.options.group.revertClone?Je.insertBefore(Qe,ne):Go?Je.insertBefore(Qe,Go):Je.appendChild(Qe),this.options.group.revertClone&&this.animate(ne,Qe),Ae(Qe,"display",""),No=!1}}};function Rp(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ts(e,t,o,r,n,s,a,i){var l,b=e[Ut],m=b.options.onMove,h;return window.CustomEvent&&!Co&&!Hr?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=o,l.draggedRect=r,l.related=n||t,l.relatedRect=s||ct(t),l.willInsertAfter=i,l.originalEvent=a,e.dispatchEvent(l),m&&(h=m.call(b,l,a)),h}function ia(e){e.draggable=!1}function Hp(){aa=!1}function Bp(e,t,o){var r=ct(pr(o.el,0,o.options,!0)),n=Yl(o.el,o.options,Pe),s=10;return t?e.clientX<n.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<n.top-s||e.clientY<r.bottom&&e.clientX<r.left}function jp(e,t,o){var r=ct(ea(o.el,o.options.draggable)),n=Yl(o.el,o.options,Pe),s=10;return t?e.clientX>n.right+s||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>n.bottom+s||e.clientX>r.right&&e.clientY>r.top}function Up(e,t,o,r,n,s,a,i){var l=r?e.clientY:e.clientX,b=r?o.height:o.width,m=r?o.top:o.left,h=r?o.bottom:o.right,E=!1;if(!a){if(i&&Yn<b*n){if(!qr&&(Wr===1?l>m+b*s/2:l<h-b*s/2)&&(qr=!0),qr)E=!0;else if(Wr===1?l<m+Yn:l>h-Yn)return-Wr}else if(l>m+b*(1-n)/2&&l<h-b*(1-n)/2)return Vp(t)}return E=E||a,E&&(l<m+b*s/2||l>h-b*s/2)?l>m+b/2?1:-1:0}function Vp(e){return Yt(ne)<Yt(e)?1:-1}function Zp(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,r=0;o--;)r+=t.charCodeAt(o);return r.toString(36)}function Wp(e){Xn.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var r=t[o];r.checked&&Xn.push(r)}}function os(e){return setTimeout(e,0)}function la(e){return clearTimeout(e)}Qn&&He(document,"touchmove",function(e){(Ce.active||gr)&&e.cancelable&&e.preventDefault()}),Ce.utils={on:He,off:Fe,css:Ae,find:Zl,is:function(e,t){return!!oo(e,t,e,!1)},extend:Sp,throttle:Kl,closest:oo,toggleClass:jt,clone:Jl,index:Yt,nextTick:os,cancelNextTick:la,detectDirection:oc,getChild:pr},Ce.get=function(e){return e[Ut]},Ce.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ce.utils=fo(fo({},Ce.utils),r.utils)),Ur.mount(r)})},Ce.create=function(e,t){return new Ce(e,t)},Ce.version=Cp;var dt=[],Kr,ca,da=!1,ua,pa,rs,Gr;function qp(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?He(document,"dragover",this._handleAutoScroll):this.options.supportPointer?He(document,"pointermove",this._handleFallbackAutoScroll):o.touches?He(document,"touchmove",this._handleFallbackAutoScroll):He(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Fe(document,"dragover",this._handleAutoScroll):(Fe(document,"pointermove",this._handleFallbackAutoScroll),Fe(document,"touchmove",this._handleFallbackAutoScroll),Fe(document,"mousemove",this._handleFallbackAutoScroll)),ac(),ns(),Ip()},nulling:function(){rs=ca=Kr=da=Gr=ua=pa=null,dt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var r=this,n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(n,s);if(rs=t,o||this.options.forceAutoScrollFallback||Hr||Co||Br){fa(t,this.options,a,o);var i=Mo(a,!0);da&&(!Gr||n!==ua||s!==pa)&&(Gr&&ac(),Gr=setInterval(function(){var l=Mo(document.elementFromPoint(n,s),!0);l!==i&&(i=l,ns()),fa(t,r.options,l,o)},10),ua=n,pa=s)}else{if(!this.options.bubbleScroll||Mo(a,!0)===mo()){ns();return}fa(t,this.options,Mo(a,!1),!1)}}},zo(e,{pluginName:"scroll",initializeByDefault:!0})}function ns(){dt.forEach(function(e){clearInterval(e.pid)}),dt=[]}function ac(){clearInterval(Gr)}var fa=Kl(function(e,t,o,r){if(t.scroll){var n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,i=t.scrollSpeed,l=mo(),b=!1,m;ca!==o&&(ca=o,ns(),Kr=t.scroll,m=t.scrollFn,Kr===!0&&(Kr=Mo(o,!0)));var h=0,E=Kr;do{var z=E,T=ct(z),k=T.top,M=T.bottom,p=T.left,c=T.right,d=T.width,f=T.height,C=void 0,I=void 0,A=z.scrollWidth,u=z.scrollHeight,v=Ae(z),_=z.scrollLeft,$=z.scrollTop;z===l?(C=d<A&&(v.overflowX==="auto"||v.overflowX==="scroll"||v.overflowX==="visible"),I=f<u&&(v.overflowY==="auto"||v.overflowY==="scroll"||v.overflowY==="visible")):(C=d<A&&(v.overflowX==="auto"||v.overflowX==="scroll"),I=f<u&&(v.overflowY==="auto"||v.overflowY==="scroll"));var g=C&&(Math.abs(c-n)<=a&&_+d<A)-(Math.abs(p-n)<=a&&!!_),P=I&&(Math.abs(M-s)<=a&&$+f<u)-(Math.abs(k-s)<=a&&!!$);if(!dt[h])for(var N=0;N<=h;N++)dt[N]||(dt[N]={});(dt[h].vx!=g||dt[h].vy!=P||dt[h].el!==z)&&(dt[h].el=z,dt[h].vx=g,dt[h].vy=P,clearInterval(dt[h].pid),(g!=0||P!=0)&&(b=!0,dt[h].pid=setInterval(function(){r&&this.layer===0&&Ce.active._onTouchMove(rs);var D=dt[this.layer].vy?dt[this.layer].vy*i:0,x=dt[this.layer].vx?dt[this.layer].vx*i:0;typeof m=="function"&&m.call(Ce.dragged.parentNode[Ut],x,D,e,rs,dt[this.layer].el)!=="continue"||Gl(dt[this.layer].el,x,D)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&E!==l&&(E=Mo(E,!1)));da=b}},30),ic=function(e){var t=e.originalEvent,o=e.putSortable,r=e.dragEl,n=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var l=o||n;a();var b=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,m=document.elementFromPoint(b.clientX,b.clientY);i(),l&&!l.el.contains(m)&&(s("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function ma(){}ma.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=pr(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:ic},zo(ma,{pluginName:"revertOnSpill"});function ga(){}ga.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,r=o||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:ic},zo(ga,{pluginName:"removeOnSpill"}),Ce.mount(new qp),Ce.mount(ga,ma);function Kp(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Gp(e){kn()&&Ir(e)}function Jp(e){kn()?Uo(e):St(e)}let lc=null,cc=null;function dc(e=null,t=null){lc=e,cc=t}function Yp(){return{data:lc,clonedData:cc}}const uc=Symbol("cloneElement");function Xp(...e){var t,o;const r=(t=kn())==null?void 0:t.proxy;let n=null;const s=e[0];let[,a,i]=e;Array.isArray(fe(a))||(i=a,a=null);let l=null;const{immediate:b=!0,clone:m=Kp,customUpdate:h}=(o=fe(i))!=null?o:{};function E(u){var v;const{from:_,oldIndex:$,item:g}=u;n=Array.from(_.childNodes);const P=fe((v=fe(a))==null?void 0:v[$]),N=m(P);dc(P,N),g[uc]=N}function z(u){const v=u.item[uc];if(!mp(v)){if(Qs(u.item),nt(a)){const _=[...fe(a)];a.value=kl(_,u.newDraggableIndex,v);return}kl(fe(a),u.newDraggableIndex,v)}}function T(u){const{from:v,item:_,oldIndex:$,oldDraggableIndex:g,pullMode:P,clone:N}=u;if(Ol(v,_,$),P==="clone"){Qs(N);return}if(nt(a)){const D=[...fe(a)];a.value=Fl(D,g);return}Fl(fe(a),g)}function k(u){if(h){h(u);return}const{from:v,item:_,oldIndex:$,oldDraggableIndex:g,newDraggableIndex:P}=u;if(Qs(_),Ol(v,_,$),nt(a)){const N=[...fe(a)];a.value=Nl(N,g,P);return}Nl(fe(a),g,P)}function M(u){const{newIndex:v,oldIndex:_,from:$,to:g}=u;let P=null;const N=v===_&&$===g;try{if(N){let D=null;n?.some((x,O)=>{if(D&&n?.length!==g.childNodes.length)return $.insertBefore(D,x.nextSibling),!0;const R=g.childNodes[O];D=g?.replaceChild(x,R)})}}catch(D){P=D}finally{n=null}St(()=>{if(dc(),P)throw P})}const p={onUpdate:k,onStart:E,onAdd:z,onRemove:T,onEnd:M};function c(u){const v=fe(s);return u||(u=gp(v)?hp(v,r?.$el):v),u&&!yp(u)&&(u=u.$el),u||up("Root element not found"),u}function d(){var u;const v=(u=fe(i))!=null?u:{},{immediate:_,clone:$}=v,g=xl(v,["immediate","clone"]);return Ll(g,(P,N)=>{_p(P)&&(g[P]=(D,...x)=>{const O=Yp();return $p(D,O),N(D,...x)})}),bp(a===null?{}:p,g)}const f=u=>{u=c(u),l&&C.destroy(),l=new Ce(u,d())};tt(()=>i,()=>{l&&Ll(d(),(u,v)=>{l?.option(u,v)})},{deep:!0});const C={option:(u,v)=>l?.option(u,v),destroy:()=>{l?.destroy(),l=null},save:()=>l?.save(),toArray:()=>l?.toArray(),closest:(...u)=>l?.closest(...u)},I=()=>C?.option("disabled",!0),A=()=>C?.option("disabled",!1);return Jp(()=>{b&&f()}),Gp(C.destroy),dr({start:f,pause:I,resume:A},C)}const ha=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Qp=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...ha.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],ef=lt({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Qp,emits:["update:modelValue",...ha],setup(e,{slots:t,emit:o,expose:r,attrs:n}){const s=ha.reduce((m,h)=>{const E=`on${h.replace(/^\S/,z=>z.toUpperCase())}`;return m[E]=(...z)=>o(h,...z),m},{}),a=we(()=>{const m=Qa(e),{modelValue:h}=m,E=xl(m,["modelValue"]),z=Object.entries(E).reduce((T,[k,M])=>{const p=fe(M);return p!==void 0&&(T[k]=p),T},{});return dr(dr({},s),fp(dr(dr({},n),z)))}),i=we({get:()=>e.modelValue,set:m=>o("update:modelValue",m)}),l=_e(),b=Ho(Xp(e.target||l,i,a));return r(b),()=>{var m;return ol(e.tag||"div",{ref:l},(m=t?.default)==null?void 0:m.call(t,b))}}});function pc(){const e=_e(new Set),t="zero-code-collapsed-items",o=()=>{try{e.value=new Set,y.debug("初期表示：すべて展開状態で開始")}catch(E){y.error("初期化に失敗:",E),e.value=new Set}},r=()=>{try{const E=Array.from(e.value);localStorage.setItem(t,JSON.stringify(E)),y.debug("折りたたみ状態を保存:",E.length,"アイテム")}catch(E){y.error("折りたたみ状態の保存に失敗:",E)}},n=E=>e.value.has(E),s=E=>{const z=new Set(e.value);z.has(E)?(z.delete(E),y.debug(`アイテム展開: ${E}`)):(z.add(E),y.debug(`アイテム折りたたみ: ${E}`)),e.value=z},a=E=>{if(!e.value.has(E)){const z=new Set(e.value);z.add(E),e.value=z,y.debug(`アイテム折りたたみ: ${E}`)}},i=E=>{if(e.value.has(E)){const z=new Set(e.value);z.delete(E),e.value=z,y.debug(`アイテム展開: ${E}`)}},l=()=>{const E=e.value.size;e.value=new Set,y.debug(`すべてのアイテムを展開: ${E}アイテム`)},b=E=>{e.value=new Set(E),y.debug(`すべてのアイテムを折りたたみ: ${E.length}アイテム`)},m=we(()=>e.value.size),h=E=>E-e.value.size;return tt(()=>e.value,()=>{r()},{deep:!0}),o(),{collapsedItems:we(()=>e.value),collapsedCount:m,isCollapsed:n,toggleCollapse:s,collapseItem:a,expandItem:i,expandAll:l,collapseAll:b,getExpandedCount:h,loadCollapsedState:o,saveCollapsedState:r}}const tf={class:"zero-code-data-display"},of={class:"zero-code-data-tabs"},rf={class:"zero-code-tab-buttons"},nf=["onClick"],sf={key:0,class:"zero-code-collapse-controls"},af={class:"zero-code-collapse-stats"},lf=["disabled"],cf=["disabled"],df={class:"zero-code-data-content"},uf={key:0,class:"zero-code-data-section"},pf={key:0,class:"zero-code-rendered-content"},ff={class:"zero-code-add-part-button-container"},mf={class:"zero-code-component-header"},gf={class:"zero-code-component-meta"},hf={class:"zero-code-component-type"},vf={class:"zero-code-component-module"},bf={class:"zero-code-header-actions"},yf=["title","onClick"],_f=["onClick"],$f=["onClick"],wf=["innerHTML"],zf={class:"zero-code-add-part-button-container"},Af=["onClick"],Cf={key:1,class:"zero-code-no-data"},Ef={class:"zero-code-empty-state"},Pf={class:"zero-code-add-part-button-container"},Sf={key:1,class:"zero-code-data-section"},If={class:"zero-code-data-display-section"},Tf={class:"zero-code-parts-sub-content"},Df={class:"zero-code-parts-sub-section"},xf={class:"zero-code-data-display-pre"},Mf=lt({__name:"DataDisplay",props:{modelValue:{type:String},pageData:{type:Array},parts:{type:Array},commonParts:{type:Array},individualParts:{type:Array},commonImages:{type:Array},individualImages:{type:Array},renderComponentWithNested:{type:Function},isTextEditing:{type:Boolean}},emits:["update:modelValue","add-part","edit-part","delete-part","reorder-parts"],setup(e,{emit:t}){const o=e,r=t,n=we({get:()=>o.pageData,set:p=>{r("reorder-parts",p)}}),s=()=>{y.debug("ドラッグ開始")},a=()=>{y.debug("ドラッグ終了")},{isCollapsed:i,toggleCollapse:l,collapsedCount:b,expandAll:m,collapseAll:h}=pc(),E=()=>{const p=o.pageData.map((c,d)=>c.id||`component-${d}`);h(p)},z=["rendered","page"],T=p=>({rendered:"レンダリング結果",source:"HTMLソース",page:"データ表示"})[p],k=we(()=>M(o.pageData)),M=p=>{const c=(d,f=0)=>{const C="  ".repeat(f),I="  ".repeat(f+1);if(Array.isArray(d))return d.length===0?"[]":`[
${d.map(u=>I+c(u,f+1)).join(`,
`)}
${C}]`;if(typeof d=="object"&&d!==null){const A=Object.entries(d);return A.length===0?"{}":`{
${A.map(([v,_])=>{let $;if(typeof _=="string"){const g=_.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(g.includes(`
`)){const P=g.split(`
`);$=P.map((D,x)=>x===0?`\`${D}`:x===P.length-1?`${I}${D}\``:`${I}${D}`).join(`
`)}else $=`"${g}"`}else $=c(_,f+1);return`${I}"${v}": ${$}`}).join(`,
`)}
${C}}`}return typeof d=="string"?`"${d.replace(/"/g,'\\"')}"`:JSON.stringify(d)};return c(p)};return(p,c)=>(L(),H("div",tf,[w("div",of,[w("div",rf,[(L(),H($e,null,Me(z,d=>w("button",{key:d,class:et(["zero-code-data-tab-button",{active:p.modelValue===d}]),onClick:f=>p.$emit("update:modelValue",d)},oe(T(d)),11,nf)),64))]),p.modelValue==="rendered"?(L(),H("div",sf,[w("span",af,oe(fe(b))+"/"+oe(p.pageData.length)+" 折りたたみ中 ",1),w("button",{class:"zero-code-collapse-all-btn",disabled:p.pageData.length===0,onClick:E}," すべて折りたたみ ",8,lf),w("button",{class:"zero-code-expand-all-btn",disabled:fe(b)===0,onClick:c[0]||(c[0]=(...d)=>fe(m)&&fe(m)(...d))}," すべて展開 ",8,cf)])):ge("",!0)]),w("div",df,[p.modelValue==="rendered"?(L(),H("div",uf,[Array.isArray(p.pageData)&&p.pageData.length>0?(L(),H("div",pf,[w("div",ff,[w("button",{class:"zero-code-add-part-button",onClick:c[1]||(c[1]=d=>p.$emit("add-part",0))},c[4]||(c[4]=[w("span",{class:"zero-code-plus-icon"},"＋",-1),w("span",{class:"zero-code-button-text"},"パーツを追加",-1)]))]),Xe(fe(ef),{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=d=>n.value=d),animation:200,disabled:p.isTextEditing,"ghost-class":"ghost","chosen-class":"chosen","drag-class":"drag",onStart:s,onEnd:a},{default:Cn(()=>[(L(!0),H($e,null,Me(p.pageData,(d,f)=>(L(),H("div",{key:`${d.id||f}`,class:"zero-code-rendered-component zero-code-draggable-item"},[w("div",mf,[w("div",gf,[c[5]||(c[5]=w("div",{class:"zero-code-drag-handle"},[w("span",{class:"zero-code-drag-icon"},"⠿")],-1)),w("span",hf,oe(d.type||"unknown"),1),w("span",vf,oe(d.module_name||""),1)]),w("div",bf,[w("button",{class:"zero-code-collapse-btn",title:fe(i)(d.id||`component-${f}`)?"展開":"折りたたみ",onClick:C=>fe(l)(d.id||`component-${f}`)},oe(fe(i)(d.id||`component-${f}`)?"＋":"－"),9,yf),w("button",{class:"zero-code-edit-btn",onClick:C=>p.$emit("edit-part",f)},"編集",8,_f),w("button",{class:"zero-code-delete-btn",onClick:C=>p.$emit("delete-part",f)},"削除",8,$f)])]),Xe(Nu,{name:"collapse"},{default:Cn(()=>[It((L(),H("div",{key:`preview-${d.id}`,class:"zero-code-component-preview",innerHTML:p.renderComponentWithNested(d,f)},null,8,wf)),[[Hu,!fe(i)(d.id||`component-${f}`)]])]),_:2},1024),w("div",zf,[w("button",{class:"zero-code-add-part-button",onClick:C=>p.$emit("add-part",f+1)},c[6]||(c[6]=[w("span",{class:"zero-code-plus-icon"},"＋",-1),w("span",{class:"zero-code-button-text"},"パーツを追加",-1)]),8,Af)])]))),128))]),_:1},8,["modelValue","disabled"])])):(L(),H("div",Cf,[w("div",Ef,[c[8]||(c[8]=w("p",{class:"zero-code-empty-message"},"パーツがありません",-1)),w("div",Pf,[w("button",{class:"zero-code-add-part-button",onClick:c[3]||(c[3]=d=>p.$emit("add-part",0))},c[7]||(c[7]=[w("span",{class:"zero-code-plus-icon"},"＋",-1),w("span",{class:"zero-code-button-text"},"最初のパーツを追加",-1)]))])])]))])):ge("",!0),p.modelValue==="page"?(L(),H("div",Sf,[w("div",If,[w("div",Tf,[w("div",Df,[c[9]||(c[9]=w("h4",{style:{margin:"0 0 16px 0",color:"#374151","font-size":"1.1rem"}},"Pageデータ（リアルタイム更新）",-1)),w("pre",xf,oe(k.value),1)])])])])):ge("",!0)])]))}}),Nf={class:"zero-code-modal-header"},Ff={class:"zero-code-data-tabs"},kf={class:"zero-code-tab-buttons"},Of=["onClick"],Lf={class:"zero-code-modal-body"},Rf={key:0,class:"zero-code-parts-section"},Hf={key:0,class:"zero-code-parts-list"},Bf={class:"zero-code-part-section-title"},jf={class:"zero-code-modules-grid"},Uf=["onClick"],Vf={class:"zero-code-module-title"},Zf=["innerHTML"],Wf={key:1,class:"zero-code-empty-state"},qf={key:1,class:"zero-code-parts-section"},Kf={key:0,class:"zero-code-parts-list"},Gf={class:"zero-code-part-section-title"},Jf={class:"zero-code-modules-grid"},Yf=["onClick"],Xf={class:"zero-code-module-title"},Qf=["innerHTML"],em={key:1,class:"zero-code-empty-state"},fc=lt({__name:"PartSelector",props:{parts:{type:Array},isNested:{type:Boolean,default:!1},modalContainer:{default:"body",type:String}},emits:["close","select-part"],setup(e,{emit:t}){const o=e;we(()=>!o.modalContainer||o.modalContainer==="body"?!0:typeof document<"u");const r=we(()=>!o.modalContainer||o.modalContainer==="body"?"body":typeof document<"u"&&document.querySelector(o.modalContainer)?o.modalContainer:"body"),n=_e("common"),s=["common","individual"],a=E=>({common:"共通パーツ",individual:"個別パーツ"})[E],i=we(()=>o.parts.map(E=>({...E,module:E.module.filter(z=>{const T=z;return!T.category||T.category==="common"})})).filter(E=>E.module.length>0)),l=we(()=>o.parts.map(E=>({...E,module:E.module.filter(z=>z.category==="individual")})).filter(E=>E.module.length>0)),b=t,m=(E,z)=>{b("select-part",E,z)},h=E=>{if(!E)return"";try{let z=E;return z=z.replace(/@slot\(\$[^)]+\)@/g,""),z=z.replace(/\{\$([^:]+):([^}]*)\}/g,(T,k,M)=>M&&M.trim()?M:{title:"サンプルタイトル",text:"サンプルテキストです。",image:"/sample-image.jpg",link:"#",url:"https://example.com",alt:"サンプル画像",content:"サンプルコンテンツ",description:"サンプル説明文です。"}[k]||`[${k}]`),z=z.replace(/\(\$([^:]+):([^)]+)\)/g,(T,k,M)=>M.split("|").filter(c=>c.trim())[0]||""),z=z.replace(/\(\$([^:?]+)\?:([^)]*)\)/g,(T,k,M)=>M||""),z=z.replace(/z-for-wrapper="[^"]*"/g,""),z=z.replace(/z-for="[^"]*"/g,""),z=z.replace(/z-slot="[^"]*"/g,""),z=z.replace(/\$(\w+)/g,(T,k)=>({title:"タイトル",text:"テキスト",content:"コンテンツ"})[k]||`[${k}]`),z}catch{return E}};return(E,z)=>(L(),ft(fi,{to:r.value},[w("div",{class:"zero-code-modal-overlay",onClick:z[2]||(z[2]=T=>E.$emit("close"))},[w("div",{class:"zero-code-modal-content",onClick:z[1]||(z[1]=Bt(()=>{},["stop"]))},[w("div",Nf,[w("h4",null,oe(o.isNested?"ネストパーツを選択":"パーツを選択"),1),w("button",{class:"zero-code-close-button",onClick:z[0]||(z[0]=T=>E.$emit("close"))},"✖️")]),w("div",Ff,[w("div",kf,[(L(),H($e,null,Me(s,T=>w("button",{key:T,class:et(["zero-code-data-tab-button",{active:n.value===T}]),onClick:k=>n.value=T},oe(a(T)),11,Of)),64))])]),w("div",Lf,[n.value==="common"?(L(),H("div",Rf,[i.value.length>0?(L(),H("div",Hf,[(L(!0),H($e,null,Me(i.value,(T,k)=>(L(),H("div",{key:k,class:"zero-code-part-section"},[w("h5",Bf,oe(T.type),1),w("div",jf,[(L(!0),H($e,null,Me(T.module,(M,p)=>(L(),H("div",{key:p,class:"zero-code-module-card",onClick:c=>m(T.type,M)},[w("div",Vf,oe(M.title),1),w("div",{class:"zero-code-module-preview",innerHTML:h(M.body)},null,8,Zf)],8,Uf))),128))])]))),128))])):(L(),H("div",Wf,z[3]||(z[3]=[w("p",null,"共通パーツが登録されていません。",-1)])))])):ge("",!0),n.value==="individual"?(L(),H("div",qf,[l.value.length>0?(L(),H("div",Kf,[(L(!0),H($e,null,Me(l.value,(T,k)=>(L(),H("div",{key:k,class:"zero-code-part-section"},[w("h5",Gf,oe(T.type),1),w("div",Jf,[(L(!0),H($e,null,Me(T.module,(M,p)=>(L(),H("div",{key:p,class:"zero-code-module-card",onClick:c=>m(T.type,M)},[w("div",Xf,oe(M.title),1),w("div",{class:"zero-code-module-preview",innerHTML:h(M.body)},null,8,Qf)],8,Yf))),128))])]))),128))])):(L(),H("div",em,z[4]||(z[4]=[w("p",null,"個別パーツが登録されていません。",-1)])))])):ge("",!0)])])])],8,["to"]))}}),tm={class:"zero-code-array-field"},om={class:"zero-code-array-header"},rm={key:0,class:"zero-code-empty-array-message"},nm={class:"zero-code-empty-message-content"},sm={class:"zero-code-empty-text"},am={class:"zero-code-button-text"},im=["onDragstart","onDrop"],lm={class:"zero-code-array-item-header"},cm={class:"zero-code-component-meta"},dm=["onClick"],um={class:"zero-code-array-item-fields"},pm=["for"],fm={key:0,class:"zero-code-radio-group"},mm=["id","value","name","checked","onChange"],gm=["for"],hm={key:1,class:"zero-code-checkbox-group"},vm=["id","checked","onChange"],bm=["for"],ym=["id","value","onInput"],_m=["value"],$m=["id","value","onChange"],wm=["value","selected"],zm=["id","value","onInput"],Am=["id","value","type","onInput"],Cm={key:0,class:"zero-code-nested-array-field"},Em={class:"zero-code-nested-array-label"},Pm={class:"zero-code-nested-array-info"},Sm={class:"zero-code-array-count"},Im=["onClick"],Tm=lt({__name:"ArrayFieldEditor",props:{componentId:{type:String},arrayKey:{type:String},items:{type:Array},fields:{type:Object},label:{type:String},itemLabel:{type:String}},emits:["add","remove","update","reorder","edit-nested"],setup(e,{emit:t}){const o=e,r=t,n=(z,T,k)=>{r("update",z,T,k)},s=(z,T,k)=>{const M=z[T];return Array.isArray(M)&&M.includes(k)},a=(z,T,k,M)=>{let c=o.items[z][T]||[];Array.isArray(c)||(c=[]),M?c.includes(k)||(c=[...c,k]):c=c.filter(d=>d!==k),r("update",z,T,c)};let i=null;const l=(z,T)=>{i=T,z.dataTransfer&&(z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",T.toString()));const k=z.target;k.style.opacity="0.5"},b=z=>{z.preventDefault(),z.dataTransfer&&(z.dataTransfer.dropEffect="move")},m=(z,T)=>{z.preventDefault(),i!==null&&i!==T&&r("reorder",i,T),i=null},h=z=>{const T=z.target;T.style.opacity="1",i=null},E=(z,T)=>!Array.isArray(T)||z==="id"||["nested_parts","content"].includes(z)?!1:T.length>0&&typeof T[0]=="object"&&T[0]!==null;return(z,T)=>(L(),H("div",tm,[w("div",om,[w("h5",null,oe(z.label),1),w("button",{class:"zero-code-btn zero-code-add-array-item",onClick:T[0]||(T[0]=k=>z.$emit("add"))},"+ 追加")]),z.items.length===0?(L(),H("div",rm,[w("div",nm,[w("p",sm,oe(z.label)+"はまだ追加されていません",1),w("button",{class:"zero-code-btn zero-code-add-array-item-empty",onClick:T[1]||(T[1]=k=>z.$emit("add"))},[T[2]||(T[2]=w("span",{class:"zero-code-plus-icon"},"＋",-1)),w("span",am,"最初の"+oe(z.label)+"を追加",1)])])])):ge("",!0),(L(!0),H($e,null,Me(z.items,(k,M)=>(L(),H("div",{key:k?.id||M,class:"zero-code-array-item",draggable:"true",onDragstart:p=>l(p,M),onDragover:b,onDrop:p=>m(p,M),onDragend:h},[w("div",lm,[w("div",cm,[T[3]||(T[3]=w("span",{class:"zero-code-drag-handle"},"⠿",-1)),w("h6",null,oe(z.itemLabel)+" "+oe(M+1),1)]),w("button",{class:"zero-code-btn zero-code-remove-array-item",onClick:p=>z.$emit("remove",M)},"削除",8,dm)]),w("div",um,[(L(!0),H($e,null,Me(z.fields,(p,c)=>(L(),H("div",{key:c,class:"zero-code-field-group"},[w("label",{for:`${z.componentId}_${z.arrayKey}_${M}_${c}`},oe(p.label)+": ",9,pm),p.type==="radio"&&p.options&&p.options.length>0?(L(),H("div",fm,[(L(!0),H($e,null,Me(p.options,d=>(L(),H("div",{key:d,class:"zero-code-radio-item"},[w("input",{id:`${z.componentId}_${z.arrayKey}_${M}_${c}_${d}`,value:d,type:"radio",name:`${z.componentId}_${z.arrayKey}_${M}_${c}`,class:"zero-code-radio-input",checked:k[c]===d||d==="指定なし"&&!k[c],onChange:f=>n(M,c,d==="指定なし"?"":d)},null,40,mm),w("label",{for:`${z.componentId}_${z.arrayKey}_${M}_${c}_${d}`,class:"zero-code-radio-label"},oe(d),9,gm)]))),128))])):ge("",!0),p.type==="checkbox"&&p.options&&p.options.length>0?(L(),H("div",hm,[(L(!0),H($e,null,Me(p.options,d=>(L(),H("div",{key:d,class:"zero-code-checkbox-item"},[w("input",{id:`${z.componentId}_${z.arrayKey}_${M}_${c}_${d}`,checked:s(k,c,d),type:"checkbox",class:"zero-code-checkbox-input",onChange:f=>{const C=f.target;a(M,c,d,C.checked)}},null,40,vm),w("label",{for:`${z.componentId}_${z.arrayKey}_${M}_${c}_${d}`,class:"zero-code-checkbox-label"},oe(d),9,bm)]))),128))])):p.type==="select"?(L(),H("select",{key:2,id:`${z.componentId}_${z.arrayKey}_${M}_${c}`,value:k[c],class:"zero-code-field-input zero-code-select-input",onInput:d=>{const f=d.target;n(M,c,f.value)}},[(L(!0),H($e,null,Me(p.options,d=>(L(),H("option",{key:d,value:d},oe(d),9,_m))),128))],40,ym)):p.type==="select-multiple"?(L(),H("select",{key:3,id:`${z.componentId}_${z.arrayKey}_${M}_${c}`,value:k[c]||p.defaultValue,multiple:"",class:"zero-code-field-input zero-code-select-multiple",onChange:d=>{const f=d.target,C=Array.from(f.selectedOptions).map(I=>I.value);n(M,c,C)}},[(L(!0),H($e,null,Me(p.options,d=>(L(),H("option",{key:d,value:d,selected:Array.isArray(k[c])&&k[c].includes(d)},oe(d),9,wm))),128))],40,$m)):p.type==="textarea"?(L(),H("textarea",{key:4,id:`${z.componentId}_${z.arrayKey}_${M}_${c}`,value:k[c],class:"zero-code-field-input zero-code-field-textarea",onInput:d=>{const f=d.target;n(M,c,f.value)}},null,40,zm)):p.type==="text"||p.type==="number"?(L(),H("input",{key:5,id:`${z.componentId}_${z.arrayKey}_${M}_${c}`,value:k[c],type:p.type==="text"?"text":p.type,class:"zero-code-field-input",onInput:d=>{const f=d.target;n(M,c,f.value)}},null,40,Am)):ge("",!0)]))),128)),(L(!0),H($e,null,Me(k,(p,c)=>(L(),H($e,{key:`nested_${c}`},[Array.isArray(p)&&c!=="id"&&E(c,p)?(L(),H("div",Cm,[w("h6",Em,oe(c)+" (ネスト配列)",1),w("div",Pm,[w("span",Sm,oe(p.length)+"個の要素",1),w("button",{class:"zero-code-btn zero-code-edit-nested-array-btn",title:"ネスト配列を編集",onClick:d=>z.$emit("edit-nested",M,c)}," 編集 ",8,Im)])])):ge("",!0)],64))),128))])],40,im))),128))]))}});var qe=(e=>(e.VALIDATION="VALIDATION",e.NETWORK="NETWORK",e.COMPONENT="COMPONENT",e.TEMPLATE="TEMPLATE",e.FILE="FILE",e.PERMISSION="PERMISSION",e.IMAGE_LOAD_FAILED="IMAGE_LOAD_FAILED",e.UNKNOWN="UNKNOWN",e.NETWORK_ERROR="NETWORK_ERROR",e.VALIDATION_ERROR="VALIDATION_ERROR",e.PERMISSION_ERROR="PERMISSION_ERROR",e.COMPONENT_ERROR="COMPONENT_ERROR",e.TEMPLATE_PARSE_ERROR="TEMPLATE_PARSE_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(qe||{});class Dm{constructor(){tn(this,"errorHistory",[]);tn(this,"maxHistorySize",100)}handleError(t,o,r,n,s){const a={type:t,message:o,details:r,componentId:n,action:s,timestamp:Date.now()};return this.errorHistory.unshift(a),this.errorHistory.length>this.maxHistorySize&&(this.errorHistory=this.errorHistory.slice(0,this.maxHistorySize)),t==="VALIDATION"||t==="PERMISSION"?y.warn(`[${t}] ${o}`,r):y.error(`[${t}] ${o}`,r),a}componentError(t,o,r){return this.handleError("COMPONENT",t,r,o,"component_operation")}templateError(t,o){return this.handleError("TEMPLATE",t,o,void 0,"template_processing")}validationError(t,o){return this.handleError("VALIDATION",t,o,void 0,"validation")}fileError(t,o){return this.handleError("FILE",t,o,void 0,"file_operation")}networkError(t,o){return this.handleError("NETWORK",t,o,void 0,"network_request")}permissionError(t,o){return this.handleError("PERMISSION",t,o,void 0,"permission_check")}unknownError(t,o){return this.handleError("UNKNOWN",t,o,void 0,"unknown")}getErrorHistory(){return[...this.errorHistory]}getErrorsByType(t){return this.errorHistory.filter(o=>o.type===t)}clearHistory(){this.errorHistory=[],y.debug("エラー履歴をクリアしました")}getErrorStats(){const t=Object.values(qe).reduce((o,r)=>(o[r]=0,o),{});return this.errorHistory.forEach(o=>{t[o.type]++}),t}}function go(e,t,o,r="UNKNOWN"){try{return e()}catch(n){const s=n instanceof Error?{stack:n.stack,name:n.name}:{error:String(n)};return t.handleError(r,o,s),null}}const ho=new Dm,xm=["content","nested_parts"],mc=["_isZForItem","_parentComponentId","_arrayName","_arrayIndex","_zForTemplate"];function ss(e){const t=(u,v)=>{if(v.length===0||v[0]>=u.length)return null;let _=u[v[0]];for(let $=1;$<v.length;$++){if(!_.nested_parts||!Array.isArray(_.nested_parts)||v[$]>=_.nested_parts.length)return null;_=_.nested_parts[v[$]]}return _},o=(u,v)=>{if(v.length===1)return u;let _=u[v[0]];for(let $=1;$<v.length-1;$++){if(!_.nested_parts||!Array.isArray(_.nested_parts))return[];_=_.nested_parts[v[$]]}return _.nested_parts||[]},r=u=>u.split("-").map(Number),n=u=>u.join("-"),s=(u,v,_=[])=>{if(y.debug(`findComponentRecursively: 検索開始 - componentId=${v}, depth=${_.length}`),!u||!Array.isArray(u))return y.debug(`findComponentRecursively: 無効なデータ - data=${u}, isArray=${Array.isArray(u)}`),null;y.debug(`findComponentRecursively: ${u.length}個のコンポーネントを検索中`);for(let $=0;$<u.length;$++){const g=u[$],P=[..._,$];if(y.debug(`findComponentRecursively: [${$}] チェック中 - id=${g.id}, type=${g.type}`),g.id===v)return y.success(`findComponentRecursively: 発見！ - ${v} at path=${P.join("-")}`),g;if(g.nested_parts&&Array.isArray(g.nested_parts)){y.debug(`findComponentRecursively: nested_parts検索 - ${g.id} (${g.nested_parts.length}個)`);const D=s(g.nested_parts,v,P);if(D)return D}const N=Object.keys(g);for(const D of N){const x=g[D];if(Array.isArray(x)&&D!=="nested_parts"){y.debug(`findComponentRecursively: z-for配列検索 - ${g.id}.${D} (${x.length}個)`);for(let O=0;O<x.length;O++){const R=x[O];if(R&&typeof R=="object"&&R.id){if(y.debug(`findComponentRecursively: z-for配列アイテム - ${R.id} in ${g.id}.${D}[${O}]`),R.id===v)return y.success(`findComponentRecursively: z-for配列アイテムで発見！ - ${v}`),R;if(R.nested_parts&&Array.isArray(R.nested_parts)){y.debug(`findComponentRecursively: z-for配列アイテムのネストパーツ検索 - ${R.id}.nested_parts (${R.nested_parts.length}個)`);const se=s(R.nested_parts,v,[...P,O]);if(se)return y.success(`findComponentRecursively: z-for配列内のネストパーツで発見！ - ${v}`),se}}}}}}return y.debug(`findComponentRecursively: 未発見 - ${v}`),null},a=(u,v)=>go(()=>{if(u==="z-for-item")return"";if(!Array.isArray(e))throw new Error("Parts配列が無効です");if(!u||!v)throw new Error("Type または ModuleName が指定されていません");const _=e.find(g=>g.type===u);if(!_)throw new Error(`パーツタイプ "${u}" が見つかりません`);const $=_.module.find(g=>g.title===v);if(!$)throw new Error(`モジュール "${v}" が見つかりません (type: ${u})`);return $.body},ho,`テンプレート取得エラー: ${u}/${v}`,qe.TEMPLATE)||"",i=new Set,l=(u,v)=>{y.debug(`extractZForTemplate開始: arrayName=${v}`);const _=new RegExp(`<(\\w+)[^>]*z-for="${v}"[^>]*>`),$=u.match(_);if(!$)return y.warn(`z-for="${v}" 開始タグが見つかりません`),y.debug("親テンプレート内容:",u.substring(0,500)),"";const g=u.indexOf($[0]),P=$[1];let N=0,D=g,x=g;for(;x<u.length;)if(u.substring(x,x+P.length+1)===`<${P}`){const R=u.indexOf(">",x);R!==-1?(N++,x=R+1):x++}else if(u.substring(x,x+P.length+3)===`</${P}>`){if(N--,N===0){D=x+P.length+3;break}x+=P.length+3}else x++;if(N!==0)return y.warn(`z-for="${v}" の対応する終了タグが見つかりません（深度: ${N}）`),"";const O=u.substring(g,D).trim();return y.debug(`z-for内テンプレート抽出成功: ${v}`,{extractedContent:O.substring(0,200),fullContent:O,startIndex:g,endIndex:D,depth:0}),O},b=()=>"comp_"+Math.random().toString(36).substring(2,11)+Date.now().toString(36),m=u=>{const v=`${u.id}_${u.type}_${u.module_name}`;if(y.debug(`getFieldInfo: _isZForItem=${u._isZForItem}`),y.debug(`getFieldInfo: _arrayName=${u._arrayName}`),i.has(v))return y.warn(`getFieldInfo: 無限ループを検出、処理をスキップ: ${v}`),[];i.add(v);try{let _="";if(u._isZForItem){const D=u._parentType,x=u._parentModuleName;y.debug(`getFieldInfo: z-for-itemのparent情報 - type: ${D}, module: ${x}`),D&&x?_=a(D,x):(y.debug("getFieldInfo: 親情報なし、コンポーネント自体を使用"),_=a(u.type,u.module_name))}else _=a(u.type,u.module_name);if(!_)return[];if(y.debug(`getFieldInfo: component.id=${u.id}, type=${u.type}, module=${u.module_name}`),y.debug(`getFieldInfo: _isZForItem=${u._isZForItem}`),u._isZForItem){const D=u._arrayName;if(y.debug(`getFieldInfo: z-for配列要素を検出, arrayName=${D}`),y.debug("getFieldInfo: componentプロパティ:",Object.keys(u)),D){y.debug("getFieldInfo: 元のテンプレート:",_.substring(0,300));const x=l(_,D);x?(_=x,y.debug("getFieldInfo: z-for内テンプレート抽出完了:",_)):y.warn(`getFieldInfo: z-for内テンプレートの抽出に失敗: arrayName=${D}`)}}else y.debug("getFieldInfo: 通常のコンポーネント処理");const $=[],g=_.match(/\(\$([^:]+):(.*?)\)/g)||[],P=[];if(_.includes("z-for=")){const D=/<(\w+)[^>]*z-for="([^"]+)"[^>]*>/g;let x;for(;(x=D.exec(_))!==null;){const O=x[2],R=x.index;if(y.debug(`z-for検出: ${O}, 現在の配列: ${u._arrayName}`),u._isZForItem&&O!==u._arrayName){let se=0,q=R,W=R;for(;W<_.length;){if(_.substring(W,W+4)==="<div")se++;else if(_.substring(W,W+6)==="</div>"&&(se--,se===0)){q=W+6;break}W++}if(se===0){const pe=_.substring(R,q).match(/\(\$([^:]+):(.*?)\)/g);pe&&pe.forEach(Se=>{const Oe=Se.match(/\(\$([^:]+):(.*?)\)/);if(Oe){const Ne=Oe[1].replace("?","");P.push(Ne)}}),y.debug(`子z-for除外: ${O} のフィールドを除外リストに追加`)}}}}P.length>0&&y.debug("z-for配列内のフィールドを除外:",P);let N;return u._isZForItem?N=g.filter(D=>{const x=D.match(/\(\$([^:]+):(.*?)\)/);if(x){const O=x[1].replace("?",""),R=!P.includes(O);return R?y.debug(`z-for配列アイテム編集: フィールド ${O} を表示`):y.debug(`z-for配列アイテム編集: フィールド ${O} を除外（子z-forフィールド）`),R}return!1}):N=g.filter(D=>{const x=D.match(/\(\$([^:]+):(.*?)\)/);if(x){const O=x[1].replace("?","");let R=!1,se=!1;const q=new RegExp(`\\(\\$${O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[?:]`,"g"),W=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let Y;for(;(Y=W.exec(_))!==null;){const pe=Y[0];if(q.test(pe)){R=!0;break}}if(R){const pe=_.replace(W,"");q.lastIndex=0,q.test(pe)&&(se=!0)}return R&&!se?(y.debug(`getFieldInfo: ${O} をz-for内専用フィールドとして除外`),!1):(y.debug(`getFieldInfo: ${O} を表示対象に含める`),!0)}return!0}),N.forEach(D=>{const x=D.match(/\(\$([^:]+):(.*?)\)/);if(x){const[,O,R]=x,se=O.includes("?"),q=O.replace("?","");if(R.includes("|")){let W=R.split("|"),Y=!1;if((R.includes("||")||R.startsWith("|")||R.endsWith("|"))&&(Y=!0),W=W.filter(pe=>pe.trim()!==""),Y&&W.unshift("指定なし"),se){const pe=W.length>0?[W[0]]:[],Se={type:"checkbox",paramName:q,propKey:q,options:W,defaultValue:pe,label:`${q} (チェックボックス)`};$.push(Se)}else{const pe=W[0]||"",Se={type:"radio",paramName:q,propKey:q,options:W,defaultValue:pe,label:`${q} (ラジオボタン)`};$.push(Se)}}else if(R.includes(",")){const W=R.split(",").map(Y=>Y.trim()).filter(Y=>Y!=="");if(se){const Y=W.length>0?[W[0]]:[],pe={type:"select-multiple",paramName:q,propKey:q,options:W,defaultValue:Y,label:`${q} (セレクトボックス・複数選択)`};$.push(pe)}else{const Y=W[0]||"",pe={type:"select",paramName:q,propKey:q,options:W,defaultValue:Y,label:`${q} (セレクトボックス)`};$.push(pe)}}else{const W={type:"text",paramName:q,propKey:q,options:[],defaultValue:R,label:`${q} (テキストボックス)`};$.push(W)}}}),y.debug(`getFieldInfo: 抽出されたフィールド数=${$.length}`,$.map(D=>({paramName:D.paramName,type:D.type}))),$}catch(_){return y.error(`getFieldInfo: エラーが発生しました: ${v}`,_),[]}finally{i.delete(v)}},h=(u,v)=>{try{const _=a(u.type,u.module_name);if(!_)return!1;let $=_;if(u._isZForItem){const x=u._arrayName,O=l(_,x);O&&($=O)}const g=new RegExp(`\\{\\$${v}:[^}]*\\}`),P=new RegExp(`\\(\\$${v}:[^)]*\\)`),N=new RegExp(`\\(\\$${v}\\?:[^)]*\\)`),D=g.test($)||P.test($)||N.test($);if(!D&&!u._isZForItem){const x=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let O;for(;(O=x.exec(_))!==null;){const R=O[0];if(y.debug(`isTemplateField: z-forブロック検査中 - ${v}`,R.substring(0,100)),g.test(R)||P.test(R)||N.test(R))return y.success(`isTemplateField: ${v} はz-for内で使用されているためメイン編集パネルから除外`),!0}y.debug(`isTemplateField: ${v} - z-for内での使用検出結果: false`),y.debug("isTemplateField: テンプレート内容 (最初200文字):",_.substring(0,200))}return D}catch(_){return y.warn(`isTemplateField error for ${v}:`,_),!1}},E=(u,v)=>!!(["content","nested_parts"].includes(u)||Array.isArray(v)||typeof v=="object"&&v!==null);return{findComponentByPath:t,getParentContainer:o,parseHierarchyPath:r,stringifyHierarchyPath:n,findComponentRecursively:s,getTemplate:a,generateUniqueId:b,getFieldInfo:m,isTemplateField:h,shouldExcludeField:E,shouldShowBasicField:(u,v,_)=>{if(u==="id"||u==="type"||u==="module_name")return!1;const $=a(_.type,_.module_name);if($&&$.includes("z-for=")){const g=/<[^>]*z-for="[^"]*"[^>]*>[\s\S]*?<\/[^>]*>/g;let P,N=!1,D=!1;const x=new RegExp(`\\(\\$${u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[?:]`,"g");for(;(P=g.exec($))!==null;){const O=P[0];if(x.test(O)){N=!0;break}}if(N){const O=$.replace(g,"");x.lastIndex=0,x.test(O)&&(D=!0)}if(N&&!D)return!1}return _._isZForItem||mc.includes(u)||E(u,v)||h(_,u)||v===""||v===null||v===void 0||typeof v=="string"&&v.trim()===""||typeof v=="number"&&v===0?!1:typeof v=="string"&&v.trim()!==""||typeof v=="number"&&v!==0||typeof v=="boolean"},shouldShowArrayField:(u,v,_)=>{const $=`${_.id}_${_.type}_${_.module_name}_array_${u}`;if(i.has($))return y.warn(`shouldShowArrayField: 無限ループを検出、処理をスキップ: ${$}`),!1;i.add($);try{if(y.debug(`shouldShowArrayField開始: key=${u}, component: ${_.id} (${_.type}/${_.module_name})`,{key:u,value:v,componentId:_.id}),xm.includes(String(u)))return y.debug(`shouldShowArrayField: ${u} はシステム内部フィールドのため除外`),!1;if(_._isZForItem&&mc.includes(String(u)))return y.debug(`shouldShowArrayField: ${u} はz-forシステムフィールドのため除外`),!1;if(h(_,u))return y.debug(`shouldShowArrayField: ${u} はテンプレート記法フィールドのため除外`),!1;const g=a(_.type,_.module_name);if(g){if(y.debug("shouldShowArrayField: テンプレート取得成功:",g.substring(0,200)),new RegExp(`z-for="${u}"`).test(g))return y.success(`shouldShowArrayField: ${u}はz-for記法で使用されているため編集パネルでは非表示（プレビュー側で編集）`),Array.isArray(v)||(y.debug(`shouldShowArrayField: ${u}は配列でないが、記法で使用されているため空配列で初期化`),_[u]=[]),!1;y.debug(`shouldShowArrayField: ${u}は配列記法で使用されていない`)}else y.debug("shouldShowArrayField: テンプレート取得失敗");return Array.isArray(v)||y.debug(`shouldShowArrayField: ${u}は配列でなく、記法でも使用されていない`),!1}catch(g){return y.error(`shouldShowArrayField: エラーが発生しました: ${$}`,g),!1}finally{i.delete($)}},shouldShowArrayItemField:(u,v,_,$,g)=>u==="id"||Array.isArray(v)||typeof v=="object"&&v!==null||v===""||v===null||v===void 0||typeof v=="string"&&v.trim()===""||typeof v=="number"&&v===0?!1:(a(_.type,_.module_name),typeof v=="string"&&v.trim()!==""||typeof v=="number"&&v!==0||typeof v=="boolean"),getInputType:u=>u.includes("url")||u.includes("src")?"url":u.includes("email")?"email":u.includes("number")||u.includes("count")?"number":"text",updateCheckboxValue:(u,v,_,$)=>{u[v]||(u[v]=[]);const g=u[v];$?g.includes(_)||g.push(_):u[v]=g.filter(P=>P!==_)},isCheckboxChecked:(u,v,_)=>{const $=u[v];return Array.isArray($)&&$.includes(_)},addArrayItem:(u,v)=>{u[v]||(u[v]=[]);const _={id:`${v}_${Date.now()}`},$=u[v];if($.length>0){const g=$[0];Object.keys(g).forEach(P=>{if(P!=="id"){const N=g[P],D=typeof N=="string"?"":N;_[P]=D}})}$.push(_)},removeArrayItem:(u,v,_)=>{const $=u[v];$&&$.length>_&&$.splice(_,1)},createNewComponent:(u,v)=>go(()=>{if(!u||!v)throw new Error("partType または module が指定されていません");if(!v.title||!v.body)throw new Error("module.title または module.body が無効です");const _=b();y.debug(`createNewComponent開始: partType=${u}, module=${v.title}`);const $={id:_,type:u,module_name:v.title},g=v.body;y.debug("createNewComponent テンプレート:",g.substring(0,300));const P=g.match(/\{\$([^:}]+):([^}]+)\}/g);P&&P.forEach(O=>{const R=O.match(/\{\$([^:}]+):([^}]+)\}/);if(R){const[,se,q]=R;se!=="input"&&($[se]=String(q))}});const N=g.match(/\(\$([^:?]+):(.*?)\)/g);N&&N.forEach(O=>{const R=O.match(/\(\$([^:?]+):(.*?)\)/);if(R){const[,se,q]=R,W=q.split("|").filter(Y=>Y.trim()!=="");W.length>0&&($[se]=String(W[0]))}});const D=g.match(/\(\$([^:?]+)\?:(.*?)\)/g);D&&D.forEach(O=>{const R=O.match(/\(\$([^:?]+)\?:(.*?)\)/);if(R){const[,se,q]=R,W=q.split("|").filter(Y=>Y.trim()!=="");$[se]=W.length>0?[W[0]]:[]}});const x=g.match(/z-for="([^"]+)"/g);return x?(y.debug("createNewComponent: z-for記法発見:",x),x.forEach(O=>{const R=O.match(/z-for="([^"]+)"/);if(R){const[,se]=R;$[se]?y.debug(`createNewComponent: z-for配列 ${se} は既に初期化済み`):(y.debug(`createNewComponent: z-for配列 ${se} を空配列で初期化`),$[se]=[])}})):y.debug("createNewComponent: z-for記法が見つかりませんでした"),y.debug("createNewComponent完了: newComponent=",$),$},ho,`コンポーネント作成エラー: ${u}/${v?.title}`,qe.COMPONENT)||{id:b(),type:u||"unknown",module_name:v?.title||"unknown"},createArrayItem:u=>{const v={id:b()},_=u.match(/\{\$([^:}]+):([^}]+)\}/g);_&&_.forEach(g=>{const P=g.match(/\{\$([^:}]+):([^}]+)\}/);if(P){const[,N,D]=P;v[N]=String(D)}});const $=u.match(/\(\$([^:?]+):(.*?)\)/g);return $&&$.forEach(g=>{const P=g.match(/\(\$([^:?]+):(.*?)\)/);if(P){const[,N,D]=P,x=D.split("|").filter(O=>O.trim()!=="");x.length>0&&(v[N]=String(x[0]))}}),v},getArrayItemFieldInfo:(u,v)=>{const _=a(u.type,u.module_name);if(!_)return[];const $=[];let g="";const P=l(_,v);return P&&(g=P),g&&(g.match(/\(\$([^:]+):(.*?)\)/g)||[]).forEach(D=>{const x=D.match(/\(\$([^:]+):(.*?)\)/);if(x){const[,O,R]=x,se=O.includes("?"),q=O.replace("?","");if(R.includes("|")){let W=R.split("|"),Y=!1;if((R.includes("||")||R.startsWith("|")||R.endsWith("|"))&&(Y=!0),W=W.filter(pe=>pe.trim()!==""),Y&&W.unshift("指定なし"),se){const pe=W.length>0?[W[0]]:[],Se={type:"checkbox",paramName:q,propKey:q,options:W,defaultValue:pe,label:`${q} (チェックボックス)`};$.push(Se)}else{const pe=W[0]||"",Se={type:"radio",paramName:q,propKey:q,options:W,defaultValue:pe,label:`${q} (ラジオボタン)`};$.push(Se)}}else if(R.includes(",")){const W=R.split(",").map(Y=>Y.trim()).filter(Y=>Y!=="");if(se){const Y=W.length>0?[W[0]]:[],pe={type:"select-multiple",paramName:q,propKey:q,options:W,defaultValue:Y,label:`${q} (セレクトボックス・複数選択)`};$.push(pe)}else{const Y=W[0]||"",pe={type:"select",paramName:q,propKey:q,options:W,defaultValue:Y,label:`${q} (セレクトボックス)`};$.push(pe)}}else{const W={type:"text",paramName:q,propKey:q,options:[],defaultValue:R,label:`${q} (テキストボックス)`};$.push(W)}}}),$}}}const Mm={class:"zero-code-content-sidebar"},Nm={key:0,class:"zero-code-editable-component"},Fm={class:"zero-code-component-info"},km={class:"zero-code-component-type"},Om={class:"zero-code-component-module"},Lm={class:"zero-code-component-id"},Rm={class:"zero-code-fields"},Hm={class:"zero-code-field-label"},Bm={key:0,class:"zero-code-text-group"},jm=["value","onInput"],Um={key:1,class:"zero-code-radio-group"},Vm=["id","value","name","checked","onChange"],Zm=["for"],Wm={key:2,class:"zero-code-checkbox-group"},qm=["id","checked","onChange"],Km=["for"],Gm={key:3,class:"zero-code-select-group"},Jm=["value","onChange"],Ym=["value"],Xm={key:4,class:"zero-code-select-multiple-group"},Qm=["value","onChange"],eg=["value","selected"],tg={key:0,class:"zero-code-field-group"},og=["for"],rg=["id","value","type","readonly","onInput"],ng=lt({__name:"EditorPanel",props:{showEditor:{type:Boolean},selectedComponent:{type:[Object,null]},getFieldInfo:{type:Function},shouldShowBasicField:{type:Function},shouldShowArrayField:{type:Function},shouldShowArrayItemField:{type:Function},getInputType:{type:Function},isCheckboxChecked:{type:Function},partsData:{type:Array},modalContainer:{default:"body",type:String}},emits:["close","update:value","update:array-item","update:checkbox","add:array-item","remove:array-item","reorder:array-item"],setup(e,{emit:t}){const o=e;we(()=>!o.modalContainer||o.modalContainer==="body"?!0:typeof document<"u");const r=we(()=>!o.modalContainer||o.modalContainer==="body"?"body":typeof document<"u"&&document.querySelector(o.modalContainer)?o.modalContainer:"body"),n=t,s=()=>{n("close")},a=(M,p)=>{n("update:value",M,p)},i=()=>{if(!o.selectedComponent)return;o.getFieldInfo(o.selectedComponent).forEach(p=>{p.defaultValue&&!o.selectedComponent[p.propKey]&&((p.type==="checkbox"||p.type==="select-multiple")&&Array.isArray(p.defaultValue)?a(p.propKey,[...p.defaultValue]):a(p.propKey,p.defaultValue))})};tt(()=>o.selectedComponent,M=>{M&&i()},{immediate:!0});const l=(M,p,c,d)=>{if(!o.selectedComponent)return;const f=o.selectedComponent[M];if(!Array.isArray(f))return;const C={...f[p],[c]:d};n("update:array-item",M,p,C)},b=(M,p,c)=>{n("update:checkbox",M,p,c)},m=(M,p)=>{M&&n("add:array-item",p)},h=(M,p,c)=>{M&&n("remove:array-item",p,c)},E=(M,p,c)=>{if(!o.selectedComponent)return;const d=o.selectedComponent[M];if(!Array.isArray(d))return;const f=[...d],[C]=f.splice(p,1);f.splice(c,0,C),o.selectedComponent[M]=f,y.debug(`📋 配列並べ替え完了: ${M}[${p}] → [${c}]`),n("reorder:array-item",M,p,c)},z=M=>{if(!o.selectedComponent)return{};const p={};if(o.partsData){const f=ss(o.partsData).getArrayItemFieldInfo(o.selectedComponent,M);if(f.forEach(C=>{p[C.propKey]={label:C.label,type:C.type,options:C.options,defaultValue:C.defaultValue}}),f.length>0)return p}const c=o.selectedComponent[M];if(Array.isArray(c)&&c.length>0){const d=c[0];typeof d=="object"&&d!==null&&Object.keys(d).forEach(f=>{f!=="id"&&(d[f],p[f]={label:f.replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase()),type:f.includes("desc")||f.includes("content")?"textarea":"text"})})}return Object.keys(p).length===0?{title:{label:"タイトル",type:"text"},content:{label:"内容",type:"textarea"}}:p},T=M=>M.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase()).concat(" 一覧"),k=M=>{let p=M;return M.endsWith("s")&&(p=M.slice(0,-1)),p.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())};return(M,p)=>(L(),ft(fi,{to:r.value},[M.showEditor&&M.selectedComponent?(L(),H("div",{key:0,class:"zero-code-overlay",onClick:s},[w("div",{class:"zero-code-sidebar",onClick:p[0]||(p[0]=Bt(()=>{},["stop"]))},[w("div",{class:"zero-code-header"},[w("div",{class:"zero-code-header-buttons"},[w("button",{class:"zero-code-btn zero-code-close-button",onClick:s},"✖️")])]),w("div",Mm,[M.selectedComponent?(L(),H("div",Nm,[w("div",Fm,[w("span",km,oe(M.selectedComponent.type),1),w("span",Om,oe(M.selectedComponent.module_name),1),w("span",Lm,"ID: "+oe(M.selectedComponent.id),1)]),w("div",Rm,[(L(!0),H($e,null,Me(M.getFieldInfo(M.selectedComponent),c=>(L(),H("div",{key:c.propKey,class:"zero-code-template-field"},[w("label",Hm,oe(c.label)+":",1),c.type==="text"?(L(),H("div",Bm,[w("input",{value:M.selectedComponent[c.propKey]||c.defaultValue,type:"text",class:"zero-code-field-input",onInput:d=>{const f=d.target;a(c.propKey,f.value)}},null,40,jm)])):ge("",!0),c.type==="radio"?(L(),H("div",Um,[(L(!0),H($e,null,Me(c.options,d=>(L(),H("div",{key:d,class:"zero-code-radio-item"},[w("input",{id:`${M.selectedComponent.id}_${c.propKey}_${d}`,value:d,type:"radio",name:`${M.selectedComponent.id}_${c.propKey}`,class:"zero-code-radio-input",checked:M.selectedComponent[c.propKey]===d||d==="指定なし"&&!M.selectedComponent[c.propKey],onChange:f=>a(c.propKey,d==="指定なし"?"":d)},null,40,Vm),w("label",{for:`${M.selectedComponent.id}_${c.propKey}_${d}`,class:"zero-code-radio-label"},oe(d),9,Zm)]))),128))])):ge("",!0),c.type==="checkbox"?(L(),H("div",Wm,[(L(!0),H($e,null,Me(c.options,d=>(L(),H("div",{key:d,class:"zero-code-checkbox-item"},[w("input",{id:`${M.selectedComponent.id}_${c.propKey}_${d}`,checked:M.isCheckboxChecked(M.selectedComponent,c.propKey,d)||Array.isArray(c.defaultValue)&&c.defaultValue.includes(d)&&!M.selectedComponent[c.propKey],type:"checkbox",class:"zero-code-checkbox-input",onChange:f=>{const C=f.target;b(c.propKey,d,C.checked)}},null,40,qm),w("label",{for:`${M.selectedComponent.id}_${c.propKey}_${d}`,class:"zero-code-checkbox-label"},oe(d),9,Km)]))),128))])):ge("",!0),c.type==="select"?(L(),H("div",Gm,[w("select",{value:M.selectedComponent[c.propKey]||c.defaultValue,class:"zero-code-field-input zero-code-select-input",onChange:d=>{const f=d.target;a(c.propKey,f.value)}},[(L(!0),H($e,null,Me(c.options,d=>(L(),H("option",{key:d,value:d},oe(d),9,Ym))),128))],40,Jm)])):ge("",!0),c.type==="select-multiple"?(L(),H("div",Xm,[w("select",{value:M.selectedComponent[c.propKey]||c.defaultValue,multiple:"",class:"zero-code-field-input zero-code-select-multiple",onChange:d=>{const f=d.target,C=Array.from(f.selectedOptions).map(I=>I.value);a(c.propKey,C)}},[(L(!0),H($e,null,Me(c.options,d=>(L(),H("option",{key:d,value:d,selected:Array.isArray(M.selectedComponent[c.propKey])&&M.selectedComponent[c.propKey].includes(d)},oe(d),9,eg))),128))],40,Qm)])):ge("",!0)]))),128)),(L(!0),H($e,null,Me(M.selectedComponent,(c,d)=>(L(),H($e,{key:String(d)},[M.shouldShowBasicField(String(d),c,M.selectedComponent)?(L(),H("div",tg,[w("label",{for:`${M.selectedComponent.id}_${String(d)}`},oe(d)+":",9,og),w("input",{id:`${M.selectedComponent.id}_${String(d)}`,value:c,type:M.getInputType(String(d)),class:"zero-code-field-input",readonly:String(d)==="id",onInput:f=>{const C=f.target;a(String(d),C.value)}},null,40,rg)])):ge("",!0)],64))),128)),(L(!0),H($e,null,Me(M.selectedComponent,(c,d)=>(L(),H($e,{key:String(d)},[M.shouldShowArrayField(String(d),c,M.selectedComponent)?(L(),ft(Tm,{key:0,"component-id":M.selectedComponent.id,"array-key":String(d),items:Array.isArray(c)?c:[],fields:z(String(d)),label:T(String(d)),"item-label":k(String(d)),onAdd:()=>m(M.selectedComponent,String(d)),onRemove:f=>h(M.selectedComponent,String(d),f),onReorder:(f,C)=>E(String(d),f,C),onUpdate:(f,C,I)=>l(String(d),f,C,I)},null,8,["component-id","array-key","items","fields","label","item-label","onAdd","onRemove","onReorder","onUpdate"])):ge("",!0)],64))),128))])])):ge("",!0)])])])):ge("",!0)],8,["to"]))}}),sg={class:"zero-code-tab-content"},ag=lt({__name:"EditorMainPanel",props:{dataTab:{type:String},editablePageData:{type:Array},localParts:{type:Array},localCommonParts:{type:Array},localIndividualParts:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array},showPartSelector:{type:Boolean},showNestedPartSelector:{type:Boolean},showEditor:{type:Boolean},selectedComponent:{type:[Object,null]},renderComponentWithNested:{type:Function},getFieldInfo:{type:Function},shouldShowBasicField:{type:Function},shouldShowArrayField:{type:Function},shouldShowArrayItemField:{type:Function},getInputType:{type:Function},isCheckboxChecked:{type:Function},partsData:{type:Array},isTextEditing:{type:Boolean}},emits:["update:data-tab","add-part","edit-part","delete-part","reorder-parts","close-part-selector","select-part","close-nested-part-selector","select-nested-part","close-editor","update-editor-value","add-array-item","remove-array-item","update-array-item","update-checkbox"],setup(e,{emit:t}){const o=e,r=Math.random().toString(36).substr(2,9);return Uo(async()=>{await St();const n=`.modal-container-${r}`;document.querySelector(n)||console.warn(`モーダルコンテナが見つかりません: ${n}`)}),tt(()=>o.editablePageData,n=>{},{deep:!0}),(n,s)=>(L(),H("div",sg,[Xe(Mf,{"model-value":n.dataTab,"page-data":n.editablePageData,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"common-parts":n.localCommonParts,"individual-parts":n.localIndividualParts,"common-images":n.commonImages,"individual-images":n.individualImages,"render-component-with-nested":n.renderComponentWithNested,"is-text-editing":n.isTextEditing,"onUpdate:modelValue":s[0]||(s[0]=a=>n.$emit("update:data-tab",a)),onAddPart:s[1]||(s[1]=a=>n.$emit("add-part",a)),onEditPart:s[2]||(s[2]=a=>n.$emit("edit-part",a)),onDeletePart:s[3]||(s[3]=a=>n.$emit("delete-part",a)),onReorderParts:s[4]||(s[4]=a=>n.$emit("reorder-parts",a))},null,8,["model-value","page-data","parts","common-parts","individual-parts","common-images","individual-images","render-component-with-nested","is-text-editing"]),n.showPartSelector?(L(),ft(fc,{key:0,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"modal-container":`.modal-container-${fe(r)}`,onClose:s[5]||(s[5]=a=>n.$emit("close-part-selector")),onSelectPart:s[6]||(s[6]=(a,i)=>n.$emit("select-part",a,i))},null,8,["parts","modal-container"])):ge("",!0),n.showNestedPartSelector?(L(),ft(fc,{key:1,parts:n.localParts&&n.localParts.length>0?n.localParts:n.parts||[],"is-nested":!0,"modal-container":`.modal-container-${fe(r)}`,onClose:s[7]||(s[7]=a=>n.$emit("close-nested-part-selector")),onSelectPart:s[8]||(s[8]=(a,i)=>n.$emit("select-nested-part",a,i))},null,8,["parts","modal-container"])):ge("",!0),w("div",{class:et(`modal-container-${fe(r)}`),style:{position:"relative","z-index":"9999"}},null,2),(L(),ft(ng,{key:2,"show-editor":n.showEditor,"selected-component":n.selectedComponent,"get-field-info":n.getFieldInfo,"should-show-basic-field":n.shouldShowBasicField,"should-show-array-field":n.shouldShowArrayField,"should-show-array-item-field":n.shouldShowArrayItemField,"get-input-type":n.getInputType,"is-checkbox-checked":n.isCheckboxChecked,"modal-container":`.modal-container-${fe(r)}`,onClose:s[9]||(s[9]=a=>n.$emit("close-editor")),"onUpdate:value":s[10]||(s[10]=(a,i)=>n.$emit("update-editor-value",a,i)),"onAdd:arrayItem":s[11]||(s[11]=a=>n.$emit("add-array-item",a)),"onRemove:arrayItem":s[12]||(s[12]=(a,i)=>n.$emit("remove-array-item",a,i)),"onUpdate:arrayItem":s[13]||(s[13]=a=>n.$emit("update-array-item",a)),"onUpdate:checkbox":s[14]||(s[14]=a=>n.$emit("update-checkbox",a))},null,8,["show-editor","selected-component","get-field-info","should-show-basic-field","should-show-array-field","should-show-array-item-field","get-input-type","is-checkbox-checked","modal-container"]))]))}}),ig={class:"zero-code-data-display"},lg={class:"zero-code-data-tabs"},cg={class:"zero-code-form-group"},dg={class:"zero-code-form-group"},ug=["value"],pg={class:"zero-code-data-content"},fg={key:0,class:"zero-code-rendered-content"},mg={class:"zero-code-component-header"},gg={class:"zero-code-component-info-header"},hg={class:"zero-code-component-type"},vg={class:"zero-code-component-id"},bg={class:"zero-code-rendered-component"},yg={class:"zero-code-component-header"},_g={class:"zero-code-component-info-header"},$g={class:"zero-code-component-module"},wg={class:"zero-code-header-actions"},zg=["onClick"],Ag=["onClick"],Cg=["innerHTML"],Eg={key:1,class:"zero-code-no-parts"},gc=lt({__name:"PartsManager",props:{parts:{type:Array},renderPartPreview:{type:Function}},emits:["edit-part","delete-part","search","filter"],setup(e,{emit:t}){const o=e,r=t,n=_e(""),s=_e(""),a=we(()=>Array.from(new Set(o.parts.map(m=>m.type)))),i=we(()=>{let m=[...o.parts];if(s.value&&(m=m.filter(h=>h.type===s.value)),n.value){const h=n.value.toLowerCase();m=m.map(E=>({...E,module:E.module.filter(z=>z.title.toLowerCase().includes(h)||z.body.toLowerCase().includes(h))})).filter(E=>E.module.length>0)}return m}),l=()=>{r("search",n.value)},b=()=>{r("filter",s.value)};return(m,h)=>(L(),H("div",ig,[h[4]||(h[4]=w("div",{class:"zero-code-component-header"},[w("h4",null,"パーツ管理")],-1)),w("div",lg,[w("div",cg,[It(w("input",{"onUpdate:modelValue":h[0]||(h[0]=E=>n.value=E),placeholder:"パーツ名で検索...",class:"zero-code-form-input",onInput:l},null,544),[[Jt,n.value]])]),w("div",dg,[It(w("select",{"onUpdate:modelValue":h[1]||(h[1]=E=>s.value=E),class:"zero-code-form-select",onChange:b},[h[2]||(h[2]=w("option",{value:""},"すべてのType",-1)),(L(!0),H($e,null,Me(a.value,E=>(L(),H("option",{key:E,value:E},oe(E),9,ug))),128))],544),[[Al,s.value]])])]),w("div",pg,[Array.isArray(i.value)&&i.value.length>0?(L(),H("div",fg,[(L(!0),H($e,null,Me(i.value,(E,z)=>(L(),H("div",{key:z,class:"zero-code-data-section"},[w("div",mg,[w("div",gg,[w("span",hg,oe(E.type),1)]),w("span",vg,oe(E.module.length)+"個のパーツ",1)]),w("div",bg,[(L(!0),H($e,null,Me(E.module,(T,k)=>(L(),H("div",{key:k,class:"zero-code-draggable-item"},[w("div",yg,[w("div",_g,[w("span",$g,oe(T.title),1)]),w("div",wg,[w("button",{class:"zero-code-edit-btn",onClick:M=>m.$emit("edit-part",{type:E.type,module:T})}," 編集 ",8,zg),w("button",{class:"zero-code-delete-btn",onClick:M=>m.$emit("delete-part",{type:E.type,title:T.title})}," 削除 ",8,Ag)])]),w("div",{class:"zero-code-module-preview",innerHTML:o.renderPartPreview(T.body)},null,8,Cg)]))),128))])]))),128))])):(L(),H("div",Eg,h[3]||(h[3]=[w("p",null,"登録されたパーツがありません。",-1)])))])]))}}),Pg={class:"zero-code-modal-header"},Sg={class:"zero-code-modal-title"},Ig={class:"zero-code-title-main"},Tg={class:"zero-code-modal-subtitle"},Dg={class:"zero-code-modal-body"},xg={class:"zero-code-form-layout"},Mg={class:"zero-code-form-section"},Ng={key:0,class:"zero-code-form-group"},Fg={class:"zero-code-type-input-group"},kg=["value"],Og={key:1,class:"zero-code-form-group"},Lg={class:"zero-code-form-group"},Rg={class:"zero-code-body-editor-container"},Hg={class:"zero-code-preview-section"},Bg={class:"zero-code-preview-container"},jg=["innerHTML"],Ug={class:"zero-code-modal-footer"},Vg={class:"zero-code-modal-actions"},Zg=["disabled"],Wg=lt({__name:"PartRegistrationModal",props:{isEditing:{type:Boolean,default:!1},existingTypes:{type:Array},partCategory:{default:"common",type:String},editingPart:{default:null,type:[Object,null]},initialData:{default:()=>({type:"",title:"",body:""}),type:Object},renderPartPreview:{type:Function}},emits:["close","save"],setup(e,{emit:t}){const o=e,r=t,s=_e(o.isEditing&&o.editingPart?{type:o.editingPart.type,title:o.editingPart.module.title,body:o.editingPart.module.body}:{type:o.initialData.type,title:o.initialData.title,body:o.initialData.body}),a=we(()=>(o.isEditing||s.value.type.trim()!==""&&s.value.title.trim()!=="")&&s.value.body.trim()!==""),i=()=>{},l=()=>{a.value&&r("save",{type:s.value.type,title:s.value.title,body:s.value.body,category:o.partCategory||"common"})};return(b,m)=>(L(),H("div",{class:"zero-code-modal-overlay",onClick:m[7]||(m[7]=h=>b.$emit("close"))},[w("div",{class:"zero-code-part-modal",onClick:m[6]||(m[6]=Bt(()=>{},["stop"]))},[w("div",Pg,[w("div",Sg,[w("div",Ig,[w("h3",null,oe(b.isEditing?"パーツ編集":"新規パーツ登録"),1),w("span",{class:et(["zero-code-badge",b.partCategory])},oe(b.partCategory==="common"?"共通パーツ":"個別パーツ"),3)]),w("p",Tg,oe(b.isEditing?"パーツの内容を編集できます":"新しいパーツを作成します"),1)]),w("button",{class:"zero-code-modal-close-btn",onClick:m[0]||(m[0]=h=>b.$emit("close"))},m[8]||(m[8]=[w("span",null,"✖️",-1)]))]),w("div",Dg,[w("div",xg,[w("div",Mg,[b.isEditing?ge("",!0):(L(),H("div",Ng,[m[10]||(m[10]=w("label",{for:"part-type",class:"zero-code-form-label"},"Type",-1)),w("div",Fg,[It(w("select",{id:"part-type","onUpdate:modelValue":m[1]||(m[1]=h=>s.value.type=h),class:"zero-code-form-select"},[m[9]||(m[9]=w("option",{value:""},"新しいTypeを選択",-1)),(L(!0),H($e,null,Me(b.existingTypes,h=>(L(),H("option",{key:h,value:h},oe(h),9,kg))),128))],512),[[Al,s.value.type]]),!s.value.type||!b.existingTypes.includes(s.value.type)?It((L(),H("input",{key:0,"onUpdate:modelValue":m[2]||(m[2]=h=>s.value.type=h),placeholder:"新しいType名を入力",class:"zero-code-form-input"},null,512)),[[Jt,s.value.type]]):ge("",!0)])])),b.isEditing?ge("",!0):(L(),H("div",Og,[m[11]||(m[11]=w("label",{for:"part-title",class:"zero-code-form-label"},"Title",-1)),It(w("input",{id:"part-title","onUpdate:modelValue":m[3]||(m[3]=h=>s.value.title=h),placeholder:"パーツのタイトルを入力",class:"zero-code-form-input"},null,512),[[Jt,s.value.title]])])),w("div",Lg,[m[12]||(m[12]=w("label",{for:"part-body",class:"zero-code-form-label"},"HTML Template",-1)),w("div",Rg,[It(w("textarea",{id:"part-body","onUpdate:modelValue":m[4]||(m[4]=h=>s.value.body=h),class:"zero-code-body-editor",placeholder:"HTMLソースを直接編集してください...",onInput:i},null,544),[[Jt,s.value.body]])])])]),w("div",Hg,[m[13]||(m[13]=w("div",{class:"zero-code-preview-header"},[w("h4",null,"プレビュー"),w("span",{class:"zero-code-preview-info"},"リアルタイムで表示を確認")],-1)),w("div",Bg,[w("div",{class:"zero-code-preview-content",innerHTML:b.renderPartPreview(s.value.body)},null,8,jg)])])])]),w("div",Ug,[w("div",Vg,[w("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:m[5]||(m[5]=h=>b.$emit("close"))}," キャンセル "),w("button",{class:"zero-code-btn zero-code-btn-primary",disabled:!a.value,onClick:l},oe(b.isEditing?"更新":"登録"),9,Zg)])])])]))}}),qg={class:"zero-code-tab-content"},Kg={class:"zero-code-data-tabs"},Gg={class:"zero-code-tab-buttons"},Jg=["onClick"],Yg={class:"zero-code-parts-content"},Xg={key:0,class:"zero-code-parts-section"},Qg={class:"zero-code-section-header"},eh={key:1,class:"zero-code-parts-section"},th={class:"zero-code-section-header"},oh={key:2,class:"zero-code-parts-section"},rh={class:"zero-code-data-display-section"},nh={class:"zero-code-parts-sub-tabs"},sh={class:"zero-code-parts-sub-content"},ah={key:0,class:"zero-code-parts-sub-section"},ih={key:0},lh={class:"zero-code-data-display-pre"},ch={key:1},dh={key:1,class:"zero-code-parts-sub-section"},uh={key:0},ph={class:"zero-code-data-display-pre"},fh={key:1},mh=lt({__name:"PartsManagementPanel",props:{localParts:{type:Array},localCommonParts:{type:Array},localIndividualParts:{type:Array},showPartRegistration:{type:Boolean},existingPartTypes:{type:Array},editingPart:{type:null},renderPartPreview:{type:Function}},emits:["update-parts","edit-part","delete-part","show-registration","close-registration","save-part"],setup(e,{emit:t}){const o=e,r=t,n=_e("common"),s=_e("common"),a=_e("common"),i=["common","individual","data"],l=p=>({common:"共通パーツ",individual:"個別パーツ",data:"データ表示"})[p],b=we(()=>o.localCommonParts&&o.localCommonParts.length>0?o.localCommonParts:o.localParts.map(p=>({...p,module:p.module.filter(c=>{const d=c;return!d.category||d.category==="common"})})).filter(p=>p.module.length>0)),m=we(()=>o.localIndividualParts&&o.localIndividualParts.length>0?o.localIndividualParts:o.localParts.map(p=>({...p,module:p.module.filter(c=>c.category==="individual")})).filter(p=>p.module.length>0)),h=p=>{s.value=p,r("close-registration")},E=()=>{r("close-registration")},z=p=>{const c=p.module;s.value=c.category||"common",r("edit-part",p)},T=p=>{r("delete-part",p)},k=p=>{const c={...p,category:s.value};r("save-part",c)},M=p=>{const c=(d,f=0)=>{const C="  ".repeat(f),I="  ".repeat(f+1);if(Array.isArray(d))return d.length===0?"[]":`[
${d.map(u=>I+c(u,f+1)).join(`,
`)}
${C}]`;if(typeof d=="object"&&d!==null){const A=Object.entries(d);return A.length===0?"{}":`{
${A.map(([v,_])=>{let $;if(typeof _=="string"){const g=_.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(g.includes(`
`)){const P=g.split(`
`);$=P.map((D,x)=>x===0?`\`${D}`:x===P.length-1?`${I}${D}\``:`${I}${D}`).join(`
`)}else $=`"${g}"`}else $=c(_,f+1);return`${I}"${v}": ${$}`}).join(`,
`)}
${C}}`}return typeof d=="string"?`"${d.replace(/"/g,'\\"')}"`:JSON.stringify(d)};return c(p)};return(p,c)=>(L(),H("div",qg,[w("div",Kg,[w("div",Gg,[(L(),H($e,null,Me(i,d=>w("button",{key:d,class:et(["zero-code-data-tab-button",{active:n.value===d}]),onClick:f=>n.value=d},oe(l(d)),11,Jg)),64))])]),w("div",Yg,[n.value==="common"?(L(),H("div",Xg,[w("div",Qg,[w("h4",null,"共通パーツ ("+oe(b.value.length)+"件)",1),w("button",{class:"zero-code-add-part-btn",onClick:c[0]||(c[0]=d=>h("common"))}," ＋ 共通パーツ登録 ")]),Xe(gc,{parts:b.value,"render-part-preview":p.renderPartPreview,onEditPart:z,onDeletePart:T},null,8,["parts","render-part-preview"])])):ge("",!0),n.value==="individual"?(L(),H("div",eh,[w("div",th,[w("h4",null,"個別パーツ ("+oe(m.value.length)+"件)",1),w("button",{class:"zero-code-add-part-btn",onClick:c[1]||(c[1]=d=>h("individual"))}," ＋ 個別パーツ登録 ")]),Xe(gc,{parts:m.value,"render-part-preview":p.renderPartPreview,onEditPart:z,onDeletePart:T},null,8,["parts","render-part-preview"])])):ge("",!0),n.value==="data"?(L(),H("div",oh,[w("div",rh,[w("div",nh,[w("button",{class:et(["zero-code-parts-sub-tab-button",{active:a.value==="common"}]),onClick:c[2]||(c[2]=d=>a.value="common")}," 共通Partsデータ ",2),w("button",{class:et(["zero-code-parts-sub-tab-button",{active:a.value==="individual"}]),onClick:c[3]||(c[3]=d=>a.value="individual")}," 個別Partsデータ ",2)]),w("div",sh,[a.value==="common"?(L(),H("div",ah,[b.value&&b.value.length>0?(L(),H("div",ih,[w("pre",lh,oe(M(b.value)),1)])):(L(),H("div",ch,c[4]||(c[4]=[w("p",null,"共通パーツデータがありません",-1)])))])):ge("",!0),a.value==="individual"?(L(),H("div",dh,[m.value&&m.value.length>0?(L(),H("div",uh,[w("pre",ph,oe(M(m.value)),1)])):(L(),H("div",fh,c[5]||(c[5]=[w("p",null,"個別パーツデータがありません",-1)])))])):ge("",!0)])])])):ge("",!0)]),p.showPartRegistration?(L(),ft(Wg,{key:0,"existing-types":p.existingPartTypes,"render-part-preview":p.renderPartPreview,"editing-part":p.editingPart,"is-editing":!!p.editingPart,"part-category":s.value,onClose:E,onSave:k},null,8,["existing-types","render-part-preview","editing-part","is-editing","part-category"])):ge("",!0)]))}});function be(e){return e?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):""}let Jr,no;function gh(e,t){Jr=e,no=t}function va(e,t){e.querySelectorAll("[z-if]").forEach(r=>{const n=r.getAttribute("z-if");n&&(t[n]?r.removeAttribute("z-if"):r.remove())})}function hh(e,t){const o=e.querySelectorAll("[z-for-wrapper]");o.length>0&&o.forEach(r=>{const n=r.getAttribute("z-for-wrapper");if(n){const s=t[n];!Array.isArray(s)||s.length,r.removeAttribute("z-for-wrapper")}})}function hc(e,t){return`
    <div class="zero-code-add-array-item-button-container">
      <button class="zero-code-add-array-item-button" onclick="window.addArrayItem('${be(e)}', '${be(t)}')">
        <span class="zero-code-plus-icon">＋</span>
        <span class="zero-code-button-text">${t}を追加</span>
      </button>
    </div>
  `}function vh(e,t,o){return`
    <div class="zero-code-z-for-controls" data-component-id="${e}" data-array-name="${t}" data-index="${o}">
      <div class="zero-code-z-for-controls-inner">
        <button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${be(e)}', '${be(t)}', ${o})" title="上に追加">
          <span class="zero-code-control-icon">＋</span>
        </button>
        <span class="zero-code-z-for-drag-handle"
              draggable="true"
              onDragStart="window.handleZForDragStart(event, '${be(e)}', '${be(t)}', ${o})"
              style="cursor: grab;"
              title="ドラッグして並び替え">⠿</span>
        <button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${be(e)}', '${be(t)}', ${o})" title="編集">
          <span class="zero-code-control-icon">✎</span>
        </button>
        <button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${be(e)}', '${be(t)}', ${o})" title="削除">
          <span class="zero-code-control-icon">✕</span>
        </button>
      </div>
    </div>
  `}function vc(e,t,o,r,n){const s=e.querySelectorAll("[z-for]");s.length>0&&(s.forEach(i=>{const l=i.getAttribute("z-for");if(l){const b=t[l];if(Array.isArray(b)&&b.length>0){const m=n(t.type,t.module_name),h=new RegExp(`<(\\w+)[^>]*z-for="${l}"[^>]*>`),E=m.match(h),z=E?m.indexOf(E[0]):-1;if(z!==-1&&E){const T=E[1];let k=0,M=z;for(let d=z;d<m.length;d++)if(m.substring(d,d+T.length+1)===`<${T}`)k++;else if(m.substring(d,d+T.length+3)===`</${T}>`&&(k--,k===0)){M=d+T.length+3;break}const p=m.substring(z,M),c=[p];if(c&&c[0]){let d="";const f=p.match(new RegExp(`<${T}([^>]*z-for="[^"]*"[^>]*)>`));let C="";f&&f[1]&&(C=f[1].replace(/\s*z-for="[^"]*"\s*/,"").trim());const I=p.indexOf(">")+1,A=p.lastIndexOf(`</${T}>`),u=p.substring(I,A).trim();if(u){const v=u;b.forEach((g,P)=>{let N=v;const D=`<div class="zero-code-z-for-controls" data-component-id="${be(t.id)}" data-array-name="${be(l)}" data-index="${P}">
<div class="zero-code-z-for-controls-inner">
<button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${be(t.id)}', '${be(l)}', ${P})" title="上に追加">
<span class="zero-code-control-icon">＋</span>
</button>
<span class="zero-code-z-for-drag-handle" draggable="true" onDragStart="window.handleZForDragStart(event, '${be(t.id)}', '${be(l)}', ${P})" title="ドラッグして並び替え">⠿</span>
<button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${be(t.id)}', '${be(l)}', ${P})" title="編集">
<span class="zero-code-control-icon">✎</span>
</button>
<button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${be(t.id)}', '${be(l)}', ${P})" title="削除">
<span class="zero-code-control-icon">✕</span>
</button>
</div>
</div>`;if(Jr&&(N=Jr(N,g,t,m,l)),no&&(N=no(N,g)),N.includes("z-if")||N.includes("z-slot")||N.includes("z-for")){const Oe=new DOMParser().parseFromString(`<div>${N}</div>`,"text/html"),Ne=`${t.id}_${l}_${P}`;let Ge=t;if(typeof window<"u"&&window.getLatestComponentData){const mt=window.getLatestComponentData(t.id);mt&&(Ge=mt)}const ut={...Ge,...g,type:Ge.type,module_name:Ge.module_name,id:Ne};va(Oe,ut),Oe.querySelectorAll("[z-slot]").forEach(mt=>{const S=mt.getAttribute("z-slot");if(S&&ut[S]){const F=ut[S];if(Array.isArray(F)&&F.length>0){let B='<div class="zero-code-z-for-nested-parts">';F.forEach((ee,G)=>{const he=`${t.id}.${l}[${P}].${S}`;B+=`
                            <div class="zero-code-add-nested-part-button-container">
                              <button class="zero-code-add-position-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${be(he)}', ${G})">
                                <span class="zero-code-plus-icon">＋</span>
                                <span class="zero-code-button-text">上にパーツを追加</span>
                              </button>
                            </div>
                          `;const ae=r(ee,n,o+2),me=`${t.id}.${l}[${P}].${S}[${G}]`,ze=o+2;B+=`
                            <div class="zero-code-nested-component zero-code-nested-depth-${ze} zero-code-z-for-nested-part" 
                                 draggable="true"
                                 data-component-id="${ee.id}" 
                                 data-path="${me}" 
                                 data-parent-path="${t.id}.${l}[${P}].${S}"
                                 data-index="${G}"
                                 data-nested-path="${me}"
                                 data-slot-name="${S}"
                                 data-part-index="${G}"
                                 ondragstart="window.handleNestedPartDragStart && window.handleNestedPartDragStart(event)"
                                 ondragend="window.handleNestedPartDragEnd && window.handleNestedPartDragEnd(event)"
                                 class="zero-code-nested-component"
                                 onmousedown="this.style.cursor = 'grabbing'"
                                 onmouseup="this.style.cursor = 'grab'">
                              <div class="zero-code-component-header zero-code-nested-header">
                                <!-- ドラッグハンドル（視覚的インジケーター） -->
                                <div class="zero-code-drag-handle-nested" title="ドラッグして並び替え">
                                  ⠿
                                </div>
                                <div class="zero-code-component-meta">
                                  <span class="zero-code-component-type">${ee.type}</span>
                                  <span class="zero-code-component-module">${ee.module_name}</span>
                                </div>
                                <div class="zero-code-header-actions">
                                  <button 
                                    class="zero-code-collapse-btn"
                                    onclick="window.toggleNestedCollapse('${be(me)}')"
                                    title="折りたたみ切り替え"
                                    id="collapse-btn-${be(me)}"
                                  >
                                    －
                                  </button>
                                  <button class="zero-code-edit-button" onclick="window.openNestedEditor('${be(me)}')">編集</button>
                                  <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${be(me)}')">削除</button>
                                </div>
                              </div>
                              <div class="zero-code-nested-component-content" 
                                   id="nested-content-${be(me)}"
                                   ondragover="window.handleNestedPartDragOver && window.handleNestedPartDragOver(event)"
                                   ondrop="window.handleNestedPartDrop && window.handleNestedPartDrop(event)"
                                   data-slot-name="${S}" 
                                   data-part-index="${G}" 
                                   data-parent-path="${t.id}.${l}[${P}].${S}">${ae}</div>
                            </div>
                          `});const U=`${t.id}.${l}[${P}].${S}`;B+=`
                          <div class="zero-code-add-nested-part-button-container">
                            <button class="zero-code-add-position-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${be(U)}', ${F.length})">
                              <span class="zero-code-plus-icon">＋</span>
                              <span class="zero-code-button-text">下にパーツを追加</span>
                            </button>
                          </div>
                        `,B+="</div>";const V=mt.innerHTML,K=document.createElement("div");K.innerHTML=V,K.querySelectorAll('[class*="zero-code-"]').forEach(ee=>ee.remove());const re=K.innerHTML.trim();mt.innerHTML=re+B}else{const B=`${t.id}.${l}[${P}].${S}`,U=mt.innerHTML,V=document.createElement("div");V.innerHTML=U,V.querySelectorAll('[class*="zero-code-"]').forEach(re=>re.remove());const J=V.innerHTML.trim();mt.innerHTML=J+`
                          <div class="zero-code-z-for-empty-slot">
                            スロット "${S}" は空です
                            <div class="zero-code-add-nested-part-button-container">
                              <button class="zero-code-add-nested-part-button" onclick="event.stopPropagation(); window.openNestedPartSelector('${be(B)}', 0)">
                                <span class="zero-code-plus-icon">＋</span>
                                <span class="zero-code-button-text">パーツを追加</span>
                              </button>
                            </div>
                          </div>
                        `}mt.removeAttribute("z-slot")}else if(S){const F=`${t.id}.${l}[${P}].${S}`,B=mt.innerHTML,U=document.createElement("div");U.innerHTML=B,U.querySelectorAll('[class*="zero-code-"]').forEach(J=>J.remove());const K=U.innerHTML.trim();mt.innerHTML=K+`
                        <div class="zero-code-z-for-empty-slot">
                          スロット "${S}" にデータがありません
                          <div class="zero-code-add-nested-part-button-container">
                            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${be(F)}', 0)">
                              <span class="zero-code-plus-icon">＋</span>
                              <span class="zero-code-button-text">パーツを追加</span>
                            </button>
                          </div>
                        </div>
                      `,mt.removeAttribute("z-slot")}}),Oe.querySelectorAll("[z-for]").length>0&&vc(Oe,ut,o+1,r,n),N=Oe.body.innerHTML.replace(/^<div>|<\/div>$/g,"")}let x=C;x.includes("($")&&no&&(x=no(x,g));let O="",R=x,se="";if(x){const Oe=x.match(/class="([^"]*)"/);Oe&&(O=Oe[1]);const Ne=x.match(/style="([^"]*)"/);Ne&&(se=Ne[1]),R=x.replace(/\s*class="[^"]*"\s*/,"").replace(/\s*style="[^"]*"\s*/,"").trim()}const q=`${O?O+" ":""}zero-code-z-for-item-wrapper`,W=se?`${se}; cursor: grab;`:"cursor: grab;";let pe=[`class="${q}"`,'draggable="true"',`data-component-id="${be(t.id)}"`,`data-array-name="${be(l)}"`,`data-item-index="${P}"`,`ondragstart="window.handleZForDragStart && window.handleZForDragStart(event, '${be(t.id)}', '${be(l)}', ${P})"`,'ondragend="window.handleZForDragEnd && window.handleZForDragEnd(event)"','ondragover="window.handleZForArrayItemDragOver && window.handleZForArrayItemDragOver(event)"','ondrop="window.handleZForArrayItemDrop && window.handleZForArrayItemDrop(event)"',`style="${W}"`,`onmousedown="this.style.cursor = 'grabbing'"`,`onmouseup="this.style.cursor = 'grab'"`].join(" ");R&&(pe+=` ${R}`);const Se=`<div ${pe}>
${D}
${N}
</div>`;d+=Se});const _=`<div class="zero-code-z-for-add-last-button">
<button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${be(t.id)}', '${be(l)}', ${b.length})" title="最後に追加">
<span class="zero-code-control-icon">＋</span>
</button>
</div>`;d+=_;const $=i.parentNode;if($){const g=document.createElement("div");g.innerHTML=d;const P=document.createDocumentFragment();for(;g.firstChild;)P.appendChild(g.firstChild);$.replaceChild(P,i)}else i.outerHTML=d}}}}else{const m=`<div class="zero-code-z-for-empty-array">
<div class="zero-code-z-for-empty-message">
<p class="zero-code-empty-text">${l}はまだ追加されていません</p>
<button class="zero-code-z-for-btn zero-code-z-for-add-first-btn" onclick="window.addZForArrayItem('${be(t.id)}', '${be(l)}', 0)" title="最初の要素を追加">
<span class="zero-code-control-icon">＋</span>
<span class="zero-code-button-text">最初の${l}を追加</span>
</button>
</div>
</div>`;i.innerHTML=m,i.removeAttribute("z-for")}}}),e.querySelectorAll("[z-for-wrapper]").forEach(i=>{i.removeAttribute("z-for-wrapper")}))}function bh(e,t,o){let r=e;const n=/<(\w+)([^>]*z-for="([^"]*)"[^>]*)\s*\/>/g;let s;for(;(s=n.exec(e))!==null;){const[l,b,m,h]=s,E=t[h];if(Array.isArray(E)&&E.length>0){let z="";E.forEach((k,M)=>{let p=m.replace(/\s*z-for="[^"]*"\s*/,"").trim();p.includes("($")&&no&&(p=no(p,k)),Object.keys(k).forEach(d=>{if(d!=="id"){const f=k[d];if(typeof f=="string"){const C=new RegExp(`\\{\\$${d}:[^}]*\\}`,"g");p=p.replace(C,f)}}});const c=`
          <div class="zero-code-z-for-item-wrapper" 
               data-component-id="${t.id}"
               data-array-name="${h}"
               data-item-index="${M}">
            ${vh(t.id,h,M)}
            <${b}${p?" "+p:""} />
          </div>
        `;z+=c});const T=`
        <div class="zero-code-z-for-add-last-button">
          <button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${t.id}', '${h}', ${E.length})" title="最後に追加">
            <span class="zero-code-control-icon">＋</span>
          </button>
        </div>
      `;z+=T,r=r.replace(l,z)}else r=r.replace(l,hc(t.id,h))}const a=/<(\w+)([^>]*z-for="([^"]*)"[^>]*)>([\s\S]*?)<\/\1>/g;let i;for(;(i=a.exec(e))!==null;){const[l,b,m,h,E]=i,z=t[h];if(Array.isArray(z)&&z.length>0,Array.isArray(z)&&z.length>0){let T="";z.forEach((M,p)=>{let c=E;if(`${be(t.id)}${be(h)}${p}`,Jr&&(c=Jr(c,M,t,e,h)),no&&(c=no(c,M)),c.includes("z-if")||c.includes("z-slot")||c.includes("z-for")){const g=new DOMParser().parseFromString(`<div>${c}</div>`,"text/html"),P=`${t.id}_${h}_0`;let N=t;if(typeof window<"u"&&window.getLatestComponentData){const O=window.getLatestComponentData(t.id);O&&(N=O)}const D={...M,type:N.type,module_name:N.module_name,id:P};va(g,D),g.querySelectorAll("[z-slot]").forEach(O=>{const R=O.getAttribute("z-slot");if(R&&D[R]){const se=D[R];if(Array.isArray(se)&&se.length>0){let q='<div class="zero-code-z-for-nested-parts">';se.forEach((Ne,Ge)=>{const ut=`${t.id}.${h}[0].${R}`;q+=`
                    <div class="zero-code-add-nested-part-button-container">
                      <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${be(ut)}', ${Ge})">
                        <span class="zero-code-plus-icon">＋</span>
                        <span class="zero-code-button-text">上にパーツを追加</span>
                      </button>
                    </div>
                  `;let pt=Ne.content||Ne.title||Ne.name||"(内容なし)";const Ot=`${t.id}.${h}[0].${R}[${Ge}]`;q+=`
                    <div class="zero-code-z-for-nested-part">
                      <div class="zero-code-z-for-part-header">
                        <small>${Ne.type||"unknown"} (ID: ${Ne.id}) [z-for内]</small>
                        <div class="zero-code-z-for-part-actions">
                          <button class="zero-code-edit-button" onclick="window.openNestedEditor('${be(Ot)}')">編集</button>
                          <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${be(Ot)}')">削除</button>
                        </div>
                      </div>
                      <div>${pt}</div>
                    </div>
                  `});const W=`${t.id}.${h}[0].${R}`;q+=`
                  <div class="zero-code-add-nested-part-button-container">
                    <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${be(W)}', ${se.length})">
                      <span class="zero-code-plus-icon">＋</span>
                      <span class="zero-code-button-text">ネストパーツを追加</span>
                    </button>
                  </div>
                `,q+="</div>";const Y=O.innerHTML,pe=document.createElement("div");pe.innerHTML=Y,pe.querySelectorAll('[class*="zero-code-"]').forEach(Ne=>Ne.remove());const Oe=pe.innerHTML.trim();O.innerHTML=Oe+q}else{const q=O.innerHTML,W=document.createElement("div");W.innerHTML=q,W.querySelectorAll('[class*="zero-code-"]').forEach(Se=>Se.remove());const pe=W.innerHTML.trim();O.innerHTML=pe+`
                  <div class="zero-code-z-for-empty-slot">
                    スロット "${R}" は空です
                    <div class="zero-code-add-nested-part-button-container">
                      <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${be(t.id)}', 0)">
                        <span class="zero-code-plus-icon">＋</span>
                        <span class="zero-code-button-text">ネストパーツを追加</span>
                      </button>
                    </div>
                  </div>
                `}O.removeAttribute("z-slot")}else if(R){const se=O.innerHTML,q=document.createElement("div");q.innerHTML=se,q.querySelectorAll('[class*="zero-code-"]').forEach(pe=>pe.remove());const Y=q.innerHTML.trim();O.innerHTML=Y+`
                <div class="zero-code-z-for-empty-slot">
                  スロット "${R}" にデータがありません
                  <div class="zero-code-add-nested-part-button-container">
                    <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${be(t.id)}', 0)">
                      <span class="zero-code-plus-icon">＋</span>
                      <span class="zero-code-button-text">ネストパーツを追加</span>
                    </button>
                  </div>
                </div>
              `,O.removeAttribute("z-slot")}}),c=g.body.innerHTML.replace(/^<div>|<\/div>$/g,"")}let d=m.replace(/\s*z-for="[^"]*"\s*/,"").trim();d.includes("($")&&no&&(d=no(d,M));let f="",C="",I=d;if(d){const g=d.match(/class="([^"]*)"/);g&&(f=g[1]);const P=d.match(/style="([^"]*)"/);P&&(C=P[1]),I=d.replace(/\s*class="[^"]*"\s*/,"").replace(/\s*style="[^"]*"\s*/,"").trim()}const A=`${f?f+" ":""}zero-code-z-for-item-wrapper`,u=C?`${C}; cursor: grab;`:"cursor: grab;",v=`
          <div class="zero-code-z-for-controls" data-component-id="${t.id}" data-array-name="${h}" data-index="${p}">
            <div class="zero-code-z-for-controls-inner">
              <button class="zero-code-z-for-btn zero-code-z-for-add-btn" onclick="window.addZForArrayItem('${be(t.id)}', '${be(h)}', ${p})" title="上に追加">
                <span class="zero-code-control-icon">＋</span>
              </button>
              <span class="zero-code-z-for-drag-handle"
                    draggable="true"
                    onDragStart="window.handleZForDragStart(event, '${be(t.id)}', '${be(h)}', ${p})"
                    style="cursor: grab;"
                    title="ドラッグして並び替え">⠿</span>
              <button class="zero-code-z-for-btn zero-code-z-for-edit-btn" onclick="window.editZForArrayItem('${be(t.id)}', '${be(h)}', ${p})" title="編集">
                <span class="control-icon">✎</span>
              </button>
              <button class="zero-code-z-for-btn zero-code-z-for-delete-btn" onclick="window.removeZForArrayItem('${be(t.id)}', '${be(h)}', ${p})" title="削除">
                <span class="control-icon">✕</span>
              </button>
            </div>
          </div>
        `;let _=`class="${A}" 
               draggable="true"
               data-component-id="${t.id}"
               data-array-name="${h}"
               data-item-index="${p}"
               ondragstart="window.handleZForDragStart && window.handleZForDragStart(event, '${t.id}', '${h}', ${p})"
               ondragend="window.handleZForDragEnd && window.handleZForDragEnd(event)"
               ondragover="window.handleZForArrayItemDragOver && window.handleZForArrayItemDragOver(event)"
               ondrop="window.handleZForArrayItemDrop && window.handleZForArrayItemDrop(event)"
               style="${u}"
               onmousedown="this.style.cursor = 'grabbing'"
               onmouseup="this.style.cursor = 'grab'"`;I&&(_+=` ${I}`);const $=`
          <div ${_}>
            ${v}
            ${c}
          </div>
        `;T+=$});const k=`
        <div class="zero-code-z-for-add-last-button">
          <button class="zero-code-z-for-btn zero-code-z-for-add-last-btn" onclick="window.addZForArrayItem('${t.id}', '${h}', ${z.length})" title="最後に追加">
            <span class="zero-code-control-icon">＋</span>
          </button>
        </div>
      `;T+=k,r=r.replace(l,T)}else r=r.replace(l,hc(t.id,h))}return r}function yh(e,t,o,r,n){e.querySelectorAll("[z-slot]").forEach(a=>{const i=a.getAttribute("z-slot");if(i){const l=t[i],b=Array.isArray(l)?l:[];if(b.length===0){const m=a.innerHTML,h=document.createElement("div");h.innerHTML=m,h.querySelectorAll('[class*="zero-code-"]').forEach(T=>T.remove());const z=h.innerHTML.trim();a.innerHTML=z+`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${t.id}', 0)">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">ネストパーツを追加</span>
            </button>
          </div>
        `}else{let m="";b.forEach((k,M)=>{const p=k.id,c=t.id,d=o+1;m+=`
            <div class="zero-code-add-nested-part-button-container">
              <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${be(c)}', ${M})">
                <span class="zero-code-plus-icon">＋</span>
                <span class="zero-code-button-text">上にパーツを追加（${d}階層目）</span>
              </button>
            </div>
          `,m+=`
            <div class="nested-component nested-depth-${d} draggable-nested" 
                 draggable="true" 
                 data-component-id="${k.id}" 
                 data-path="${p}" 
                 data-parent-path="${c}"
                 data-index="${M}"
                 class="zero-code-nested-component">
              <div class="zero-code-component-header zero-code-nested-header">
                <!-- ドラッグハンドル -->
                <div class="zero-code-drag-handle-nested">
                  ⠿
                </div>
                <div class="zero-code-component-meta">
                  <span class="zero-code-component-type">${k.type}</span>
                  <span class="zero-code-component-module">${k.module_name}</span>
                </div>
                <div class="zero-code-header-actions">
                  <button 
                    class="zero-code-collapse-btn"
                    onclick="window.toggleNestedCollapse('${p}')"
                    title="折りたたみ切り替え"
                    id="collapse-btn-${p}"
                  >
                    －
                  </button>
                  <button class="zero-code-edit-button" onclick="window.openNestedEditor('${p}')">編集</button>
                  <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${p}')">削除</button>
                </div>
              </div>
              <div class="zero-code-nested-component-content" id="nested-content-${p}">
                ${r(k,n,d)}
              </div>
            </div>
          `}),m+=`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${be(t.id)}', ${b.length})">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">下にパーツを追加（${o+1}階層目）</span>
            </button>
          </div>
        `;const h=a.innerHTML,E=document.createElement("div");E.innerHTML=h,E.querySelectorAll('[class*="zero-code-"]').forEach(k=>k.remove());const T=E.innerHTML.trim();a.innerHTML=T+m}a.removeAttribute("z-slot"),y.success(`z-slot属性を除去: ${i}`)}})}const _h=[/v-[a-zA-Z-]+(?::[a-zA-Z-\.]+)?="[^"]*"/g,/@[a-zA-Z-]+(?:\.[a-zA-Z-]+)*="[^"]*"/g,/:[a-zA-Z-]+(?:\.[a-zA-Z-]+)*="[^"]*"/g,/v-slot:[a-zA-Z-]+="[^"]*"/g,/#[a-zA-Z-]+="[^"]*"/g],$h=[/\{\{[^}]+\}\}/g,/v-text="[^"]*"/g,/v-html="[^"]*"/g];function wh(e){return go(()=>{const t=new Map,o=new Map;let r=e;return y.debug("Vue.jsディレクティブ保護開始",{htmlLength:e.length}),_h.forEach((n,s)=>{r=r.replace(n,a=>{const i=`__VUE_DIR_${s}_${t.size}__`;return t.set(i,a),y.debug(`ディレクティブ保護: ${a} → ${i}`),i})}),$h.forEach((n,s)=>{r=r.replace(n,a=>{const i=`__VUE_INT_${s}_${o.size}__`;return o.set(i,a),y.debug(`補間記法保護: ${a} → ${i}`),i})}),y.success("Vue.jsディレクティブ保護完了",{directiveCount:t.size,interpolationCount:o.size,resultLength:r.length}),{html:r,directives:t,interpolations:o}},ho,"Vue.jsディレクティブ保護中にエラーが発生しました",qe.TEMPLATE)||{html:e,directives:new Map,interpolations:new Map}}function bc(e,t){return go(()=>{let o=e;return y.debug("Vue.jsディレクティブ復元開始",{directiveCount:t.directives.size,interpolationCount:t.interpolations.size}),t.directives.forEach((r,n)=>{o=o.replace(new RegExp(n,"g"),r),y.debug(`ディレクティブ復元: ${n} → ${r}`)}),t.interpolations.forEach((r,n)=>{o=o.replace(new RegExp(n,"g"),r),y.debug(`補間記法復元: ${n} → ${r}`)}),y.success("Vue.jsディレクティブ復元完了",{resultLength:o.length}),o},ho,"Vue.jsディレクティブ復元中にエラーが発生しました",qe.TEMPLATE)||e}function zh(e){return go(()=>{const t=wh(e),r=new DOMParser().parseFromString(t.html,"text/html");return y.debug("安全DOMパース完了",{originalLength:e.length,protectedLength:t.html.length,parsedElementCount:r.body.children.length}),{doc:r,preservation:t}},ho,"安全DOMパース中にエラーが発生しました",qe.TEMPLATE)||{doc:new DOMParser().parseFromString("<div></div>","text/html"),preservation:{html:e,directives:new Map,interpolations:new Map}}}function Yr(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," "):""}function as(e){return e?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):""}function Ah(e){if(!e)return e;let t=e.replace(/(<br\s*\/?>)+$/gi,"");return t=t.replace(/\s+$/,""),t}function Ch(e,t,o){return go(()=>{y.debug("統合テンプレート処理開始",{componentId:t.id,htmlLength:e.length});let r=e;return r=r.replace(/(\(\$[^:)]+\?:[^)]*\)|\(\$[^:)]+:[^)]*\)|\{\$[^:}]+:[^}]*\})/g,n=>n.includes("?:")?Eh(n,t):n.startsWith("(")&&n.includes(":")?Ph(n,t):n.startsWith("{")&&n.includes(":")?Sh(n,t,o):n),y.success("統合テンプレート処理完了",{componentId:t.id,resultLength:r.length}),r},ho,`統合テンプレート処理中にエラーが発生しました (componentId: ${t.id})`,qe.TEMPLATE)||e}function Eh(e,t){const o=e.match(/\(\$([^:?]+)\?:([^)]*)\)/);if(!o)return e;const[,r,n]=o,s=n.split("|"),a=t[r];return Array.isArray(a)?a.join(" "):a&&s.includes(String(a))?String(a):s[0]||""}function Ph(e,t){const o=e.match(/\(\$([^:]+):([^)]*)\)/);if(!o)return e;const[,r,n]=o,s=n.split("|"),a=t[r];return a&&s.includes(String(a))?String(a):s[0]||""}function Sh(e,t,o){const r=e.match(/\{\$([^:]+):([^}]*)\}/);if(!r)return e;const[,n,s]=r,a=t[n],i=Yr(a?String(a):s);return Ih(o,n)?`<div class="tiptap-content" data-component-id="${t.id}" data-param-name="${n}">${i}</div>`:i}function Ih(e,t){const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(`\\{\\$${o}:[^}]*\\}`,"g");let n;for(;(n=r.exec(e))!==null;){const s=n.index,a=e.substring(0,s),i=a.lastIndexOf("<"),l=a.lastIndexOf(">");if(i>l)continue;const b=[];if([/<(pre|code)[^>]*>[\s\S]*?<\/(pre|code)>/gi,/<div[^>]*class="[^"]*code-block[^"]*"[^>]*>[\s\S]*?<\/div>/gi].forEach(T=>{T.lastIndex=0;let k;for(;(k=T.exec(e))!==null;)b.push({start:k.index,end:k.index+k[0].length})}),!b.some(T=>s>=T.start&&s<=T.end))return!0}return!1}const is=new Map;function Th(e,t,o){const r=`${e}:${t}`;if(is.has(r))return is.get(r);const n=o(e,t);return is.set(r,n),n}function Dh(){is.clear(),y.debug("テンプレートキャッシュをクリアしました")}const yc=new DOMParser,Xo=new Map,xh=50;function Mh(e){return go(()=>{if(Xo.has(e)){const o=Xo.get(e);if(o)return y.debug("DOMParser: キャッシュからヒット"),o.cloneNode(!0)}const t=yc.parseFromString(e,"text/html");if(Xo.size>=xh){const o=Xo.keys().next().value;o&&Xo.delete(o)}return Xo.set(e,t.cloneNode(!0)),y.debug("DOMParser: 新規パース＆キャッシュ保存"),t},ho,"HTML解析中にエラーが発生しました",qe.TEMPLATE)||yc.parseFromString("<div></div>","text/html")}function Nh(e,t,o,r=1){return go(()=>{y.debug("最適化z-directive処理開始",{componentId:t.id,currentDepth:r});let n=e;return n=Fh(n,t),n=kh(n,t,o),n=Oh(n,t,r,o),y.success("最適化z-directive処理完了",{componentId:t.id,resultLength:n.length}),n},ho,`z-directive処理中にエラーが発生しました (componentId: ${t.id})`,qe.TEMPLATE)||e}function Fh(e,t){return e.replace(/<([^>]*z-if="([^"]*)"[^>]*)>([\\s\\S]*?)<\/[^>]*>/g,(o,r,n,s)=>{if(!t[n])return y.debug(`z-if要素を非表示: ${n}`),"";const i=r.replace(/\s*z-if="[^"]*"\s*/," ").trim();return y.debug(`z-if要素を表示: ${n}`),`<div ${i}>${s}</div>`})}function kh(e,t,o){return e.replace(/<(\w+)([^>]*z-for="([^"]*)"[^>]*)>([\s\S]*?)<\/\1>/g,(r,n,s,a,i)=>{const l=t[a];return y.debug(`z-for処理: ${a}`,{length:Array.isArray(l)?l.length:"not array"}),!Array.isArray(l)||l.length===0?`
          <div class="add-array-item-button-container">
            <button class="add-array-item-button" onclick="window.addArrayItem('${t.id}', '${a}')">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">${a}を追加</span>
            </button>
          </div>
        `:l.map(m=>{let h=i;return Object.keys(m).forEach(E=>{if(E!=="id"){const z=m[E];if(typeof z=="string")[new RegExp(`\\{\\$${E}:([^}]+)\\}`,"g"),new RegExp(`\\(\\$${E}:([^)]+)\\)`,"g")].forEach(k=>{h=h.replace(k,z)});else if(Array.isArray(z)){const T=new RegExp(`\\(\\$${E}\\?:([^)]+)\\)`,"g");h=h.replace(T,z.join(" "))}}}),h}).join("")})}function Oh(e,t,o,r){const n=Mh(e),s=n.querySelectorAll("[z-slot]");return y.debug(`z-slot要素発見: ${s.length}個`),s.forEach(a=>{const i=a.getAttribute("z-slot");if(i){const l=t[i],b=Array.isArray(l)?l:[];if(b.length===0){const m=a.innerHTML;a.innerHTML=m+`
          <div class="zero-code-add-nested-part-button-container">
            <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${as(t.id)}', 0)">
              <span class="zero-code-plus-icon">＋</span>
              <span class="zero-code-button-text">ネストパーツを追加</span>
            </button>
          </div>
        `}else{const m=b.map((E,z)=>{const T=o+1,k=Math.max(0,T-1)*20;return`
            <div class="nested-component nested-depth-${T}" style="margin-left: ${k}px;">
              <div class="component-header">
                <span class="component-type">${E.type}</span>
                <span class="component-module">${E.module_name}</span>
                <button onclick="window.openNestedEditor('${E.id}')">編集</button>
                <button onclick="window.deleteNestedPart('${E.id}')">削除</button>
              </div>
            </div>
          `}).join(""),h=a.innerHTML;a.innerHTML=h+m}a.removeAttribute("z-slot")}}),n.body.innerHTML}function Lh(){Xo.clear(),y.debug("DOMキャッシュをクリアしました")}function ba(){const e=_e(null);let t=!1;const o=(A,u)=>{const v=`\\{\\$${u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}:[^}]*\\}`,_=new RegExp(v,"g");let $;for(;($=_.exec(A))!==null;){const g=$.index,P=A.substring(0,g),N=P.lastIndexOf("<"),D=P.lastIndexOf(">");if(N>D)continue;const x=[];if([/<(pre|code)[^>]*>[\s\S]*?<\/(pre|code)>/gi,/<div[^>]*class="[^"]*code-block[^"]*"[^>]*>[\s\S]*?<\/div>/gi].forEach(W=>{W.lastIndex=0;let Y;for(;(Y=W.exec(A))!==null;)x.push({start:Y.index,end:Y.index+Y[0].length})}),!x.some(W=>g>=W.start&&g<=W.end))return!0}return!1},r=(A,u,v)=>A.replace(/\{\$([^:]+):(.*?)\}/g,(_,$,g)=>{const P=String(u[$]||g),N=Yr(P);return o(v,$)?$==="content"?`<div class="zero-code-rich-editable-text block-editable" data-component-id="${u.id}" data-param="${$}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${u.id}', '${$}', this.innerHTML, this);">${N}</div>`:`<span class="zero-code-rich-editable-text inline-editable" data-component-id="${u.id}" data-param="${$}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${u.id}', '${$}', this.innerHTML, this);">${N}</span>`:N}),n=(A,u,v,_,$)=>A.replace(/\{\$([^:]+):(.*?)\}/g,(g,P,N)=>{const D=String(u[P]||N),x=Yr(D);if(o(_,P)){const se=v[$].indexOf(u),q=`${v.id}_${$}_${se}_${P}`;return P==="content"?`<div class="zero-code-rich-editable-text array-item-text block-editable" data-component-id="${q}" data-param="${P}" data-array-name="${$}" data-item-index="${se}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${q}', '${P}', this.innerHTML, this);">${x}</div>`:`<span class="zero-code-rich-editable-text array-item-text inline-editable" data-component-id="${q}" data-param="${P}" data-array-name="${$}" data-item-index="${se}" onclick="event.stopPropagation(); if(window.getSelection && window.getSelection().toString().length > 0) return; if(window.startRichTextEdit) window.startRichTextEdit('${q}', '${P}', this.innerHTML, this);">${x}</span>`}return x}),s=(A,u)=>{let v=A.replace(/\(\$([^:?]+)\?:(.*?)\)/g,(_,$,g)=>{const P=u[$];return Array.isArray(P)?P.join(" "):g.split("|").filter(D=>D.trim())[0]||""});return v=v.replace(/\(\$([^:?]+):(.*?)\)/g,(_,$,g)=>{if(u[$]){let D=u[$];return D==="指定無し"&&(D=""),Array.isArray(D)?D.join(" "):String(D)}const P=$;if(u[P]){let D=u[P];return D==="指定無し"&&(D=""),Array.isArray(D)?D.join(" "):String(D)}return g.split("|").filter(D=>D.trim())[0]||""}),v},a=(A,u)=>A.replace(/\(\$([^:?]+):(.*?)\)/g,(v,_,$)=>{let g=u[_];return g==="指定無し"&&(g=""),Array.isArray(g)?g.join(" "):g?String(g):$.split("|").filter(N=>N.trim())[0]||""}),i=(A,u)=>A.replace(/\(\$([^:?]+)\?:(.*?)\)/g,(v,_,$)=>{const g=u[_];return Array.isArray(g)?g.join(" "):String(g||"")}),l=(A,u,v,_)=>{const $=v(A.type,A.module_name);if(!$)return`<div>テンプレートが見つかりません: ${A.type}/${A.module_name}</div>`;let g=$;return g=a(g,A),g=i(g,A),g=r(g,A,$),g=E(g,A,v,u,1),g},b=(A,u,v=0)=>{const _=u(A.type,A.module_name);if(!_)return`<div>テンプレートが見つかりません: ${A.type}/${A.module_name}</div>`;let $=_;return $=a($,A),$=i($,A),$=r($,A,_),$=E($,A,u,v,1),$},m=(A,u,v,_)=>{const $=u(A.type,A.module_name);if(!$)return`<div>テンプレートが見つかりません: ${A.type}/${A.module_name}</div>`;let g=$;return g=a(g,A),g=i(g,A),g=r(g,A,$),g=E(g,A,u,0,v),g},h=(A,u=[],v,_)=>{if(!A||A.length===0)return`
        <div class="zero-code-add-nested-part-button-container">
          <button class="zero-code-add-nested-part-button" onclick="window.openNestedPartSelector('${as(v(u))}', 0)">
            <span class="zero-code-plus-icon">＋</span>
            <span class="zero-code-button-text">ネストパーツを追加（${u.length+1}階層目）</span>
          </button>
        </div>
      `;let $="";return A.forEach((g,P)=>{const N=[...u,P],D=v(N),x=N.length;$+=`
        <div class="zero-code-add-nested-part-button-container">
          <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${as(v(u))}', ${P})">
            <span class="zero-code-plus-icon">＋</span>
            <span class="zero-code-button-text">上にパーツを追加（${u.length+1}階層目）</span>
          </button>
        </div>
      `,$+=`
        <div class="zero-code-nested-component zero-code-nested-depth-${x} zero-code-draggable-nested" 
             draggable="true" 
             data-component-id="${g.id}" 
             data-path="${D}" 
             data-parent-path="${v(u)}"
             data-index="${P}"
>
          <div class="zero-code-component-header zero-code-nested-header">
            <!-- ドラッグハンドル -->
            <div class="zero-code-drag-handle-nested">
              ⠿
            </div>
            <div class="zero-code-component-meta">
              <span class="zero-code-component-type">${g.type}</span>
              <span class="zero-code-component-module">${g.module_name}</span>
            </div>
            <div class="zero-code-header-actions">
              <button 
                class="zero-code-collapse-btn"
                onclick="window.toggleNestedCollapse('${D}')"
                title="折りたたみ切り替え"
                id="collapse-btn-${D}"
              >
                －
              </button>
              <button class="zero-code-edit-button" onclick="window.openNestedEditor('${D}')">編集</button>
              <button class="zero-code-delete-button" onclick="window.deleteNestedPart('${D}')">削除</button>
            </div>
          </div>
          <div class="zero-code-nested-component-content" id="nested-content-${D}">
            ${_?b(g,_):`<div>テンプレートが見つかりません: ${g.type}/${g.module_name}</div>`}
          </div>
          <script>
            // 折りたたみ状態の初期化
            if (typeof window !== 'undefined' && window.isNestedCollapsed) {
              setTimeout(() => {
                const isCollapsed = window.isNestedCollapsed('${D}')
                const contentElement = document.getElementById('nested-content-${D}')
                const buttonElement = document.getElementById('collapse-btn-${D}')
                
                if (contentElement && buttonElement) {
                  if (isCollapsed) {
                    contentElement.style.display = 'none'
                    buttonElement.textContent = '＋'
                    buttonElement.setAttribute('title', '展開')
                  } else {
                    contentElement.style.display = 'block'
                    buttonElement.textContent = '－'
                    buttonElement.setAttribute('title', '折りたたみ')
                  }
                }
              }, 0)
            }
          <\/script>
        </div>
      `,g.nested_parts&&Array.isArray(g.nested_parts)&&g.nested_parts.length>0&&($+=h(g.nested_parts,N,v,_))}),$+=`
      <div class="zero-code-add-nested-part-button-container">
        <button class="zero-code-add-position-part-button" onclick="window.openNestedPartSelector('${as(v(u))}', ${A.length})">
          <span class="zero-code-plus-icon">＋</span>
          <span class="zero-code-button-text">下にパーツを追加（${u.length+1}階層目）</span>
        </button>
      </div>
    `,$},E=(A,u,v,_=0,$=1)=>go(()=>{t||(gh(n,s),t=!0);const{doc:g,preservation:P}=zh(A),N=(q,W,Y)=>m(q,W,Y);va(g,u),hh(g,u),vc(g,u,$,N,v);const D=P.html.match(/z-for="[^"]*"/g),x=g.querySelectorAll("[z-for]");if(!(D&&D.length>0&&x.length===0)){if(x.length>0){const q=bh(P.html,u);if(q!==P.html)return bc(q,P)}}yh(g,u,$,N,v),g.querySelectorAll("img").forEach(q=>{q.classList.add("zero-code-editable-image")});const R=g.body.innerHTML;return bc(R,P)},ho,`Z-Directive処理中にエラーが発生しました (componentId: ${u.id})`,qe.TEMPLATE)||A,z=(A,u)=>{const v=u(A.type,A.module_name);return v?v.includes("@slot($nested_parts)@"):!1},T=(A,u,v={})=>go(()=>{if(v&&v.isPreviewMode===!0){const g={maxRecursionDepth:v.maxRecursionDepth,isPreviewMode:!0};return k(A,u,g)}const _=Th(A.type,A.module_name,u);if(!_)return`<div>テンプレートが見つかりません: ${A.type}/${A.module_name}</div>`;let $=Ch(_,A,_);return $=Nh($,A,u,1),$},ho,`最適化レンダリング中にエラーが発生しました (componentId: ${A.id})`,qe.TEMPLATE)||`<div>レンダリングエラー: ${A.id}</div>`,k=(A,u,v={})=>{let _=A;if(typeof window<"u"&&window.getLatestComponentData){const N=window.getLatestComponentData(A.id);N&&(_=N)}const $=u(A.type,A.module_name);if(!$)return"";let g=$,P=v.maxRecursionDepth;return P||(P=f($)),v.isPreviewMode?(console.log("🔍 プレビューモード開始 - 元のHTML:",g.substring(0,200)),g=a(g,_),console.log("🔍 選択記法処理後:",g.substring(0,200)),g=i(g,_),console.log("🔍 条件付きクラス処理後:",g.substring(0,200)),g=c(g,_),console.log("🔍 テキスト置換処理後:",g.substring(0,200)),g=d(g,_),console.log("🔍 z-for処理後:",g.substring(0,200)),g=p(g),console.log("🔍 クリーンアップ後:",g.substring(0,200))):(g=C(g,_,u,0,P),g=a(g,_),g=i(g,_),g=c(g,_),g=p(g)),g},M=(A,u,v)=>{const $=new globalThis.DOMParser().parseFromString(A,"text/html");return $.querySelectorAll("[z-if]").forEach(D=>{const x=D.getAttribute("z-if");x&&(u[x]?D.removeAttribute("z-if"):D.remove())}),$.querySelectorAll("[z-for-wrapper]").forEach(D=>{const x=D.getAttribute("z-for-wrapper");if(x){const O=u[x];!Array.isArray(O)||O.length===0?D.remove():D.removeAttribute("z-for-wrapper")}}),$.querySelectorAll("[z-slot]").forEach(D=>{const x=D.getAttribute("z-slot");if(x)if(u[x]&&Array.isArray(u[x])){const R=u[x].map(se=>k(se,v,options)).join("");D.outerHTML=R}else D.remove()}),options.isPreviewMode||$.querySelectorAll("img").forEach(x=>{x.classList.add("zero-code-editable-image")}),$.body.innerHTML},p=A=>{console.log("🧹 クリーンアップ開始 - 入力HTML:",A.substring(0,300));let u=A.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'");console.log("🧹 HTMLエンティティデコード後:",u.substring(0,300));const _=new DOMParser().parseFromString(u,"text/html"),$=["zero-code-z-for-item-wrapper","zero-code-field-wrapper","zero-code-array-item","zero-code-nested-array","field-editor","tiptap-content","zero-code-z-for-controls","zero-code-z-for-controls-inner","zero-code-z-for-btn","zero-code-z-for-add-btn","zero-code-z-for-edit-btn","zero-code-z-for-delete-btn","zero-code-z-for-drag-handle","zero-code-nested-part","zero-code-add-nested-part-button-container","zero-code-add-nested-part-button","zero-code-rich-editable-text","inline-editable","zero-code-editable-image"];[".zero-code-z-for-controls",".zero-code-add-nested-part-button-container",".zero-code-z-for-add-last-button",'[onclick*="ZForArrayItem"]','[onclick*="NestedPartSelector"]','[onclick*="NestedEditor"]','[onclick*="addZForArrayItem"]','[onclick*="editZForArrayItem"]','[onclick*="removeZForArrayItem"]','[onclick*="startRichTextEdit"]',".zero-code-rich-editable-text",".inline-editable","span[data-component-id]",'span[onclick*="startRichTextEdit"]'].forEach(x=>{_.querySelectorAll(x).forEach(R=>{R.tagName.toLowerCase()==="span"?R.outerHTML=R.innerHTML:R.remove()})});const P=_.querySelectorAll("*");return P.forEach(x=>{const O=x.classList;$.forEach(R=>{O.contains(R)&&O.remove(R)}),Array.from(O).forEach(R=>{R.includes("zero-code")&&O.remove(R)}),x.className===""&&x.removeAttribute("class")}),P.forEach(x=>{Array.from(x.attributes).forEach(O=>{(O.name.startsWith("data-component-id")||O.name.startsWith("data-field-")||O.name.startsWith("data-param-")||O.name.startsWith("data-edit-")||O.name.includes("contenteditable")||O.name==="onclick"||O.name==="draggable")&&x.removeAttribute(O.name)})}),_.querySelectorAll("span").forEach(x=>{(x.hasAttribute("data-component-id")||x.hasAttribute("onclick")||x.classList.contains("zero-code-rich-editable-text")||x.classList.contains("inline-editable"))&&(x.outerHTML=x.innerHTML)}),_.querySelectorAll("img").forEach(x=>{const O=x.getAttribute("alt");if(O&&O.includes("<")&&O.includes(">")){const R=O.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").trim();x.setAttribute("alt",R||"ロゴ")}}),_.body.innerHTML},c=(A,u)=>A.replace(/\{\$([^:]+):(.*?)\}/g,(v,_,$)=>{const g=String(u[_]||$);return Yr(g)}),d=(A,u)=>{const _=new globalThis.DOMParser().parseFromString(A,"text/html");return _.querySelectorAll("[z-for]").forEach(g=>{const P=g.getAttribute("z-for");if(!P)return;const N=u[P];if(!Array.isArray(N)||N.length===0){g.remove();return}let D="";N.forEach(x=>{let O=g.outerHTML;O=O.replace(/\s*z-for="[^"]*"/g,""),Object.keys(x).forEach(R=>{const se=new RegExp(`\\(\\$${R}:([^)]+)\\)`,"g");O=O.replace(se,x[R]||"$1")}),D+=O}),g.outerHTML=D}),_.body.innerHTML},f=A=>{const v=new globalThis.DOMParser().parseFromString(`<root>${A}</root>`,"text/html"),_=(P,N=0)=>{let D=N;for(const x of Array.from(P.children)){let O=N;x.hasAttribute("z-for")&&(O+=1);const R=_(x,O);D=Math.max(D,R)}return D},$=v.body.querySelector("root");if(!$)return 3;const g=_($);return Math.max(g+2,3)},C=(A,u,v,_=0,$)=>{const P=new globalThis.DOMParser().parseFromString(A,"text/html");if(P.querySelectorAll("[z-if]").forEach(W=>{const Y=W.getAttribute("z-if");Y&&(u[Y]?W.removeAttribute("z-if"):W.remove())}),P.querySelectorAll("[z-for-wrapper]").forEach(W=>{const Y=W.getAttribute("z-for-wrapper");if(Y){const pe=u[Y];!Array.isArray(pe)||pe.length===0?W.remove():W.removeAttribute("z-for-wrapper")}}),_===0&&!$){const W=v(u.type,u.module_name);$=f(W)}const x=$??5;if(_>=x)return M(A,u,v);let O=!0,R=0;for(;O&&R<3;)O=!1,R++,Array.from(P.querySelectorAll("[z-for]")).forEach(Y=>{const pe=Y.getAttribute("z-for");if(!Y.hasAttribute("data-zfor-processed")&&pe){let Se=u;if(typeof window<"u"&&window.getLatestComponentData){const Ne=u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],Ge=window.getLatestComponentData(Ne);Ge&&(Se=Ge)}let Oe=u[pe];if(!Oe&&Se[pe]&&(Oe=Se[pe]),!Oe&&pe==="items"&&typeof window<"u"&&window.getLatestComponentData){const Ne=u.id.includes("_categories_")?u.id.split("_categories_")[0]:u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],Ge=window.getLatestComponentData(Ne);if(Ge&&Ge.categories){const ut=u.id.match(/_categories_(\d+)/);if(ut){const pt=parseInt(ut[1]);Ge.categories[pt]&&Ge.categories[pt].items&&(Oe=Ge.categories[pt].items)}}}if(Array.isArray(Oe)&&Oe.length>0){Y.setAttribute("data-zfor-processed","true");const Ne=v(u.type,u.module_name),Ge=new RegExp(`<(\\w+)[^>]*z-for="${pe}"[^>]*>`),ut=Ne.match(Ge),pt=ut?Ne.indexOf(ut[0]):-1;let Ot=Y.innerHTML;if(pt!==-1&&ut){const F=ut[0].match(/<(\w+)/),B=F?F[1]:"div";let U=0,V=pt;for(let J=pt;J<Ne.length;J++)if(Ne.substring(J,J+B.length+1)===`<${B}`)U++;else if(Ne.substring(J,J+B.length+3)===`</${B}>`&&(U--,U===0)){V=J+B.length+3;break}Ot=Ne.substring(pt,V).replace(/\s+z-for="[^"]*"/,"")}const mt=Oe.map((F,B)=>{let U=Ot;const V={...u,...F,type:u.type,module_name:u.module_name,id:`${u.id}_${pe}_${B}`};if(typeof window<"u"&&window.getLatestComponentData){const K=u.id.includes("_categories_")?u.id.split("_categories_")[0]:u.id.includes("_items_")?u.id.split("_items_")[0]:u.id.split("_")[0]+"_"+u.id.split("_")[1]+"_"+u.id.split("_")[2]+"_"+u.id.split("_")[3],J=window.getLatestComponentData(K);J&&pe==="categories"&&J.categories&&J.categories[B]&&Object.assign(V,J.categories[B])}return U=C(U,V,v,_+1,x),U=a(U,F),U=i(U,F),U=c(U,V),U}).join("");Y.outerHTML=mt,O=!0;const S=new DOMParser().parseFromString(P.body.innerHTML,"text/html");P.body.innerHTML=S.body.innerHTML}else Y.remove()}});return P.querySelectorAll("[z-slot]").forEach(W=>{const Y=W.getAttribute("z-slot");if(Y)if(u[Y]&&Array.isArray(u[Y])){const Se=u[Y].map(Oe=>k(Oe,v,options)).join("");W.outerHTML=Se}else W.remove()}),P.querySelectorAll("img").forEach(W=>{W.classList.add("zero-code-editable-image")}),P.body.innerHTML};return{editingText:e,shouldApplyTiptap:o,processTextReplacementWithTemplate:r,processArrayItemTextReplacement:n,processArrayItemParameterReplacement:s,processSelectionSyntax:a,processConditionalClassSyntax:i,processZDirectives:E,renderComponentWithNested:l,renderComponentWithoutSlot:b,renderNestedComponentWithDepth:m,renderNestedComponentsWithUI:h,hasNestedSlot:z,renderComponentOptimized:T,clearAllCaches:()=>{Dh(),Lh()}}}function Xr(){return{getImageSrc:n=>n.fileData?.base64&&n.fileData.base64.trim()!==""?`data:${n.fileData.type||n.type||"image/jpeg"};base64,${n.fileData.base64}`:n.url||"",isImageUpdated:n=>!!(n.fileData?.base64&&n.fileData.base64.trim()!==""),getImageAlt:n=>n.alt||n.name||"画像",updateImageData:(n,s,a)=>({...n,fileData:{...n.fileData,base64:a,type:s.type,size:s.size},type:s.type,size:s.size,uploadedAt:new Date().toISOString()})}}const Rh={class:"zero-code-page-preview"},Hh={class:"zero-code-page-preview-content"},Bh=["innerHTML"],jh=lt({__name:"PagePreview",props:{pageData:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array}},setup(e){const t=e,o=ba(),{getImageSrc:r}=Xr(),n=we(()=>[...t.commonImages,...t.individualImages]),s=b=>{if(!b||n.value.length===0)return b;let m=b;return m=m.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(h,E,z,T)=>{const k=n.value.find(M=>!!(M.id===z||M.url===z||M.name===z||z.endsWith("/"+M.name)||M.url.endsWith(z)||z.split("/").pop()===M.name));if(k){const M=r(k);return`<img${E}src="${M}"${T}>`}return h}),m},a=(b,m)=>{if(!Array.isArray(t.parts))return"";const h=t.parts.find(z=>z.type===b);if(!h)return"";const E=h.module.find(z=>z.title===m);return E?E.body:""},i=we(()=>{if(!Array.isArray(t.pageData)||t.pageData.length===0)return'<div class="zero-code-no-content">ページにコンテンツがありません</div>';let b='<div class="zero-code-page-container">';return t.pageData.forEach(m=>{const h=l(m);!h||h.trim()===""?b+=`<div class="zero-code-error-component">テンプレートが見つかりません: ${m.type}/${m.module_name}</div>`:b+=h}),b+="</div>",b}),l=b=>{const m=o.renderComponentOptimized(b,a,{isPreviewMode:!0});return s(m)};return(b,m)=>(L(),H("div",Rh,[w("div",Hh,[w("div",{innerHTML:i.value},null,8,Bh)])]))}}),Uh={class:"zero-code-tab-content"},Vh={class:"zero-code-data-tabs"},Zh={class:"zero-code-tab-buttons"},Wh=["onClick"],qh={class:"zero-code-preview-content"},Kh={key:0,class:"zero-code-preview-section"},Gh={key:1,class:"zero-code-preview-section"},Jh={class:"zero-code-html-source"},Yh={class:"zero-code-html-source-pre"},Xh=lt({__name:"PreviewPanel",props:{editablePageData:{type:Array},localParts:{type:Array},parts:{type:Array},commonImages:{type:Array},individualImages:{type:Array}},setup(e){const t=e,o=ba(),r=_e("preview"),n=_e(0),s=["preview","source"],a=h=>({preview:"プレビュー表示",source:"HTMLソース"})[h],i=(h,E)=>{const z=t.localParts&&t.localParts.length>0?t.localParts:t.parts||[];if(!Array.isArray(z))return"";const T=z.find(M=>M.type===h);if(!T)return"";const k=T.module.find(M=>M.title===E);return k?k.body:""},l=h=>o.renderComponentOptimized(h,i,{isPreviewMode:!0}),b=we(()=>{if(!Array.isArray(t.editablePageData)||t.editablePageData.length===0)return'<div class="zero-code-no-content">ページにコンテンツがありません</div>';let h='<div class="zero-code-page-container">';return t.editablePageData.forEach(E=>{const z=l(E);!z||z.trim()===""?h+=`<div class="zero-code-error-component">テンプレートが見つかりません: ${E.type}/${E.module_name}</div>`:h+=z}),h+="</div>",h}),m=h=>{if(!h)return"";try{const T=new globalThis.DOMParser().parseFromString(`<root>${h}</root>`,"text/html").body.firstChild;if(!T)return h;const k=new Set(["img","br","hr","input","meta","link","area","base","col","embed","source","track","wbr"]),M=new Set(["span","a","strong","em","u","mark","code","small","sub","sup","i","b"]),p=(d,f=0,C=!1)=>{const I=d.tagName.toLowerCase(),A=C?"":"  ".repeat(f),u=k.has(I),v=M.has(I);let _=`<${I}`;for(let x=0;x<d.attributes.length;x++){const O=d.attributes[x];_+=` ${O.name}="${O.value}"`}_+=">";let $=A+_;if(u)return $;let g=!1,P=!1;const N=[];let D="";for(let x=0;x<d.childNodes.length;x++){const O=d.childNodes[x];if(O.nodeType===1){g=!0;const se=p(O,f+1,v||C);N.push(se)}else if(O.nodeType===3){const R=O.textContent?.replace(/\s+/g," ").trim();R&&(P=!0,D+=R)}}return g&&P?v||C?$+=D+N.join(""):($+=D+`
`+N.join(`
`),N.length>0&&($+=`
`+A)):g?v||C?$+=N.join(""):($+=`
`+N.join(`
`),N.length>0&&($+=`
`+A)):P&&($+=D),$+=`</${I}>`,$};let c="";for(let d=0;d<T.childNodes.length;d++){const f=T.childNodes[d];f.nodeType===1&&(c+=p(f)+`
`)}return c.replace(/\n{3,}/g,`

`).replace(/\n\s*\n\s*</g,`
<`).trim()}catch{return h.replace(/>\s*</g,`>
<`).split(`
`).filter(z=>z.trim()).map((z,T,k)=>{const M=z.trim();if(!M)return"";let p=0;for(let c=0;c<T;c++){const d=k[c].trim();d.match(/<[^\/!][^>]*[^\/]>$/)&&p++,d.match(/<\/[^>]+>$/)&&p--}return M.startsWith("</")&&p--,"  ".repeat(Math.max(0,p))+M}).join(`
`)}};return tt(()=>t.editablePageData,()=>{n.value++},{deep:!0,immediate:!0}),(h,E)=>(L(),H("div",Uh,[w("div",Vh,[w("div",Zh,[(L(),H($e,null,Me(s,z=>w("button",{key:z,class:et(["zero-code-data-tab-button",{active:r.value===z}]),onClick:T=>r.value=z},oe(a(z)),11,Wh)),64))])]),w("div",qh,[r.value==="preview"?(L(),H("div",Kh,[(L(),ft(jh,{key:n.value,"page-data":h.editablePageData,parts:h.localParts&&h.localParts.length>0?h.localParts:h.parts||[],"common-images":h.commonImages,"individual-images":h.individualImages},null,8,["page-data","parts","common-images","individual-images"]))])):ge("",!0),r.value==="source"?(L(),H("div",Gh,[w("div",Jh,[E[0]||(E[0]=w("div",{class:"zero-code-source-header"},[w("p",{class:"zero-code-source-description"},"パーツごとに改行・インデントされたHTMLソース")],-1)),w("pre",Yh,[w("code",null,oe(m(b.value)),1)])])])):ge("",!0)])]))}}),Qh={class:"zero-code-modal-header"},ev={class:"zero-code-modal-body"},tv={class:"zero-code-img-file-input-section"},ov={key:0,class:"zero-code-img-file-info"},rv={class:"zero-code-img-file-preview"},nv=["src"],sv={class:"zero-code-img-file-details"},av={class:"zero-code-form-section"},iv={class:"zero-code-form-group"},lv=["disabled"],cv={class:"zero-code-form-group"},dv=["disabled"],uv={key:0,class:"zero-code-form-group"},pv=["disabled"],fv={class:"zero-code-modal-footer"},mv=["disabled"],gv=lt({__name:"ImageUploadModal",props:{category:{type:String},componentId:{type:String}},emits:["close","upload"],setup(e,{emit:t}){const o=e,r=t,n=_e(null),s=_e(""),a=_e(""),i=_e(""),l=_e(o.componentId||""),b=we(()=>n.value&&a.value.trim()&&i.value.trim()),m=c=>{const d=c.target;d.files&&d.files[0]&&E(d.files[0])},h=c=>{c.preventDefault(),c.dataTransfer&&c.dataTransfer.files[0]&&E(c.dataTransfer.files[0])},E=c=>{n.value=c,a.value=c.name.replace(/\.[^/.]+$/,""),i.value=c.name,s.value&&URL.revokeObjectURL(s.value),s.value=URL.createObjectURL(c)},z=c=>new Promise((d,f)=>{const C=new FileReader;C.readAsDataURL(c),C.onload=()=>d(C.result),C.onerror=I=>f(I)}),T=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),k=c=>{if(c===0)return"0 Bytes";const d=1024,f=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(c)/Math.log(d));return parseFloat((c/Math.pow(d,C)).toFixed(2))+" "+f[C]},M=async()=>{if(!(!n.value||!b.value))try{const c=await z(n.value),d=c.split(",")[1]||c,f={id:T(),name:a.value,originalName:n.value.name,url:`/img/${a.value}`,alt:i.value,size:n.value.size,type:n.value.type,uploadedAt:new Date().toISOString(),category:o.category,componentId:o.category==="individual"?l.value:void 0,fileData:{base64:d}};r("upload",f)}catch{alert("画像のアップロードに失敗しました。")}};return Ir(()=>{s.value&&URL.revokeObjectURL(s.value)}),(c,d)=>(L(),H("div",{class:"zero-code-modal-overlay",onClick:d[8]||(d[8]=f=>c.$emit("close"))},[w("div",{class:"zero-code-modal-content",onClick:d[7]||(d[7]=Bt(()=>{},["stop"]))},[w("div",Qh,[w("h4",null,"画像アップロード（"+oe(c.category==="common"?"共通":"個別")+"）",1),w("button",{class:"zero-code-img-close-btn",onClick:d[0]||(d[0]=f=>c.$emit("close"))},"×")]),w("div",ev,[w("div",tv,[d[9]||(d[9]=w("label",{for:"file-input",class:"zero-code-img-file-input-label"},[w("div",{class:"zero-code-img-file-input-area"},[w("span",{class:"zero-code-img-file-input-text"},"クリックしてファイルを選択"),w("span",{class:"zero-code-img-file-input-hint"},"またはドラッグ&ドロップ")])],-1)),w("input",{id:"file-input",type:"file",accept:"image/*",style:{display:"none"},onChange:m,onDrop:h,onDragover:d[1]||(d[1]=Bt(()=>{},["prevent"])),onDragenter:d[2]||(d[2]=Bt(()=>{},["prevent"]))},null,32)]),n.value?(L(),H("div",ov,[w("div",rv,[w("img",{src:s.value,alt:"プレビュー"},null,8,nv)]),w("div",sv,[w("p",null,[d[10]||(d[10]=w("strong",null,"ファイル名:",-1)),lr(" "+oe(n.value.name),1)]),w("p",null,[d[11]||(d[11]=w("strong",null,"サイズ:",-1)),lr(" "+oe(k(n.value.size)),1)]),w("p",null,[d[12]||(d[12]=w("strong",null,"タイプ:",-1)),lr(" "+oe(n.value.type),1)])])])):ge("",!0),w("div",av,[w("div",iv,[d[13]||(d[13]=w("label",{for:"image-name"},"保存名:",-1)),It(w("input",{id:"image-name","onUpdate:modelValue":d[3]||(d[3]=f=>a.value=f),type:"text",placeholder:"画像の保存名を入力",disabled:!n.value},null,8,lv),[[Jt,a.value]])]),w("div",cv,[d[14]||(d[14]=w("label",{for:"image-alt"},"alt属性:",-1)),It(w("input",{id:"image-alt","onUpdate:modelValue":d[4]||(d[4]=f=>i.value=f),type:"text",placeholder:"画像の説明を入力",disabled:!n.value},null,8,dv),[[Jt,i.value]])]),c.category==="individual"?(L(),H("div",uv,[d[15]||(d[15]=w("label",{for:"component-id"},"コンポーネントID:",-1)),It(w("input",{id:"component-id","onUpdate:modelValue":d[5]||(d[5]=f=>l.value=f),type:"text",placeholder:"コンポーネントIDを入力",disabled:!n.value},null,8,pv),[[Jt,l.value]])])):ge("",!0)])]),w("div",fv,[w("button",{class:"zero-code-img-btn zero-code-img-btn-secondary",onClick:d[6]||(d[6]=f=>c.$emit("close"))},"キャンセル"),w("button",{class:"zero-code-img-btn zero-code-img-btn-primary",disabled:!b.value,onClick:M}," アップロード ",8,mv)])])]))}}),hv={class:"zero-code-modal-header"},vv={class:"zero-code-modal-body"},bv={class:"zero-code-img-detail-preview"},yv=["src","alt"],_v={key:0,class:"zero-code-img-updated-badge"},$v={class:"zero-code-form-section"},wv={class:"zero-code-form-group"},zv={class:"zero-code-form-group"},Av={key:0,class:"zero-code-form-group"},Cv={class:"zero-code-img-detail-info"},Ev={class:"zero-code-img-detail-info-group"},Pv={class:"zero-code-img-detail-info-group"},Sv={class:"zero-code-img-detail-info-group"},Iv={class:"zero-code-img-detail-info-group"},Tv={class:"zero-code-img-detail-info-group"},Dv={class:"zero-code-img-detail-url-group"},xv={class:"zero-code-modal-footer"},Mv={class:"zero-code-modal-footer-right"},Nv=lt({__name:"ImageDetailModal",props:{image:{type:Object}},emits:["close","delete","replace"],setup(e,{emit:t}){const o=e,r=t,n=Ho({...o.image}),s=_e(null),{getImageSrc:a,getImageAlt:i,isImageUpdated:l,updateImageData:b}=Xr(),m=we(()=>a(n)),h=we(()=>i(n)),E=()=>{confirm("この画像を削除しますか？この操作は取り消せません。")&&r("delete",n.id)},z=()=>{s.value&&s.value.click()},T=async d=>{const f=d.target;if(!f.files||!f.files[0])return;const C=f.files[0];if(!confirm(`画像を "${C.name}" に差し替えますか？この操作は取り消せません。`)){f.value="";return}try{const I=await k(C),A=b(n,C,I.split(",")[1]);Object.assign(n,A),r("replace",n.id,A)}catch{alert("画像の差し替えに失敗しました。")}finally{f.value=""}},k=d=>new Promise((f,C)=>{const I=new FileReader;I.readAsDataURL(d),I.onload=()=>f(I.result),I.onerror=A=>C(A)}),M=async d=>{try{await navigator.clipboard.writeText(d),alert("URLをクリップボードにコピーしました")}catch{const C=document.createElement("textarea");C.value=d,document.body.appendChild(C),C.select(),document.execCommand("copy"),document.body.removeChild(C),alert("URLをクリップボードにコピーしました")}},p=d=>{if(!d||isNaN(d))return"サイズ不明";if(d===0)return"0 Bytes";const f=1024,C=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(d)/Math.log(f));return parseFloat((d/Math.pow(f,I)).toFixed(2))+" "+C[I]},c=d=>{if(!d)return"日時不明";const f=new Date(d);return isNaN(f.getTime())?"日時不明":f.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return(d,f)=>(L(),H("div",{class:"zero-code-modal-overlay",onClick:f[8]||(f[8]=C=>d.$emit("close"))},[w("div",{class:"zero-code-modal-content",onClick:f[7]||(f[7]=Bt(()=>{},["stop"]))},[w("div",hv,[f[9]||(f[9]=w("h4",null,"画像詳細",-1)),w("button",{class:"zero-code-close-button",onClick:f[0]||(f[0]=C=>d.$emit("close"))},"✖️")]),w("div",vv,[w("div",bv,[w("img",{src:m.value,alt:h.value},null,8,yv),fe(l)(n)?(L(),H("div",_v," 差し替え済み ")):ge("",!0)]),w("div",$v,[w("div",wv,[f[10]||(f[10]=w("label",{for:"detail-image-name"},"ファイル名:",-1)),It(w("input",{id:"detail-image-name","onUpdate:modelValue":f[1]||(f[1]=C=>n.name=C),type:"text",readonly:""},null,512),[[Jt,n.name]])]),w("div",zv,[f[11]||(f[11]=w("label",{for:"detail-image-alt"},"alt属性:",-1)),It(w("input",{id:"detail-image-alt","onUpdate:modelValue":f[2]||(f[2]=C=>n.alt=C),type:"text",readonly:""},null,512),[[Jt,n.alt]])]),n.componentId?(L(),H("div",Av,[f[12]||(f[12]=w("label",{for:"detail-component-id"},"コンポーネントID:",-1)),It(w("input",{id:"detail-component-id","onUpdate:modelValue":f[3]||(f[3]=C=>n.componentId=C),type:"text",readonly:""},null,512),[[Jt,n.componentId]])])):ge("",!0),w("div",Cv,[w("div",Ev,[f[13]||(f[13]=w("label",null,"カテゴリ:",-1)),w("span",{class:et(["zero-code-img-detail-category",n.category])},oe(n.category==="common"?"共通画像":"個別画像"),3)]),w("div",Pv,[f[14]||(f[14]=w("label",null,"ファイルサイズ:",-1)),w("span",null,oe(p(n.fileData?.size||n.size||0)),1)]),w("div",Sv,[f[15]||(f[15]=w("label",null,"ファイルタイプ:",-1)),w("span",null,oe(n.fileData?.type||n.type||"不明"),1)]),w("div",Iv,[f[16]||(f[16]=w("label",null,"アップロード日時:",-1)),w("span",null,oe(c(n.uploadedAt)),1)]),w("div",Tv,[f[17]||(f[17]=w("label",null,"画像URL:",-1)),w("div",Dv,[It(w("input",{"onUpdate:modelValue":f[4]||(f[4]=C=>n.url=C),type:"text",readonly:"",class:"zero-code-img-detail-url-input"},null,512),[[Jt,n.url]]),w("button",{class:"zero-code-btn zero-code-btn-secondary zero-code-copy-btn",title:"URLをコピー",onClick:f[5]||(f[5]=C=>M(n.url))}," 📋 ")])])])])]),w("div",xv,[w("div",{class:"zero-code-modal-footer-left"},[w("button",{class:"zero-code-btn zero-code-btn-danger",onClick:E}," 削除 "),w("button",{class:"zero-code-btn zero-code-btn-primary",onClick:z}," 差し替え ")]),w("div",Mv,[w("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:f[6]||(f[6]=C=>d.$emit("close"))}," 閉じる ")]),w("input",{ref_key:"fileInputRef",ref:s,type:"file",accept:"image/*",style:{display:"none"},onChange:T},null,544)])])]))}}),Fv={class:"zero-code-tab-content"},kv={class:"zero-code-data-tabs"},Ov={class:"zero-code-tab-buttons"},Lv=["onClick"],Rv={class:"zero-code-image-content"},Hv={key:0,class:"zero-code-image-section"},Bv={class:"zero-code-section-header"},jv={class:"zero-code-img-grid"},Uv=["onClick"],Vv=["src","alt"],Zv={key:0,class:"zero-code-img-updated-badge"},Wv={class:"zero-code-img-info"},qv={class:"zero-code-img-name"},Kv={class:"zero-code-img-size"},Gv=["onClick"],Jv={key:0,class:"zero-code-empty-state"},Yv={key:1,class:"zero-code-image-section"},Xv={class:"zero-code-section-header"},Qv={class:"zero-code-img-grid"},eb=["onClick"],tb=["src","alt"],ob={key:0,class:"zero-code-img-updated-badge"},rb={class:"zero-code-img-info"},nb={class:"zero-code-img-name"},sb={class:"zero-code-img-size"},ab=["onClick"],ib={key:0,class:"zero-code-empty-state"},lb={key:2,class:"zero-code-image-section"},cb={class:"zero-code-data-display-section"},db={class:"zero-code-parts-sub-tabs"},ub={class:"zero-code-parts-sub-content"},pb={key:0,class:"zero-code-parts-sub-section"},fb={key:0},mb={class:"zero-code-data-display-pre"},gb={key:1},hb={key:1,class:"zero-code-parts-sub-section"},vb={key:0},bb={class:"zero-code-data-display-pre"},yb={key:1},_b={class:"zero-code-image-stats"},$b=lt({__name:"ImageManagementPanel",props:{commonImages:{type:Array},individualImages:{type:Array}},emits:["updateCommonImages","updateIndividualImages","sendCommonImagesData","sendIndividualImagesData"],setup(e,{emit:t}){const o=e,r=t,{getImageSrc:n,getImageAlt:s,isImageUpdated:a}=Xr(),i=_e("common"),l=_e("common"),b=_e(!1),m=_e(!1),h=_e("common"),E=_e(null),z=we(()=>o.commonImages.length+o.individualImages.length),T=["common","individual","data"],k=_=>({common:"共通画像",individual:"個別画像",data:"データ表示"})[_],M=_=>{if(!_||isNaN(_))return"サイズ不明";if(_===0)return"0 Bytes";const $=1024,g=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(_)/Math.log($));return parseFloat((_/Math.pow($,P)).toFixed(2))+" "+g[P]},p=_=>{h.value=_,b.value=!0},c=()=>{b.value=!1},d=_=>{E.value=_,m.value=!0},f=()=>{m.value=!1,E.value=null},C=_=>{if(h.value==="common"){const $=[...o.commonImages,_];r("updateCommonImages",$)}else{const $=[...o.individualImages,_];r("updateIndividualImages",$)}c()},I=_=>{const $=(g,P=0)=>{const N="  ".repeat(P),D="  ".repeat(P+1);if(Array.isArray(g))return g.length===0?"[]":`[
${g.map(O=>D+$(O,P+1)).join(`,
`)}
${N}]`;if(typeof g=="object"&&g!==null){const x=Object.entries(g);return x.length===0?"{}":`{
${x.map(([R,se])=>{let q;if(typeof se=="string"){const W=se.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");if(W.includes(`
`)){const Y=W.split(`
`);q=Y.map((Se,Oe)=>Oe===0?`\`${Se}`:Oe===Y.length-1?`${D}${Se}\``:`${D}${Se}`).join(`
`)}else q=`"${W}"`}else q=$(se,P+1);return`${D}"${R}": ${q}`}).join(`,
`)}
${N}}`}return typeof g=="string"?`"${g.replace(/"/g,'\\"')}"`:JSON.stringify(g)};return $(_)},A=_=>{if(!E.value)return;if(E.value.category==="common"){const g=o.commonImages.filter(P=>P.id!==_);r("updateCommonImages",g)}else{const g=o.individualImages.filter(P=>P.id!==_);r("updateIndividualImages",g)}f()},u=(_,$)=>{if($.category==="common"){const P=o.commonImages.map(N=>N.id===_?$:N);r("updateCommonImages",P)}else{const P=o.individualImages.map(N=>N.id===_?$:N);r("updateIndividualImages",P)}f()},v=(_,$)=>{if(confirm("この画像を削除しますか？"))if($==="common"){const g=o.commonImages.filter(P=>P.id!==_);r("updateCommonImages",g)}else{const g=o.individualImages.filter(P=>P.id!==_);r("updateIndividualImages",g)}};return(_,$)=>(L(),H("div",Fv,[w("div",kv,[w("div",Ov,[(L(),H($e,null,Me(T,g=>w("button",{key:g,class:et(["zero-code-data-tab-button",{active:i.value===g}]),onClick:P=>i.value=g},oe(k(g)),11,Lv)),64))])]),w("div",Rv,[i.value==="common"?(L(),H("div",Hv,[w("div",Bv,[w("h4",null,"共通画像 ("+oe(_.commonImages.length)+"件)",1),w("button",{class:"zero-code-img-upload-btn common",onClick:$[0]||($[0]=g=>p("common"))}," 共通画像をアップロード ")]),w("div",jv,[(L(!0),H($e,null,Me(_.commonImages,g=>(L(),H("div",{key:g.id,class:"zero-code-img-item",onClick:P=>d(g)},[w("img",{src:fe(n)(g),alt:fe(s)(g)},null,8,Vv),fe(a)(g)?(L(),H("div",Zv," 差し替え済み ")):ge("",!0),w("div",Wv,[w("p",qv,oe(g.name),1),w("p",Kv,oe(M(g.fileData?.size||g.size||0)),1)]),w("button",{class:"zero-code-img-delete-btn",onClick:Bt(P=>v(g.id,"common"),["stop"])}," 削除 ",8,Gv)],8,Uv))),128))]),_.commonImages.length===0?(L(),H("div",Jv,$[4]||($[4]=[w("p",null,"共通画像が登録されていません。",-1)]))):ge("",!0)])):ge("",!0),i.value==="individual"?(L(),H("div",Yv,[w("div",Xv,[w("h4",null,"個別画像 ("+oe(_.individualImages.length)+"件)",1),w("button",{class:"zero-code-img-upload-btn individual",onClick:$[1]||($[1]=g=>p("individual"))}," 個別画像をアップロード ")]),w("div",Qv,[(L(!0),H($e,null,Me(_.individualImages,g=>(L(),H("div",{key:g.id,class:"zero-code-img-item",onClick:P=>d(g)},[w("img",{src:fe(n)(g),alt:fe(s)(g)},null,8,tb),fe(a)(g)?(L(),H("div",ob," 差し替え済み ")):ge("",!0),w("div",rb,[w("p",nb,oe(g.name),1),w("p",sb,oe(M(g.fileData?.size||g.size||0)),1)]),w("button",{class:"zero-code-img-delete-btn",onClick:Bt(P=>v(g.id,"individual"),["stop"])}," 削除 ",8,ab)],8,eb))),128))]),_.individualImages.length===0?(L(),H("div",ib,$[5]||($[5]=[w("p",null,"個別画像が登録されていません。",-1)]))):ge("",!0)])):ge("",!0),i.value==="data"?(L(),H("div",lb,[w("div",cb,[w("div",db,[w("button",{class:et(["zero-code-parts-sub-tab-button",{active:l.value==="common"}]),onClick:$[2]||($[2]=g=>l.value="common")}," 共通画像データ ",2),w("button",{class:et(["zero-code-parts-sub-tab-button",{active:l.value==="individual"}]),onClick:$[3]||($[3]=g=>l.value="individual")}," 個別画像データ ",2)]),w("div",ub,[l.value==="common"?(L(),H("div",pb,[_.commonImages&&_.commonImages.length>0?(L(),H("div",fb,[w("pre",mb,oe(I(_.commonImages)),1)])):(L(),H("div",gb,$[6]||($[6]=[w("p",null,"共通画像データがありません",-1)])))])):ge("",!0),l.value==="individual"?(L(),H("div",hb,[_.individualImages&&_.individualImages.length>0?(L(),H("div",vb,[w("pre",bb,oe(I(_.individualImages)),1)])):(L(),H("div",yb,$[7]||($[7]=[w("p",null,"個別画像データがありません",-1)])))])):ge("",!0)])])])):ge("",!0)]),w("div",_b,[$[8]||($[8]=w("strong",null,"画像情報:",-1)),lr(" 共通画像: "+oe(_.commonImages.length)+"件, 個別画像: "+oe(_.individualImages.length)+"件, 合計: "+oe(z.value)+"件 ",1)]),b.value?(L(),ft(gv,{key:0,category:h.value,onClose:c,onUpload:C},null,8,["category"])):ge("",!0),m.value&&E.value?(L(),ft(Nv,{key:1,image:E.value,onClose:f,onDelete:A,onReplace:u},null,8,["image"])):ge("",!0)]))}});function wb(){const e=_e("editor"),t=l=>{e.value!==l&&(y.info(`🔄 タブ切り替え: ${e.value} → ${l}`),e.value=l)};return{activeTab:e,availableTabs:["editor","parts","preview","images"],switchToTab:t,isActiveTab:l=>e.value===l,showEditor:()=>{t("editor")},showPartsManager:()=>{t("parts")},showPreview:()=>{t("preview")},showImageManager:()=>{t("images")}}}function zb(e,t){const o=Ho({editablePageData:[],localParts:[],localCommonParts:[],localIndividualParts:[],activeTab:"editor",dataTab:"rendered",showEditor:!1,showPartSelector:!1,showNestedPartSelector:!1,selectedComponent:null,selectedComponentIndex:null,editingText:null,insertPosition:0,nestedInsertPath:"",nestedInsertPosition:0});tt(()=>e.page,l=>{Array.isArray(l)&&l.length>0&&(o.editablePageData=[...l])},{immediate:!0,deep:!0}),tt(()=>e.parts,l=>{Array.isArray(l)&&(o.localParts=[...l])},{immediate:!0,deep:!0});const r={currentComponentIndex:we(()=>o.selectedComponentIndex===null?-1:typeof o.selectedComponentIndex=="number"?o.selectedComponentIndex:parseInt(o.selectedComponentIndex.toString())),pageDataLength:we(()=>o.editablePageData.length),hasSelectedComponent:we(()=>o.selectedComponent!==null),isEditing:we(()=>o.showEditor&&o.selectedComponent!==null),isTiptapEditing:we(()=>o.editingText!==null)},n={switchToTab:l=>{o.activeTab=l,l==="editor"&&(o.dataTab="rendered")},setDataTab:l=>{o.dataTab=l}},s={openEditor:(l,b)=>{o.selectedComponent=l,o.selectedComponentIndex=b,o.showEditor=!0},closeEditor:()=>{t.emit("editorClosed",{componentId:o.selectedComponent?.id,componentIndex:o.selectedComponentIndex}),o.showEditor=!1,o.selectedComponent=null,o.selectedComponentIndex=null},openPartSelector:l=>{o.insertPosition=l,o.showPartSelector=!0},closePartSelector:()=>{o.showPartSelector=!1},openNestedPartSelector:(l,b)=>{o.nestedInsertPath=l,o.nestedInsertPosition=b,o.showNestedPartSelector=!0},closeNestedPartSelector:()=>{o.showNestedPartSelector=!1}},a={startTiptapEdit:(l,b,m=[],h=0,E,z)=>{o.editingText={componentId:l,paramName:b,hierarchyPath:m,depth:h,arrayName:E,itemIndex:z}},stopTiptapEdit:()=>{o.editingText=null}},i=()=>{o.editablePageData=Array.isArray(e.page)?[...e.page]:[],o.localParts=Array.isArray(e.parts)?[...e.parts]:[],o.localCommonParts=Array.isArray(e.commonParts)?[...e.commonParts]:[],o.localIndividualParts=Array.isArray(e.individualParts)?[...e.individualParts]:[]};return tt(()=>e.page,l=>{Array.isArray(l)&&(o.editablePageData=[...l])},{deep:!0,immediate:!0}),tt(()=>e.parts,l=>{Array.isArray(l)&&(o.localParts=[...l])},{deep:!0,immediate:!0}),tt(()=>e.commonParts,l=>{Array.isArray(l)&&(o.localCommonParts=[...l])},{deep:!0,immediate:!0}),tt(()=>e.individualParts,l=>{Array.isArray(l)&&(o.localIndividualParts=[...l])},{deep:!0,immediate:!0}),i(),{...Qa(o),...r,...n,...s,...a,initializeData:i}}function Ab(){const e=i=>i.includes("url")||i.includes("src")||i.includes("link")?"url":i.includes("email")?"email":i.includes("number")||i.includes("count")?"number":i.includes("date")?"date":i.includes("time")?"time":i.includes("password")?"password":i.includes("tel")||i.includes("phone")?"tel":"text";return{getInputType:e,formatFileSize:i=>{if(i===0)return"0 Bytes";const l=1024,b=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(i)/Math.log(l));return parseFloat((i/Math.pow(l,m)).toFixed(2))+" "+b[m]},component:{findComponentByPath:(i,l)=>{let b=i,m=null;for(let h=0;h<l.length;h++){const E=l[h];if(E>=0&&E<b.length)m=b[E],h<l.length-1&&(b=m.nested_parts||[]);else return null}return m},createNewComponent:(i,l)=>({id:`comp_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,type:i,module_name:l,nested_parts:[]}),deleteComponent:(i,l)=>i.filter((b,m)=>m!==l),duplicateComponent:i=>{const l=`comp_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;return{...JSON.parse(JSON.stringify(i)),id:l}},addArrayItem:(i,l)=>{i[l]||(i[l]=[]);const b=i[l],m={id:`item_${Date.now()}_${Math.random().toString(36).substring(2,11)}`};b.push(m)},removeArrayItem:(i,l,b)=>{const m=i[l];Array.isArray(m)&&b>=0&&b<m.length&&m.splice(b,1)}},template:{getTemplate:(i,l,b)=>{const m=b.find(E=>E.type===i);return m&&m.module.find(E=>E.title===l)?.body||""},extractFields:i=>{const l=[];return[/\{\$([^:}]+):/g,/\(\$([^:}]+):/g,/\(\$([^?}]+)\?:/g].forEach(m=>{let h;for(;(h=m.exec(i))!==null;){const E=h[1];l.includes(E)||l.push(E)}}),l},extractSlots:i=>[]},array:{addArrayItem:(i,l)=>[...i,l],removeArrayItem:(i,l)=>i.filter((b,m)=>m!==l),updateArrayItem:(i,l,b)=>i.map((m,h)=>h===l?b:m),moveArrayItem:(i,l,b)=>{const m=[...i],[h]=m.splice(l,1);return m.splice(b,0,h),m}},field:{getFieldValue:(i,l)=>i[l]||"",setFieldValue:(i,l,b)=>({...i,[l]:b}),validateField:(i,l)=>{switch(e(i)){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l);case"url":try{return new URL(l),!0}catch{return!1}case"number":return!isNaN(Number(l));default:return!0}}},string:{stringifyHierarchyPath:i=>i.join("."),parseHierarchyPath:i=>{if(!i||typeof i!="string")return y.warn("Invalid pathString provided:",i),[];try{const l=i.split("."),b=[];for(const m of l){const h=m.trim();if(h==="")continue;const E=parseInt(h,10);if(!isNaN(E)&&E>=0)b.push(E);else return y.error(`Invalid path component: "${m}" in pathString: "${i}"`),[]}return b}catch(l){return y.error("Error parsing hierarchy path:",i,l),[]}},camelToKebab:i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kebabToCamel:i=>i.replace(/-([a-z])/g,(l,b)=>b.toUpperCase())}}}function Cb(){let e=null;const t=f=>{if(!f||typeof f!="string"||f.trim()==="")return"<p></p>";const C=["p","strong","em","u","s","a","span","br"],I=["href","target","style"],A=document.createElement("div");A.innerHTML=f;const u=_=>{const $=_.tagName.toLowerCase();if(!C.includes($)){const g=_.parentNode;if(g){for(;_.firstChild;)g.insertBefore(_.firstChild,_);g.removeChild(_)}return}Array.from(_.attributes).forEach(g=>{I.includes(g.name.toLowerCase())||_.removeAttribute(g.name)}),Array.from(_.children).forEach(g=>{u(g)})};Array.from(A.children).forEach(_=>{u(_)});let v=A.innerHTML;return v=v.replace(/<p>\s*<\/p>/g,"<p><br></p>").replace(/<p>\s*<br>\s*<\/p>/g,"<p><br></p>").replace(/(<\w+>)\s*(<\/\w+>)/g,"$1<br>$2"),v.includes("<")||(v=`<p>${v}</p>`),(!v||v.trim()==="")&&(v="<p><br></p>"),v},o=()=>{const f=window.getSelection();if(!f||f.rangeCount===0)return{selection:null,range:null};const C=f.getRangeAt(0);return e?.contains(C.commonAncestorContainer)?{selection:f,range:C}:{selection:null,range:null}},r=(f,C)=>{const I=document.createElement(f);return C&&Object.entries(C).forEach(([A,u])=>{I.setAttribute(A,u)}),I},n=(f,C)=>{try{f.surroundContents(C)}catch{const I=f.extractContents();C.appendChild(I),f.insertNode(C)}},s=(f,C,I)=>{const A=r(C,I);n(f,A)},a=(f,C)=>{const I=document.createElement("span");Object.assign(I.style,C),n(f,I)},i=(f,C)=>{if(!f.collapsed)return;const I=document.createTextNode("テキスト");f.insertNode(I),f.selectNodeContents(I),C.removeAllRanges(),C.addRange(f)},l=f=>{const{selection:C,range:I}=o();if(!C||!I)return;let A=I.commonAncestorContainer;A.nodeType===Node.TEXT_NODE&&(A=A.parentElement||A);const u=A.closest("p");if(u){const v={left:"left",center:"center",right:"right"};u.style.textAlign=v[f]}},b=(f,C)=>{if(!e){y.warn("Editor element not found");return}e.focus();const{selection:I,range:A}=o();if(!I||!A){y.warn("Invalid selection");return}i(A,I);const u={bold:()=>s(A,"strong"),italic:()=>s(A,"em"),underline:()=>s(A,"u"),strikeThrough:()=>s(A,"s"),justifyLeft:()=>l("left"),justifyCenter:()=>l("center"),justifyRight:()=>l("right"),createLink:()=>C&&s(A,"a",{href:C,target:"_blank"}),backColor:()=>C&&a(A,{backgroundColor:C})};try{const v=u[f];v?v():y.warn(`Unknown style: ${f}`)}catch(v){y.error(`Failed to apply style ${f}:`,v);try{document.execCommand(f,!1,C)}catch(_){y.error("Fallback command failed:",_)}}},m=(f,C)=>{if(!e)return;e.focus();const I=window.getSelection();if(I?.rangeCount&&e.contains(I.getRangeAt(0).commonAncestorContainer)){const A=I.getRangeAt(0);I.removeAllRanges(),I.addRange(A)}b(f,C)},h={toggleBold:()=>m("bold"),toggleItalic:()=>m("italic"),toggleUnderline:()=>m("underline"),toggleStrike:()=>m("strikeThrough"),alignLeft:()=>m("justifyLeft"),alignCenter:()=>m("justifyCenter"),alignRight:()=>m("justifyRight"),setLink:()=>{const f=window.prompt("URLを入力してください:");f&&m("createLink",f)},isActive:f=>{if(!e)return!1;const C=window.getSelection();if(!C?.rangeCount)return!1;const I=C.getRangeAt(0);return e.contains(I.commonAncestorContainer)?{bold:()=>E("strong"),italic:()=>E("em"),underline:()=>E("u"),strike:()=>E("s")}[f]?.()??!1:!1}},E=f=>{const{selection:C,range:I}=o();if(!C||!I)return!1;let A=I.commonAncestorContainer;for(A.nodeType===window.Node.TEXT_NODE&&(A=A.parentElement||A);A&&A!==e;){if(A.nodeType===window.Node.ELEMENT_NODE&&A.tagName.toLowerCase()===f.toLowerCase())return!0;A=A.parentElement}return!1},z=()=>`
    border: 2px solid #3b82f6;
    border-radius: 8px;
    padding: 12px 16px;
    min-height: 60px;
    background: white;
    outline: none;
    line-height: 1.6;
    color: #1f2937;
    font-size: 14px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    transition: all 0.2s ease;
  `,T=f=>{Object.entries({"data-gramm":"false",spellcheck:"false",autocomplete:"off",autocorrect:"off",autocapitalize:"off"}).forEach(([I,A])=>{f.setAttribute(I,A)})},k=(f,C)=>{let I=null,A=null;f.addEventListener("focus",()=>{f.style.borderColor="#3b82f6",f.style.boxShadow="0 0 0 3px rgba(59,130,246,0.1), 0 1px 3px rgba(0,0,0,0.1)"}),f.addEventListener("blur",()=>{f.style.borderColor="#3b82f6",f.style.boxShadow="0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06)"}),f.addEventListener("keydown",v=>{if(v.key==="Enter"&&!v.shiftKey){v.preventDefault();const _=window.getSelection();if(!_?.rangeCount)return;const $=_.getRangeAt(0),g=$.startContainer;let P=null;if(g.nodeType===window.Node.TEXT_NODE?P=g.parentElement?.closest("p")||null:g.nodeType===window.Node.ELEMENT_NODE&&(P=g.closest("p")||null),P){const N=document.createElement("p");N.innerHTML="<br>",P.insertAdjacentElement("afterend",N);const D=document.createRange();D.setStart(N,0),D.setEnd(N,0),_.removeAllRanges(),_.addRange(D)}else{const N=document.createElement("p");N.innerHTML="<br>",$.deleteContents(),$.insertNode(N);const D=document.createRange();D.setStart(N,0),D.setEnd(N,0),_.removeAllRanges(),_.addRange(D)}f.dispatchEvent(new Event("input",{bubbles:!0}))}}),f.addEventListener("input",()=>{I&&window.clearTimeout(I),I=window.setTimeout(()=>{const v=t(f.innerHTML);if(v!==f.innerHTML){const _=window.getSelection();let $=null;if(_&&_.rangeCount>0&&($=_.getRangeAt(0).cloneRange()),f.innerHTML=v,$&&_)try{_.removeAllRanges(),_.addRange($)}catch{const P=document.createRange();P.selectNodeContents(f),P.collapse(!1),_.removeAllRanges(),_.addRange(P)}}C?.(f.innerHTML)},300)}),f.addEventListener("selectionchange",()=>{try{f.dispatchEvent(new CustomEvent("selectionchange"))}catch(v){y.warn("Selection change error:",v)}});const u=new globalThis.MutationObserver(()=>{A&&window.clearTimeout(A),A=window.setTimeout(()=>{C?.(f.innerHTML)},100)});return u.observe(f,{childList:!0,subtree:!0,characterData:!0}),{saveTimeout:I,updateTimeout:A,observer:u}},M=(f,C,I)=>{const A=C.querySelector(".simple-editor-content");A&&A.remove();const u=document.createElement("div");u.className="simple-editor-content",u.contentEditable="true";const v=t(f);u.innerHTML=v,u.style.cssText=z(),T(u);const{saveTimeout:_,updateTimeout:$,observer:g}=k(u,I);return C.appendChild(u),e=u,{element:u,getHTML:()=>u.innerHTML,setContent:P=>u.innerHTML=P,destroy:()=>{window.clearTimeout(_),window.clearTimeout($),g.disconnect(),u.remove(),e=null},isActive:P=>h.isActive(P),isInitialized:!0,isDestroyed:!1,isFocused:!1,chain:()=>({focus:()=>({toggleMark:P=>({run:()=>{({bold:h.toggleBold,italic:h.toggleItalic,underline:h.toggleUnderline,strike:h.toggleStrike})[P]?.()}}),setTextAlign:P=>({run:()=>{({left:h.alignLeft,center:h.alignCenter,right:h.alignRight})[P]?.()}})})})}},p=(f,C,I)=>{try{return C.innerHTML="",M(f,C,I)}catch(A){throw y.error("Editor init error:",A),A}},c=()=>{if(e)try{e.remove(),e=null}catch(f){y.error("Editor destroy error:",f)}},d=()=>!!e;return Fs(()=>c()),{initEditor:p,destroyEditor:c,getEditor:()=>e,isEditorReady:d}}function ya(e,t,o=100){const r=new Map;return(...n)=>{const s=t?t(...n):JSON.stringify(n);if(r.has(s))return y.debug("メモ化キャッシュヒット:",s),r.get(s);const a=e(...n);if(r.size>=o){const i=r.keys().next().value;i&&r.delete(i)}return r.set(s,a),y.debug("メモ化キャッシュ保存:",s),a}}const ls={findComponent:ya((e,t)=>{for(const o of e){if(o.id===t)return o;if(o.nested_parts){const r=ls.findComponent(o.nested_parts,t);if(r)return r}}return null},(e,t)=>`${t}_${e.length}_${e.map(o=>o.id).join("_")}`,50),getComponentPath:ya((e,t,o=[])=>{for(let r=0;r<e.length;r++){const n=e[r],s=[...o,r];if(n.id===t)return s;if(n.nested_parts){const a=ls.getComponentPath(n.nested_parts,t,s);if(a)return a}}return null},(e,t,o)=>`path_${t}_${e.length}_${o?.join("_")||""}`,30),getComponentDepth:ya((e,t,o=0)=>{for(const r of e){if(r.id===t)return o;if(r.nested_parts){const n=ls.getComponentDepth(r.nested_parts,t,o+1);if(n>=0)return n}}return-1},(e,t,o=0)=>`depth_${t}_${o}_${e.length}`,30)};function Eb(e,t){let o=null;return(...r)=>{o&&clearTimeout(o),o=setTimeout(()=>{e(...r),o=null},t)}}function Pb(e,t){const o=performance.now(),r=e(),s=performance.now()-o;return s>100?y.warn(`⚠️ 重い処理を検出: ${t} (${s.toFixed(2)}ms)`):y.debug(`⚡ パフォーマンス: ${t} (${s.toFixed(2)}ms)`),r}class _c{constructor(){tn(this,"events",new Map);tn(this,"isEnabled",!0)}on(t,o){this.events.has(t)||this.events.set(t,new Set);const r=this.events.get(t);return r.add(o),()=>{r.delete(o)}}emit(t,o){if(!this.isEnabled){y.warn(`EventBus: 無効化されているため ${t} イベントを無視`);return}const r=this.events.get(t);if(!r||r.size===0){y.warn(`EventBus: ${t} イベントのリスナーが見つかりません`);return}const n=[];r.forEach(s=>{try{const a=s(o);a instanceof Promise&&n.push(a)}catch(a){y.error(`EventBus: ${t} イベントリスナーでエラー`,a)}}),n.length>0&&Promise.allSettled(n).then(s=>{s.forEach((a,i)=>{a.status==="rejected"&&y.error(`EventBus: ${t} 非同期リスナー[${i}]でエラー`,a.reason)})})}off(t){this.events.delete(t)}clear(){this.events.clear()}disable(){this.isEnabled=!1}enable(){this.isEnabled=!0}getListenerCount(t){if(t)return this.events.get(t)?.size||0;let o=0;return this.events.forEach(r=>{o+=r.size}),o}}const kt=new _c,Sb={addArrayItem:(e,t)=>{kt.emit("addArrayItem",{componentId:e,arrayKey:t})},addZForArrayItem:(e,t,o)=>{kt.emit("addZForArrayItem",{componentId:e,arrayName:t,insertIndex:o})},removeZForArrayItem:(e,t,o)=>{kt.emit("removeZForArrayItem",{componentId:e,arrayName:t,index:o})},reorderZForArrayItem:(e,t,o,r)=>{kt.emit("reorderZForArrayItem",{componentId:e,arrayName:t,fromIndex:o,toIndex:r})},editZForArrayItem:(e,t,o)=>{kt.emit("editZForArrayItem",{componentId:e,arrayName:t,index:o})},deleteNestedPart:e=>{kt.emit("deleteNestedPart",{pathString:e})},openNestedEditor:e=>{kt.emit("openNestedEditor",{pathString:e})},openNestedPartSelector:(e,t)=>{kt.emit("openNestedPartSelector",{pathString:e,position:t})},startRichTextEdit:(e,t,o)=>kt.emit("startRichTextEdit",{componentId:e,paramName:t,currentValue:o}),selectImage:(e,t)=>{kt.emit("selectImage",{componentId:e,paramName:t})},uploadImage:(e,t,o)=>{kt.emit("uploadImage",{file:e,category:t,componentId:o})}};function Ib(e,t,o){const r=e.includes("[DEBUG]"),n=/\d+/.test(e),s=e.replace(/\[DEBUG\]|\d+/g,"").trim();if(t.toLowerCase().includes("url")||t.toLowerCase().includes("image")||t.toLowerCase().includes("icon")||e.startsWith("/")||e.includes(".jpg")||e.includes(".png")||e.includes(".gif")||e.includes(".svg"))return e;let a;return t==="name"&&e.includes("ネスト")?a=`新しいネスト項目${o}`:t==="title"&&e.includes("アイテム")?a=`新しいアイテム${o}`:n?a=`${s}${o}`:a=e.startsWith("新しい")?`${e}${o}`:`新しい${t}${o}`,r&&(a+=" [DEBUG]"),a}function Tb(e,t){console.log("🔥 [useZeroCode] 初期化開始");const o=new _c,r=zb(e,o),n=Ab(),s=ba(),a=Cb();console.log("🔥 [useZeroCode] z-forイベントリスナー登録開始"),o.on("addZForArrayItem",({componentId:p,arrayName:c,insertIndex:d})=>{console.log("🔥 [EventBus受信] addZForArrayItem受信 (早期登録版):",{componentId:p,arrayName:c,insertIndex:d});try{console.log("🔥 [処理実行] 配列アイテム追加処理開始");const f=p.split("_");console.log("🔥 [DEBUG] componentId parts:",f);let C,I=null;const A=i(r.editablePageData.value,p),u=A&&A.id===p;if(f.length>=3&&/^\d+$/.test(f[f.length-1])&&!u){const g=parseInt(f[f.length-1]);let P="",N="";const D=`_${g}`,x=p.slice(0,-D.length),O=f.slice(0,4).join("_");if(x.startsWith(O+"_"))N=O,P=x.slice(O.length+1);else{const q=x.lastIndexOf("_");q!==-1&&(P=x.slice(q+1),N=x.slice(0,q))}if(!P){const q=p.match(/^(.+)_([^_]+_[^_]+)_(\d+)$/);q?(N=q[1],P=q[2]):(N=f.slice(0,-2).join("_"),P=f[f.length-2])}console.log("🔥 [DEBUG] 修正版ネスト形式検出:",{componentId:p,parts:f,baseParentId:N,parentArrayName:P,parentIndex:g,arrayName:c});const R=N;console.log("🔥 [DEBUG] baseParentIdでコンポーネント検索:",N);const se=i(r.editablePageData.value,N);if(console.log("🔥 [DEBUG] 検索結果:",se?se.id:"null"),se)if(console.log("🔥 [DEBUG] 親コンポーネントの配列確認:",P,se[P]),se[P]&&se[P][g])I=se[P][g],console.log("🔥 [DEBUG] ネスト対象コンポーネント:",I),I&&!Array.isArray(I[c])&&(I[c]=[],console.log("🔥 [DEBUG] 配列フィールド初期化:",c)),C=I?I[c]:void 0,console.log("🔥 [DEBUG] ネスト対象特定完了:",{targetComponentId:I?I.id:"null",arrayName:c,currentArrayLength:C?C.length:0});else throw console.error("🔥 [DEBUG] 親配列または指定インデックスが見つかりません:",{parentArrayName:P,parentIndex:g,parentArray:se[P],parentArrayLength:se[P]?.length}),new Error(`Parent array or index not found: ${P}[${g}]`);else throw console.error("🔥 [DEBUG] baseParentIdでコンポーネントが見つかりません:",N),console.error("🔥 [DEBUG] 現在のページデータ:",r.editablePageData.value.map(q=>q.id)),new Error(`Parent component not found: ${N}`)}else console.log("🔥 [DEBUG] 通常形式検出:",p),I=A||i(r.editablePageData.value,p),I&&(Array.isArray(I[c])||(I[c]=[]),C=I[c]);if(!I||!C)throw new Error(`Target component or array not found: ${p}`);const v=r.localParts.value&&r.localParts.value.length>0?r.localParts.value:[],$={id:ss(v).generateUniqueId()};if(C&&C.length>0){console.log("🔥 [DEBUG] 既存アイテムベース生成開始");const g=C[0];console.log("🔥 [DEBUG] サンプルアイテム:",g),Object.keys(g).forEach(P=>{if(P!=="id"&&!$[P]){const N=g[P];typeof N=="string"?($[P]=Ib(N,P,C.length+1),console.log(`🔥 [DEBUG] 文字列フィールドコピー: ${P} = "${$[P]}"`)):Array.isArray(N)?$[P]=[]:typeof N=="number"?$[P]=N===0?0:Math.floor(Math.random()*100)+1:typeof N=="boolean"?$[P]=!1:$[P]=N}}),console.log("🔥 [DEBUG] 既存アイテムベース生成完了:",$)}else{console.log("🔥 [DEBUG] 空配列 - デフォルト値設定");const g=c.replace(/_/g,"");$.name=`新しい${g}${(C?.length||0)+1}`}C.splice(d,0,$),console.log("🔥 [DEBUG] z-for配列アイテム追加完了:",{arrayName:c,insertIndex:d,newItem:$,finalArrayLength:C.length}),t("update:page",r.editablePageData.value),console.log("🔥 [処理完了] アイテム追加成功！")}catch(f){console.error("🔥 [処理エラー] z-forアイテム追加エラー:",f),alert(`エラーが発生しました: ${f instanceof Error?f.message:String(f)}`)}}),o.on("reorderZForArrayItem",({componentId:p,arrayName:c,fromIndex:d,toIndex:f})=>{console.log("🔥 [EventBus受信] reorderZForArrayItem受信 (早期登録版):",{componentId:p,arrayName:c,fromIndex:d,toIndex:f});try{console.log("🔥 [処理実行] 配列アイテム並べ替え処理開始");const C=p.split("_");console.log("🔥 [DEBUG] 並べ替えcomponentId parts:",C);let I,A=null;const u=i(r.editablePageData.value,p),v=u&&u.id===p;if(C.length>=3&&/^\d+$/.test(C[C.length-1])&&!v){const $=parseInt(C[C.length-1]);let g="",P="";const N=`_${$}`,D=p.slice(0,-N.length),x=C.slice(0,4).join("_");if(D.startsWith(x+"_"))P=x,g=D.slice(x.length+1);else{const R=D.lastIndexOf("_");R!==-1&&(g=D.slice(R+1),P=D.slice(0,R))}if(!g){const R=p.match(/^(.+)_([^_]+_[^_]+)_(\d+)$/);R?(P=R[1],g=R[2]):(P=C.slice(0,-2).join("_"),g=C[C.length-2])}console.log("🔥 [DEBUG] 並べ替えネスト形式検出:",{componentId:p,parts:C,baseParentId:P,parentArrayName:g,parentIndex:$,arrayName:c});const O=i(r.editablePageData.value,P);if(console.log("🔥 [DEBUG] 並べ替え親要素検索結果:",{baseParentId:P,parentArrayName:g,parentIndex:$,realComponentFound:!!O,realComponentId:O?.id,realComponentKeys:O?Object.keys(O):null,hasParentArray:O?!!O[g]:!1,parentArrayLength:O&&O[g]?O[g].length:0,hasTargetIndex:O&&O[g]?!!O[g][$]:!1,availableArrays:O?Object.keys(O).filter(R=>Array.isArray(O[R])):null}),O&&O[g]&&O[g][$])A=O[g][$],A&&!Array.isArray(A[c])&&(A[c]=[]),I=A?A[c]:void 0,console.log("🔥 [DEBUG] 並べ替えネスト対象特定完了:",{targetComponentId:A?A.id:null,arrayName:c,currentArrayLength:I?I.length:0});else throw console.error("🔥 [ERROR] 並べ替え失敗詳細:",{baseParentId:P,parentArrayName:g,parentIndex:$,realComponent:O?{id:O.id,keys:Object.keys(O)}:null,parentArray:O&&O[g]?O[g]:null}),new Error(`Parent array or index not found for reorder: ${g}[${$}]`)}else console.log("🔥 [DEBUG] 並べ替え通常形式検出:",p),A=u||i(r.editablePageData.value,p),A&&(Array.isArray(A[c])||(A[c]=[]),I=A[c]);if(!A||!I)throw new Error(`Target component or array not found for reorder: ${p}`);const[_]=I.splice(d,1);I.splice(f,0,_),console.log("🔥 [DEBUG] z-for配列アイテム並べ替え完了:",{arrayName:c,fromIndex:d,toIndex:f,movedItem:_.id||_,finalArrayLength:I.length}),t("update:page",r.editablePageData.value),console.log("🔥 [処理完了] アイテム並べ替え成功！")}catch(C){console.error("🔥 [処理エラー] z-forアイテム並べ替えエラー:",C),alert(`並べ替えでエラーが発生しました: ${C instanceof Error?C.message:String(C)}`)}}),console.log("🔥 [useZeroCode] 早期z-forリスナー登録完了（追加・並べ替え）");const i=(p,c)=>Pb(()=>ls.findComponent(p,c),`findComponent(${c})`),l=Eb(p=>{t("update:page",p),y.debug("💾 ページデータ更新をemit")},100),b=(p,c)=>{const d=()=>{p._isZForItem&&delete p._isZForItem,p._parentComponentId&&delete p._parentComponentId,p._arrayName&&delete p._arrayName,p._arrayIndex&&delete p._arrayIndex,p.module_name&&delete p.module_name,y.debug("🧹 z-for配列アイテムのメタデータクリーンアップ完了:",{editorId:c,cleanedProperties:["_isZForItem","_parentComponentId","_arrayName","_arrayIndex","module_name"]})},f=()=>{d(),o.off("editorClosed")};o.on("editorClosed",f),y.debug("🔧 z-for配列アイテム編集クリーンアップ処理を設定:",{editorId:c,hasMetadata:{_isZForItem:!!p._isZForItem,_parentComponentId:!!p._parentComponentId,_arrayName:!!p._arrayName,_arrayIndex:!!p._arrayIndex}})},m=(p,c,d)=>{y.debug(`🔍 updateNestedComponent: 検索開始 - targetId: ${c}, components数: ${p.length}`);for(let f=0;f<p.length;f++){const C=p[f];if(y.debug(`🔍 チェック中: ${C.id} === ${c} ?`),C.id===c)return y.debug(`✅ コンポーネント発見 - 更新実行: ${c}`),y.debug("🔍 更新前:",C),y.debug("🔍 更新後:",d),p[f]=d,!0;if(C.nested_parts&&Array.isArray(C.nested_parts)&&(y.debug(`🔍 nested_parts内を検索: ${C.id}`),m(C.nested_parts,c,d)))return!0;for(const[I,A]of Object.entries(C))if(Array.isArray(A)&&I!=="nested_parts"){y.debug(`🔍 配列プロパティ検索: ${C.id}.${I}`);for(const u of A)if(u&&typeof u=="object"){for(const[v,_]of Object.entries(u))if(Array.isArray(_)&&(y.debug(`🔍 スロット検索: ${C.id}.${I}[].${v}`),m(_,c,d)))return!0}}}return y.debug(`❌ コンポーネントが見つかりませんでした: ${c}`),!1},h=(p,c)=>{for(let d=0;d<p.length;d++){if(p[d].id===c)return p.splice(d,1),!0;if(p[d].nested_parts&&Array.isArray(p[d].nested_parts)&&h(p[d].nested_parts,c))return!0;for(const[f,C]of Object.entries(p[d]))if(Array.isArray(C)&&f!=="nested_parts"){for(const I of C)if(I&&typeof I=="object"){for(const[A,u]of Object.entries(I))if(Array.isArray(u)&&h(u,c))return!0}}}return!1},E={addPart:(p,c)=>{y.debug("🔧 addPart呼び出し:",{part:p,position:c,currentPageData:r.editablePageData.value});const d=[...r.editablePageData.value];d.splice(c,0,p),r.editablePageData.value=d,y.debug("🔧 新しいページデータ:",d),t("update:page",d)},deletePart:p=>{if(window.confirm("このパーツを削除しますか？")){const c=n.component.deleteComponent(r.editablePageData.value,p);r.editablePageData.value=c,t("update:page",c)}},duplicatePart:p=>{const c=r.editablePageData.value[p];if(c){const d=n.component.duplicateComponent(c),f=[...r.editablePageData.value];f.splice(p+1,0,d),r.editablePageData.value=f,t("update:page",f)}},reorderParts:p=>{r.editablePageData.value=p,t("update:page",p)},movePart:(p,c)=>{const d=[...r.editablePageData.value],[f]=d.splice(p,1);d.splice(c,0,f),r.editablePageData.value=d,t("update:page",d)},reorderNestedParts:(p,c)=>{const d=n.string.parseHierarchyPath(p),f=JSON.parse(JSON.stringify(r.editablePageData.value)),C=n.component.findComponentByPath(f,d);C?(C.nested_parts=[...c],r.editablePageData.value=f,t("update:page",f)):y.error("❌ 親コンポーネントが見つかりません:",{pathString:p,path:d})},moveNestedPart:(p,c,d)=>{const f=n.string.parseHierarchyPath(p),C=JSON.parse(JSON.stringify(r.editablePageData.value)),I=n.component.findComponentByPath(C,f);if(I?.nested_parts&&I.nested_parts.length>Math.max(c,d)){const A=[...I.nested_parts];if(c>=0&&c<A.length&&d>=0&&d<A.length&&c!==d){const[u]=A.splice(c,1);A.splice(d,0,u),I.nested_parts=A,r.editablePageData.value=C,t("update:page",C)}else y.error("❌ 無効なインデックス:",{fromIndex:c,toIndex:d,arrayLength:A.length})}else y.error("❌ 親コンポーネントまたはnested_partsが見つかりません:",{pathString:p,path:f})},moveNestedPartBetweenLevels:(p,c,d,f)=>{const C=n.string.parseHierarchyPath(p),I=n.string.parseHierarchyPath(d),A=[...r.editablePageData.value],u=n.component.findComponentByPath(A,C);if(!u?.nested_parts)return;const[v]=u.nested_parts.splice(c,1),_=n.component.findComponentByPath(A,I);_&&(_.nested_parts||(_.nested_parts=[]),_.nested_parts.splice(f,0,v),r.editablePageData.value=A,t("update:page",A))},moveNestedPartById:(p,c,d)=>{y.debug(`🔧 moveNestedPartById: 親ID=${p}, ${c} → ${d}`);const f=JSON.parse(JSON.stringify(r.editablePageData.value)),C=i(f,p);if(C?.nested_parts&&C.nested_parts.length>Math.max(c,d)){const I=[...C.nested_parts];if(c>=0&&c<I.length&&d>=0&&d<I.length&&c!==d){const[A]=I.splice(c,1);I.splice(d,0,A),C.nested_parts=I,r.editablePageData.value=f,t("update:page",f),y.debug(`  - ✅ 並べ替え成功: ${A.id} を位置 ${d} に移動`)}else y.error("❌ 無効なインデックス:",{fromIndex:c,toIndex:d,arrayLength:I.length})}else y.error("❌ 親コンポーネントまたはnested_partsが見つかりません:",{parentComponentId:p})},moveNestedPartBetweenLevelsById:(p,c,d,f)=>{y.debug(`🔧 moveNestedPartBetweenLevelsById: ${p}[${c}] → ${d}[${f}]`);const C=JSON.parse(JSON.stringify(r.editablePageData.value)),I=i(C,p);if(!I?.nested_parts){y.error("❌ ソース親コンポーネントが見つかりません:",p);return}const[A]=I.nested_parts.splice(c,1),u=i(C,d);if(!u){y.error("❌ ターゲット親コンポーネントが見つかりません:",d);return}u.nested_parts||(u.nested_parts=[]),u.nested_parts.splice(f,0,A),r.editablePageData.value=C,t("update:page",C),y.debug(`  - ✅ 階層間移動成功: ${A.id} を ${d} の位置 ${f} に移動`)},moveZForNestedPart:(p,c,d)=>{y.debug(`🔥🔧 moveZForNestedPart: パス=${p}, ${c} → ${d}`);const f=p.match(/^(\w+)\.(\w+)\[(\d+)\]\.(\w+)$/);if(y.debug("🔥 パス解析結果:",{parentPath:p,pathMatch:f}),!f){y.error("❌ 無効なz-forネストパーツパス:",p);return}const[,C,I,A,u]=f,v=parseInt(A);y.debug("🔥 解析済み情報:",{componentId:C,arrayName:I,arrayIndex:v,slotName:u});const _=JSON.parse(JSON.stringify(r.editablePageData.value)),$=i(_,C);if(y.debug("🔥 コンポーネント検索結果:",$),!$){y.error("❌ コンポーネントが見つかりません:",C);return}const g=$[I];if(y.debug("🔥 z-for配列:",{arrayName:I,array:g,isArray:Array.isArray(g),length:g?.length}),!Array.isArray(g)||v>=g.length){y.error("❌ 配列が見つかりません:",{arrayName:I,arrayIndex:v,arrayLength:g?.length});return}const P=g[v];if(y.debug("🔥 配列アイテム:",{arrayIndex:v,arrayItem:P}),!P||!P[u]||!Array.isArray(P[u])){y.error("❌ ネストパーツ配列が見つかりません:",{slotName:u,arrayItem:P,slot:P?.[u]});return}const N=P[u];if(y.debug("🔥 ネストパーツ配列:",{slotName:u,nestedParts:N,length:N.length}),c<0||c>=N.length||d<0||d>=N.length){y.error("❌ 無効なインデックス:",{fromIndex:c,toIndex:d,arrayLength:N.length});return}if(c===d){y.debug("📍 同じ位置のため移動なし");return}y.debug("🔥 並べ替え前:",N.map(x=>x.id));const[D]=N.splice(c,1);N.splice(d,0,D),y.debug("🔥 並べ替え後:",N.map(x=>x.id)),r.editablePageData.value=_,t("update:page",_),y.debug(`✅ z-for内ネストパーツ並べ替え成功: ${D.id} を位置 ${d} に移動`)},openEditor:p=>{const c=r.editablePageData.value[p];c&&r.openEditor(c,p)},saveComponent:p=>{const c=r.selectedComponentIndex.value;if(y.debug("🐛 saveComponent デバッグ:",{selectedIndex:c,selectedIndexType:typeof c,updatedComponentId:p.id,updatedComponentData:p,isZForItem:p._isZForItem}),p._isZForItem){y.debug("🔍 z-for配列アイテム保存開始");const d=p._parentComponentId,f=p._parentArrayName,C=p._parentIndex,I=p._arrayName,A=p._arrayIndex;y.debug("🔍 z-for保存パラメータ:",{parentComponentId:d,parentArrayName:f,parentIndex:C,arrayName:I,arrayIndex:A});const u=JSON.parse(JSON.stringify(r.editablePageData.value));if(d&&f&&C!==void 0){const v=i(u,d);if(v&&Array.isArray(v[f])){const _=v[f];if(C>=0&&C<_.length){const $=_[C];if($[I]&&Array.isArray($[I])){const g=$[I];if(A>=0&&A<g.length){const{_isZForItem:P,_parentComponentId:N,_parentArrayName:D,_parentIndex:x,_arrayName:O,_arrayIndex:R,_parentType:se,_parentModuleName:q,type:W,module_name:Y,...pe}=p;g[A]={...g[A],...pe},r.editablePageData.value=u,t("update:page",u),y.debug(`✅ ネストz-for配列アイテム保存完了 - ${f}[${C}].${I}[${A}]`)}else y.error(`❌ 子配列インデックス範囲外: ${A}`)}else y.error(`❌ 子配列が見つからない: ${I}`)}else y.error(`❌ 親配列インデックス範囲外: ${C}`)}else y.error(`❌ 親コンポーネントまたは親配列が見つからない: ${d}.${f}`)}else{const v=i(u,d);if(v&&Array.isArray(v[I])){const _=v[I];if(A>=0&&A<_.length){const{_isZForItem:$,_parentComponentId:g,_arrayName:P,_arrayIndex:N,_zForTemplate:D,...x}=p;_[A]={..._[A],...x},r.editablePageData.value=u,t("update:page",u),y.debug(`✅ z-for配列アイテム保存完了 - ${I}[${A}]`)}else y.error(`❌ z-for配列インデックス範囲外: ${A}`)}else y.error(`❌ z-for親コンポーネントまたは配列が見つからない: ${d}.${I}`)}r.closeEditor();return}if(typeof c=="number"&&c>=0){const d=[...r.editablePageData.value];d[c]=p,r.editablePageData.value=d,t("update:page",d),y.debug(`✅ メインコンポーネント保存完了 - ID: ${p.id}`)}else if(typeof c=="string"){y.debug(`🔍 ネストコンポーネント保存開始 - 検索対象ID: ${c}`);const d=JSON.parse(JSON.stringify(r.editablePageData.value));y.debug("🔍 保存前のPageData:",JSON.stringify(d,null,2));const f=m(d,c,p);y.debug(`🔍 updateNestedComponent結果: ${f}`),y.debug("🔍 保存後のPageData:",JSON.stringify(d,null,2)),f?(r.editablePageData.value=d,t("update:page",d),y.debug(`✅ ネストコンポーネント保存完了 - ID: ${p.id}, パス: ${c}`)):y.error(`❌ ネストコンポーネント保存失敗 - ID: ${p.id}, パス: ${c}`)}else y.error(`❌ 無効なselectedIndex: ${c} (type: ${typeof c})`);r.closeEditor()},addNestedPart:(p,c,d)=>{y.debug(`🔧 addNestedPart: 親ID=${p}, 位置=${c}, 新コンポーネント=${d.id}`);const f=JSON.parse(JSON.stringify(r.editablePageData.value)),C=/^(.+)\.(.+)\[(\d+)\]\.(.+)$/,I=p.match(C);y.debug(`🔍 パス解析: ${p} -> zForMatch:`,I);let A=!1;if(I){const[,u,v,_,$]=I;y.debug("z-for内ネストパーツ追加:",{parentId:u,arrayName:v,arrayIndex:_,slotName:$,position:c});const g=i(f,u);if(g)if(y.debug(`✅ 親コンポーネント発見: ${g.id}`),y.debug(`🔍 配列チェック: ${v} ->`,g[v]),g[v]&&Array.isArray(g[v])){const P=g[v][parseInt(_)];y.debug(`🔍 配列アイテム[${_}]:`,P),P?(P[$]||(P[$]=[],y.debug(`🆕 スロット初期化: ${$}`)),y.debug(`🔍 スロット[${$}]現在の内容:`,P[$]),P[$].splice(c,0,d),y.debug(`✅ z-for内パーツ追加成功: ${d.id} -> スロット内容:`,P[$]),A=!0):y.debug(`❌ 配列アイテムが見つかりません: インデックス${_}`)}else y.debug(`❌ 配列が見つかりません: ${v}`);else y.debug(`❌ 親コンポーネントが見つかりません: ${u}`)}else{const u=i(f,p);u&&(u.nested_parts||(u.nested_parts=[]),u.nested_parts.splice(c,0,d),y.debug(`  - ✅ パーツ追加成功: ${d.id} を ${p} の位置 ${c} に追加`),y.debug("  - 追加後のnested_parts:",u.nested_parts.map(v=>v.id)),A=!0)}A?(r.editablePageData.value=f,t("update:page",f)):y.debug(`  - ❌ 親コンポーネントが見つかりません: ${p}`)},deleteNestedPart:p=>{if(window.confirm("このネストパーツを削除しますか？")){const c=JSON.parse(JSON.stringify(r.editablePageData.value)),d=/^(.+)\.(.+)\[(\d+)\]\.(.+)\[(\d+)\]$/,f=p.match(d);let C=!1;if(f){const[,I,A,u,v,_]=f;y.debug("z-for内ネストパーツ削除:",{parentId:I,arrayName:A,arrayIndex:u,slotName:v,partIndex:_});const $=i(c,I);if($)if(y.debug(`✅ 削除対象の親コンポーネント発見: ${$.id}`),$[A]&&Array.isArray($[A])){const g=$[A][parseInt(u)];g&&g[v]&&Array.isArray(g[v])?(y.debug(`🗑️ z-for内パーツ削除実行: ${v}[${_}]`),g[v].splice(parseInt(_),1),C=!0):y.debug(`❌ スロットまたはパーツが見つかりません: ${v}`)}else y.debug(`❌ 配列が見つかりません: ${A}`);else y.debug(`❌ 削除対象の親コンポーネントが見つかりません: ${I}`)}else C=h(c,p);C?(r.editablePageData.value=c,t("update:page",c)):y.debug(`❌ Component not found for deletion: ${p}`)}},startTiptapEdit:(p,c,d=[],f=0)=>{r.startTiptapEdit(p,c,d,f)},startSimpleTiptapEdit:(p,c)=>{r.startTiptapEdit(p,c,[],0)},stopTiptapEdit:()=>{r.stopTiptapEdit()},sendPageData:()=>{l(r.editablePageData.value)},sendCommonPartsData:()=>{t("update:commonParts",r.localCommonParts.value)},sendIndividualPartsData:()=>{t("update:individualParts",r.localIndividualParts.value)},addArrayItem:(p,c)=>{n.component.addArrayItem(p,c),l(r.editablePageData.value)},removeArrayItem:(p,c,d)=>{n.component.removeArrayItem(p,c,d),l(r.editablePageData.value)},resetPageData:()=>{r.editablePageData.value=Array.isArray(e.page)?[...e.page]:[],t("update:page",r.editablePageData.value)},resetPartsData:()=>{r.localParts.value=Array.isArray(e.parts)?[...e.parts]:[],t("update:parts",r.localParts.value)}},z={currentComponent:we(()=>r.selectedComponent.value),currentTemplate:we(()=>{const p=r.selectedComponent.value;return p?n.template.getTemplate(p.type,p.module_name,r.localParts.value):""}),currentFields:we(()=>{const p=z.currentTemplate.value;return n.template.extractFields(p)}),currentSlots:we(()=>{const p=z.currentTemplate.value;return n.template.extractSlots(p)}),renderComponent:p=>s.renderComponentWithoutSlot(p,(c,d)=>n.template.getTemplate(c,d,r.localParts.value)),renderPartPreview:p=>{if(!p)return"";try{let c=p;return c=c.replace(/\{\$([^:]+):([^}]*)\}/g,(d,f,C)=>C&&C.trim()?C:{title:"サンプルタイトル",text:"サンプルテキスト",content:"サンプルコンテンツ",heading:"見出し",description:"説明文",label:"ラベル",source:"情報源",tooltip:"ツールチップ"}[f]||`[${f}]`),c=c.replace(/\(\$([^:]+):([^)]+)\)/g,(d,f,C)=>C.split("|").filter(A=>A.trim())[0]||""),c=c.replace(/\(\$([^:?]+)\?:([^)]*)\)/g,(d,f,C)=>C||""),c=c.replace(/z-slot="[^"]*"/g,""),c=c.replace(/z-for="[^"]*"/g,""),c=c.replace(/z-for-wrapper="[^"]*"/g,""),c}catch(c){return y.error("プレビューレンダリングエラー:",c),p}}},T=()=>{o.on("addArrayItem",({componentId:p,arrayKey:c})=>{try{if(y.debug(`EventBus: addArrayItem - componentId=${p}, arrayKey=${c}`),!p||!c)throw new Error("componentId または arrayKey が指定されていません");const d=i(r.editablePageData.value,p);if(!d)throw new Error(`Component not found: ${p}`);y.success(`Component found: ${d.id}, adding array item to ${c}`);const f=r.localParts.value&&r.localParts.value.length>0?r.localParts.value:[];f.length>0?ss(f).addArrayItem(d,c):E.addArrayItem(d,c),t("update:page",r.editablePageData.value)}catch(d){y.error(`配列アイテム追加エラー: ${d}`,{componentId:p,arrayKey:c})}}),o.on("removeZForArrayItem",({componentId:p,arrayName:c,index:d})=>{try{y.debug(`EventBus: removeZForArrayItem - componentId=${p}, arrayName=${c}, index=${d}`),y.debug("🔥 DELETE - componentId:",p);const f=p.split("_");y.debug("🔥 DELETE - componentId parts:",f);let C;const I=i(r.editablePageData.value,p),A=I&&I.id===p;if(f.length>=3&&/^\d+$/.test(f[f.length-1])&&!A){const u=f.slice(0,-2).join("_"),v=f[f.length-2],_=f[f.length-1];y.debug("🔥 DELETE - ネスト形式検出:",{baseParentId:u,parentArrayName:v,parentIndex:_}),y.debug("ネストz-forアイテム削除:",{baseParentId:u,parentArrayName:v,parentIndex:_});let $=u,g=v;if(!i(r.editablePageData.value,u)){const D=[];for(let x=0;x<u.length;x++)u[x]==="_"&&D.push(x);if(D.length>=1){const x=D[D.length-1];$=u.substring(0,x),g=`${u.substring(x+1)}_${v}`,y.debug("🔥 DELETE - ネストz-for IDを修正:",{originalBaseParentId:u,realComponentId:$,realArrayPath:g,parentIndex:_})}}const N=i(r.editablePageData.value,$);if(N&&Array.isArray(N[g])){const D=N[g][parseInt(_)];y.debug("🔥 DELETE - Parent item:",D),y.debug("🔥 DELETE - Parent item target array name:",c),y.debug("🔥 DELETE - Parent item target array:",D?D[c]:void 0),D&&Array.isArray(D[c])&&(C=D[c])}}else{y.debug("🔥 DELETE - 通常形式検出:",p);const u=I||i(r.editablePageData.value,p);u&&Array.isArray(u[c])&&(C=u[c])}if(!C||d<0||d>=C.length)throw new Error(`Invalid target array or index: ${c}[${d}]`);C.splice(d,1),y.success(`z-for配列アイテム削除完了: ${c}[${d}]`),t("update:page",r.editablePageData.value)}catch(f){y.error(`z-for配列アイテム削除エラー: ${f}`,{componentId:p,arrayName:c,index:d})}}),o.on("editZForArrayItem",({componentId:p,arrayName:c,index:d})=>{try{y.debug(`EventBus: editZForArrayItem - componentId=${p}, arrayName=${c}, index=${d}`),y.debug("🔥 EDIT - componentId:",p);const f=p.split("_");y.debug("🔥 REORDER - componentId parts:",f);let C;const I=i(r.editablePageData.value,p),A=I&&I.id===p;if(f.length>=3&&/^\d+$/.test(f[f.length-1])&&!A){const u=f.slice(0,-2).join("_"),v=f[f.length-2],_=f[f.length-1];y.debug("🔥 REORDER - ネスト形式検出:",{baseParentId:u,parentArrayName:v,parentIndex:_}),y.debug("ネストz-forアイテム並び替え:",{baseParentId:u,parentArrayName:v,parentIndex:_});let $=u,g=v;if(!i(r.editablePageData.value,u)){const D=[];for(let x=0;x<u.length;x++)u[x]==="_"&&D.push(x);if(D.length>=1){const x=D[D.length-1];$=u.substring(0,x),g=`${u.substring(x+1)}_${v}`,y.debug("🔥 REORDER - ネストz-for IDを修正:",{originalBaseParentId:u,realComponentId:$,realArrayPath:g,parentIndex:_})}}const N=i(r.editablePageData.value,$);if(y.debug("🔥 Parent component found:",N?N.id:null),N&&Array.isArray(N[g])){const D=N[g][parseInt(_)];y.debug("🔥 Parent item:",D),y.debug("🔥 Parent item target array name:",c),y.debug("🔥 Parent item target array:",D?D[c]:void 0),D&&Array.isArray(D[c])&&(C=D[c])}}else{y.debug("🔥 REORDER - 通常形式検出:",p);const u=I||i(r.editablePageData.value,p);u&&Array.isArray(u[c])&&(C=u[c])}if(C&&d>=0&&d<C.length){const u=C[d];y.info(`z-for配列アイテム編集開始: ${p}.${c}[${d}]`,u)}else throw y.error("🔥 Invalid array or index:",{arrayName:c,index:d,arrayLength:C?.length}),new Error(`Invalid array or index: ${c}[${d}]`)}catch(f){y.error(`z-for配列アイテム編集エラー: ${f}`,{componentId:p,arrayName:c,index:d})}}),o.on("editZForArrayItem",({componentId:p,arrayName:c,index:d})=>{try{y.debug(`EventBus: editZForArrayItem - componentId=${p}, arrayName=${c}, index=${d}`);const f=i(r.editablePageData.value,p),C=c,I=d;if(!f){const $=p.split("_");y.debug("🔥 EDIT - componentId parts:",$);const g=i(r.editablePageData.value,p),P=g&&g.id===p;if($.length>=3&&/^\d+$/.test($[$.length-1])&&!P){const N=$.slice(0,-2).join("_"),D=$[$.length-2],x=$[$.length-1];y.debug("🔥 EDIT - ネスト形式検出:",{baseParentId:N,parentArrayName:D,parentIndex:x}),y.debug("ネストz-forアイテム編集:",{baseParentId:N,parentArrayName:D,parentIndex:x});let O=N,R=D;if(!i(r.editablePageData.value,N)){const W=[];for(let Y=0;Y<N.length;Y++)N[Y]==="_"&&W.push(Y);if(W.length>=1){const Y=W[W.length-1];O=N.substring(0,Y),R=`${N.substring(Y+1)}_${D}`,y.debug("🔥 EDIT - ネストz-for IDを修正:",{originalBaseParentId:N,realComponentId:O,realArrayPath:R,parentIndex:x})}}const q=i(r.editablePageData.value,O);if(q){const W=q[R];if(Array.isArray(W)&&Number(x)<W.length){const Y=W[Number(x)];if(Y[c]){const pe=Y[c];if(Array.isArray(pe)&&d<pe.length){const Se=pe[d];Se._isZForItem=!0,Se._arrayName=c,Se._arrayIndex=d,Se._parentType=q.type,Se._parentModuleName=q.module_name,Se._parentComponentId=N,Se._parentArrayName=D,Se._parentIndex=Number(x);const Oe=Se.type,Ne=Se.module_name;Se.type="z-for-item",Se.module_name=q.module_name,y.debug("子z-for配列アイテム編集:",{parentComponent:q.id,parentArrayName:D,parentIndex:Number(x),childArrayName:c,childIndex:d,childItem:Se}),r.openEditor(Se,`${p}_${c}_${d}`),b(Se,`${p}_${c}_${d}`);return}}}}}}if(!f)throw new Error(`Component not found: ${p}`);const A=f,u=A[c];if(!Array.isArray(u)||d<0||d>=u.length)throw new Error(`Invalid array or index: ${c}[${d}]`);const v=u[d];y.debug("🔍 z-for配列アイテム詳細:",{componentId:p,arrayName:c,index:d,item:v,itemKeys:Object.keys(v),itemType:v.type,itemModuleName:v.module_name,itemId:v.id,parentType:A.type,parentModuleName:A.module_name});const _={...v,id:`${p}_${c}_${d}`,type:v.type||A.type,module_name:v.module_name||A.module_name,_isZForItem:!0,_parentComponentId:p,_arrayName:c,_arrayIndex:d,_zForTemplate:null};y.debug("🔍 作成されたtempComponent:",{tempComponentId:_.id,tempComponentType:_.type,tempComponentModuleName:_.module_name,allKeys:Object.keys(_)}),y.debug("z-for配列アイテム編集: コンポーネント検索結果",{componentId:p,componentFound:!!A,componentType:A.type,componentModuleName:A.module_name,arrayName:c,arrayLength:u.length,index:d,itemKeys:Object.keys(v),tempComponentId:_.id}),r.openEditor(_,`${p}_${c}_${d}`),y.success(`z-for配列アイテム編集開始: ${c}[${d}]`)}catch(f){y.error(`z-for配列アイテム編集エラー: ${f}`,{componentId:p,arrayName:c,index:d})}}),o.on("deleteNestedPart",({pathString:p})=>{y.debug(`EventBus: deleteNestedPart - path=${p}`),E.deleteNestedPart(p)}),o.on("openNestedEditor",({pathString:p})=>{if(y.debug(`EventBus: openNestedEditor - path=${p}`),!p||typeof p!="string"){y.error("Invalid pathString:",p);return}const c=/^(.+)\.(.+)\[(\d+)\]\.(.+)\[(\d+)\]$/,d=p.match(c);let f=null;if(d){const[,C,I,A,u,v]=d;y.debug("z-for内パス解析:",{parentId:C,arrayName:I,arrayIndex:A,slotName:u,partIndex:v});const _=i(r.editablePageData.value,C);if(_&&_[I]&&Array.isArray(_[I])){const $=_[I][parseInt(A)];$&&$[u]&&Array.isArray($[u])&&(f=$[u][parseInt(v)],y.debug("z-for内ネストパーツを発見:",f))}}else f=i(r.editablePageData.value,p);f?(y.debug("Found component:",{id:f.id,type:f.type,module:f.module_name}),r.openEditor(f,p)):y.error(`Component not found with ID: ${p}`)}),o.on("openNestedPartSelector",({pathString:p,position:c})=>{y.debug(`EventBus: openNestedPartSelector - path=${p}, position=${c}`),r.openNestedPartSelector(p,c)})},k=p=>{["startTiptapEdit","stopTiptapEdit","openPartSelector","openNestedPartSelector","openNestedEditor","deleteNestedPart","addArrayItem","addZForArrayItem","removeZForArrayItem","reorderZForArrayItem","editZForArrayItem","handleZForDragStart","handleZForDragEnd","handleZForArrayItemDragOver","handleZForArrayItemDrop"].forEach(A=>{delete window[A]});const d=`inst_${Math.random().toString(36).substr(2,9)}`,f={addArrayItem:(A,u)=>{o.emit("addArrayItem",{componentId:A,arrayKey:u})},addZForArrayItem:(A,u,v)=>{o.emit("addZForArrayItem",{componentId:A,arrayName:u,insertIndex:v})},removeZForArrayItem:(A,u,v)=>{o.emit("removeZForArrayItem",{componentId:A,arrayName:u,index:v})},reorderZForArrayItem:(A,u,v,_)=>{o.emit("reorderZForArrayItem",{componentId:A,arrayName:u,fromIndex:v,toIndex:_})},editZForArrayItem:(A,u,v)=>{o.emit("editZForArrayItem",{componentId:A,arrayName:u,index:v})},deleteNestedPart:A=>{o.emit("deleteNestedPart",{pathString:A})},openNestedEditor:A=>{o.emit("openNestedEditor",{pathString:A})},openNestedPartSelector:(A,u)=>{o.emit("openNestedPartSelector",{pathString:A,position:u})}};window[`startTiptapEdit_${d}`]=p||E.startSimpleTiptapEdit,window[`stopTiptapEdit_${d}`]=E.stopTiptapEdit,window[`openPartSelector_${d}`]=A=>r.openPartSelector(A),window[`openNestedPartSelector_${d}`]=f.openNestedPartSelector,window[`openNestedEditor_${d}`]=f.openNestedEditor,window[`deleteNestedPart_${d}`]=f.deleteNestedPart,window[`addArrayItem_${d}`]=f.addArrayItem,window.startTiptapEdit=p||E.startSimpleTiptapEdit,window.stopTiptapEdit=E.stopTiptapEdit,window.openPartSelector=A=>r.openPartSelector(A),window.openNestedPartSelector=f.openNestedPartSelector,window.openNestedEditor=f.openNestedEditor,window.deleteNestedPart=f.deleteNestedPart,window.addArrayItem=f.addArrayItem,window.addZForArrayItem=f.addZForArrayItem,window.removeZForArrayItem=f.removeZForArrayItem,window.reorderZForArrayItem=f.reorderZForArrayItem,window.editZForArrayItem=f.editZForArrayItem;let C=null,I=null;window.handleZForDragStart=(A,u,v,_)=>{const $=A.target;if(y.debug("🔥 z-for drag start called",{target:$,componentId:u,arrayName:v,index:_}),$.tagName==="BUTTON"||$.tagName==="A"||$.closest("button, a")){y.debug("🔥 z-for: クリック可能要素からのドラッグをブロック"),A.preventDefault();return}A.stopPropagation(),C={componentId:u,arrayName:v,index:_},y.debug("🔥 z-for dragged item set:",C);const g=$.closest(".zero-code-z-for-item-wrapper");g?(y.debug("🔥 z-for item wrapper found:",g),g.style.opacity="0.5",g.style.transform="scale(0.95)",g.classList.add("dragging")):(y.debug("🔥 z-for item wrapper not found, using target"),$.style.opacity="0.5"),A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/html",$.outerHTML),y.debug("z-for drag start",{componentId:u,arrayName:v,index:_})},window.handleZForDragEnd=A=>{const u=A.target,v=u.closest(".zero-code-z-for-item-wrapper");v?(v.style.opacity="1",v.style.transform="scale(1)",v.classList.remove("dragging")):u.style.opacity="1",document.querySelectorAll(".z-for-item-wrapper.drag-over").forEach(_=>{_.classList.remove("drag-over")}),setTimeout(()=>{C=null,y.debug("z-for drag end - draggedItem reset")},50),y.debug("z-for drag end")},window.handleZForArrayItemDragOver=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move";const v=A.currentTarget.closest(".zero-code-z-for-item-wrapper");v&&!v.classList.contains("dragging")&&(document.querySelectorAll(".z-for-item-wrapper.drag-over").forEach(_=>{_.classList.remove("drag-over")}),v.classList.add("drag-over"))},window.handleZForArrayItemDrop=A=>{A.preventDefault(),A.stopPropagation();const u=A.currentTarget;y.debug("🔥 handleZForArrayItemDrop called",{target:u,draggedItem:C});const v=u.closest(".zero-code-z-for-item-wrapper");if(v&&v.classList.remove("drag-over"),!C){y.error("🔥 No dragged item found in drop handler"),y.warn("No dragged item found");return}y.debug("🔥 Dragged item found:",C);const _=v?.getAttribute("data-component-id")||u.getAttribute("data-component-id"),$=v?.getAttribute("data-array-name")||u.getAttribute("data-array-name"),g=v?.getAttribute("data-item-index")||u.getAttribute("data-item-index"),P=parseInt(g||"0");C.componentId===_&&C.arrayName===$&&C.index!==P&&(y.debug("🔥 z-for reorder executing:",{componentId:C.componentId,arrayName:C.arrayName,fromIndex:C.index,toIndex:P}),Sb.reorderZForArrayItem(C.componentId,C.arrayName,C.index,P),y.debug("🔥 z-for reorder completed"),y.success("z-for array item reordered",{from:C.index,to:P})),C=null},window.handleNestedPartDragStart=A=>{y.debug("🔥 handleNestedPartDragStart called",A.target);const u=A.target;if(u.tagName==="BUTTON"||u.tagName==="A"||u.closest("button, a")){y.debug("🔥 クリック可能要素からのドラッグをブロック"),A.preventDefault();return}const v=u.closest(".z-for-nested-part");if(v){const _=v.getAttribute("data-nested-path"),$=v.getAttribute("data-slot-name"),g=v.getAttribute("data-part-index");y.debug("🔥 z-forネストパーツドラッグ情報:",{nestedPath:_,slotName:$,partIndex:g}),_&&$&&g!==null&&(I={path:_,slotName:$,index:parseInt(g)},v.classList.add("dragging"),v.style.opacity="0.5",y.debug("🔥 draggingクラス追加:",v),A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/html",v.outerHTML),y.debug("🔥 z-for nested part drag start",I),y.debug("z-for nested part drag start",I))}else y.debug("🔥 z-for内ネストパーツではない:",u.classList.toString())},window.handleNestedPartDragEnd=A=>{const v=A.target.closest(".z-for-nested-part");v&&(v.classList.remove("dragging"),v.style.opacity="1"),document.querySelectorAll(".z-for-nested-part.drag-over").forEach(_=>{_.classList.remove("drag-over")}),I=null,y.debug("z-for nested part drag end")},window.handleNestedPartDragOver=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move";const v=A.currentTarget.closest(".z-for-nested-part");v&&!v.classList.contains("dragging")&&(document.querySelectorAll(".z-for-nested-part.drag-over").forEach(_=>{_.classList.remove("drag-over")}),v.classList.add("drag-over"))},window.handleNestedPartDrop=A=>{y.debug("🔥 handleNestedPartDrop called",A.currentTarget),A.preventDefault();const u=A.currentTarget,v=u.closest(".z-for-nested-part")||u.closest(".nested-component");if(v&&v.classList.remove("drag-over"),!I){y.debug("🔥 No dragged nested part found"),y.warn("No dragged nested part found");return}const _=u.getAttribute("data-slot-name"),$=u.getAttribute("data-part-index");if(y.debug("🔥 ドロップ先情報:",{dropSlotName:_,dropPartIndex:$,draggedNestedPart:I}),_&&$!==null){const g=parseInt($);if(_===I.slotName){const P=I.path.match(/^(.+\.\w+\[\d+\]\.\w+)\[\d+\]$/);if(y.debug("🔥 パス解析:",{path:I.path,pathMatch:P}),P){const N=P[1];y.debug("🔥 並べ替え実行:",{parentPath:N,fromIndex:I.index,toIndex:g}),y.debug("z-for nested part reorder",{parentPath:N,fromIndex:I.index,toIndex:g}),E.moveZForNestedPart(N,I.index,g)}}else y.debug("🔥 異なるスロット間の移動は未サポート:",{dropSlotName:_,draggedSlotName:I.slotName})}else y.debug("🔥 ドロップ先の情報が不完全:",{dropSlotName:_,dropPartIndex:$});I=null},y.debug("グローバル関数を安全に公開完了")},M=()=>{y.debug("useZeroCode クリーンアップ実行")};return{state:{editablePageData:r.editablePageData,localParts:r.localParts,localCommonParts:r.localCommonParts,localIndividualParts:r.localIndividualParts,activeTab:r.activeTab,dataTab:r.dataTab,showEditor:r.showEditor,showPartSelector:r.showPartSelector,showNestedPartSelector:r.showNestedPartSelector,selectedComponent:r.selectedComponent,selectedComponentIndex:r.selectedComponentIndex,editingText:r.editingText,insertPosition:r.insertPosition,nestedInsertPath:r.nestedInsertPath,nestedInsertPosition:r.nestedInsertPosition},computed:{currentComponentIndex:r.currentComponentIndex,pageDataLength:r.pageDataLength,hasSelectedComponent:r.hasSelectedComponent,isEditing:r.isEditing,isTiptapEditing:r.isTiptapEditing,...z},actions:E,utils:n,templateProcessor:s,simpleEditor:a,switchToTab:r.switchToTab,setDataTab:r.setDataTab,openEditor:r.openEditor,closeEditor:r.closeEditor,openPartSelector:r.openPartSelector,closePartSelector:r.closePartSelector,openNestedPartSelector:r.openNestedPartSelector,closeNestedPartSelector:r.closeNestedPartSelector,setupEventListeners:T,exposeGlobalFunctions:k,cleanup:M}}const $c={parts:{common:[{type:"title",description:"タイトル系のコンポーネント",module:[{title:"title_1_1",category:"common",description:"メインタイトル（z-for、z-slot対応版）",tags:["title","z-for","z-slot","nested"],body:`
<div class="m_titleA ($state:s_state1|s_state2) ($variant:s_state3|s_state4|)">
  <h1 class="m_titleA__title">{$title:メインタイトルテキスト}</h1>
  <div class="m_titleA__label ($label_state?:s_state5|s_state6|s_state7)">{$label:ラベルテキスト}</div>
  <div z-slot="nested_parts" class="m_titleA__contents"></div>
  <div><img src="($image_url:/img/hero_image.jpg)" alt="($image_alt:画像の説明テキスト)"></div>
  <div class="m_titleA__card" z-for-wrapper="cards">
    <div z-for="cards" class="m_titleA__cardList ($card_state:s_state1|s_state2)">
      <div>{$card_title:カードアイテム1}</div>
      <div>{$card_desc:カードアイテム2}</div>
      <div z-slot="nested_parts"></div>
    </div>
  </div>
  <div class="m_titleA__category ($category:news,blog,event,product,service)">
    <span>カテゴリ選択</span>
  </div>
  <div class="m_titleA__tags ($tags?:important,featured,popular,trending,new)">
    <span>タグ選択（複数）</span>
  </div>
</div>`},{title:"title_1_2",category:"common",description:"シンプルタイトル",tags:["title","simple"],body:`
<div class="m_titleB">
  <h2 class="m_titleB__title">{$title:サブタイトルテキスト}</h2>
  <p class="m_titleB__subtitle">{$subtitle:サブタイトル説明文}</p>
</div>`}]},{type:"hero",description:"ヒーロー系のコンポーネント",module:[{title:"hero_1_1",category:"common",description:"メインヒーロー（配列カード対応）",tags:["hero","z-for","cards"],body:`
<div class="m_heroA ($layout:full|contained) ($theme:light|dark)">
  <div class="m_heroA__background">
    <img src="($bg_image:/img/hero_image.jpg)" alt="($bg_alt:ヒーロー背景画像)">
  </div>
  <div class="m_heroA__content">
    <h1 class="m_heroA__title">{$title:ヒーローメインタイトル}</h1>
    <p class="m_heroA__description">{$description:ヒーロー説明文がここに入ります}</p>
    <div class="m_heroA__actions">
      <a href="($cta_url:#)" class="m_heroA__cta ($cta_style:primary|secondary)">{$cta_text:今すぐ始める}</a>
    </div>
  </div>
  <div class="m_heroA__features" z-for-wrapper="features">
    <div z-for="features" class="m_heroA__feature">
      <div class="m_heroA__feature-icon">
        <img src="($icon_url:/img/placeholder.jpg)" alt="($icon_alt:アイコン)">
      </div>
      <h3>{$feature_title:機能タイトル}</h3>
      <p>{$feature_description:機能の説明文}</p>
    </div>
  </div>
</div>`}]},{type:"content",description:"コンテンツ系のコンポーネント",module:[{title:"content_1_1",category:"common",description:"基本コンテンツブロック",tags:["content","text","simple"],body:`
<div class="m_contentA ($alignment:left|center|right) ($size:small|medium|large)">
  <div class="m_contentA__header">
    <h2 class="m_contentA__title">{$title:コンテンツタイトル}</h2>
    <p class="m_contentA__subtitle">{$subtitle:サブタイトル}</p>
  </div>
  <div class="m_contentA__body">
    <p class="m_contentA__text">{$content:ここにメインコンテンツが入ります。リッチテキスト編集に対応しています。}</p>
    <div class="m_contentA__image ($image_position:top|bottom|left|right)">
      <img src="($image_url:/img/placeholder.jpg)" alt="($image_alt:コンテンツ画像)">
    </div>
  </div>
  <div z-slot="nested_parts" class="m_contentA__nested"></div>
</div>`}]}],individual:[{type:"button",description:"ボタン系のコンポーネント",module:[{title:"button_1_1",category:"individual",description:"基本ボタン",tags:["button","cta","action"],body:`
<div class="m_buttonA">
  <a href="($url:#)" class="m_buttonA__link ($style:primary|secondary|outline) ($size:small|medium|large)">
    {$text:ボタンテキスト}
  </a>
</div>`},{title:"button_1_2",category:"individual",description:"アイコン付きボタン",tags:["button","icon","cta"],body:`
<div class="m_buttonB">
  <button class="m_buttonB__button ($variant:filled|outline|text) ($color:primary|secondary|success|warning|error)">
    <span class="m_buttonB__icon ($icon_position:left|right)">
      <img src="($icon_url:/img/placeholder.jpg)" alt="($icon_alt:アイコン)">
    </span>
    <span class="m_buttonB__text">{$text:アイコンボタン}</span>
  </button>
</div>`}]},{type:"card",description:"カード系のコンポーネント",module:[{title:"card_1_1",category:"individual",description:"基本カード（配列対応）",tags:["card","z-for","list"],body:`
<div class="m_cardA ($layout:grid|list) ($columns:1|2|3|4)">
  <div class="m_cardA__container" z-for-wrapper="items">
    <div z-for="items" class="m_cardA__item ($card_style:flat|elevated|outline)">
      <div class="m_cardA__image">
        <img src="($image_url:/img/placeholder.jpg)" alt="($image_alt:カード画像)">
      </div>
      <div class="m_cardA__content">
        <h3 class="m_cardA__title">{$title:カードタイトル}</h3>
        <p class="m_cardA__description">{$description:カードの説明文がここに入ります}</p>
        <div class="m_cardA__meta">
          <span class="m_cardA__category ($category:news|blog|product)">{$category_label:カテゴリ}</span>
          <time class="m_cardA__date">{$date:2024-01-01}</time>
        </div>
      </div>
      <div class="m_cardA__actions">
        <a href="($link_url:#)" class="m_cardA__link">{$link_text:詳細を見る}</a>
      </div>
    </div>
  </div>
</div>`}]},{type:"form",description:"フォーム系のコンポーネント",module:[{title:"form_1_1",category:"individual",description:"基本フォーム",tags:["form","contact","input"],body:`
<div class="m_formA ($layout:vertical|horizontal) ($style:modern|classic)">
  <form class="m_formA__form">
    <div class="m_formA__header">
      <h2 class="m_formA__title">{$title:お問い合わせフォーム}</h2>
      <p class="m_formA__description">{$description:ご質問やお問い合わせがございましたら、以下のフォームよりお送りください。}</p>
    </div>
    <div class="m_formA__fields" z-for-wrapper="fields">
      <div z-for="fields" class="m_formA__field ($field_type:text|email|tel|textarea|select)">
        <label class="m_formA__label">{$label:フィールドラベル}</label>
        <input type="($input_type:text|email|tel)" class="m_formA__input ($required?:required)" placeholder="($placeholder:入力してください)">
        <span class="m_formA__help">{$help_text:補助テキスト}</span>
      </div>
    </div>
    <div class="m_formA__actions">
      <button type="submit" class="m_formA__submit ($submit_style:primary|secondary)">{$submit_text:送信する}</button>
    </div>
  </form>
</div>`}]}]},pages:[{id:"default-page",title:"デフォルトページ",description:"Vue CMS エディターのサンプルページ",components:[{id:"hero-1",type:"hero",module_name:"hero_1_1",title:"Vue CMS エディターへようこそ",description:"直感的で強力なコンテンツ管理システムです。ドラッグ&ドロップでページを作成し、リアルタイムでプレビューできます。",bg_image:"/img/hero_image.jpg",bg_alt:"Vue CMS ヒーロー画像",layout:"full",theme:"light",cta_text:"今すぐ始める",cta_url:"#get-started",cta_style:"primary",features:[{id:"feature-1",feature_title:"簡単操作",feature_description:"ドラッグ&ドロップで直感的にページを作成",icon_url:"/img/placeholder.jpg",icon_alt:"簡単操作アイコン"},{id:"feature-2",feature_title:"リアルタイムプレビュー",feature_description:"編集内容をリアルタイムで確認できます",icon_url:"/img/placeholder.jpg",icon_alt:"プレビューアイコン"},{id:"feature-3",feature_title:"Web Components",feature_description:"どこでも使える再利用可能なコンポーネント",icon_url:"/img/placeholder.jpg",icon_alt:"コンポーネントアイコン"}]},{id:"title-1",type:"title",module_name:"title_1_1",title:"主な機能",label:"Features",state:"s_state1",variant:"s_state3",label_state:["s_state5","s_state6"],image_url:"/img/banner.jpg",image_alt:"機能紹介画像",category:"product",tags:["featured","popular"],cards:[{id:"card-1",card_title:"テンプレート記法",card_desc:"{$param:default} 形式でテキストを編集",card_state:"s_state1"},{id:"card-2",card_title:"選択記法",card_desc:"($param:option1|option2) 形式で選択肢を提供",card_state:"s_state2"},{id:"card-3",card_title:"配列記法",card_desc:"z-for で繰り返し要素を管理",card_state:"s_state1"}],nested_parts:[{id:"content-1",type:"content",module_name:"content_1_1",title:"ネストされたコンテンツ",subtitle:"z-slot 機能のデモンストレーション",content:"このコンテンツは title コンポーネントの中にネストされています。z-slot 記法を使用することで、柔軟な構造を作ることができます。",alignment:"center",size:"medium",image_url:"/img/team.jpg",image_alt:"チーム画像",image_position:"right"}]},{id:"card-section-1",type:"card",module_name:"card_1_1",layout:"grid",columns:"3",items:[{id:"item-1",title:"はじめての方へ",description:"Vue CMS エディターの基本的な使い方を学びましょう",image_url:"/img/product1.jpg",image_alt:"チュートリアル画像",category:"blog",category_label:"ブログ",date:"2024-01-15",link_text:"チュートリアルを見る",link_url:"/tutorial",card_style:"elevated"},{id:"item-2",title:"アドバンス機能",description:"上級者向けの機能と使用方法について詳しく解説",image_url:"/img/background.jpg",image_alt:"アドバンス機能画像",category:"product",category_label:"製品",date:"2024-01-20",link_text:"詳細を見る",link_url:"/advanced",card_style:"elevated"},{id:"item-3",title:"コミュニティ",description:"ユーザーコミュニティに参加して情報交換をしましょう",image_url:"/img/logo.png",image_alt:"コミュニティ画像",category:"news",category_label:"ニュース",date:"2024-01-25",link_text:"参加する",link_url:"/community",card_style:"elevated"}]}]}],images:{common:[{id:"hero-bg",name:"hero_image.jpg",url:"/img/hero_image.jpg",alt:"ヒーロー背景画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:256e3}},{id:"logo",name:"logo.png",url:"/img/logo.png",alt:"Vue CMS ロゴ",category:"common",fileData:{base64:"",type:"image/png",size:48e3}},{id:"banner",name:"banner.jpg",url:"/img/banner.jpg",alt:"バナー画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:128e3}},{id:"background",name:"background.jpg",url:"/img/background.jpg",alt:"背景画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:512e3}},{id:"team",name:"team.jpg",url:"/img/team.jpg",alt:"チーム画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:196e3}},{id:"placeholder",name:"placeholder.jpg",url:"/img/placeholder.jpg",alt:"プレースホルダー画像",category:"common",fileData:{base64:"",type:"image/jpeg",size:32e3}}],individual:[{id:"product-1",name:"product1.jpg",url:"/img/product1.jpg",alt:"製品画像1",category:"individual",fileData:{base64:"",type:"image/jpeg",size:86e3}}]}},wc=[{type:"basic_list",description:"基本的なz-for内z-slotパターン",module:[{title:"item",category:"test",body:`
          <div class="category-item">
            <h3>{$title:アイテムタイトル}</h3>
            <p>{$description:アイテムの説明}</p>
            <div z-for="items" class="($item_class:item-wrapper|highlight-item|normal-item)">
              <div class="product-card">
                <h4>{$name:商品名}</h4>
                <p>{$price:価格}</p>
                <div class="slot-content" z-slot="details">
                  <!-- 商品詳細スロット -->
                </div>
              </div>
            </div>
          </div>
        `,description:"基本的なリストアイテムパーツ",tags:["z-for","z-slot","basic"]}]},{type:"nested_list",description:"ネストしたz-for内z-slotパターン",module:[{title:"category",category:"test",body:`
          <div class="nested-list">
            <h2>{$category_name:カテゴリー名}</h2>
            <div z-for="categories" class="category-wrapper">
              <h3>{$cat_title:サブカテゴリー}</h3>
              <div z-for="products" class="product-list">
                <div class="product-card">
                  <h4>{$product_name:商品名}</h4>
                  <span>{$product_price:価格}</span>
                  <div class="slot-content" z-slot="product_details">
                    <!-- 商品詳細スロット -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        `,description:"ネストしたカテゴリーパーツ",tags:["z-for","z-slot","nested"]}]},{type:"multi_slot",description:"複数スロットパターン",module:[{title:"container",category:"test",body:`
          <div class="multi-slot-container">
            <h2>{$container_title:コンテナタイトル}</h2>
            <div z-for="sections" class="section-item">
              <div class="section-header">
                <h3>{$section_title:セクションタイトル}</h3>
                <div z-slot="header_parts" class="header-slot">
                  <!-- ヘッダースロット -->
                </div>
              </div>
              <div class="section-content">
                <p>{$section_content:セクション内容}</p>
                <div z-slot="content_parts" class="content-slot">
                  <!-- コンテンツスロット -->
                </div>
              </div>
              <div class="section-footer">
                <div z-slot="footer_parts" class="footer-slot">
                  <!-- フッタースロット -->
                </div>
              </div>
            </div>
          </div>
        `,description:"複数スロットコンテナパーツ",tags:["z-for","z-slot","multiple"]}]},{type:"conditional",description:"条件付きz-slotパターン",module:[{title:"faq",category:"test",body:`
          <div class="faq-container">
            <h2>{$faq_title:FAQタイトル}</h2>
            <div z-for="questions" class="faq-item">
              <h3>{$question:質問}</h3>
              <p>{$answer:回答}</p>
              <div z-if="has_details" class="details-section">
                <div z-slot="additional_info" class="slot-content">
                  <!-- 追加情報スロット（条件付き） -->
                </div>
              </div>
            </div>
          </div>
        `,description:"条件付きFAQパーツ",tags:["z-for","z-slot","conditional","z-if"]}]},{type:"empty",description:"空スロットパターン",module:[{title:"list",category:"test",body:`
          <div class="empty-slot-container">
            <h2>{$list_title:リストタイトル}</h2>
            <div z-for="empty_items" class="empty-item">
              <h3>{$item_title:アイテム}</h3>
              <div z-slot="empty_slot" class="slot-content">
                <!-- 初期状態で空のスロット -->
              </div>
            </div>
          </div>
        `,description:"空スロットリストパーツ",tags:["z-for","z-slot","empty"]}]},{type:"dynamic",description:"動的スロット名パターン",module:[{title:"mixed",category:"test",body:`
          <div class="dynamic-slot-container">
            <h2>{$container_title:動的スロットコンテナ}</h2>
            <div z-for="mixed_items" class="mixed-item">
              <h3>{$item_name:アイテム名} - Type: {$item_type:タイプ}</h3>
              <div z-if="type_a" z-slot="slot_type_a" class="slot-content">
                <!-- タイプAスロット -->
              </div>
              <div z-if="type_b" z-slot="slot_type_b" class="slot-content">
                <!-- タイプBスロット -->
              </div>
              <div z-if="type_c" z-slot="slot_type_c" class="slot-content">
                <!-- タイプCスロット -->
              </div>
            </div>
          </div>
        `,description:"動的スロットパーツ",tags:["z-for","z-slot","dynamic","conditional"]}]},{type:"parts",description:"テスト用共通パーツ",module:[{title:"text",category:"common",body:'<p class="text-part">{$text:テキストパーツ}</p>',description:"テキストパーツ",tags:["common","text"]},{title:"button",category:"common",body:'<button class="btn-part ($btn_style:primary|secondary|danger)">{$btn_text:ボタン}</button>',description:"ボタンパーツ",tags:["common","button"]},{title:"image",category:"common",body:'<img src="{$img_src:https://via.placeholder.com/150}" alt="{$img_alt:画像}" class="img-part">',description:"画像パーツ",tags:["common","image"]},{title:"link",category:"common",body:'<a href="{$link_url:#}" class="link-part">{$link_text:リンク}</a>',description:"リンクパーツ",tags:["common","link"]},{title:"badge",category:"common",body:'<span class="badge ($badge_color:blue|green|red|yellow)">{$badge_text:バッジ}</span>',description:"バッジパーツ",tags:["common","badge"]},{title:"card",category:"common",body:`
          <div class="card-part">
            <h4>{$card_title:カードタイトル}</h4>
            <p>{$card_content:カード内容}</p>
          </div>
        `,description:"カードパーツ",tags:["common","card"]}]}],Db=[{id:"zfor-zslot-tests",title:"z-for & z-slot テストページ",description:"z-for内でz-slotを使用する様々なパターンのテスト",components:[{id:"test_basic_zfor_zslot",type:"basic_list",module_name:"item",title:"基本リスト",description:"z-for内の各アイテムにz-slotがある基本パターン",item_class:"normal-item",items:[{id:"item_001",name:"アイテム1",price:"¥1,000",details:[{id:"detail_001",type:"parts",module_name:"text",text:"このアイテムの詳細説明です"},{id:"detail_002",type:"parts",module_name:"button",btn_text:"詳細を見る",btn_style:"primary"}]},{id:"item_002",name:"アイテム2",price:"¥2,000",details:[{id:"detail_003",type:"parts",module_name:"badge",badge_text:"新商品",badge_color:"green"}]},{id:"item_003",name:"アイテム3",price:"¥3,000",details:[]}]},{id:"test_nested_zfor_zslot",type:"nested_list",module_name:"category",category_name:"商品カタログ",categories:[{id:"cat_001",cat_title:"電化製品",products:[{id:"prod_001",product_name:"ノートPC",product_price:"¥98,000",product_details:[{id:"pd_001",type:"parts",module_name:"text",text:"高性能ノートパソコン"}]},{id:"prod_002",product_name:"タブレット",product_price:"¥45,000",product_details:[{id:"pd_002",type:"parts",module_name:"badge",badge_text:"セール中",badge_color:"red"}]}]},{id:"cat_002",cat_title:"家具",products:[{id:"prod_003",product_name:"デスク",product_price:"¥25,000",product_details:[]}]}]},{id:"test_multiple_zslot",type:"multi_slot",module_name:"container",container_title:"複数スロットテスト",sections:[{id:"sec_001",section_title:"セクション1",section_content:"これはセクション1の内容です",header_parts:[{id:"hp_001",type:"parts",module_name:"badge",badge_text:"ヘッダー",badge_color:"blue"}],content_parts:[{id:"cp_001",type:"parts",module_name:"text",text:"コンテンツエリアのテキスト"},{id:"cp_002",type:"parts",module_name:"button",btn_text:"アクション",btn_style:"secondary"}],footer_parts:[{id:"fp_001",type:"parts",module_name:"link",link_text:"フッターリンク",link_url:"#footer"}]},{id:"sec_002",section_title:"セクション2",section_content:"これはセクション2の内容です",header_parts:[],content_parts:[{id:"cp_003",type:"parts",module_name:"card",card_title:"カード",card_content:"カードコンテンツ"}],footer_parts:[]}]},{id:"test_conditional_zslot",type:"conditional",module_name:"faq",faq_title:"よくある質問",questions:[{id:"q_001",question:"配送料はいくらですか？",answer:"全国一律500円です。",has_details:!0,additional_info:[{id:"ai_001",type:"parts",module_name:"text",text:"10,000円以上のご購入で送料無料"},{id:"ai_002",type:"parts",module_name:"badge",badge_text:"期間限定",badge_color:"yellow"}]},{id:"q_002",question:"返品は可能ですか？",answer:"商品到着後7日以内であれば可能です。",has_details:!1,additional_info:[]},{id:"q_003",question:"支払い方法は？",answer:"クレジットカード、銀行振込、代金引換が利用可能です。",has_details:!0,additional_info:[{id:"ai_003",type:"parts",module_name:"link",link_text:"詳しい支払い方法",link_url:"#payment"}]}]},{id:"test_empty_zslot",type:"empty",module_name:"list",list_title:"空スロットテスト",empty_items:[{id:"empty_001",item_title:"空のアイテム1",empty_slot:[]},{id:"empty_002",item_title:"空のアイテム2",empty_slot:[]},{id:"empty_003",item_title:"空のアイテム3",empty_slot:[]}]},{id:"test_dynamic_zslot",type:"dynamic",module_name:"mixed",container_title:"動的スロットテスト",mixed_items:[{id:"mix_001",item_name:"タイプA アイテム",item_type:"A",type_a:!0,type_b:!1,type_c:!1,slot_type_a:[{id:"sta_001",type:"parts",module_name:"text",text:"タイプA専用コンテンツ"}],slot_type_b:[],slot_type_c:[]},{id:"mix_002",item_name:"タイプB アイテム",item_type:"B",type_a:!1,type_b:!0,type_c:!1,slot_type_a:[],slot_type_b:[{id:"stb_001",type:"parts",module_name:"button",btn_text:"タイプB ボタン",btn_style:"danger"}],slot_type_c:[]},{id:"mix_003",item_name:"タイプC アイテム",item_type:"C",type_a:!1,type_b:!1,type_c:!0,slot_type_a:[],slot_type_b:[],slot_type_c:[{id:"stc_001",type:"parts",module_name:"badge",badge_text:"タイプC",badge_color:"green"},{id:"stc_002",type:"parts",module_name:"link",link_text:"タイプCリンク",link_url:"#type-c"}]}]}]}],xb={parts:{common:wc.filter(e=>e.type==="parts"||e.module.some(t=>t.category==="common")),individual:wc.filter(e=>e.type!=="parts"&&!e.module.some(t=>t.category==="common"))},pages:Db,images:{common:[],individual:[]}},zc=_e({environment:"development",enableMockData:!0,defaultDataSet:"samples"}),ko=_e($c),_a=_e(!1),$a=_e(null);function Mb(){const e=b=>{zc.value.environment=b,y.info(`🌍 データ環境を ${b} に設定しました`)},t=async(b="samples")=>{_a.value=!0,$a.value=null;try{if(b==="samples")ko.value=$c;else if(b==="tests"||b==="zfor-zslot")ko.value=xb;else throw new Error(`未知のデータセット: ${b}`);return!0}catch(m){const h=m instanceof Error?m.message:"データ読み込みエラー";return $a.value=h,y.error(`❌ データ読み込み失敗: ${h}`),!1}finally{_a.value=!1}},o=we(()=>ko.value.parts),r=we(()=>ko.value.pages),n=we(()=>ko.value.images),s=we(()=>[...ko.value.parts.common,...ko.value.parts.individual]),a=we(()=>ko.value.pages[0]?.components||[]),i=vn({isLoading:_a,loadError:$a,config:vn(zc)});return{parts:o,pages:r,images:n,combinedParts:s,defaultPageData:a,state:i,setEnvironment:e,loadData:t,initialize:async()=>{await t("samples")}}}const Nb={class:"zero-code-tab-navigation"},Fb=["onClick"],kb=lt({__name:"TabNavigation",props:{activeTab:{type:String}},emits:["update:active-tab"],setup(e){const t=["editor","preview","parts","images"],o=r=>({editor:"エディタ",preview:"ページプレビュー",parts:"パーツ管理",images:"画像管理"})[r];return(r,n)=>(L(),H("div",Nb,[(L(),H($e,null,Me(t,s=>w("button",{key:s,class:et(["zero-code-tab-button",{active:r.activeTab===s}]),onClick:a=>r.$emit("update:active-tab",s)},oe(o(s)),11,Fb)),64))]))}});function Ob(){const e=_e([]),t=we(()=>e.value.length>0),o=(i,l=qe.UNKNOWN,b)=>{const m={id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:l,message:i instanceof Error?i.message:i,details:i instanceof Error?i.stack:void 0,timestamp:new Date,context:b};e.value.push(m),setTimeout(()=>{n(m.id)},1e4)},r=()=>{e.value=[]},n=i=>{const l=e.value.findIndex(b=>b.id===i);l!==-1&&e.value.splice(l,1)};return{errors:e,hasErrors:t,handleError:o,clearErrors:r,clearError:n,getErrorsByType:i=>e.value.filter(l=>l.type===i),showErrorNotification:(i,l=qe.UNKNOWN)=>{o(i,l)}}}const Lb={class:"zero-code-error-boundary"},Rb={key:0,class:"zero-code-error-notifications"},Hb={class:"zero-code-error-content"},Bb={class:"zero-code-error-message"},jb={class:"zero-code-error-icon"},Ub={class:"zero-code-error-text"},Vb=["onClick"],Zb={key:0,class:"zero-code-error-details"},Wb={class:"zero-code-error-details-pre"},qb={class:"zero-code-error-boundary-content"},Kb=lt({__name:"ErrorBoundary",props:{showDetails:{type:Boolean,default:!1}},setup(e){const{errors:t,hasErrors:o,clearError:r}=Ob(),n=a=>{switch(a){case qe.NETWORK_ERROR:return"error-network";case qe.VALIDATION_ERROR:return"error-validation";case qe.PERMISSION_ERROR:return"error-permission";case qe.COMPONENT_ERROR:return"error-component";case qe.IMAGE_LOAD_FAILED:return"error-image";case qe.TEMPLATE_PARSE_ERROR:return"error-template";default:return"error-unknown"}},s=a=>{switch(a){case qe.NETWORK_ERROR:return"🌐";case qe.VALIDATION_ERROR:return"⚠️";case qe.PERMISSION_ERROR:return"🔒";case qe.COMPONENT_ERROR:return"🧩";case qe.IMAGE_LOAD_FAILED:return"🖼️";case qe.TEMPLATE_PARSE_ERROR:return"📄";default:return"❌"}};return(a,i)=>(L(),H("div",Lb,[fe(o)?(L(),H("div",Rb,[(L(!0),H($e,null,Me(fe(t),l=>(L(),H("div",{key:l.id,class:et(["zero-code-error-notification",n(l.type)])},[w("div",Hb,[w("div",Bb,[w("span",jb,oe(s(l.type)),1),w("span",Ub,oe(l.message),1)]),w("button",{class:"zero-code-error-close",title:"エラーを閉じる",onClick:b=>fe(r)(l.id)}," × ",8,Vb)]),l.details&&a.showDetails?(L(),H("div",Zb,[w("pre",Wb,oe(l.details),1)])):ge("",!0)],2))),128))])):ge("",!0),w("div",qb,[Ld(a.$slots,"default")])]))}}),Gb={class:"zero-code-toolbar-content"},Jb={class:"zero-code-toolbar-section"},Yb={key:0,class:"zero-code-toolbar-separator"},Xb=["title","disabled","onClick"],Qb={class:"zero-code-toolbar-section"},ey=lt({__name:"RichTextToolbar",props:{show:{type:Boolean},position:{type:Object},actions:{type:Array},editingState:{type:null},isEditing:{type:Boolean}},emits:["executeCommand","save","cancel"],setup(e,{emit:t}){const o=e;Uo(()=>{y.debug("🔧 RichTextToolbar mounted")}),tt(()=>o.show,i=>{y.debug("🔧 RichTextToolbar show changed:",i)},{immediate:!0}),tt(()=>o.position,i=>{y.debug("🔧 RichTextToolbar position changed:",i)},{deep:!0,immediate:!0}),tt(()=>o.actions,i=>{y.debug("🔧 RichTextToolbar actions changed:",i?.length||0)},{immediate:!0});const r=t,n=i=>{y.debug("🔧 ツールバーコマンド実行:",i),r("executeCommand",i)},s=()=>{r("save")},a=()=>{r("cancel")};return(i,l)=>i.show?(L(),H("div",{key:0,class:"zero-code-rich-text-toolbar",style:dn({top:i.position.top+"px",left:i.position.left+"px"})},[w("div",Gb,[w("div",Jb,[(L(!0),H($e,null,Me(i.actions,(b,m)=>(L(),H($e,{key:m},[b&&b.name==="separator"?(L(),H("div",Yb)):b?(L(),H("button",{key:1,class:et(["zero-code-toolbar-btn",{active:b.active,disabled:!i.isEditing}]),title:b.title||"",disabled:!i.isEditing,tabindex:"-1",onClick:h=>n(b.command||""),onMousedown:l[0]||(l[0]=Bt(()=>{},["prevent","stop"]))},oe(b.icon||""),43,Xb)):ge("",!0)],64))),128))]),l[3]||(l[3]=w("div",{class:"zero-code-toolbar-separator"},null,-1)),w("div",Qb,[w("button",{class:"zero-code-toolbar-btn zero-code-save-btn",title:"保存 (Ctrl+S)",tabindex:"-1",onClick:s,onMousedown:l[1]||(l[1]=Bt(()=>{},["prevent","stop"]))}," ✓ ",32),w("button",{class:"zero-code-toolbar-btn zero-code-cancel-btn",title:"キャンセル (Esc)",tabindex:"-1",onClick:a,onMousedown:l[2]||(l[2]=Bt(()=>{},["prevent","stop"]))}," ✕ ",32)])])],4)):ge("",!0)}}),ty={class:"zero-code-tab-navigation"},oy={class:"zero-code-search-section"},ry={class:"zero-code-modal-body"},ny={key:0,class:"zero-code-empty-state"},sy={key:1,class:"zero-code-image-grid"},ay=["title","onClick"],iy={class:"zero-code-image-preview"},ly=["src","alt","onError"],cy={key:0,class:"zero-code-img-updated-badge"},dy={key:1,class:"zero-code-selection-indicator"},uy={class:"zero-code-image-info"},py={class:"zero-code-image-name"},fy={class:"zero-code-image-alt"},my={key:0,class:"zero-code-image-preview-section"},gy={class:"zero-code-selected-preview"},hy=["src","alt"],vy={class:"zero-code-selected-info"},by={class:"zero-code-info-item"},yy={class:"zero-code-info-item"},_y={class:"zero-code-info-item"},$y={key:0,class:"zero-code-info-item"},wy={class:"zero-code-modal-footer"},zy=["disabled"],Ay=lt({__name:"ImageSelectorModal",props:{visible:{type:Boolean},commonImages:{default:()=>[],type:Array},individualImages:{default:()=>[],type:Array},currentValue:{type:String}},emits:["close","select"],setup(e,{emit:t}){const o=e,r=t,{getImageSrc:n,getImageAlt:s,isImageUpdated:a}=Xr(),i=_e("common"),l=_e(""),b=_e(null),m=we(()=>i.value==="common"?o.commonImages||[]:o.individualImages||[]),h=we(()=>{const p=l.value.toLowerCase();return p?m.value.filter(c=>c.name.toLowerCase().includes(p)||c.alt&&c.alt.toLowerCase().includes(p)||c.url.toLowerCase().includes(p)):m.value}),E=()=>{r("close")},z=p=>{b.value?.id===p.id?b.value=null:b.value=p},T=()=>{b.value=null},k=()=>{if(b.value){if(!!(b.value.fileData?.base64&&b.value.fileData.base64.trim()!=="")){const c=n(b.value),d=s(b.value);r("select",c,d)}else r("select",b.value.url,b.value.alt||"");E()}},M=(p,c)=>{const d=p.target;d.src="/img/placeholder.jpg",console.warn(`画像読み込みエラー: ${c.url}`)};return tt(()=>o.visible,p=>{if(p){if(o.currentValue){const d=[...o.commonImages||[],...o.individualImages||[]].find(f=>f.url===o.currentValue);d&&(b.value=d,i.value=d.category)}l.value=""}else b.value=null}),tt(i,()=>{b.value=null}),(p,c)=>p.visible?(L(),H("div",{key:0,class:"zero-code-modal-overlay",onClick:E},[w("div",{class:"zero-code-modal-content zero-code-image-selector-modal",onClick:c[3]||(c[3]=Bt(()=>{},["stop"]))},[w("div",{class:"zero-code-modal-header"},[c[4]||(c[4]=w("h3",{class:"zero-code-modal-title"},"画像を選択",-1)),w("button",{class:"zero-code-close-button",title:"閉じる",onClick:E}," ✕ ")]),w("div",ty,[w("button",{class:et(["zero-code-tab-button",{active:i.value==="common"}]),onClick:c[0]||(c[0]=d=>i.value="common")}," 共通画像 ("+oe((p.commonImages||[]).length)+") ",3),w("button",{class:et(["zero-code-tab-button",{active:i.value==="individual"}]),onClick:c[1]||(c[1]=d=>i.value="individual")}," 個別画像 ("+oe((p.individualImages||[]).length)+") ",3)]),w("div",oy,[It(w("input",{"onUpdate:modelValue":c[2]||(c[2]=d=>l.value=d),type:"text",placeholder:"画像を検索...",class:"zero-code-search-input"},null,512),[[Jt,l.value]])]),w("div",ry,[h.value.length===0?(L(),H("div",ny,c[5]||(c[5]=[w("p",null,"該当する画像がありません",-1)]))):(L(),H("div",sy,[(L(!0),H($e,null,Me(h.value,d=>(L(),H("div",{key:d.id,class:et(["zero-code-image-item",{selected:b.value?.id===d.id}]),title:b.value?.id===d.id?"クリックで選択解除":"クリックで選択",onClick:f=>z(d)},[w("div",iy,[w("img",{src:fe(n)(d),alt:fe(s)(d),loading:"lazy",onError:f=>M(f,d)},null,40,ly),fe(a)(d)?(L(),H("div",cy," 差し替え済み ")):ge("",!0),b.value?.id===d.id?(L(),H("div",dy,c[6]||(c[6]=[w("span",{class:"zero-code-check-icon"},"✓",-1)]))):ge("",!0)]),w("div",uy,[w("div",py,oe(d.name),1),w("div",fy,oe(d.alt),1)])],10,ay))),128))]))]),b.value?(L(),H("div",my,[w("div",{class:"zero-code-preview-header"},[c[8]||(c[8]=w("h4",{class:"zero-code-preview-title"},"選択中の画像",-1)),w("button",{class:"zero-code-clear-selection-btn",title:"選択を解除",onClick:T},c[7]||(c[7]=[w("span",{class:"zero-code-clear-icon"},"✕",-1),lr(" 選択解除 ")]))]),w("div",gy,[w("img",{src:fe(n)(b.value),alt:fe(s)(b.value)},null,8,hy),w("div",vy,[w("div",by,[c[9]||(c[9]=w("label",{class:"zero-code-info-label"},"ファイル名",-1)),w("strong",null,oe(b.value.name),1)]),w("div",yy,[c[10]||(c[10]=w("label",{class:"zero-code-info-label"},"説明",-1)),w("p",null,oe(b.value.alt||"説明なし"),1)]),w("div",_y,[c[11]||(c[11]=w("label",{class:"zero-code-info-label"},"URL",-1)),w("code",null,oe(b.value.url),1)]),fe(a)(b.value)?(L(),H("div",$y,c[12]||(c[12]=[w("label",{class:"zero-code-info-label"},"状態",-1),w("span",{class:"zero-code-status-badge"},"差し替え済み",-1)]))):ge("",!0)])])])):ge("",!0),w("div",wy,[w("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:E}," キャンセル "),w("button",{class:"zero-code-btn zero-code-btn-primary",disabled:!b.value,onClick:k},oe(b.value&&fe(a)(b.value)?"差し替え画像を適用":"選択した画像を適用"),9,zy)])])])):ge("",!0)}}),Cy={class:"zero-code-editor-content"},Ey={class:"zero-code-button-section"},Py={key:0,class:"zero-code-data-display-area"},Sy={class:"zero-code-data-display-header"},Iy={class:"zero-code-data-display-content"},Ty={class:"zero-code-data-display-pre"},wa=ep(lt({__name:"ZeroCode.ce",props:{parts:{default:()=>[],type:Array},commonParts:{default:()=>[],type:Array},individualParts:{default:()=>[],type:Array},page:{default:()=>[],type:Array},commonImages:{default:()=>[],type:Array},individualImages:{default:()=>[],type:Array}},emits:["update:parts","update:commonParts","update:individualParts","update:page","update:commonImages","update:individualImages"],setup(e,{expose:t,emit:o}){const r=e,n=o,s=_e(`zero-code-${Math.random().toString(36).substr(2,9)}`),a=Mb(),{getImageSrc:i}=Xr(),l=we(()=>[...Be.value,...Ke.value]),b=j=>{if(!j)return j;const Z=l.value;if(Z.length===0)return j;let X=j;return X=X.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(te,le,ce,de)=>{const ie=Z.find(Q=>!!(Q.id===ce||Q.url===ce||Q.name===ce||ce.endsWith("/"+Q.name)||Q.url.endsWith(ce)||ce.split("/").pop()===Q.name));if(ie){const Q=i(ie);return`<img${le}src="${Q}"${de}>`}return te}),X},m=j=>{const Z=Be.value.findIndex(te=>te.id===j);if(Z!==-1){const te=[...Be.value];te[Z]={...te[Z],fileData:{...te[Z].fileData,base64:""}},Zt(te);return}const X=Ke.value.findIndex(te=>te.id===j);if(X!==-1){const te=[...Ke.value];te[X]={...te[X],fileData:{...te[X].fileData,base64:""}},Oo(te)}};Uo(async()=>{try{y.info("🏭 本番モード：外部データ待機中（内部サンプルデータは読み込みません）"),T.value=[],z.value=[],Be.value=[],Ke.value=[],y.success("✅ 本番モード初期化完了（空の状態）"),St(()=>{const Z=new CustomEvent("zero-code-initialized",{detail:{partsCount:T.value?.length||0,pageCount:z.value?.length||0}});document.dispatchEvent(Z),y.debug("🎉 zero-code-initialized イベントを発火")})}catch(j){y.error("❌ データローダー初期化失敗:",j)}});const h=Tb(r,n),E=h.state.selectedComponent;h.state.selectedComponentIndex;const z=h.state.editablePageData,T=h.state.localParts,k=h.state.dataTab,M=_e(!1),p=_e({top:0,left:0}),c=_e(null),d=_e(""),f=_e(""),C=_e(""),I=we(()=>c.value!==null),A=_e(!1),u=_e(""),v=_e(null),_=_e(""),$=Ho({showToolbar:we(()=>M.value),position:we(()=>p.value),actions:[{name:"bold",icon:"B",title:"太字",command:"bold"},{name:"italic",icon:"I",title:"斜体",command:"italic"},{name:"underline",icon:"U",title:"下線",command:"underline"},{name:"separator"},{name:"link",icon:"🔗",title:"リンク",command:"link"}],editingState:{},executeCommand:j=>{y.debug("リッチテキストコマンド実行:",j),g(j)},stopEdit:j=>{y.debug("リッチテキスト編集終了:",j),N(j)}}),g=j=>{if(c.value){y.debug("🔧 書式設定コマンド実行:",j);try{if(j==="link"){const Z=prompt("リンクのURLを入力してください:","https://");if(Z&&Z.trim()){const X=document.execCommand("createLink",!1,Z);y.debug("🔧 リンク作成:",X?"成功":"失敗")}}else{const Z=document.execCommand(j,!1,void 0);y.debug("🔧 書式設定:",j,Z?"成功":"失敗")}y.debug("🔧 データ更新をスキップ（選択範囲保護）")}catch(Z){y.error("🚨 execCommandエラー:",Z)}}},P=()=>{if(!c.value||!f.value||!C.value)return;const j=c.value.innerHTML,Z=Ah(j),X=te=>{const ce=(de=>{const ie=de.split("_");if(ie.length<4)return null;const Q=ie[ie.length-1],ue=ie[ie.length-2];if(!/^\d+$/.test(ue))return null;const ye=["outer_items","inner_items","items","categories","tags","list"];for(const je of ye){const De=`_${je}_${ue}_${Q}`;if(de.endsWith(De))return{parentId:de.slice(0,-De.length),arrayName:je,arrayIndex:parseInt(ue),paramName:Q}}return null})(f.value);if(ce&&console.log("🔧 [Z-FOR編集] ID解析成功:",{originalId:f.value,parentId:ce.parentId,arrayName:ce.arrayName,arrayIndex:ce.arrayIndex,paramName:ce.paramName,newValue:Z}),ce){const{parentId:de,arrayName:ie,arrayIndex:Q,paramName:ue}=ce,ye=(De,Ie)=>{for(const Ue of De){if(Ue.id===Ie&&Array.isArray(Ue[ie]))return Ue[ie][Q];if(Ue.nested_parts&&Array.isArray(Ue.nested_parts)){const st=ye(Ue.nested_parts,Ie);if(st)return st}for(const[st,at]of Object.entries(Ue))if(Array.isArray(at)&&st!=="nested_parts")for(let bt=0;bt<at.length;bt++){const it=at[bt];if(it&&typeof it=="object"){if(`${Ue.id}_${st}_${bt}`===Ie&&Array.isArray(it[ie]))return it[ie][Q];for(const[Wt,Mt]of Object.entries(it))if(Array.isArray(Mt)){const en=ye(Mt,Ie);if(en)return en}}}}return null},je=ye(te,de);return je&&typeof je=="object"?(je[ue]=Z,console.log("✅ [Z-FOR編集] 更新成功:",{path:`${de}.${ie}[${Q}].${ue}`,oldValue:je[ue],newValue:Z}),!0):(console.log("❌ [Z-FOR編集] 配列アイテムが見つからない:",{targetId:f.value,searchedParentId:de}),!1)}for(const de of te){if(de.id===f.value)return de[C.value]=Z,!0;if(de.nested_parts&&Array.isArray(de.nested_parts)&&(y.debug(`🔍 nested_parts内を検索: ${de.id}`),X(de.nested_parts)))return!0;for(const[ie,Q]of Object.entries(de))if(Array.isArray(Q)&&ie!=="nested_parts"){y.debug(`🔍 配列プロパティ検索: ${de.id}.${ie}`);for(const ue of Q)if(ue&&typeof ue=="object"){if(ue.id===f.value)return ue[C.value]=Z,y.debug("🔧 配列内コンポーネント更新完了:",ue),!0;for(const[ye,je]of Object.entries(ue))if(Array.isArray(je)&&(y.debug(`🔍 スロット検索: ${de.id}.${ie}[].${ye}`),X(je)))return!0}}}return y.debug(`❌ コンポーネントが見つかりませんでした: ${f.value}`),!1};X(z.value)&&(c.value&&j!==Z&&(c.value.innerHTML=Z),St(()=>{const te=JSON.parse(JSON.stringify(z.value));z.value=te,Is(z),St(()=>{n("update:page",z.value),console.log("🔄 [Z-FOR編集] triggerRef強制更新完了:",{dataLength:z.value.length,hasUpdatedContent:JSON.stringify(z.value).includes("あああ")})})}))},N=j=>{c.value&&(y.debug("🔧 編集終了:",j?"保存":"キャンセル"),j?(P(),y.debug("🔧 最終保存完了")):(c.value.innerHTML=d.value,y.debug("🔧 変更を破棄しました")),c.value.contentEditable="false",c.value.classList.remove("editing"),c.value.style.userSelect="",c.value.style.webkitUserSelect="",y.debug("🔧 編集終了、スタイルクリーンアップ完了"),y.debug("🔧 編集モード終了処理完了"),c.value._cleanup&&(c.value._cleanup(),delete c.value._cleanup),c.value=null,d.value="",f.value="",C.value="",M.value=!1,y.debug("🔧 ツールバーを非表示にしました"))},D=j=>{h.actions.openEditor(j)},x=()=>{h.closeEditor()},O=j=>{h.actions.deletePart(j)},R=j=>{h.actions.reorderParts(j)},se=()=>{const j=document.querySelector(`.${s.value}`);if(!j)return;let Z=null,X=null;const te=ie=>{const Q=ie,ue=Q.target;if(ue.classList.contains("draggable-nested")){if(c.value){y.debug("🔧 テキスト編集中のためネストパーツドラッグを無効化"),Q.preventDefault();return}if(ue.classList.contains("z-for-nested-part")){y.debug("🔧 z-for内ネストパーツ - z-for専用ハンドラーに委譲");return}Z=ue;const ye=ue.dataset.componentId||"",je=ue.dataset.path||"",De=ue.dataset.parentPath||"",Ie=parseInt(ue.dataset.index||"0");X={componentId:ye,path:je,parentPath:De,index:Ie},Q.dataTransfer&&(Q.dataTransfer.effectAllowed="move",Q.dataTransfer.setData("text/plain","nested-component")),ue.style.opacity="0.5",y.debug("🔧 ネストパーツドラッグ開始:",X)}},le=ie=>{const Q=ie;Q.preventDefault(),Q.dataTransfer&&(Q.dataTransfer.dropEffect="move")},ce=ie=>{const Q=ie;if(Q.preventDefault(),!Z||!X)return;const ye=Q.target.closest(".draggable-nested");if(ye&&ye!==Z){const je=ye.dataset.parentPath||"",De=parseInt(ye.dataset.index||"0");y.debug("🔧 ネストパーツドロップ:",{draggedParentPath:X.parentPath,draggedIndex:X.index,targetParentPath:je,targetIndex:De}),X.parentPath===je?(y.debug("🔧 同じ親内での並べ替え実行"),h.actions.moveNestedPartById(X.parentPath,X.index,De)):y.debug("🔧 異なる親間の移動は未対応")}Z&&(Z.style.opacity="1"),Z=null,X=null},de=ie=>{const Q=ie.target;Q.classList.contains("draggable-nested")&&(Q.style.opacity="1"),Z=null,X=null};return j.addEventListener("dragstart",te),j.addEventListener("dragover",le),j.addEventListener("drop",ce),j.addEventListener("dragend",de),y.debug("🔧 ネストパーツドラッグ&ドロップリスナー設定完了"),()=>{j.removeEventListener("dragstart",te),j.removeEventListener("dragover",le),j.removeEventListener("drop",ce),j.removeEventListener("dragend",de),y.debug("🔧 ネストパーツドラッグ&ドロップリスナー削除完了")}},q=_e(null),W=_e(""),Y=_e(""),pe=j=>{let Z=null,X="";switch(j){case"page":Z=z.value,X="Pageデータ";break;case"commonParts":Z=h.state.localCommonParts.value,(!Z||Z.length===0)&&(Z=T.value?.map(te=>({...te,module:te.module?.filter(le=>!le.category||le.category==="common")})).filter(te=>te.module&&te.module.length>0)||[]),(!Z||Z.length===0)&&(Z=r.parts?.map(te=>({...te,module:te.module?.filter(le=>!le.category||le.category==="common")})).filter(te=>te.module&&te.module.length>0)||[]),X="共通Partsデータ",console.log("🔍 最終共通パーツデータ:",JSON.stringify(Z,null,2));break;case"individualParts":Z=h.state.localIndividualParts.value,(!Z||Z.length===0)&&(Z=T.value?.map(te=>({...te,module:te.module?.filter(le=>le.category==="individual")})).filter(te=>te.module&&te.module.length>0)||[]),(!Z||Z.length===0)&&(Z=r.parts?.map(te=>({...te,module:te.module?.filter(le=>le.category==="individual")})).filter(te=>te.module&&te.module.length>0)||[]),X="個別Partsデータ",console.log("🔍 最終個別パーツデータ:",JSON.stringify(Z,null,2));break;case"commonImages":Z=Be.value,X="共通画像データ";break;case"individualImages":Z=Ke.value,X="個別画像データ";break;default:return}q.value=Z,W.value=X,Y.value=j},Se=()=>{q.value=null,W.value="",Y.value=""},Oe=we(()=>q.value?JSON.stringify(q.value,null,2):""),Ne=async()=>{try{await navigator.clipboard.writeText(Oe.value),alert("データをクリップボードにコピーしました")}catch(j){console.error("クリップボードのコピーに失敗:",j),alert("クリップボードのコピーに失敗しました")}},Ge=()=>{if(Y.value){switch(Y.value){case"page":h.actions.sendPageData();break;case"commonParts":h.actions.sendCommonPartsData();break;case"individualParts":h.actions.sendIndividualPartsData();break;case"commonImages":Qr();break;case"individualImages":At();break}alert(`${W.value}を送信しました`)}},ut=()=>{h.actions.resetPageData()},pt=_e(null),Ot=we(()=>{const j=new Set;return T.value&&T.value.forEach(Z=>{Z.type&&j.add(Z.type)}),Array.from(j)}),mt=_e(new Map),S=(j,Z)=>{console.log(`🔥 [EDITOR] renderComponentWithNested呼び出し - componentId: ${j.id}, type: ${j.type}/${j.module_name}`),j.id.includes("div_nested_zfor");let X=Z;X===void 0&&(X=z.value.findIndex(De=>De.id===j.id),X===-1&&(X=0));const te=z.value[X]||j;Object.keys(te).filter(De=>Array.isArray(te[De]));const le=(De,Ie="")=>{const Ue=[];for(const[st,at]of Object.entries(De))if(Array.isArray(at)){const bt=Ie?`${Ie}.${st}`:st,it=`${bt}:${at.length}:${JSON.stringify(at.map((Ct,Wt)=>({i:Wt,id:Ct?.id||Ct?.name||`item_${Wt}`,...Object.fromEntries(Object.entries(Ct||{}).slice(0,3))})))}`;Ue.push(it),at.forEach((Ct,Wt)=>{if(Ct&&typeof Ct=="object"){const Mt=le(Ct,`${bt}[${Wt}]`);Ue.push(...Mt)}})}return Ue},de=le(te).join("|"),ie=`${te.id}-${X}`;mt.value.get(ie)!==de&&(mt.value.set(ie,de),Object.keys(te).filter(Ie=>Array.isArray(te[Ie])).forEach(Ie=>{te[Ie].length>0}));const ye=h.templateProcessor.renderComponentWithNested(te,X,(De,Ie)=>h.utils.template.getTemplate(De,Ie,T.value),(De,Ie,Ue,st)=>h.templateProcessor.renderNestedComponentsWithUI(De,Ie,at=>at.join("-"),st||((at,bt)=>h.utils.template.getTemplate(at,bt,T.value))));return te.id,console.log(`🔥 [EDITOR] ${te.id} - 最終レンダリング結果:`,{resultLength:ye?.length||0,resultPreview:ye?.substring(0,300)+"...",hasInnerItems:ye?.includes("inner_items"),hasNestedContent:ye?.includes("ネスト1-1")}),b(ye)},F=j=>{n("update:parts",j)},B=j=>{pt.value=j,ae.value=!0},U=j=>{console.log("🔧 deletePartFromManager呼び出し:",j);const{type:Z,title:X}=j;if(confirm(`パーツ「${X}」を削除しますか？`)){const te=ce=>ce.map(de=>de.type===Z?{...de,module:de.module.filter(ie=>ie.title!==X)}:de).filter(de=>de.module.length>0),le=te(T.value);if(T.value=le,n("update:parts",le),h.state.localCommonParts.value.length>0){const ce=te(h.state.localCommonParts.value);h.state.localCommonParts.value=ce,n("update:commonParts",ce)}if(h.state.localIndividualParts.value.length>0){const ce=te(h.state.localIndividualParts.value);h.state.localIndividualParts.value=ce,n("update:individualParts",ce)}console.log("🔧 削除処理完了")}},V=j=>{const Z=typeof j=="string"?j:j.body||"",X=h.computed.renderPartPreview(Z);return b(X)},K=j=>{const{type:Z,title:X,body:te,category:le="common"}=j,ce=[...T.value];let de=ce.find(Q=>Q.type===Z);de||(de={type:Z,module:[]},ce.push(de));const ie={title:X,body:te,category:le};if(pt.value){const Q=de.module.findIndex(ue=>ue.title===pt.value.module.title);Q!==-1&&(de.module[Q]=ie)}else de.module.push(ie);T.value=ce,n("update:parts",ce),Le()},{activeTab:J,switchToTab:re}=wb(),ee=j=>{re(j),h.switchToTab(j)},G=h.state.showPartSelector,he=h.state.showNestedPartSelector,ae=_e(!1),me=j=>{h.openPartSelector(j)},ze=()=>{h.closePartSelector()},Te=()=>{h.closeNestedPartSelector()},Ve=()=>{ae.value=!0},Le=()=>{ae.value=!1,pt.value=null},zt=h.state.showEditor,Be=_e([]),Ke=_e([]),Zt=j=>{Be.value=j,n("update:commonImages",j)},Oo=j=>{Ke.value=j,n("update:individualImages",j)},Qr=()=>{n("update:commonImages",Be.value)},At=()=>{n("update:individualImages",Ke.value)},Lt=pc(),cs=(j,Z,X)=>{y.debug("🔧 selectPart呼び出し:",{type:j,module:Z,index:X,insertPosition:h.state.insertPosition.value});const te=Lo.value.createNewComponent(j,Z),le=X!==void 0?X:h.state.insertPosition.value;y.debug("🔧 新しいコンポーネント作成:",te),y.debug("🔧 挿入位置:",le),h.actions.addPart(te,le),ze()},Dy=(j,Z)=>{const X=h.state.nestedInsertPath.value,te=h.state.nestedInsertPosition.value,le=Lo.value.createNewComponent(j,Z);h.actions.addNestedPart(X,te,le),Te()},Lo=we(()=>{const j=T.value&&T.value.length>0?T.value:r.parts||[];return y.debug("componentUtils更新: parts length:",j.length),ss(j)}),xy=j=>Lo.value.getFieldInfo(j),My=(j,Z,X)=>Lo.value.shouldShowBasicField(j,Z,X),Ny=(j,Z,X)=>Lo.value.shouldShowArrayField(j,Z,X),Fy=(j,Z,X,te,le)=>Lo.value.shouldShowArrayItemField(j,Z,X,te,le),ky=j=>Lo.value.getInputType(j),Oy=(j,Z,X)=>Lo.value.isCheckboxChecked(j,Z,X),Ly=(j,Z)=>{const X=E.value;if(X){if(X[j]=Z,X._isZForItem){const te=X._parentComponentId,le=X._arrayName,ce=X._arrayIndex;y.debug(`🔄 z-for配列アイテムリアルタイム更新: ${te}.${le}[${ce}].${j} = ${Z}`);const de=(Q,ue)=>{for(const ye of Q){if(ye.id===ue)return ye;if(ye.nested_parts&&Array.isArray(ye.nested_parts)){const je=de(ye.nested_parts,ue);if(je)return je}for(const[je,De]of Object.entries(ye))if(Array.isArray(De)&&je!=="nested_parts"){for(const Ie of De)if(Ie&&typeof Ie=="object"){for(const[Ue,st]of Object.entries(Ie))if(Array.isArray(st)){const at=de(st,ue);if(at)return at}}}}return null},ie=de(z.value,te);if(ie&&Array.isArray(ie[le])){const Q=ie[le];ce>=0&&ce<Q.length&&(Q[ce][j]=Z,y.debug(`✅ z-for配列アイテム更新完了: ${te}.${le}[${ce}].${j}`))}}n("update:page",z.value)}};tt(()=>r.commonImages,j=>{Array.isArray(j)&&(Be.value=JSON.parse(JSON.stringify(j)))},{immediate:!0}),tt(()=>r.individualImages,j=>{Array.isArray(j)&&(Ke.value=JSON.parse(JSON.stringify(j)))},{immediate:!0});let za=null;tt(()=>z.value,()=>{za&&St(()=>{za()})},{deep:!0});const Ry=(j,Z,X)=>{v.value=j,_.value=Z,u.value=X,A.value=!0},Ac=()=>{A.value=!1,v.value=null,_.value="",u.value=""},Hy=(j,Z)=>{if(v.value&&_.value){let X=j,te=null;j.startsWith("data:")?(te=[...Be.value,...Ke.value].find(de=>i(de)===j),te&&(X=te.url)):te=[...Be.value,...Ke.value].find(de=>de.url===j),te&&!j.startsWith("data:")&&te.fileData?.base64&&te.fileData.base64.trim()!==""&&m(te.id),v.value[_.value]=X;const le=_.value.replace(/url$/i,"alt").replace(/image$/i,"alt");le!==_.value&&v.value[le]!==void 0&&(v.value[le]=Z),n("update:page",z.value),St(()=>{Is(z),T.value&&Is(T)}),y.debug("🖼️ 画像選択完了:",X)}Ac()},Cc=j=>{if(!c.value||!M.value)return;const Z=j.target,X=document.querySelector(`.${s.value}`);!X||!X.contains(Z)||Z.closest(".zero-code-rich-text-toolbar")||Z===c.value||c.value.contains(Z)||(y.debug("🔧 編集外エリアクリック、自動保存してツールバー非表示"),N(!0))};let Aa=null,ds=null;return Uo(async()=>{y.debug("🔧 ZeroCode初期化開始"),document.addEventListener("click",Cc),y.debug("🔧 グローバルクリックリスナー追加完了");const j=()=>{y.debug("🖼️ 浮遊編集ボタン追加処理開始");const le=document.querySelector(`.${s.value}`);if(!le)return;const ce=le.querySelectorAll("img");y.debug("🖼️ 検出された画像数:",ce.length),ce.forEach(de=>{const ie=de;if(ie.hasAttribute("data-edit-button-id")||!ie.classList.contains("zero-code-editable-image"))return;const Q=z.value?.[0];if(Q)try{const ue=ie.getBoundingClientRect();y.debug("🔍 画像位置情報:",{src:ie.src.substring(ie.src.lastIndexOf("/")+1),rect:{top:ue.top,left:ue.left,right:ue.right,bottom:ue.bottom,width:ue.width,height:ue.height},scrollY:window.scrollY,scrollX:window.scrollX});const ye=document.createElement("button");ye.innerHTML="✏️",ye.className="zero-code-image-floating-button";const je=ue.top+8,De=ue.right-32;y.debug("🔍 ボタン計算位置:",{buttonTop:je,buttonLeft:De}),ye.style.cssText=`
              position: fixed !important;
              top: ${je}px !important;
              left: ${De}px !important;
              width: 28px !important;
              height: 28px !important;
              background: #3b82f6 !important;
              color: #ffffff !important;
              border: 2px solid #ffffff !important;
              border-radius: 50% !important;
              font-size: 12px !important;
              cursor: pointer !important;
              box-shadow: 0 3px 12px rgba(59, 130, 246, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2) !important;
              z-index: 1000 !important;
              opacity: 0 !important;
              font-family: inherit !important;
              display: flex !important;
              align-items: center !important;
              justify-content: center !important;
              pointer-events: auto !important;
            `,ie.setAttribute("data-edit-button-id",`edit-btn-${Date.now()}`),ye.setAttribute("data-target-image",ie.getAttribute("data-edit-button-id"));const Ie=()=>{ye.style.opacity="1"},Ue=()=>{ye.style.opacity="0"};ie.addEventListener("mouseenter",Ie),ie.addEventListener("mouseleave",Ue),ye.addEventListener("mouseenter",Ie),ye.addEventListener("mouseleave",Ue);const st=()=>{if(document.body.contains(ie)){const at=ie.getBoundingClientRect(),bt=at.top+8,it=at.right-32;ye.style.top=`${bt}px`,ye.style.left=`${it}px`}else ye.remove()};window.addEventListener("scroll",st),window.addEventListener("resize",st),ye.addEventListener("click",at=>{if(at.preventDefault(),at.stopPropagation(),y.debug("🖼️ 浮遊編集ボタンクリック"),Q){const bt=Object.keys(Q).filter(it=>it.toLowerCase().includes("url")||it.toLowerCase().includes("image")||it.toLowerCase().includes("icon"));if(y.debug("🔍 コンポーネントデータ:",Q),y.debug("🔍 画像フィールド一覧:",bt),y.debug("🔍 各フィールドの値:",bt.reduce((it,Ct)=>(it[Ct]=Q[Ct],it),{})),bt.length>0){let it=bt[0];const Ct=ie.src;y.debug("🔍 クリックされた画像のsrc:",Ct);for(const Wt of bt){const Mt=Q[Wt];if(y.debug(`🔍 フィールド ${Wt} の値をチェック:`,Mt),Mt&&typeof Mt=="string"){const en=[...Be.value||[],...Ke.value||[]];let Ca=null;if(en.length>0&&(Ca=en.find(so=>!!(so.id===Mt||so.url===Mt||so.name===Mt||Mt.endsWith("/"+so.name)||so.url.endsWith(Mt)||Mt.split("/").pop()===so.name))),Ca)try{const so=i(Ca);if(y.debug(`🔍 ${Wt}フィールドの解決されたsrc:`,so),so===Ct){y.debug(`✅ 一致発見! フィールド: ${Wt}`),it=Wt;break}}catch(so){y.debug("🔍 画像解決エラー:",so)}if(Mt===Ct){y.debug(`✅ 直接一致発見! フィールド: ${Wt}`),it=Wt;break}}}y.debug("🖼️ 特定されたフィールド:",it,"クリックされた画像:",Ct),Ry(Q,it,ie.src)}else y.debug("🔍 画像フィールドが見つかりません")}else y.debug("🔍 テスト用クリック - コンポーネントなし")}),document.body.appendChild(ye),y.debug("🖼️ 浮遊編集ボタン追加完了")}catch(ue){y.error("🚨 画像ボタン追加エラー:",ue)}})};za=j,setTimeout(()=>{y.debug("🔍 5秒後の画像ボタン追加実行"),j()},5e3),St(()=>{y.debug("🔍 nextTick後の浮遊ボタン追加実行"),j()});const Z=new MutationObserver(()=>{j()}),X=document.querySelector(`.${s.value}`);X&&Z.observe(X,{childList:!0,subtree:!0});const te=ds;ds=le=>{Z.disconnect(),te&&te(le)},y.debug("🔧 画像編集ボタン追加処理完了"),y.debug("🔧 イベントリスナー設定中..."),h.setupEventListeners(),y.debug("🔧 EventBusリスナー登録中..."),kt.on("reorderZForArrayItem",({componentId:le,arrayName:ce,fromIndex:de,toIndex:ie})=>{y.debug("🔄 z-for並び替えイベント受信:",{componentId:le,arrayName:ce,fromIndex:de,toIndex:ie});const Q=z.value.find(ye=>ye.id===le);if(!Q){y.warn("対象コンポーネントが見つかりません:",{componentId:le,arrayName:ce,availableIds:z.value.map(ye=>ye.id)});return}let ue=null;if(Q.arrayFields&&(ue=Q.arrayFields[ce]),!ue&&Q[ce]&&(ue=Q[ce]),!ue||!Array.isArray(ue)){y.warn("指定された配列フィールドが見つからないか、配列ではありません:",{componentId:le,arrayName:ce,foundDirectly:!!Q[ce],foundInArrayFields:!!(Q.arrayFields&&Q.arrayFields[ce]),itemType:typeof ue});return}if(de>=0&&ie>=0&&de<ue.length&&ie<ue.length){const[ye]=ue.splice(de,1);ue.splice(ie,0,ye),y.debug("✅ z-for並び替え完了:",{arrayName:ce,from:de,to:ie})}else y.warn("無効な並び替えインデックス:",{fromIndex:de,toIndex:ie,arrayLength:ue.length})}),y.debug("🔧 グローバル関数公開中..."),h.exposeGlobalFunctions((le,ce)=>{y.debug("🔧 Tiptap編集開始:",{componentId:le,paramName:ce}),M.value=!0,h.actions.startTiptapEdit(le,ce,[],0)}),typeof window<"u"&&(window.testAddImageButtons=()=>{y.debug("🔍 手動テスト：画像ボタン追加実行"),j()},window.testImageInfo=()=>{const le=document.querySelector(`.${s.value}`);if(!le)return;const ce=le.querySelectorAll("img");y.debug("🔍 手動テスト：全画像数",ce.length),ce.forEach((ie,Q)=>{const ue=ie.getBoundingClientRect();y.debug(`🔍 画像${Q}:`,{src:ie.src.substring(ie.src.lastIndexOf("/")+1),parent:ie.parentElement?.tagName,hasDataId:!!ie.closest("[data-component-id]"),visible:ue.width>0&&ue.height>0,rect:{top:ue.top,left:ue.left,width:ue.width,height:ue.height}})});const de=document.querySelectorAll(".zero-code-image-floating-button");y.debug("🔍 現在の浮遊ボタン数:",de.length)}),typeof window<"u"&&(window.getLatestComponentData=le=>{const ce=z.value.find(Q=>Q.id===le);if(ce)return ce;const de=/^(.+?)_([^_]+_[^_]+)_(\d+)$/,ie=le.match(de);if(ie){const[,Q,ue,ye]=ie,je=parseInt(ye,10),De=z.value.find(Ie=>Ie.id===Q);if(De&&Array.isArray(De[ue])&&De[ue][je]){const Ie=De[ue][je];return{...De,...Ie,type:De.type,module_name:De.module_name,id:le}}}return null}),window.toggleNestedCollapse=le=>{y.debug("🔧 ネストパーツ折りたたみ切り替え:",le),Lt.toggleCollapse(le),St(()=>{const ce=document.getElementById(`nested-content-${le}`),de=document.querySelector(`[onclick="window.toggleNestedCollapse('${le}')"]`);ce&&de&&(Lt.isCollapsed(le)?(ce.style.display="none",de.textContent="＋",de.setAttribute("title","展開")):(ce.style.display="block",de.textContent="－",de.setAttribute("title","折りたたみ")))})},window.isNestedCollapsed=le=>Lt.isCollapsed(le),window.reorderZForArrayItem=(le,ce,de,ie)=>{y.debug("🔄 reorderZForArrayItem グローバル関数呼び出し:",{componentId:le,arrayName:ce,fromIndex:de,toIndex:ie}),kt.emit("reorderZForArrayItem",{componentId:le,arrayName:ce,fromIndex:de,toIndex:ie})},Aa=se()||null,window.startRichTextEdit=async(le,ce,de,ie)=>{y.debug("🔧 リッチテキスト編集開始:",{componentId:le,paramName:ce,currentValue:de});const Q=ie||window.event?.target;if(c.value===Q){y.debug("🔧 既に編集中の要素、スキップ");return}if(Q){c.value&&(y.debug("🔧 前回の編集セッションを終了"),N(!1)),y.debug("🔧 事前設定開始"),c.value=Q,d.value=Q.innerHTML,f.value=le,C.value=ce,await St(),Q.contentEditable="true",y.debug("🔧 contentEditable設定完了:",Q.contentEditable),Q.style.userSelect="text",Q.style.webkitUserSelect="text",y.debug("🔧 user-select設定完了:",Q.style.userSelect),Q.classList.add("editing"),y.debug("🔧 editingクラス追加完了"),y.debug("🔧 編集モード設定完了");const ue=Ie=>{const Ue=Ie.relatedTarget;if(Ue&&Ue.closest(".zero-code-rich-text-toolbar")){y.debug("🔧 ツールバーへのフォーカス移動、編集継続");return}y.debug("🔧 フォーカス喪失、自動保存とツールバー非表示"),setTimeout(()=>{c.value===Q&&N(!0)},150)};Q.addEventListener("blur",ue),y.debug("🔧 イベントリスナー追加完了"),Q._cleanup=()=>{Q.removeEventListener("blur",ue),y.debug("🔧 イベントリスナークリーンアップ完了")},y.debug("🔧 ツールバー位置計算開始");const ye=Q.getBoundingClientRect(),je=window.pageYOffset||document.documentElement.scrollTop,De=window.pageXOffset||document.documentElement.scrollLeft;p.value={top:ye.top+je-80,left:ye.left+De},y.debug("🔧 ツールバー位置設定完了:",p.value),y.debug("🔧 ツールバー表示開始"),M.value=!0,y.debug("🔧 リッチテキスト編集開始完了（ツールバー付き）"),await St(),setTimeout(()=>{if(Q&&c.value===Q){Q.focus();const Ie=document.createRange(),Ue=window.getSelection();if(Ue&&Q.childNodes.length>0){const st=Q.childNodes[Q.childNodes.length-1];st.nodeType===Node.TEXT_NODE?Ie.setStart(st,st.textContent?.length||0):Ie.setStartAfter(st),Ie.collapse(!0),Ue.removeAllRanges(),Ue.addRange(Ie),y.debug("🔧 カーソルを末尾に移動完了")}else Ue&&(Ie.selectNodeContents(Q),Ie.collapse(!1),Ue.removeAllRanges(),Ue.addRange(Ie),y.debug("🔧 空要素の末尾にカーソル設定完了"));y.debug("🔧 遅延フォーカス完了、テキスト選択準備完了（末尾から開始）")}},10)}},y.debug("localParts.value:",T.value),y.debug("props.parts:",r.parts),y.debug("🔧 グローバル関数確認:"),y.debug("  openNestedPartSelector:",typeof window.openNestedPartSelector),y.debug("  openNestedEditor:",typeof window.openNestedEditor),y.debug("✅ ZeroCode初期化完了")}),t({parts:we(()=>T.value&&T.value.length>0?T.value:r.parts||[]),page:we(()=>z.value||[])}),Ir(()=>{y.debug("🔧 ZeroCode破棄処理開始"),document.removeEventListener("click",Cc),ds&&document.removeEventListener("click",ds);const j=document.querySelector(`.${s.value}`);(j?j.querySelectorAll(".zero-code-image-floating-button"):[]).forEach(X=>X.remove()),Aa&&Aa(),kt.off("reorderZForArrayItem"),y.debug("🔧 ZeroCode破棄処理完了")}),(j,Z)=>(L(),ft(Kb,null,{default:Cn(()=>[w("div",{class:et(`zero-code editor-container ${s.value}`)},[Xe(kb,{"active-tab":fe(J)||"editor","onUpdate:activeTab":ee},null,8,["active-tab"]),Xe(ey,{show:M.value,position:p.value,actions:$.actions,"editing-state":$.editingState,"is-editing":M.value,onExecuteCommand:$.executeCommand,onSave:Z[0]||(Z[0]=X=>$.stopEdit(!0)),onCancel:Z[1]||(Z[1]=X=>$.stopEdit(!1))},null,8,["show","position","actions","editing-state","is-editing","onExecuteCommand"]),w("div",Cy,[fe(J)==="editor"?(L(),ft(ag,{key:0,"data-tab":fe(k),"editable-page-data":fe(z),"local-parts":fe(T),"local-common-parts":fe(h).state.localCommonParts.value,"local-individual-parts":fe(h).state.localIndividualParts.value,parts:r.parts||[],"common-images":Be.value,"individual-images":Ke.value,"show-part-selector":fe(G),"show-nested-part-selector":fe(he),"show-editor":fe(zt),"selected-component":fe(E),"render-component-with-nested":S,"get-field-info":xy,"should-show-basic-field":My,"should-show-array-field":Ny,"should-show-array-item-field":Fy,"get-input-type":ky,"is-checkbox-checked":Oy,"parts-data":fe(T)&&fe(T).length>0?fe(T):r.parts||[],"is-text-editing":I.value,"onUpdate:dataTab":Z[2]||(Z[2]=X=>k.value=X),onAddPart:me,onEditPart:D,onDeletePart:O,onReorderParts:R,onClosePartSelector:ze,onSelectPart:cs,onCloseNestedPartSelector:Te,onSelectNestedPart:Dy,onCloseEditor:x,onUpdateEditorValue:Ly},null,8,["data-tab","editable-page-data","local-parts","local-common-parts","local-individual-parts","parts","common-images","individual-images","show-part-selector","show-nested-part-selector","show-editor","selected-component","parts-data","is-text-editing"])):ge("",!0),fe(J)==="parts"?(L(),ft(mh,{key:1,"local-parts":fe(T),"local-common-parts":fe(h).state.localCommonParts.value,"local-individual-parts":fe(h).state.localIndividualParts.value,"show-part-registration":ae.value,"existing-part-types":Ot.value,"editing-part":pt.value,"render-part-preview":V,onUpdateParts:F,onShowRegistration:Ve,onEditPart:B,onDeletePart:U,onCloseRegistration:Le,onSavePart:K},null,8,["local-parts","local-common-parts","local-individual-parts","show-part-registration","existing-part-types","editing-part"])):ge("",!0),fe(J)==="preview"?(L(),ft(Xh,{key:2,"editable-page-data":fe(z),"local-parts":fe(T),parts:r.parts||[],"common-images":Be.value,"individual-images":Ke.value},null,8,["editable-page-data","local-parts","parts","common-images","individual-images"])):ge("",!0),fe(J)==="images"?(L(),ft($b,{key:3,"common-images":Be.value,"individual-images":Ke.value,onUpdateCommonImages:Zt,onUpdateIndividualImages:Oo,onSendCommonImagesData:Qr,onSendIndividualImagesData:At},null,8,["common-images","individual-images"])):ge("",!0)]),w("div",Ey,[w("button",{class:"zero-code-send-btn zero-code-page-btn",onClick:Z[3]||(Z[3]=X=>pe("page"))},"Pageデータを表示"),w("button",{class:"zero-code-send-btn zero-code-common-parts-btn",onClick:Z[4]||(Z[4]=X=>pe("commonParts"))},"共通Partsデータを表示"),w("button",{class:"zero-code-send-btn zero-code-individual-parts-btn",onClick:Z[5]||(Z[5]=X=>pe("individualParts"))},"個別Partsデータを表示"),w("button",{class:"zero-code-send-btn zero-code-common-images-btn",onClick:Z[6]||(Z[6]=X=>pe("commonImages"))}," 共通画像データを表示 "),w("button",{class:"zero-code-send-btn zero-code-individual-images-btn",onClick:Z[7]||(Z[7]=X=>pe("individualImages"))}," 個別画像データを表示 "),w("button",{class:"zero-code-send-btn zero-code-reset-btn",onClick:ut},"リセット")]),q.value?(L(),H("div",Py,[w("div",Sy,[w("h4",null,oe(W.value),1),w("button",{class:"zero-code-close-button",onClick:Se},"✕")]),w("div",Iy,[w("pre",Ty,oe(Oe.value),1)]),w("div",{class:"zero-code-data-display-footer"},[w("button",{class:"zero-code-btn zero-code-btn-secondary",onClick:Ne},"クリップボードにコピー"),w("button",{class:"zero-code-btn zero-code-btn-primary",onClick:Ge},"このデータを送信")])])):ge("",!0),Xe(Ay,{visible:A.value,"common-images":Be.value,"individual-images":Ke.value,"current-value":u.value,onClose:Ac,onSelect:Hy},null,8,["visible","common-images","individual-images","current-value"])],2)]),_:1}))}}),{shadowRoot:!1});customElements.define("zero-code",wa),Rt.ZeroCode=wa,Rt.default=wa,Object.defineProperties(Rt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=vue-cms-editor.optimized.umd.js.map
