<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Zero Code ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ - APIã‚µãƒ³ãƒ—ãƒ«</title>
  <link rel="stylesheet" href="./zero-code.css">
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/common.css">
  <style>
    .example-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .example-header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 2px solid #e9ecef;
    }

    .example-header h1 {
      font-size: 2rem;
      color: #333;
      margin-bottom: 15px;
    }

    .example-layout {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      margin-bottom: 40px;
    }

    .editor-section {
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 10px;
      padding: 20px;
      min-height: 500px;
    }

    .control-section {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .control-section h3 {
      margin-bottom: 20px;
      color: #495057;
      font-size: 1.2rem;
    }

    .control-group {
      margin-bottom: 25px;
      padding-bottom: 25px;
      border-bottom: 1px solid #dee2e6;
    }

    .control-group:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .control-group h4 {
      margin-bottom: 15px;
      color: #666;
      font-size: 1rem;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 10px 15px;
      margin-bottom: 10px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #0056b3;
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-success {
      background: #28a745;
    }

    .btn-success:hover {
      background: #218838;
    }

    .btn-danger {
      background: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn-warning {
      background: #ffc107;
      color: #212529;
    }

    .btn-warning:hover {
      background: #e0a800;
    }

    .btn-info {
      background: #17a2b8;
    }

    .btn-info:hover {
      background: #138496;
    }

    .console-output {
      background: #212529;
      color: #28a745;
      padding: 15px;
      border-radius: 5px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 12px;
      min-height: 150px;
      max-height: 300px;
      overflow-y: auto;
      margin-top: 20px;
    }

    .console-output .log-entry {
      margin-bottom: 5px;
      padding: 3px 0;
      border-bottom: 1px solid #343a40;
    }

    .console-output .log-time {
      color: #6c757d;
      margin-right: 10px;
    }

    .console-output .log-type {
      color: #ffc107;
      margin-right: 10px;
      font-weight: bold;
    }

    .console-output .log-message {
      color: #28a745;
    }

    .console-output .log-error {
      color: #dc3545;
    }

    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #28a745;
      margin-right: 10px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
      }
    }

    .data-preview {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      padding: 10px;
      margin-top: 10px;
      font-family: monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
    }

    .info-box {
      background: #d1ecf1;
      border: 1px solid #17a2b8;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 20px;
    }

    .info-box strong {
      color: #0c5460;
    }

    @media (max-width: 768px) {
      .example-layout {
        grid-template-columns: 1fr;
      }

      .control-section {
        position: static;
      }
    }
  </style>
</head>
<body>
  <div class="example-container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="example-header">
      <h1>ğŸ”¬ Zero Code ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ APIã‚µãƒ³ãƒ—ãƒ«</h1>
      <p>å„ç¨®APIã®å‹•ä½œã‚’ç¢ºèªã§ãã‚‹æŠ€è¡“ãƒ‡ãƒ¢ã§ã™ã€‚å³å´ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã§æ“ä½œã—ã¦ãã ã•ã„ã€‚</p>
    </div>

    <div class="info-box">
      <strong>ğŸ’¡ ä½¿ã„æ–¹:</strong> å³å´ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€å„APIã®å‹•ä½œã‚’ç¢ºèªã§ãã¾ã™ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
    <div class="example-layout">
      <!-- ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="editor-section">
        <h2 style="margin-bottom: 20px;">ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ <span class="status-indicator"></span></h2>
        <zero-code id="api-demo-editor"></zero-code>
      </div>

      <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="control-section">
        <h3>ğŸ® ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«</h3>

        <!-- ãƒ‡ãƒ¼ã‚¿æ“ä½œ -->
        <div class="control-group">
          <h4>ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ“ä½œ</h4>
          <button class="btn" onclick="loadSampleData()">ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿</button>
          <button class="btn btn-warning" onclick="loadEmptyData()">ç©ºãƒ‡ãƒ¼ã‚¿ã§åˆæœŸåŒ–</button>
          <button class="btn btn-info" onclick="getCurrentData()">ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿å–å¾—</button>
          <button class="btn btn-danger" onclick="clearAllData()">å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
        </div>

        <!-- ãƒ‘ãƒ¼ãƒ„æ“ä½œ -->
        <div class="control-group">
          <h4>ğŸ§© ãƒ‘ãƒ¼ãƒ„æ“ä½œ</h4>
          <button class="btn" onclick="addSamplePart()">ã‚µãƒ³ãƒ—ãƒ«ãƒ‘ãƒ¼ãƒ„è¿½åŠ </button>
          <button class="btn btn-info" onclick="listAllParts()">ãƒ‘ãƒ¼ãƒ„ä¸€è¦§è¡¨ç¤º</button>
        </div>

        <!-- ç”»åƒæ“ä½œ -->
        <div class="control-group">
          <h4>ğŸ–¼ï¸ ç”»åƒæ“ä½œ</h4>
          <button class="btn" onclick="addSampleImage()">ã‚µãƒ³ãƒ—ãƒ«ç”»åƒè¿½åŠ </button>
          <button class="btn btn-info" onclick="listAllImages()">ç”»åƒä¸€è¦§è¡¨ç¤º</button>
        </div>

        <!-- ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ -->
        <div class="control-group">
          <h4>âš¡ ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</h4>
          <button class="btn btn-success" onclick="triggerSaveEvent()">ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«</button>
          <button class="btn" onclick="listenToEvents()">ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼é–‹å§‹</button>
          <button class="btn btn-warning" onclick="stopListening()">ãƒªã‚¹ãƒŠãƒ¼åœæ­¢</button>
        </div>

        <!-- ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
        <div class="data-preview" id="data-preview">
          ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢
        </div>

        <!-- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ› -->
        <div class="console-output" id="console-output">
          <div class="log-entry">
            <span class="log-time">00:00:00</span>
            <span class="log-type">[INFO]</span>
            <span class="log-message">ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ -->
  <script src="./vue-cms-editor.optimized.umd.js"></script>

  <!-- APIæ“ä½œã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script>
    // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼è¦ç´ å–å¾—
    const editor = document.getElementById('api-demo-editor');
    const consoleOutput = document.getElementById('console-output');
    const dataPreview = document.getElementById('data-preview');

    // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°é–¢æ•°
    function logToConsole(message, type = 'INFO') {
      const now = new Date();
      const time = now.toTimeString().split(' ')[0];
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      
      const messageClass = type === 'ERROR' ? 'log-error' : 'log-message';
      
      entry.innerHTML = `
        <span class="log-time">${time}</span>
        <span class="log-type">[${type}]</span>
        <span class="${messageClass}">${message}</span>
      `;
      
      consoleOutput.appendChild(entry);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }

    // åˆæœŸåŒ–
    window.addEventListener('DOMContentLoaded', () => {
      logToConsole('ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼åˆæœŸåŒ–å®Œäº†', 'SUCCESS');
      
      // åˆæœŸãƒ‡ãƒ¼ã‚¿è¨­å®š
      editor.commonImages = [];
      editor.individualImages = [];
      editor.parts = [];
      editor.page = [];
    });

    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    function loadSampleData() {
      const sampleData = {
        images: [
          {
            id: "sample_1",
            name: "ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ1",
            url: "./img/placeholder.jpg",
            alt: "ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼"
          }
        ],
        parts: [
          {
            type: 'title',
            description: 'ã‚¿ã‚¤ãƒˆãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ',
            module: [
              {
                title: 'sample_title',
                category: 'common',
                description: 'ã‚µãƒ³ãƒ—ãƒ«ã‚¿ã‚¤ãƒˆãƒ«',
                tags: ['title', 'sample'],
                body: '<h2>{$title:ã‚µãƒ³ãƒ—ãƒ«ã‚¿ã‚¤ãƒˆãƒ«}</h2>'
              }
            ]
          },
          {
            type: 'content',
            description: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ',
            module: [
              {
                title: 'sample_content',
                category: 'common',
                description: 'ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„',
                tags: ['content', 'sample'],
                body: '<div class="content"><p>{$text:ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ}</p></div>'
              }
            ]
          }
        ],
        pageData: [
          {
            id: "sample_instance_1",
            type: "title",
            module_name: "sample_title",
            parts: [],
            title: "APIã‚µãƒ³ãƒ—ãƒ«ãƒšãƒ¼ã‚¸"
          }
        ]
      };

      editor.commonImages = sampleData.images;
      editor.parts = sampleData.parts;
      editor.page = sampleData.pageData;

      logToConsole('ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ', 'SUCCESS');
      updateDataPreview(sampleData);
    }

    // ç©ºãƒ‡ãƒ¼ã‚¿ã§åˆæœŸåŒ–
    function loadEmptyData() {
      editor.commonImages = [];
      editor.individualImages = [];
      editor.parts = [{
        type: 'content',
        description: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„',
        module: []
      }];
      editor.page = [];

      logToConsole('ç©ºãƒ‡ãƒ¼ã‚¿ã§åˆæœŸåŒ–ã—ã¾ã—ãŸ', 'SUCCESS');
      updateDataPreview({images: [], parts: editor.parts, pageData: []});
    }

    // ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
    function getCurrentData() {
      const data = {
        commonImages: editor.commonImages || [],
        individualImages: editor.individualImages || [],
        parts: editor.parts || [],
        page: editor.page || []
      };

      logToConsole('ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸ', 'INFO');
      console.log('Current Data:', data);
      updateDataPreview(data);
    }

    // å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
    function clearAllData() {
      if (confirm('æœ¬å½“ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
        editor.commonImages = [];
        editor.individualImages = [];
        editor.parts = [];
        editor.page = [];

        logToConsole('å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', 'WARNING');
        updateDataPreview({});
      }
    }

    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‘ãƒ¼ãƒ„è¿½åŠ 
    function addSamplePart() {
      const newPart = {
        type: 'custom',
        description: 'å‹•çš„è¿½åŠ ãƒ‘ãƒ¼ãƒ„',
        module: [
          {
            title: `custom_part_${Date.now()}`,
            category: 'common',
            description: 'å‹•çš„ã«è¿½åŠ ã•ã‚ŒãŸãƒ‘ãƒ¼ãƒ„',
            tags: ['custom', 'dynamic'],
            body: '<div class="custom">($color:primary|secondary) {$content:å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„}</div>'
          }
        ]
      };

      const currentParts = editor.parts || [];
      currentParts.push(newPart);
      editor.parts = currentParts;

      logToConsole(`æ–°ã—ã„ãƒ‘ãƒ¼ãƒ„ã‚’è¿½åŠ ã—ã¾ã—ãŸ: ${newPart.module[0].title}`, 'SUCCESS');
    }

    // ãƒ‘ãƒ¼ãƒ„ä¸€è¦§è¡¨ç¤º
    function listAllParts() {
      const parts = editor.parts || [];
      const partsList = parts.map(section => 
        section.module.map(part => part.title).join(', ')
      ).filter(Boolean).join(', ');

      logToConsole(`ãƒ‘ãƒ¼ãƒ„ä¸€è¦§: ${partsList || 'ãªã—'}`, 'INFO');
      updateDataPreview({parts});
    }

    // ã‚µãƒ³ãƒ—ãƒ«ç”»åƒè¿½åŠ 
    function addSampleImage() {
      const newImage = {
        id: `image_${Date.now()}`,
        name: `å‹•çš„ç”»åƒ ${new Date().toLocaleTimeString()}`,
        url: "./img/placeholder.jpg",
        alt: "å‹•çš„ã«è¿½åŠ ã•ã‚ŒãŸç”»åƒ"
      };

      const currentImages = editor.commonImages || [];
      currentImages.push(newImage);
      editor.commonImages = currentImages;

      logToConsole(`æ–°ã—ã„ç”»åƒã‚’è¿½åŠ ã—ã¾ã—ãŸ: ${newImage.name}`, 'SUCCESS');
    }

    // ç”»åƒä¸€è¦§è¡¨ç¤º
    function listAllImages() {
      const images = editor.commonImages || [];
      const imagesList = images.map(img => img.name).join(', ');

      logToConsole(`ç”»åƒä¸€è¦§: ${imagesList || 'ãªã—'}`, 'INFO');
      updateDataPreview({images});
    }

    // ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
    function triggerSaveEvent() {
      // ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
      const event = new CustomEvent('save', {
        detail: {
          images: editor.commonImages,
          parts: editor.parts,
          page: editor.page
        }
      });
      editor.dispatchEvent(event);

      logToConsole('ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã—ã¾ã—ãŸ', 'SUCCESS');
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    let eventListeners = [];

    function listenToEvents() {
      // æ—¢å­˜ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’ã‚¯ãƒªã‚¢
      stopListening();

      // ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆ
      const saveListener = (e) => {
        logToConsole('ä¿å­˜ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ', 'EVENT');
        console.log('Save Event Data:', e.detail);
      };

      // å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
      const changeListener = (e) => {
        logToConsole('å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ', 'EVENT');
        console.log('Change Event Data:', e.detail);
      };

      editor.addEventListener('save', saveListener);
      editor.addEventListener('change', changeListener);

      eventListeners.push({type: 'save', listener: saveListener});
      eventListeners.push({type: 'change', listener: changeListener});

      logToConsole('ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’é–‹å§‹ã—ã¾ã—ãŸ', 'SUCCESS');
    }

    // ãƒªã‚¹ãƒŠãƒ¼åœæ­¢
    function stopListening() {
      eventListeners.forEach(({type, listener}) => {
        editor.removeEventListener(type, listener);
      });
      eventListeners = [];

      logToConsole('ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’åœæ­¢ã—ã¾ã—ãŸ', 'WARNING');
    }

    // ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
    function updateDataPreview(data) {
      dataPreview.textContent = JSON.stringify(data, null, 2);
    }

    // åˆæœŸãƒ­ã‚°
    setTimeout(() => {
      logToConsole('APIãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸã€‚å³å´ã®ãƒœã‚¿ãƒ³ã§æ“ä½œã—ã¦ãã ã•ã„ã€‚', 'INFO');
    }, 500);
  </script>
</body>
</html>